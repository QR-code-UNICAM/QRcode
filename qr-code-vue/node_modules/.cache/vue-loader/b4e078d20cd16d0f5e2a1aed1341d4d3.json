{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\task\\task-components\\UserTask.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\task\\task-components\\UserTask.vue","mtime":1704630437730},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJVc2VyVGFzayIsDQogIHByb3BzOiB7DQogICAgaWQ6IFN0cmluZywNCiAgICB0eXBlOiBTdHJpbmcNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZGVmYXVsdFRhc2tGb3JtOiB7DQogICAgICAgIGFzc2lnbmVlOiAiIiwNCiAgICAgICAgY2FuZGlkYXRlVXNlcnM6IFtdLA0KICAgICAgICBjYW5kaWRhdGVHcm91cHM6IFtdLA0KICAgICAgICBkdWVEYXRlOiAiIiwNCiAgICAgICAgZm9sbG93VXBEYXRlOiAiIiwNCiAgICAgICAgcHJpb3JpdHk6ICIiDQogICAgICB9LA0KICAgICAgdXNlclRhc2tGb3JtOiB7fSwNCiAgICAgIG1vY2tEYXRhOiBbMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTBdDQogICAgfTsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBpZDogew0KICAgICAgaW1tZWRpYXRlOiB0cnVlLA0KICAgICAgaGFuZGxlcigpIHsNCiAgICAgICAgdGhpcy5icG1uRWxlbWVudCA9IHdpbmRvdy5icG1uSW5zdGFuY2VzLmJwbW5FbGVtZW50Ow0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB0aGlzLnJlc2V0VGFza0Zvcm0oKSk7DQogICAgICB9DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcmVzZXRUYXNrRm9ybSgpIHsNCiAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmRlZmF1bHRUYXNrRm9ybSkgew0KICAgICAgICBsZXQgdmFsdWU7DQogICAgICAgIGlmIChrZXkgPT09ICJjYW5kaWRhdGVVc2VycyIgfHwga2V5ID09PSAiY2FuZGlkYXRlR3JvdXBzIikgew0KICAgICAgICAgIHZhbHVlID0gdGhpcy5icG1uRWxlbWVudD8uYnVzaW5lc3NPYmplY3Rba2V5XSA/IHRoaXMuYnBtbkVsZW1lbnQuYnVzaW5lc3NPYmplY3Rba2V5XS5zcGxpdCgiLCIpIDogW107DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdmFsdWUgPSB0aGlzLmJwbW5FbGVtZW50Py5idXNpbmVzc09iamVjdFtrZXldIHx8IHRoaXMuZGVmYXVsdFRhc2tGb3JtW2tleV07DQogICAgICAgIH0NCiAgICAgICAgdGhpcy4kc2V0KHRoaXMudXNlclRhc2tGb3JtLCBrZXksIHZhbHVlKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHVwZGF0ZUVsZW1lbnRUYXNrKGtleSkgew0KICAgICAgY29uc3QgdGFza0F0dHIgPSBPYmplY3QuY3JlYXRlKG51bGwpOw0KICAgICAgaWYgKGtleSA9PT0gImNhbmRpZGF0ZVVzZXJzIiB8fCBrZXkgPT09ICJjYW5kaWRhdGVHcm91cHMiKSB7DQogICAgICAgIHRhc2tBdHRyW2tleV0gPSB0aGlzLnVzZXJUYXNrRm9ybVtrZXldICYmIHRoaXMudXNlclRhc2tGb3JtW2tleV0ubGVuZ3RoID8gdGhpcy51c2VyVGFza0Zvcm1ba2V5XS5qb2luKCkgOiBudWxsOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGFza0F0dHJba2V5XSA9IHRoaXMudXNlclRhc2tGb3JtW2tleV0gfHwgbnVsbDsNCiAgICAgIH0NCiAgICAgIHdpbmRvdy5icG1uSW5zdGFuY2VzLm1vZGVsaW5nLnVwZGF0ZVByb3BlcnRpZXModGhpcy5icG1uRWxlbWVudCwgdGFza0F0dHIpOw0KICAgIH0NCiAgfSwNCiAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICB0aGlzLmJwbW5FbGVtZW50ID0gbnVsbDsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["UserTask.vue"],"names":[],"mappings":";AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserTask.vue","sourceRoot":"src/components/bpmnProcessDesigner/package/penal/task/task-components","sourcesContent":["<template>\r\n  <div style=\"margin-top: 16px\">\r\n<!--    <el-form-item label=\"处理用户\">-->\r\n<!--      <el-select v-model=\"userTaskForm.assignee\" @change=\"updateElementTask('assignee')\">-->\r\n<!--        <el-option v-for=\"ak in mockData\" :key=\"'ass-' + ak\" :label=\"`用户${ak}`\" :value=\"`user${ak}`\" />-->\r\n<!--      </el-select>-->\r\n<!--    </el-form-item>-->\r\n<!--    <el-form-item label=\"候选用户\">-->\r\n<!--      <el-select v-model=\"userTaskForm.candidateUsers\" multiple collapse-tags @change=\"updateElementTask('candidateUsers')\">-->\r\n<!--        <el-option v-for=\"uk in mockData\" :key=\"'user-' + uk\" :label=\"`用户${uk}`\" :value=\"`user${uk}`\" />-->\r\n<!--      </el-select>-->\r\n<!--    </el-form-item>-->\r\n<!--    <el-form-item label=\"候选分组\">-->\r\n<!--      <el-select v-model=\"userTaskForm.candidateGroups\" multiple collapse-tags @change=\"updateElementTask('candidateGroups')\">-->\r\n<!--        <el-option v-for=\"gk in mockData\" :key=\"'ass-' + gk\" :label=\"`分组${gk}`\" :value=\"`group${gk}`\" />-->\r\n<!--      </el-select>-->\r\n<!--    </el-form-item>-->\r\n    <el-form-item label=\"到期时间\">\r\n      <el-input v-model=\"userTaskForm.dueDate\" clearable @change=\"updateElementTask('dueDate')\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"跟踪时间\">\r\n      <el-input v-model=\"userTaskForm.followUpDate\" clearable @change=\"updateElementTask('followUpDate')\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"优先级\">\r\n      <el-input v-model=\"userTaskForm.priority\" clearable @change=\"updateElementTask('priority')\" />\r\n    </el-form-item>\r\n    友情提示：任务的分配规则，使用\r\n    <router-link target=\"_blank\" :to=\"{path:'/bpm/manager/model'}\"><el-link type=\"danger\">流程模型</el-link> </router-link>\r\n    下的【分配规则】替代，提供指定角色、部门负责人、部门成员、岗位、工作组、自定义脚本等 7 种维护的任务分配维度，更加灵活！\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"UserTask\",\r\n  props: {\r\n    id: String,\r\n    type: String\r\n  },\r\n  data() {\r\n    return {\r\n      defaultTaskForm: {\r\n        assignee: \"\",\r\n        candidateUsers: [],\r\n        candidateGroups: [],\r\n        dueDate: \"\",\r\n        followUpDate: \"\",\r\n        priority: \"\"\r\n      },\r\n      userTaskForm: {},\r\n      mockData: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n    };\r\n  },\r\n  watch: {\r\n    id: {\r\n      immediate: true,\r\n      handler() {\r\n        this.bpmnElement = window.bpmnInstances.bpmnElement;\r\n        this.$nextTick(() => this.resetTaskForm());\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    resetTaskForm() {\r\n      for (let key in this.defaultTaskForm) {\r\n        let value;\r\n        if (key === \"candidateUsers\" || key === \"candidateGroups\") {\r\n          value = this.bpmnElement?.businessObject[key] ? this.bpmnElement.businessObject[key].split(\",\") : [];\r\n        } else {\r\n          value = this.bpmnElement?.businessObject[key] || this.defaultTaskForm[key];\r\n        }\r\n        this.$set(this.userTaskForm, key, value);\r\n      }\r\n    },\r\n    updateElementTask(key) {\r\n      const taskAttr = Object.create(null);\r\n      if (key === \"candidateUsers\" || key === \"candidateGroups\") {\r\n        taskAttr[key] = this.userTaskForm[key] && this.userTaskForm[key].length ? this.userTaskForm[key].join() : null;\r\n      } else {\r\n        taskAttr[key] = this.userTaskForm[key] || null;\r\n      }\r\n      window.bpmnInstances.modeling.updateProperties(this.bpmnElement, taskAttr);\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.bpmnElement = null;\r\n  }\r\n};\r\n</script>\r\n"]}]}