{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\parser\\Parser.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\parser\\Parser.vue","mtime":1704630437758},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBkZWVwQ2xvbmUgfSBmcm9tICdAL3V0aWxzL2luZGV4Jw0KaW1wb3J0IHJlbmRlciBmcm9tICdAL2NvbXBvbmVudHMvcmVuZGVyL3JlbmRlci5qcycNCmltcG9ydCB7Z2V0QWNjZXNzVG9rZW59IGZyb20gIkAvdXRpbHMvYXV0aCI7DQoNCmNvbnN0IHJ1bGVUcmlnZ2VyID0gew0KICAnZWwtaW5wdXQnOiAnYmx1cicsDQogICdlbC1pbnB1dC1udW1iZXInOiAnYmx1cicsDQogICdlbC1zZWxlY3QnOiAnY2hhbmdlJywNCiAgJ2VsLXJhZGlvLWdyb3VwJzogJ2NoYW5nZScsDQogICdlbC1jaGVja2JveC1ncm91cCc6ICdjaGFuZ2UnLA0KICAnZWwtY2FzY2FkZXInOiAnY2hhbmdlJywNCiAgJ2VsLXRpbWUtcGlja2VyJzogJ2NoYW5nZScsDQogICdlbC1kYXRlLXBpY2tlcic6ICdjaGFuZ2UnLA0KICAnZWwtcmF0ZSc6ICdjaGFuZ2UnDQp9DQoNCmNvbnN0IGxheW91dHMgPSB7DQogIGNvbEZvcm1JdGVtKGgsIHNjaGVtZSkgew0KICAgIGNvbnN0IGNvbmZpZyA9IHNjaGVtZS5fX2NvbmZpZ19fDQogICAgY29uc3QgbGlzdGVuZXJzID0gYnVpbGRMaXN0ZW5lcnMuY2FsbCh0aGlzLCBzY2hlbWUpDQoNCiAgICBsZXQgbGFiZWxXaWR0aCA9IGNvbmZpZy5sYWJlbFdpZHRoID8gYCR7Y29uZmlnLmxhYmVsV2lkdGh9cHhgIDogbnVsbA0KICAgIGlmIChjb25maWcuc2hvd0xhYmVsID09PSBmYWxzZSkgbGFiZWxXaWR0aCA9ICcwJw0KICAgIHJldHVybiAoDQogICAgICA8ZWwtY29sIHNwYW49e2NvbmZpZy5zcGFufT4NCiAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbC13aWR0aD17bGFiZWxXaWR0aH0gcHJvcD17c2NoZW1lLl9fdk1vZGVsX199DQogICAgICAgICAgbGFiZWw9e2NvbmZpZy5zaG93TGFiZWwgPyBjb25maWcubGFiZWwgOiAnJ30+DQogICAgICAgICAgPHJlbmRlciBjb25mPXtzY2hlbWV9IG9uPXtsaXN0ZW5lcnN9IC8+DQogICAgICAgIDwvZWwtZm9ybS1pdGVtPg0KICAgICAgPC9lbC1jb2w+DQogICAgKQ0KICB9LA0KICByb3dGb3JtSXRlbShoLCBzY2hlbWUpIHsNCiAgICBsZXQgY2hpbGQgPSByZW5kZXJDaGlsZHJlbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpDQogICAgaWYgKHNjaGVtZS50eXBlID09PSAnZmxleCcpIHsNCiAgICAgIGNoaWxkID0gPGVsLXJvdyB0eXBlPXtzY2hlbWUudHlwZX0ganVzdGlmeT17c2NoZW1lLmp1c3RpZnl9IGFsaWduPXtzY2hlbWUuYWxpZ259Pg0KICAgICAgICAgICAgICB7Y2hpbGR9DQogICAgICAgICAgICA8L2VsLXJvdz4NCiAgICB9DQogICAgcmV0dXJuICgNCiAgICAgIDxlbC1jb2wgc3Bhbj17c2NoZW1lLnNwYW59Pg0KICAgICAgICA8ZWwtcm93IGd1dHRlcj17c2NoZW1lLmd1dHRlcn0+DQogICAgICAgICAge2NoaWxkfQ0KICAgICAgICA8L2VsLXJvdz4NCiAgICAgIDwvZWwtY29sPg0KICAgICkNCiAgfQ0KfQ0KDQpmdW5jdGlvbiByZW5kZXJGcm9tKGgpIHsNCiAgY29uc3QgeyBmb3JtQ29uZkNvcHkgfSA9IHRoaXMNCg0KICByZXR1cm4gKA0KICAgIDxlbC1yb3cgZ3V0dGVyPXtmb3JtQ29uZkNvcHkuZ3V0dGVyfT4NCiAgICAgIDxlbC1mb3JtDQogICAgICAgIHNpemU9e2Zvcm1Db25mQ29weS5zaXplfQ0KICAgICAgICBsYWJlbC1wb3NpdGlvbj17Zm9ybUNvbmZDb3B5LmxhYmVsUG9zaXRpb259DQogICAgICAgIGRpc2FibGVkPXtmb3JtQ29uZkNvcHkuZGlzYWJsZWR9DQogICAgICAgIGxhYmVsLXdpZHRoPXtgJHtmb3JtQ29uZkNvcHkubGFiZWxXaWR0aH1weGB9DQogICAgICAgIHJlZj17Zm9ybUNvbmZDb3B5LmZvcm1SZWZ9DQogICAgICAgIC8vIG1vZGVs5LiN6IO955u05o6l6LWL5YC8IGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9qc3gvaXNzdWVzLzQ5I2lzc3VlY29tbWVudC00NzIwMTM2NjQNCiAgICAgICAgcHJvcHM9e3sgbW9kZWw6IHRoaXNbZm9ybUNvbmZDb3B5LmZvcm1Nb2RlbF0gfX0NCiAgICAgICAgcnVsZXM9e3RoaXNbZm9ybUNvbmZDb3B5LmZvcm1SdWxlc119DQogICAgICA+DQogICAgICAgIHtyZW5kZXJGb3JtSXRlbS5jYWxsKHRoaXMsIGgsIGZvcm1Db25mQ29weS5maWVsZHMpfQ0KICAgICAgICB7Zm9ybUNvbmZDb3B5LmZvcm1CdG5zICYmIGZvcm1CdG5zLmNhbGwodGhpcywgaCl9DQogICAgICA8L2VsLWZvcm0+DQogICAgPC9lbC1yb3c+DQogICkNCn0NCg0KZnVuY3Rpb24gZm9ybUJ0bnMoaCkgew0KICByZXR1cm4gPGVsLWNvbD4NCiAgICA8ZWwtZm9ybS1pdGVtIHNpemU9ImxhcmdlIj4NCiAgICAgIDxlbC1idXR0b24gdHlwZT0icHJpbWFyeSIgb25DbGljaz17dGhpcy5zdWJtaXRGb3JtfT7mj5DkuqQ8L2VsLWJ1dHRvbj4NCiAgICAgIDxlbC1idXR0b24gb25DbGljaz17dGhpcy5yZXNldEZvcm19PumHjee9rjwvZWwtYnV0dG9uPg0KICAgIDwvZWwtZm9ybS1pdGVtPg0KICA8L2VsLWNvbD4NCn0NCg0KZnVuY3Rpb24gcmVuZGVyRm9ybUl0ZW0oaCwgZWxlbWVudExpc3QpIHsNCiAgY29uc3QgdGhhdCA9IHRoaXMNCiAgY29uc3QgZGF0YSA9IHRoaXNbdGhpcy5mb3JtQ29uZi5mb3JtTW9kZWxdDQogIC8vIGNvbnN0IGZvcm1SZWYgPSB0aGF0LiRyZWZzW3RoYXQuZm9ybUNvbmYuZm9ybVJlZl0gLy8g6L+Z6YeM55u05o6l5re75Yqg5pyJ6Zeu6aKY77yM5q2k5pe26L+Y5om+5LiN5Yiw6KGo5Y2VICRyZWZzDQogIHJldHVybiBlbGVtZW50TGlzdC5tYXAoc2NoZW1lID0+IHsNCiAgICBjb25zdCBjb25maWcgPSBzY2hlbWUuX19jb25maWdfXw0KICAgIGNvbnN0IGxheW91dCA9IGxheW91dHNbY29uZmlnLmxheW91dF0NCg0KICAgIC8vIGVkaXQgYnkg6IqL6YGT5rqQ56CB77yM6Kej5YazIGVsLXVwbG9hZCDkuIrkvKDnmoTpl67popgNCiAgICAvLyDlj4LogIMgaHR0cHM6Ly9naXRodWIuY29tL0pha0h1YW5nL2Zvcm0tZ2VuZXJhdG9yL2Jsb2IvbWFzdGVyL3NyYy9jb21wb25lbnRzL3BhcnNlci9leGFtcGxlL0luZGV4LnZ1ZSDlrp7njrANCiAgICBjb25zdCB2TW9kZWwgPSBzY2hlbWUuX192TW9kZWxfXw0KICAgIGNvbnN0IHZhbCA9IGRhdGFbdk1vZGVsXQ0KICAgIGlmIChzY2hlbWUuX19jb25maWdfXy50YWcgPT09ICdlbC11cGxvYWQnKSB7DQogICAgICAvLyDlm57mmL7lm77niYcNCiAgICAgIHNjaGVtZVsnZmlsZS1saXN0J10gPSAodmFsIHx8IFtdKS5tYXAodXJsID0+ICh7IG5hbWU6IHVybCwgdXJsIH0pKQ0KICAgICAgLy8g5LiK5Lyg5Zyw5Z2AICsg6K+35rGC5aS0DQogICAgICBzY2hlbWUuYWN0aW9uID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSArICIvYWRtaW4tYXBpL2luZnJhL2ZpbGUvdXBsb2FkIg0KICAgICAgc2NoZW1lLmhlYWRlcnMgPSB7IEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIGdldEFjY2Vzc1Rva2VuKCkgfQ0KICAgICAgLy8g5rOo5oSPIG9uLXN1Y2Nlc3Mg5LiN6IO957uR5a6a566t5aS05Ye95pWw77yB77yB77yBDQogICAgICBzY2hlbWVbJ29uLXN1Y2Nlc3MnXSA9IGZ1bmN0aW9uIChyZXNwb25zZSwgZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgIT09IDApIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgLy8g5re75Yqg5YiwIGRhdGEg5LitDQogICAgICAgIGNvbnN0IHByZXYgPSBkYXRhW3ZNb2RlbF0gfHwgW10NCiAgICAgICAgdGhpcy4kc2V0KGRhdGEsIHZNb2RlbCwgWw0KICAgICAgICAgIC4uLnByZXYsDQogICAgICAgICAgcmVzcG9uc2UuZGF0YQ0KICAgICAgICBdKQ0KICAgICAgICAvLyDlj5HotbfooajljZXmoKHpqowNCiAgICAgICAgdGhhdC4kcmVmc1t0aGF0LmZvcm1Db25mLmZvcm1SZWZdLnZhbGlkYXRlRmllbGQodk1vZGVsKQ0KICAgICAgfQ0KICAgICAgLy8g5rOo5oSPIG9uLXJlbW92ZSDkuI3og73nu5Hlrprnrq3lpLTlh73mlbDvvIHvvIHvvIENCiAgICAgIHNjaGVtZVsnb24tcmVtb3ZlJ10gPSBmdW5jdGlvbiAoZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgICAgLy8g56e76Zmk5LuOIGRhdGEg5LitDQogICAgICAgIGNvbnN0IHByZXYgPSBkYXRhW3ZNb2RlbF0gfHwgW10NCiAgICAgICAgY29uc3QgaW5kZXggPSBwcmV2LmluZGV4T2YoZmlsZS5yZXNwb25zZS5kYXRhKQ0KICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7DQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICAgICAgcHJldi5zcGxpY2UoaW5kZXgsIDEpIC8vIOebtOaOpeenu+mZpOWNs+WPr++8jOaXoOmcgOmHjeWkjSBzZXTvvIzlm6DkuLogYXJyYXkg5piv5byV55SoDQogICAgICAgIC8vIOWPkei1t+ihqOWNleagoemqjA0KICAgICAgICB0aGF0LiRyZWZzW3RoYXQuZm9ybUNvbmYuZm9ybVJlZl0udmFsaWRhdGVGaWVsZCh2TW9kZWwpDQogICAgICB9DQogICAgfQ0KDQogICAgaWYgKGxheW91dCkgew0KICAgICAgcmV0dXJuIGxheW91dC5jYWxsKHRoaXMsIGgsIHNjaGVtZSkNCiAgICB9DQogICAgdGhyb3cgbmV3IEVycm9yKGDmsqHmnInkuI4ke2NvbmZpZy5sYXlvdXR95Yy56YWN55qEbGF5b3V0YCkNCiAgfSkNCn0NCg0KZnVuY3Rpb24gcmVuZGVyQ2hpbGRyZW4oaCwgc2NoZW1lKSB7DQogIGNvbnN0IGNvbmZpZyA9IHNjaGVtZS5fX2NvbmZpZ19fDQogIGlmICghQXJyYXkuaXNBcnJheShjb25maWcuY2hpbGRyZW4pKSByZXR1cm4gbnVsbA0KICByZXR1cm4gcmVuZGVyRm9ybUl0ZW0uY2FsbCh0aGlzLCBoLCBjb25maWcuY2hpbGRyZW4pDQp9DQoNCmZ1bmN0aW9uIHNldFZhbHVlKGV2ZW50LCBjb25maWcsIHNjaGVtZSkgew0KICB0aGlzLiRzZXQoY29uZmlnLCAnZGVmYXVsdFZhbHVlJywgZXZlbnQpDQogIHRoaXMuJHNldCh0aGlzW3RoaXMuZm9ybUNvbmYuZm9ybU1vZGVsXSwgc2NoZW1lLl9fdk1vZGVsX18sIGV2ZW50KQ0KfQ0KDQpmdW5jdGlvbiBidWlsZExpc3RlbmVycyhzY2hlbWUpIHsNCiAgY29uc3QgY29uZmlnID0gc2NoZW1lLl9fY29uZmlnX18NCiAgY29uc3QgbWV0aG9kcyA9IHRoaXMuZm9ybUNvbmYuX19tZXRob2RzX18gfHwge30NCiAgY29uc3QgbGlzdGVuZXJzID0ge30NCg0KICAvLyDnu5lfX21ldGhvZHNfX+S4reeahOaWueazlee7keWumnRoaXPlkoxldmVudA0KICBPYmplY3Qua2V5cyhtZXRob2RzKS5mb3JFYWNoKGtleSA9PiB7DQogICAgbGlzdGVuZXJzW2tleV0gPSBldmVudCA9PiBtZXRob2RzW2tleV0uY2FsbCh0aGlzLCBldmVudCkNCiAgfSkNCiAgLy8g5ZON5bqUIHJlbmRlci5qcyDkuK3nmoQgdk1vZGVsICRlbWl0KCdpbnB1dCcsIHZhbCkNCiAgbGlzdGVuZXJzLmlucHV0ID0gZXZlbnQgPT4gc2V0VmFsdWUuY2FsbCh0aGlzLCBldmVudCwgY29uZmlnLCBzY2hlbWUpDQoNCiAgcmV0dXJuIGxpc3RlbmVycw0KfQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICByZW5kZXINCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBmb3JtQ29uZjogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgY29uc3QgZGF0YSA9IHsNCiAgICAgIGZvcm1Db25mQ29weTogZGVlcENsb25lKHRoaXMuZm9ybUNvbmYpLA0KICAgICAgW3RoaXMuZm9ybUNvbmYuZm9ybU1vZGVsXToge30sDQogICAgICBbdGhpcy5mb3JtQ29uZi5mb3JtUnVsZXNdOiB7fQ0KICAgIH0NCiAgICB0aGlzLmluaXRGb3JtRGF0YShkYXRhLmZvcm1Db25mQ29weS5maWVsZHMsIGRhdGFbdGhpcy5mb3JtQ29uZi5mb3JtTW9kZWxdKQ0KICAgIHRoaXMuYnVpbGRSdWxlcyhkYXRhLmZvcm1Db25mQ29weS5maWVsZHMsIGRhdGFbdGhpcy5mb3JtQ29uZi5mb3JtUnVsZXNdKQ0KICAgIHJldHVybiBkYXRhDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0Rm9ybURhdGEoY29tcG9uZW50TGlzdCwgZm9ybURhdGEpIHsNCiAgICAgIGNvbXBvbmVudExpc3QuZm9yRWFjaChjdXIgPT4gew0KICAgICAgICBjb25zdCBjb25maWcgPSBjdXIuX19jb25maWdfXw0KICAgICAgICBpZiAoY3VyLl9fdk1vZGVsX18pIGZvcm1EYXRhW2N1ci5fX3ZNb2RlbF9fXSA9IGNvbmZpZy5kZWZhdWx0VmFsdWUNCiAgICAgICAgaWYgKGNvbmZpZy5jaGlsZHJlbikgdGhpcy5pbml0Rm9ybURhdGEoY29uZmlnLmNoaWxkcmVuLCBmb3JtRGF0YSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBidWlsZFJ1bGVzKGNvbXBvbmVudExpc3QsIHJ1bGVzKSB7DQogICAgICBjb21wb25lbnRMaXN0LmZvckVhY2goY3VyID0+IHsNCiAgICAgICAgY29uc3QgY29uZmlnID0gY3VyLl9fY29uZmlnX18NCiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29uZmlnLnJlZ0xpc3QpKSB7DQogICAgICAgICAgaWYgKGNvbmZpZy5yZXF1aXJlZCkgew0KICAgICAgICAgICAgY29uc3QgcmVxdWlyZWQgPSB7IHJlcXVpcmVkOiBjb25maWcucmVxdWlyZWQsIG1lc3NhZ2U6IGN1ci5wbGFjZWhvbGRlciB9DQogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb25maWcuZGVmYXVsdFZhbHVlKSkgew0KICAgICAgICAgICAgICByZXF1aXJlZC50eXBlID0gJ2FycmF5Jw0KICAgICAgICAgICAgICByZXF1aXJlZC5tZXNzYWdlID0gYOivt+iHs+WwkemAieaLqeS4gOS4qiR7Y29uZmlnLmxhYmVsfWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJlcXVpcmVkLm1lc3NhZ2UgPT09IHVuZGVmaW5lZCAmJiAocmVxdWlyZWQubWVzc2FnZSA9IGAke2NvbmZpZy5sYWJlbH3kuI3og73kuLrnqbpgKQ0KICAgICAgICAgICAgY29uZmlnLnJlZ0xpc3QucHVzaChyZXF1aXJlZCkNCiAgICAgICAgICB9DQogICAgICAgICAgcnVsZXNbY3VyLl9fdk1vZGVsX19dID0gY29uZmlnLnJlZ0xpc3QubWFwKGl0ZW0gPT4gew0KICAgICAgICAgICAgaXRlbS5wYXR0ZXJuICYmIChpdGVtLnBhdHRlcm4gPSBldmFsKGl0ZW0ucGF0dGVybikpDQogICAgICAgICAgICBpdGVtLnRyaWdnZXIgPSBydWxlVHJpZ2dlciAmJiBydWxlVHJpZ2dlcltjb25maWcudGFnXQ0KICAgICAgICAgICAgcmV0dXJuIGl0ZW0NCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIGlmIChjb25maWcuY2hpbGRyZW4pIHRoaXMuYnVpbGRSdWxlcyhjb25maWcuY2hpbGRyZW4sIHJ1bGVzKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHJlc2V0Rm9ybSgpIHsNCiAgICAgIHRoaXMuZm9ybUNvbmZDb3B5ID0gZGVlcENsb25lKHRoaXMuZm9ybUNvbmYpDQogICAgICB0aGlzLiRyZWZzW3RoaXMuZm9ybUNvbmYuZm9ybVJlZl0ucmVzZXRGaWVsZHMoKQ0KICAgIH0sDQogICAgc3VibWl0Rm9ybSgpIHsNCiAgICAgIHRoaXMuJHJlZnNbdGhpcy5mb3JtQ29uZi5mb3JtUmVmXS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIGlmICghdmFsaWQpIHJldHVybiBmYWxzZQ0KICAgICAgICAvLyDop6blj5Egc3VibWl0IOS6i+S7tg0KICAgICAgICAvLyB1cGRhdGUgYnkg6IqL6YGT5rqQ56CBDQogICAgICAgIC8vIHRoaXMuJGVtaXQoJ3N1Ym1pdCcsIHRoaXNbdGhpcy5mb3JtQ29uZi5mb3JtTW9kZWxdKQ0KICAgICAgICB0aGlzLiRlbWl0KCdzdWJtaXQnLCB7DQogICAgICAgICAgY29uZjogdGhpcy5mb3JtQ29uZkNvcHksDQogICAgICAgICAgdmFsdWVzOiB0aGlzW3RoaXMuZm9ybUNvbmYuZm9ybU1vZGVsXQ0KICAgICAgICB9KQ0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgfSkNCiAgICB9DQogIH0sDQogIHJlbmRlcihoKSB7DQogICAgcmV0dXJuIHJlbmRlckZyb20uY2FsbCh0aGlzLCBoKQ0KICB9DQp9DQo="},{"version":3,"sources":["Parser.vue"],"names":[],"mappings":";AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Parser.vue","sourceRoot":"src/components/parser","sourcesContent":["<script>\r\nimport { deepClone } from '@/utils/index'\r\nimport render from '@/components/render/render.js'\r\nimport {getAccessToken} from \"@/utils/auth\";\r\n\r\nconst ruleTrigger = {\r\n  'el-input': 'blur',\r\n  'el-input-number': 'blur',\r\n  'el-select': 'change',\r\n  'el-radio-group': 'change',\r\n  'el-checkbox-group': 'change',\r\n  'el-cascader': 'change',\r\n  'el-time-picker': 'change',\r\n  'el-date-picker': 'change',\r\n  'el-rate': 'change'\r\n}\r\n\r\nconst layouts = {\r\n  colFormItem(h, scheme) {\r\n    const config = scheme.__config__\r\n    const listeners = buildListeners.call(this, scheme)\r\n\r\n    let labelWidth = config.labelWidth ? `${config.labelWidth}px` : null\r\n    if (config.showLabel === false) labelWidth = '0'\r\n    return (\r\n      <el-col span={config.span}>\r\n        <el-form-item label-width={labelWidth} prop={scheme.__vModel__}\r\n          label={config.showLabel ? config.label : ''}>\r\n          <render conf={scheme} on={listeners} />\r\n        </el-form-item>\r\n      </el-col>\r\n    )\r\n  },\r\n  rowFormItem(h, scheme) {\r\n    let child = renderChildren.apply(this, arguments)\r\n    if (scheme.type === 'flex') {\r\n      child = <el-row type={scheme.type} justify={scheme.justify} align={scheme.align}>\r\n              {child}\r\n            </el-row>\r\n    }\r\n    return (\r\n      <el-col span={scheme.span}>\r\n        <el-row gutter={scheme.gutter}>\r\n          {child}\r\n        </el-row>\r\n      </el-col>\r\n    )\r\n  }\r\n}\r\n\r\nfunction renderFrom(h) {\r\n  const { formConfCopy } = this\r\n\r\n  return (\r\n    <el-row gutter={formConfCopy.gutter}>\r\n      <el-form\r\n        size={formConfCopy.size}\r\n        label-position={formConfCopy.labelPosition}\r\n        disabled={formConfCopy.disabled}\r\n        label-width={`${formConfCopy.labelWidth}px`}\r\n        ref={formConfCopy.formRef}\r\n        // model不能直接赋值 https://github.com/vuejs/jsx/issues/49#issuecomment-472013664\r\n        props={{ model: this[formConfCopy.formModel] }}\r\n        rules={this[formConfCopy.formRules]}\r\n      >\r\n        {renderFormItem.call(this, h, formConfCopy.fields)}\r\n        {formConfCopy.formBtns && formBtns.call(this, h)}\r\n      </el-form>\r\n    </el-row>\r\n  )\r\n}\r\n\r\nfunction formBtns(h) {\r\n  return <el-col>\r\n    <el-form-item size=\"large\">\r\n      <el-button type=\"primary\" onClick={this.submitForm}>提交</el-button>\r\n      <el-button onClick={this.resetForm}>重置</el-button>\r\n    </el-form-item>\r\n  </el-col>\r\n}\r\n\r\nfunction renderFormItem(h, elementList) {\r\n  const that = this\r\n  const data = this[this.formConf.formModel]\r\n  // const formRef = that.$refs[that.formConf.formRef] // 这里直接添加有问题，此时还找不到表单 $refs\r\n  return elementList.map(scheme => {\r\n    const config = scheme.__config__\r\n    const layout = layouts[config.layout]\r\n\r\n    // edit by 芋道源码，解决 el-upload 上传的问题\r\n    // 参考 https://github.com/JakHuang/form-generator/blob/master/src/components/parser/example/Index.vue 实现\r\n    const vModel = scheme.__vModel__\r\n    const val = data[vModel]\r\n    if (scheme.__config__.tag === 'el-upload') {\r\n      // 回显图片\r\n      scheme['file-list'] = (val || []).map(url => ({ name: url, url }))\r\n      // 上传地址 + 请求头\r\n      scheme.action = process.env.VUE_APP_BASE_API + \"/admin-api/infra/file/upload\"\r\n      scheme.headers = { Authorization: \"Bearer \" + getAccessToken() }\r\n      // 注意 on-success 不能绑定箭头函数！！！\r\n      scheme['on-success'] = function (response, file, fileList) {\r\n        if (response.code !== 0) {\r\n          return;\r\n        }\r\n        // 添加到 data 中\r\n        const prev = data[vModel] || []\r\n        this.$set(data, vModel, [\r\n          ...prev,\r\n          response.data\r\n        ])\r\n        // 发起表单校验\r\n        that.$refs[that.formConf.formRef].validateField(vModel)\r\n      }\r\n      // 注意 on-remove 不能绑定箭头函数！！！\r\n      scheme['on-remove'] = function (file, fileList) {\r\n        // 移除从 data 中\r\n        const prev = data[vModel] || []\r\n        const index = prev.indexOf(file.response.data)\r\n        if (index === -1) {\r\n          return\r\n        }\r\n        prev.splice(index, 1) // 直接移除即可，无需重复 set，因为 array 是引用\r\n        // 发起表单校验\r\n        that.$refs[that.formConf.formRef].validateField(vModel)\r\n      }\r\n    }\r\n\r\n    if (layout) {\r\n      return layout.call(this, h, scheme)\r\n    }\r\n    throw new Error(`没有与${config.layout}匹配的layout`)\r\n  })\r\n}\r\n\r\nfunction renderChildren(h, scheme) {\r\n  const config = scheme.__config__\r\n  if (!Array.isArray(config.children)) return null\r\n  return renderFormItem.call(this, h, config.children)\r\n}\r\n\r\nfunction setValue(event, config, scheme) {\r\n  this.$set(config, 'defaultValue', event)\r\n  this.$set(this[this.formConf.formModel], scheme.__vModel__, event)\r\n}\r\n\r\nfunction buildListeners(scheme) {\r\n  const config = scheme.__config__\r\n  const methods = this.formConf.__methods__ || {}\r\n  const listeners = {}\r\n\r\n  // 给__methods__中的方法绑定this和event\r\n  Object.keys(methods).forEach(key => {\r\n    listeners[key] = event => methods[key].call(this, event)\r\n  })\r\n  // 响应 render.js 中的 vModel $emit('input', val)\r\n  listeners.input = event => setValue.call(this, event, config, scheme)\r\n\r\n  return listeners\r\n}\r\n\r\nexport default {\r\n  components: {\r\n    render\r\n  },\r\n  props: {\r\n    formConf: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    const data = {\r\n      formConfCopy: deepClone(this.formConf),\r\n      [this.formConf.formModel]: {},\r\n      [this.formConf.formRules]: {}\r\n    }\r\n    this.initFormData(data.formConfCopy.fields, data[this.formConf.formModel])\r\n    this.buildRules(data.formConfCopy.fields, data[this.formConf.formRules])\r\n    return data\r\n  },\r\n  methods: {\r\n    initFormData(componentList, formData) {\r\n      componentList.forEach(cur => {\r\n        const config = cur.__config__\r\n        if (cur.__vModel__) formData[cur.__vModel__] = config.defaultValue\r\n        if (config.children) this.initFormData(config.children, formData)\r\n      })\r\n    },\r\n    buildRules(componentList, rules) {\r\n      componentList.forEach(cur => {\r\n        const config = cur.__config__\r\n        if (Array.isArray(config.regList)) {\r\n          if (config.required) {\r\n            const required = { required: config.required, message: cur.placeholder }\r\n            if (Array.isArray(config.defaultValue)) {\r\n              required.type = 'array'\r\n              required.message = `请至少选择一个${config.label}`\r\n            }\r\n            required.message === undefined && (required.message = `${config.label}不能为空`)\r\n            config.regList.push(required)\r\n          }\r\n          rules[cur.__vModel__] = config.regList.map(item => {\r\n            item.pattern && (item.pattern = eval(item.pattern))\r\n            item.trigger = ruleTrigger && ruleTrigger[config.tag]\r\n            return item\r\n          })\r\n        }\r\n        if (config.children) this.buildRules(config.children, rules)\r\n      })\r\n    },\r\n    resetForm() {\r\n      this.formConfCopy = deepClone(this.formConf)\r\n      this.$refs[this.formConf.formRef].resetFields()\r\n    },\r\n    submitForm() {\r\n      this.$refs[this.formConf.formRef].validate(valid => {\r\n        if (!valid) return false\r\n        // 触发 submit 事件\r\n        // update by 芋道源码\r\n        // this.$emit('submit', this[this.formConf.formModel])\r\n        this.$emit('submit', {\r\n          conf: this.formConfCopy,\r\n          values: this[this.formConf.formModel]\r\n        })\r\n        return true\r\n      })\r\n    }\r\n  },\r\n  render(h) {\r\n    return renderFrom.call(this, h)\r\n  }\r\n}\r\n</script>\r\n"]}]}