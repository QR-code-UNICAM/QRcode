{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\mall\\promotion\\seckill\\config\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\mall\\promotion\\seckill\\config\\index.vue","mtime":1704630437958},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBjcmVhdGVTZWNraWxsVGltZSwgdXBkYXRlU2Vja2lsbFRpbWUsIGRlbGV0ZVNlY2tpbGxUaW1lLCBnZXRTZWNraWxsVGltZSwgZ2V0U2Vja2lsbFRpbWVQYWdlLCBleHBvcnRTZWNraWxsVGltZUV4Y2VsLCBnZXRTZWNraWxsVGltZUxpc3QgfSBmcm9tICJAL2FwaS9tYWxsL3Byb21vdGlvbi9zZWNraWxsVGltZSI7DQppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsNCmltcG9ydCB7IGRlZXBDbG9uZSB9IGZyb20gIkAvdXRpbHMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJQcm9tb3Rpb25TZWNraWxsVGltZSIsDQogIGNvbXBvbmVudHM6IHsNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g6YGu572p5bGCDQogICAgICBsb2FkaW5nOiB0cnVlLA0KICAgICAgLy8g5a+85Ye66YGu572p5bGCDQogICAgICBleHBvcnRMb2FkaW5nOiBmYWxzZSwNCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tg0KICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwNCiAgICAgIC8vIOaAu+adoeaVsA0KICAgICAgLy8gdG90YWw6IDAsDQogICAgICAvLyDnp5LmnYDml7bmrrXliJfooagNCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgLy8g5by55Ye65bGC5qCH6aKYDQogICAgICB0aXRsZTogIiIsDQogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYINCiAgICAgIG9wZW46IGZhbHNlLA0KICAgICAgLy8g6KGo5Y2V5Y+C5pWwDQogICAgICBmb3JtOiB7fSwNCiAgICAgIC8vIOihqOWNleagoemqjA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLnp5LmnYDml7bmrrXlkI3np7DkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICAgIHN0YXJ0QW5kRW5kVGltZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLnp5LmnYDml7bpl7TmrrXkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICB9DQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldExpc3QoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8qKiDmn6Xor6LliJfooaggKi8NCiAgICBnZXRMaXN0KCkgew0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgIC8vIOaJp+ihjOafpeivog0KICAgICAgZ2V0U2Vja2lsbFRpbWVMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKiog5Y+W5raI5oyJ6ZKuICovDQogICAgY2FuY2VsKCkgew0KICAgICAgdGhpcy5vcGVuID0gZmFsc2U7DQogICAgICB0aGlzLnJlc2V0KCk7DQogICAgfSwNCiAgICAvKiog6KGo5Y2V6YeN572uICovDQogICAgcmVzZXQoKSB7DQogICAgICB0aGlzLmZvcm0gPSB7DQogICAgICAgIGlkOiB1bmRlZmluZWQsDQogICAgICAgIG5hbWU6IHVuZGVmaW5lZCwNCiAgICAgICAgc3RhcnRBbmRFbmRUaW1lOiB1bmRlZmluZWQsDQogICAgICAgIHN0YXJ0VGltZTogdW5kZWZpbmVkLA0KICAgICAgICBlbmRUaW1lOiB1bmRlZmluZWQsDQogICAgICB9Ow0KICAgICAgdGhpcy5yZXNldEZvcm0oImZvcm0iKTsNCiAgICB9LA0KICAgIC8qKiDmkJzntKLmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVRdWVyeSgpIHsNCiAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgIH0sDQogICAgLyoqIOmHjee9ruaMiemSruaTjeS9nCAqLw0KICAgIHJlc2V0UXVlcnkoKSB7DQogICAgICB0aGlzLnJlc2V0Rm9ybSgicXVlcnlGb3JtIik7DQogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7DQogICAgfSwNCiAgICAvKirmn6XnnIvlvZPliY3np5LmnYDml7bmrrXnmoTnp5LmnYDmtLvliqggKi8NCiAgICBoYW5kbGVPcGVuU2Vja2lsbEFjdGl2aXR5KHJvdykgew0KICAgICAgcm91dGVyLnB1c2goeyBuYW1lOiAnU2Vja2lsbEFjdGl2aXR5JywgcGFyYW1zOiB7IHRpbWVJZDogcm93LmlkIH0gfSkNCiAgICB9LA0KICAgIC8qKiDmlrDlop7mjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVBZGQoKSB7DQogICAgICB0aGlzLnJlc2V0KCk7DQogICAgICB0aGlzLm9wZW4gPSB0cnVlOw0KICAgICAgdGhpcy50aXRsZSA9ICLmt7vliqDnp5LmnYDml7bmrrUiOw0KICAgIH0sDQogICAgLyoqIOS/ruaUueaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZVVwZGF0ZShyb3cpIHsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgIGNvbnN0IGlkID0gcm93LmlkOw0KICAgICAgZ2V0U2Vja2lsbFRpbWUoaWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICByZXNwb25zZS5kYXRhLnN0YXJ0QW5kRW5kVGltZSA9IFtyZXNwb25zZS5kYXRhLnN0YXJ0VGltZSwgcmVzcG9uc2UuZGF0YS5lbmRUaW1lXQ0KICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhOw0KICAgICAgICB0aGlzLm9wZW4gPSB0cnVlOw0KICAgICAgICB0aGlzLnRpdGxlID0gIuS/ruaUueenkuadgOaXtuautSI7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDmj5DkuqTmjInpkq4gKi8NCiAgICBzdWJtaXRGb3JtKCkgew0KICAgICAgdGhpcy4kcmVmc1siZm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgY29uc29sZS5sb2codmFsaWQsICLmmK/lkKbpgJrov4ciKTsNCiAgICAgICAgaWYgKCF2YWxpZCkgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICAvLyDlpITnkIbmlbDmja4NCiAgICAgICAgY29uc3QgZGF0YSA9IGRlZXBDbG9uZSh0aGlzLmZvcm0pOw0KICAgICAgICBkYXRhLnN0YXJ0VGltZSA9IHRoaXMuZm9ybS5zdGFydEFuZEVuZFRpbWVbMF07DQogICAgICAgIGRhdGEuZW5kVGltZSA9IHRoaXMuZm9ybS5zdGFydEFuZEVuZFRpbWVbMV07DQogICAgICAgIC8vIOS/ruaUueeahOaPkOS6pA0KICAgICAgICBpZiAodGhpcy5mb3JtLmlkICE9IG51bGwpIHsNCiAgICAgICAgICB1cGRhdGVTZWNraWxsVGltZShkYXRhKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOw0KICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgLy8g5re75Yqg55qE5o+Q5LqkDQogICAgICAgIGNyZWF0ZVNlY2tpbGxUaW1lKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuaWsOWinuaIkOWKnyIpOw0KICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqIOWIoOmZpOaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZURlbGV0ZShyb3cpIHsNCiAgICAgIGNvbnN0IGlkID0gcm93LmlkOw0KICAgICAgdGhpcy4kbW9kYWwuY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk56eS5p2A5pe25q6157yW5Y+35Li6IicgKyBpZCArICci55qE5pWw5o2u6aG5PycpLnRoZW4oZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gZGVsZXRlU2Vja2lsbFRpbWUoaWQpOw0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLliKDpmaTmiJDlip8iKTsNCiAgICAgIH0pLmNhdGNoKCgpID0+IHsgfSk7DQogICAgfSwNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAiEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/mall/promotion/seckill/config","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <doc-alert title=\"功能开启\" url=\"https://doc.iocoder.cn/mall/build/\" />\r\n\r\n    <!-- 操作工具栏 -->\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"primary\" plain icon=\"el-icon-plus\" size=\"mini\" @click=\"handleAdd\"\r\n          v-hasPermi=\"['promotion:seckill-time:create']\">新增秒杀时段</el-button>\r\n      </el-col>\r\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n    </el-row>\r\n\r\n    <!-- 列表 -->\r\n    <el-table v-loading=\"loading\" :data=\"list\">\r\n      <el-table-column label=\"秒杀时段名称\" align=\"center\" prop=\"name\" />\r\n      <el-table-column label=\"开始时间点\" align=\"center\" prop=\"startTime\" width=\"180\">\r\n        <template v-slot=\"scope\">\r\n          <span>{{ scope.row.startTime }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"结束时间点\" align=\"center\" prop=\"endTime\" width=\"180\">\r\n        <template v-slot=\"scope\">\r\n          <span>{{ scope.row.endTime }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"秒杀活动数量\" align=\"center\" prop=\"seckillActivityCount\" />\r\n      <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n        <template v-slot=\"scope\">\r\n          <span>{{ parseTime(scope.row.createTime) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n        <template v-slot=\"scope\">\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-view\" @click=\"handleOpenSeckillActivity(scope.row)\">\r\n            查看秒杀活动</el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(scope.row)\"\r\n            v-hasPermi=\"['promotion:seckill-time:update']\">修改</el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row)\"\r\n            v-hasPermi=\"['promotion:seckill-time:delete']\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 对话框(添加 / 修改) -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"600px\" v-dialogDrag append-to-body>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"140px\">\r\n        <el-form-item label=\"秒杀场次名称\" prop=\"name\">\r\n          <el-input v-model=\"form.name\" placeholder=\"请输入秒杀时段名称\" clearable />\r\n        </el-form-item>\r\n        <el-form-item label=\"秒杀时间段\" prop=\"startAndEndTime\">\r\n          <el-time-picker is-range v-model=\"form.startAndEndTime\" range-separator=\"至\" start-placeholder=\"开始时间\"\r\n            end-placeholder=\"结束时间\" placeholder=\"选择时间范围\" value-format=\"HH:mm:ss\">\r\n          </el-time-picker>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createSeckillTime, updateSeckillTime, deleteSeckillTime, getSeckillTime, getSeckillTimePage, exportSeckillTimeExcel, getSeckillTimeList } from \"@/api/mall/promotion/seckillTime\";\r\nimport router from \"@/router\";\r\nimport { deepClone } from \"@/utils\";\r\n\r\nexport default {\r\n  name: \"PromotionSeckillTime\",\r\n  components: {\r\n  },\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      // 导出遮罩层\r\n      exportLoading: false,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 总条数\r\n      // total: 0,\r\n      // 秒杀时段列表\r\n      list: [],\r\n      // 弹出层标题\r\n      title: \"\",\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 表单参数\r\n      form: {},\r\n      // 表单校验\r\n      rules: {\r\n        name: [{ required: true, message: \"秒杀时段名称不能为空\", trigger: \"blur\" }],\r\n        startAndEndTime: [{ required: true, message: \"秒杀时间段不能为空\", trigger: \"blur\" }],\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    /** 查询列表 */\r\n    getList() {\r\n      this.loading = true;\r\n      // 执行查询\r\n      getSeckillTimeList().then(response => {\r\n        this.list = response.data;\r\n        this.loading = false;\r\n      });\r\n    },\r\n    /** 取消按钮 */\r\n    cancel() {\r\n      this.open = false;\r\n      this.reset();\r\n    },\r\n    /** 表单重置 */\r\n    reset() {\r\n      this.form = {\r\n        id: undefined,\r\n        name: undefined,\r\n        startAndEndTime: undefined,\r\n        startTime: undefined,\r\n        endTime: undefined,\r\n      };\r\n      this.resetForm(\"form\");\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n    /**查看当前秒杀时段的秒杀活动 */\r\n    handleOpenSeckillActivity(row) {\r\n      router.push({ name: 'SeckillActivity', params: { timeId: row.id } })\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd() {\r\n      this.reset();\r\n      this.open = true;\r\n      this.title = \"添加秒杀时段\";\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.reset();\r\n      const id = row.id;\r\n      getSeckillTime(id).then(response => {\r\n        response.data.startAndEndTime = [response.data.startTime, response.data.endTime]\r\n        this.form = response.data;\r\n        this.open = true;\r\n        this.title = \"修改秒杀时段\";\r\n      });\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm() {\r\n      this.$refs[\"form\"].validate(valid => {\r\n        console.log(valid, \"是否通过\");\r\n        if (!valid) {\r\n          return;\r\n        }\r\n        // 处理数据\r\n        const data = deepClone(this.form);\r\n        data.startTime = this.form.startAndEndTime[0];\r\n        data.endTime = this.form.startAndEndTime[1];\r\n        // 修改的提交\r\n        if (this.form.id != null) {\r\n          updateSeckillTime(data).then(response => {\r\n            this.$modal.msgSuccess(\"修改成功\");\r\n            this.open = false;\r\n            this.getList();\r\n          });\r\n          return;\r\n        }\r\n        // 添加的提交\r\n        createSeckillTime(data).then(response => {\r\n          this.$modal.msgSuccess(\"新增成功\");\r\n          this.open = false;\r\n          this.getList();\r\n        });\r\n      });\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      const id = row.id;\r\n      this.$modal.confirm('是否确认删除秒杀时段编号为\"' + id + '\"的数据项?').then(function () {\r\n        return deleteSeckillTime(id);\r\n      }).then(() => {\r\n        this.getList();\r\n        this.$modal.msgSuccess(\"删除成功\");\r\n      }).catch(() => { });\r\n    },\r\n  }\r\n};\r\n</script>\r\n"]}]}