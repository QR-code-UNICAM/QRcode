{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\designer\\ProcessViewer.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\designer\\ProcessViewer.vue","mtime":1704630437688},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgQnBtblZpZXdlciBmcm9tICJicG1uLWpzL2xpYi9WaWV3ZXIiOw0KaW1wb3J0IERlZmF1bHRFbXB0eVhNTCBmcm9tICIuL3BsdWdpbnMvZGVmYXVsdEVtcHR5IjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiTXlQcm9jZXNzVmlld2VyIiwNCiAgY29tcG9uZW50TmFtZTogIk15UHJvY2Vzc1ZpZXdlciIsDQogIHByb3BzOiB7DQogICAgdmFsdWU6IHsgIC8vIEJQTU4gWE1MIOWtl+espuS4sg0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgIH0sDQogICAgcHJlZml4OiB7IC8vIOS9v+eUqOWTquS4quW8leaTjg0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogImNhbXVuZGEiLA0KICAgIH0sDQogICAgYWN0aXZpdHlEYXRhOiB7IC8vIOa0u+WKqOeahOaVsOaNruOAguS8oOmAkuaXtu+8jOWPr+mrmOS6rua1geeoiw0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0OiAoKSA9PiBbXSwNCiAgICB9LA0KICAgIHByb2Nlc3NJbnN0YW5jZURhdGE6IHsgLy8g5rWB56iL5a6e5L6L55qE5pWw5o2u44CC5Lyg6YCS5pe277yM5Y+v5bGV56S65rWB56iL5Y+R6LW35Lq6562J5L+h5oGvDQogICAgICB0eXBlOiBPYmplY3QsDQogICAgfSwNCiAgICB0YXNrRGF0YTogeyAvLyDku7vliqHlrp7kvovnmoTmlbDmja7jgILkvKDpgJLml7bvvIzlj6/lsZXnpLogVXNlclRhc2sg5a6h5qC455u45YWz55qE5L+h5oGvDQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdLA0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgeG1sOiAnJywNCiAgICAgIGFjdGl2aXR5TGlzdDogW10sDQogICAgICBwcm9jZXNzSW5zdGFuY2U6IHVuZGVmaW5lZCwNCiAgICAgIHRhc2tMaXN0OiBbXSwNCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMueG1sID0gdGhpcy52YWx1ZTsNCiAgICB0aGlzLmFjdGl2aXR5TGlzdCA9IHRoaXMuYWN0aXZpdHlEYXRhOw0KICAgIC8vIOWIneWni+WMlg0KICAgIHRoaXMuaW5pdEJwbW5Nb2RlbGVyKCk7DQogICAgdGhpcy5jcmVhdGVOZXdEaWFncmFtKHRoaXMueG1sKTsNCiAgICB0aGlzLiRvbmNlKCJob29rOmJlZm9yZURlc3Ryb3kiLCAoKSA9PiB7DQogICAgICBpZiAodGhpcy5icG1uTW9kZWxlcikgdGhpcy5icG1uTW9kZWxlci5kZXN0cm95KCk7DQogICAgICB0aGlzLiRlbWl0KCJkZXN0cm95IiwgdGhpcy5icG1uTW9kZWxlcik7DQogICAgICB0aGlzLmJwbW5Nb2RlbGVyID0gbnVsbDsNCiAgICB9KTsNCiAgICAvLyDliJ3lp4vmqKHlnovnmoTnm5HlkKzlmagNCiAgICB0aGlzLmluaXRNb2RlbExpc3RlbmVycygpOw0KICB9LA0KICB3YXRjaDogew0KICAgIHZhbHVlOiBmdW5jdGlvbiAobmV3VmFsdWUpIHsgLy8g5ZyoIHhtbFN0cmluZyDlj5HnlJ/lj5jljJbml7bvvIzph43mlrDliJvlu7rvvIzku47ogIznu5jliLbmtYHnqIvlm74NCiAgICAgIHRoaXMueG1sID0gbmV3VmFsdWU7DQogICAgICB0aGlzLmNyZWF0ZU5ld0RpYWdyYW0odGhpcy54bWwpOw0KICAgIH0sDQogICAgYWN0aXZpdHlEYXRhOiBmdW5jdGlvbiAobmV3QWN0aXZpdHlEYXRhKSB7DQogICAgICB0aGlzLmFjdGl2aXR5TGlzdCA9IG5ld0FjdGl2aXR5RGF0YTsNCiAgICAgIHRoaXMuY3JlYXRlTmV3RGlhZ3JhbSh0aGlzLnhtbCk7DQogICAgfSwNCiAgICBwcm9jZXNzSW5zdGFuY2VEYXRhOiBmdW5jdGlvbiAobmV3UHJvY2Vzc0luc3RhbmNlRGF0YSkgew0KICAgICAgdGhpcy5wcm9jZXNzSW5zdGFuY2UgPSBuZXdQcm9jZXNzSW5zdGFuY2VEYXRhOw0KICAgICAgdGhpcy5jcmVhdGVOZXdEaWFncmFtKHRoaXMueG1sKTsNCiAgICB9LA0KICAgIHRhc2tEYXRhOiBmdW5jdGlvbiAobmV3VGFza0xpc3REYXRhKSB7DQogICAgICB0aGlzLnRhc2tMaXN0ID0gbmV3VGFza0xpc3REYXRhOw0KICAgICAgdGhpcy5jcmVhdGVOZXdEaWFncmFtKHRoaXMueG1sKTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0QnBtbk1vZGVsZXIoKSB7DQogICAgICBpZiAodGhpcy5icG1uTW9kZWxlcikgcmV0dXJuOw0KICAgICAgdGhpcy5icG1uTW9kZWxlciA9IG5ldyBCcG1uVmlld2VyKHsNCiAgICAgICAgY29udGFpbmVyOiB0aGlzLiRyZWZzWyJicG1uLWNhbnZhcyJdLA0KICAgICAgICBicG1uUmVuZGVyZXI6IHsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qIOWIm+W7uuaWsOeahOa1geeoi+WbviAqLw0KICAgIGFzeW5jIGNyZWF0ZU5ld0RpYWdyYW0oeG1sKSB7DQogICAgICAvLyDlsIblrZfnrKbkuLLovazmjaLmiJDlm77mmL7npLrlh7rmnaUNCiAgICAgIGxldCBuZXdJZCA9IGBQcm9jZXNzXyR7bmV3IERhdGUoKS5nZXRUaW1lKCl9YDsNCiAgICAgIGxldCBuZXdOYW1lID0gYOS4muWKoea1geeoi18ke25ldyBEYXRlKCkuZ2V0VGltZSgpfWA7DQogICAgICBsZXQgeG1sU3RyaW5nID0geG1sIHx8IERlZmF1bHRFbXB0eVhNTChuZXdJZCwgbmV3TmFtZSwgdGhpcy5wcmVmaXgpOw0KICAgICAgdHJ5IHsNCiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5icG1uTW9kZWxlci5pbXBvcnRYTUwpOw0KICAgICAgICBsZXQgeyB3YXJuaW5ncyB9ID0gYXdhaXQgdGhpcy5icG1uTW9kZWxlci5pbXBvcnRYTUwoeG1sU3RyaW5nKTsNCiAgICAgICAgaWYgKHdhcm5pbmdzICYmIHdhcm5pbmdzLmxlbmd0aCkgew0KICAgICAgICAgIHdhcm5pbmdzLmZvckVhY2god2FybiA9PiBjb25zb2xlLndhcm4od2FybikpOw0KICAgICAgICB9DQogICAgICAgIC8vIOmrmOS6rua1geeoi+Wbvg0KICAgICAgICBhd2FpdCB0aGlzLmhpZ2hsaWdodERpYWdyYW0oKTsNCiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5icG1uTW9kZWxlci5nZXQoJ2NhbnZhcycpOw0KICAgICAgICBjYW52YXMuem9vbSgiZml0LXZpZXdwb3J0IiwgImF1dG8iKTsNCiAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcihlKTsNCiAgICAgICAgLy8gY29uc29sZS5lcnJvcihgW1Byb2Nlc3MgRGVzaWduZXIgV2Fybl06ICR7ZT8ubWVzc2FnZSB8fCBlfWApOw0KICAgICAgfQ0KICAgIH0sDQogICAgLyog6auY5Lqu5rWB56iL5Zu+ICovDQogICAgLy8gVE9ETyDoiovoib/vvJrlpoLmnpzlpJrkuKogZW5kQWN0aXZpdHkg55qE6K+d77yM55uu5YmN55qE6YC76L6R5Y+v6IO95pyJ5LiA5a6a55qE6Zeu6aKY44CCaHR0cHM6Ly93d3cuamRvbi5jb20vd29ya2Zsb3cvbXVsdGktZXZlbnRzLmh0bWwNCiAgICBhc3luYyBoaWdobGlnaHREaWFncmFtKCkgew0KICAgICAgY29uc3QgYWN0aXZpdHlMaXN0ID0gdGhpcy5hY3Rpdml0eUxpc3Q7DQogICAgICBpZiAoYWN0aXZpdHlMaXN0Lmxlbmd0aCA9PT0gMCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICAvLyDlj4LogIPoh6ogaHR0cHM6Ly9naXRlZS5jb20vdG9ueTJ5L1J1b1lpLWZsb3dhYmxlL2Jsb2IvbWFzdGVyL3J1b3lpLXVpL3NyYy9jb21wb25lbnRzL1Byb2Nlc3MvaW5kZXgudnVlI0wyMjIg5a6e546wDQogICAgICAvLyDlho3mrKHln7rnoYDkuIrvvIzlop7liqDkuI3lkIzlrqHmibnnu5PmnpznmoTpopzoibLnrYnnrYkNCiAgICAgIGxldCBjYW52YXMgPSB0aGlzLmJwbW5Nb2RlbGVyLmdldCgnY2FudmFzJyk7DQogICAgICBsZXQgdG9kb0FjdGl2aXR5ID0gYWN0aXZpdHlMaXN0LmZpbmQobSA9PiAhbS5lbmRUaW1lKSAvLyDmib7liLDlvoXlip7nmoTku7vliqENCiAgICAgIGxldCBlbmRBY3Rpdml0eSA9IGFjdGl2aXR5TGlzdFthY3Rpdml0eUxpc3QubGVuZ3RoIC0gMV0gLy8g6I635b6X5pyA5ZCO5LiA5Liq5Lu75YqhDQogICAgICAvLyBkZWJ1Z2dlcg0KICAgICAgLy8gY29uc29sZS5sb2codGhpcy5icG1uTW9kZWxlci5nZXREZWZpbml0aW9ucygpLnJvb3RFbGVtZW50c1swXS5mbG93RWxlbWVudHMpOw0KICAgICAgdGhpcy5icG1uTW9kZWxlci5nZXREZWZpbml0aW9ucygpLnJvb3RFbGVtZW50c1swXS5mbG93RWxlbWVudHM/LmZvckVhY2gobiA9PiB7DQogICAgICAgIGxldCBhY3Rpdml0eSA9IGFjdGl2aXR5TGlzdC5maW5kKG0gPT4gbS5rZXkgPT09IG4uaWQpIC8vIOaJvuWIsOWvueW6lOeahOa0u+WKqA0KICAgICAgICBpZiAoIWFjdGl2aXR5KSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmIChuLiR0eXBlID09PSAnYnBtbjpVc2VyVGFzaycpIHsgLy8g55So5oi35Lu75YqhDQogICAgICAgICAgLy8g5aSE55CG55So5oi35Lu75Yqh55qE6auY5LquDQogICAgICAgICAgY29uc3QgdGFzayA9IHRoaXMudGFza0xpc3QuZmluZChtID0+IG0uaWQgPT09IGFjdGl2aXR5LnRhc2tJZCk7IC8vIOaJvuWIsOa0u+WKqOWvueW6lOeahCB0YXNrSWQNCiAgICAgICAgICBpZiAoIXRhc2spIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQogICAgICAgICAgLy8g6auY5Lqu5Lu75YqhDQogICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihuLmlkLCB0aGlzLmdldFJlc3VsdENzcyh0YXNrLnJlc3VsdCkpOw0KDQogICAgICAgICAgLy8g5aaC5p6c6Z2e6YCa6L+H77yM5bCx5LiN6LWw5ZCO6Z2i55qE57q/5p2h5LqGDQogICAgICAgICAgaWYgKHRhc2sucmVzdWx0ICE9PSAyKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KICAgICAgICAgIC8vIOWkhOeQhiBvdXRnb2luZyDlh7rnur8NCiAgICAgICAgICBjb25zdCBvdXRnb2luZyA9IHRoaXMuZ2V0QWN0aXZpdHlPdXRnb2luZyhhY3Rpdml0eSk7DQogICAgICAgICAgb3V0Z29pbmc/LmZvckVhY2gobm4gPT4gew0KICAgICAgICAgICAgLy8gZGVidWdnZXINCiAgICAgICAgICAgIGxldCB0YXJnZXRBY3Rpdml0eSA9IGFjdGl2aXR5TGlzdC5maW5kKG0gPT4gbS5rZXkgPT09IG5uLnRhcmdldFJlZi5pZCkNCiAgICAgICAgICAgIC8vIOWmguaenOebruagh+a0u+WKqOWtmOWcqO+8jOWImeagueaNruivpea0u+WKqOaYr+WQpue7k+adn++8jOi/m+ihjOOAkGJwbW46U2VxdWVuY2VGbG9344CR6L+e57q/55qE6auY5Lqu6K6+572uDQogICAgICAgICAgICBpZiAodGFyZ2V0QWN0aXZpdHkpIHsNCiAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi5pZCwgdGFyZ2V0QWN0aXZpdHkuZW5kVGltZSA/ICdoaWdobGlnaHQnIDogJ2hpZ2hsaWdodC10b2RvJyk7DQogICAgICAgICAgICB9IGVsc2UgaWYgKG5uLnRhcmdldFJlZi4kdHlwZSA9PT0gJ2JwbW46RXhjbHVzaXZlR2F0ZXdheScpIHsgLy8gVE9ETyDoiovoib/vvJrov5nkuKrmtYHnqIvvvIzmmoLml7bmsqHotbDliLDov4cNCiAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi5pZCwgYWN0aXZpdHkuZW5kVGltZSA/ICdoaWdobGlnaHQnIDogJ2hpZ2hsaWdodC10b2RvJyk7DQogICAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobm4udGFyZ2V0UmVmLmlkLCBhY3Rpdml0eS5lbmRUaW1lID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAobm4udGFyZ2V0UmVmLiR0eXBlID09PSAnYnBtbjpFbmRFdmVudCcpIHsgLy8gVE9ETyDoiovoib/vvJrov5nkuKrmtYHnqIvvvIzmmoLml7bmsqHotbDliLDov4cNCiAgICAgICAgICAgICAgaWYgKCF0b2RvQWN0aXZpdHkgJiYgZW5kQWN0aXZpdHkua2V5ID09PSBuLmlkKSB7DQogICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi5pZCwgJ2hpZ2hsaWdodCcpOw0KICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobm4udGFyZ2V0UmVmLmlkLCAnaGlnaGxpZ2h0Jyk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKCFhY3Rpdml0eS5lbmRUaW1lKSB7DQogICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi5pZCwgJ2hpZ2hsaWdodC10b2RvJyk7DQogICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi50YXJnZXRSZWYuaWQsICdoaWdobGlnaHQtdG9kbycpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0gZWxzZSBpZiAobi4kdHlwZSA9PT0gJ2JwbW46RXhjbHVzaXZlR2F0ZXdheScpIHsgLy8g5o6S5a6D572R5YWzDQogICAgICAgICAgLy8g6K6+572u44CQYnBtbjpFeGNsdXNpdmVHYXRld2F544CR5o6S5a6D572R5YWz55qE6auY5LquDQogICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihuLmlkLCB0aGlzLmdldEFjdGl2aXR5SGlnaGxpZ2h0Q3NzKGFjdGl2aXR5KSk7DQogICAgICAgICAgLy8g5p+l5om+6ZyA6KaB6auY5Lqu55qE6L+e57q/DQogICAgICAgICAgbGV0IG1hdGNoTk4gPSB1bmRlZmluZWQ7DQogICAgICAgICAgbGV0IG1hdGNoQWN0aXZpdHkgPSB1bmRlZmluZWQ7DQogICAgICAgICAgbi5vdXRnb2luZz8uZm9yRWFjaChubiA9PiB7DQogICAgICAgICAgICBsZXQgdGFyZ2V0QWN0aXZpdHkgPSBhY3Rpdml0eUxpc3QuZmluZChtID0+IG0ua2V5ID09PSBubi50YXJnZXRSZWYuaWQpOw0KICAgICAgICAgICAgaWYgKCF0YXJnZXRBY3Rpdml0eSkgew0KICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyDnibnmrorliKTmlq0gZW5kRXZlbnQg57G75Z6L55qE5Y6f5Zug77yMRXhjbHVzaXZlR2F0ZXdheSDlj6/og73lkI7nu63ov57mnIkgMiDkuKrot6/lvoTvvJoNCiAgICAgICAgICAgIC8vICAxLiDkuIDkuKrmmK8gVXNlclRhc2sgPT4gRW5kRXZlbnQNCiAgICAgICAgICAgIC8vICAyLiDkuIDkuKrmmK8gRW5kRXZlbnQNCiAgICAgICAgICAgIC8vIOWcqOmAieaLqei3r+W+hCAxIOaXtu+8jOWFtuWuniBFbmRFdmVudCDlj6/og73kuZ/lrZjlnKjvvIzlr7zoh7QgMSDlkowgMiDpg73pq5jkuq7vvIzmmL7nhLbmmK/kuI3mraPnoa7nmoTjgIINCiAgICAgICAgICAgIC8vIOaJgOS7pe+8jOWcqCBtYXRjaEFjdGl2aXR5IOS4uiBFbmRFdmVudCDml7bvvIzpnIDopoHov5vooYzopobnm5Z+fg0KICAgICAgICAgICAgaWYgKCFtYXRjaEFjdGl2aXR5IHx8IG1hdGNoQWN0aXZpdHkudHlwZSA9PT0gJ2VuZEV2ZW50Jykgew0KICAgICAgICAgICAgICBtYXRjaE5OID0gbm47DQogICAgICAgICAgICAgIG1hdGNoQWN0aXZpdHkgPSB0YXJnZXRBY3Rpdml0eTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICAgIGlmIChtYXRjaE5OICYmIG1hdGNoQWN0aXZpdHkpIHsNCiAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobWF0Y2hOTi5pZCwgdGhpcy5nZXRBY3Rpdml0eUhpZ2hsaWdodENzcyhtYXRjaEFjdGl2aXR5KSk7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKG4uJHR5cGUgPT09ICdicG1uOlBhcmFsbGVsR2F0ZXdheScpIHsgLy8g5bm26KGM572R5YWzDQogICAgICAgICAgLy8g6K6+572u44CQYnBtbjpQYXJhbGxlbEdhdGV3YXnjgJHlubbooYznvZHlhbPnmoTpq5jkuq4NCiAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG4uaWQsIHRoaXMuZ2V0QWN0aXZpdHlIaWdobGlnaHRDc3MoYWN0aXZpdHkpKTsNCiAgICAgICAgICBuLm91dGdvaW5nPy5mb3JFYWNoKG5uID0+IHsNCiAgICAgICAgICAgIC8vIOiOt+W+l+i/nue6v+aYr+WQpuacieaMh+WQkeebruagh+OAguWmguaenOacie+8jOWImei/m+ihjOmrmOS6rg0KICAgICAgICAgICAgY29uc3QgdGFyZ2V0QWN0aXZpdHkgPSBhY3Rpdml0eUxpc3QuZmluZChtID0+IG0ua2V5ID09PSBubi50YXJnZXRSZWYuaWQpDQogICAgICAgICAgICBpZiAodGFyZ2V0QWN0aXZpdHkpIHsNCiAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi5pZCwgdGhpcy5nZXRBY3Rpdml0eUhpZ2hsaWdodENzcyh0YXJnZXRBY3Rpdml0eSkpOyAvLyDpq5jkuq7jgJBicG1uOlNlcXVlbmNlRmxvd+OAkei/nue6vw0KICAgICAgICAgICAgICAvLyDpq5jkuq7jgJAuLi7jgJHnm67moIfjgILlhbbkuK0gLi4uIOWPr+S7peaYryBicG06VXNlclRhc2vjgIHkuZ/lj6/ku6XmmK/lhbblroPnmoTjgILlvZPnhLbvvIzlpoLmnpzmmK8gYnBtOlVzZXJUYXNrIOeahOivne+8jOWFtuWunuS4jeWBmumrmOS6ruS5n+ayoemXrumimO+8jOWboOS4uuS4iumdouaciemAu+i+keWBmuS6hui/meWdl+OAgg0KICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG5uLnRhcmdldFJlZi5pZCwgdGhpcy5nZXRBY3Rpdml0eUhpZ2hsaWdodENzcyh0YXJnZXRBY3Rpdml0eSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSBpZiAobi4kdHlwZSA9PT0gJ2JwbW46U3RhcnRFdmVudCcpIHsgLy8g5byA5aeL6IqC54K5DQogICAgICAgICAgbi5vdXRnb2luZz8uZm9yRWFjaChubiA9PiB7IC8vIG91dGdvaW5nIOS+i+WmguivtOOAkGJwbW46U2VxdWVuY2VGbG9344CR6L+e57q/DQogICAgICAgICAgICAvLyDojrflvpfov57nur/mmK/lkKbmnInmjIflkJHnm67moIfjgILlpoLmnpzmnInvvIzliJnov5vooYzpq5jkuq4NCiAgICAgICAgICAgIGxldCB0YXJnZXRBY3Rpdml0eSA9IGFjdGl2aXR5TGlzdC5maW5kKG0gPT4gbS5rZXkgPT09IG5uLnRhcmdldFJlZi5pZCk7DQogICAgICAgICAgICBpZiAodGFyZ2V0QWN0aXZpdHkpIHsNCiAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi5pZCwgJ2hpZ2hsaWdodCcpOyAvLyDpq5jkuq7jgJBicG1uOlNlcXVlbmNlRmxvd+OAkei/nue6vw0KICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG4uaWQsICdoaWdobGlnaHQnKTsgLy8g6auY5Lqu44CQYnBtbjpTdGFydEV2ZW5044CR5byA5aeL6IqC54K577yI6Ieq5bex77yJDQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0gZWxzZSBpZiAobi4kdHlwZSA9PT0gJ2JwbW46RW5kRXZlbnQnKSB7IC8vIOe7k+adn+iKgueCuQ0KICAgICAgICAgIGlmICghdGhpcy5wcm9jZXNzSW5zdGFuY2UgfHwgdGhpcy5wcm9jZXNzSW5zdGFuY2UucmVzdWx0ID09PSAxKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobi5pZCwgdGhpcy5nZXRSZXN1bHRDc3ModGhpcy5wcm9jZXNzSW5zdGFuY2UucmVzdWx0KSk7DQogICAgICAgIH0gZWxzZSBpZiAobi4kdHlwZSA9PT0gJ2JwbW46U2VydmljZVRhc2snKXsgLy/mnI3liqHku7vliqENCiAgICAgICAgICBpZihhY3Rpdml0eS5zdGFydFRpbWU+MCAmJiBhY3Rpdml0eS5lbmRUaW1lPT09MCl7Ly/ov5vlhaXmiafooYzvvIzmoIfor4bov5vooYzoibINCiAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobi5pZCwgdGhpcy5nZXRSZXN1bHRDc3MoMSkpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihhY3Rpdml0eS5lbmRUaW1lPjApey8vIOaJp+ihjOWujOaIkO+8jOiKgueCueagh+ivhuWujOaIkOiJsiwg5omA5pyJb3V0Z29pbmfmoIfor4blrozmiJDoibLjgIINCiAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobi5pZCwgdGhpcy5nZXRSZXN1bHRDc3MoMikpOw0KICAgICAgICAgICAgY29uc3Qgb3V0Z29pbmcgPSB0aGlzLmdldEFjdGl2aXR5T3V0Z29pbmcoYWN0aXZpdHkpDQogICAgICAgICAgICBvdXRnb2luZz8uZm9yRWFjaChvdXQ9PnsNCiAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihvdXQuaWQsdGhpcy5nZXRSZXN1bHRDc3MoMikpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGdldEFjdGl2aXR5SGlnaGxpZ2h0Q3NzKGFjdGl2aXR5KSB7DQogICAgICByZXR1cm4gYWN0aXZpdHkuZW5kVGltZSA/ICdoaWdobGlnaHQnIDogJ2hpZ2hsaWdodC10b2RvJzsNCiAgICB9LA0KICAgIGdldFJlc3VsdENzcyhyZXN1bHQpIHsNCiAgICAgIGlmIChyZXN1bHQgPT09IDEpIHsgLy8g5a6h5om55LitDQogICAgICAgIHJldHVybiAnaGlnaGxpZ2h0LXRvZG8nOw0KICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IDIpIHsgLy8g5bey6YCa6L+HDQogICAgICAgIHJldHVybiAnaGlnaGxpZ2h0JzsNCiAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSAzKSB7IC8vIOS4jemAmui/hw0KICAgICAgICByZXR1cm4gJ2hpZ2hsaWdodC1yZWplY3QnOw0KICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IDQpIHsgLy8g5bey5Y+W5raIDQogICAgICAgIHJldHVybiAnaGlnaGxpZ2h0LWNhbmNlbCc7DQogICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gNSkgeyAvLyDlt7LpgIDlm54NCiAgICAgICAgcmV0dXJuICdoaWdobGlnaHQtYmFjayc7DQogICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gNikgeyAvLyDlt7Llp5TmtL4NCiAgICAgICAgcmV0dXJuICdoaWdobGlnaHQtdG9kbyc7DQogICAgICB9DQogICAgICByZXR1cm4gJyc7DQogICAgfSwNCiAgICBnZXRBY3Rpdml0eU91dGdvaW5nKGFjdGl2aXR5KSB7DQogICAgICAvLyDlpoLmnpzmnIkgb3V0Z29pbmfvvIzliJnnm7TmjqXkvb/nlKjlroMNCiAgICAgIGlmIChhY3Rpdml0eS5vdXRnb2luZyAmJiBhY3Rpdml0eS5vdXRnb2luZy5sZW5ndGggPiAwKSB7DQogICAgICAgIHJldHVybiBhY3Rpdml0eS5vdXRnb2luZzsNCiAgICAgIH0NCiAgICAgIC8vIOWmguaenOayoeacie+8jOWImemBjeWOhuiOt+W+l+i1t+eCueS4uuWug+eahOOAkGJwbW46U2VxdWVuY2VGbG9344CR6IqC54K55Lus44CC5Y6f5Zug5piv77yaYnBtbi1qcyDnmoQgVXNlclRhc2sg5ou/5LiN5YiwIG91dGdvaW5nDQogICAgICBjb25zdCBmbG93RWxlbWVudHMgPSB0aGlzLmJwbW5Nb2RlbGVyLmdldERlZmluaXRpb25zKCkucm9vdEVsZW1lbnRzWzBdLmZsb3dFbGVtZW50czsNCiAgICAgIGNvbnN0IG91dGdvaW5nID0gW107DQogICAgICBmbG93RWxlbWVudHMuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaWYgKGl0ZW0uJHR5cGUgIT09ICdicG1uOlNlcXVlbmNlRmxvdycpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYgKGl0ZW0uc291cmNlUmVmLmlkID09PSBhY3Rpdml0eS5rZXkpIHsNCiAgICAgICAgICBvdXRnb2luZy5wdXNoKGl0ZW0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIHJldHVybiBvdXRnb2luZzsNCiAgICB9LA0KICAgIGluaXRNb2RlbExpc3RlbmVycygpIHsNCiAgICAgIGNvbnN0IEV2ZW50QnVzID0gdGhpcy5icG1uTW9kZWxlci5nZXQoImV2ZW50QnVzIik7DQogICAgICBjb25zdCB0aGF0ID0gdGhpczsNCiAgICAgIC8vIOazqOWGjOmcgOimgeeahOebkeWQrOS6i+S7tg0KICAgICAgRXZlbnRCdXMub24oJ2VsZW1lbnQuaG92ZXInLCBmdW5jdGlvbihldmVudE9iaikgew0KICAgICAgICBsZXQgZWxlbWVudCA9IGV2ZW50T2JqID8gZXZlbnRPYmouZWxlbWVudCA6IG51bGw7DQogICAgICAgIHRoYXQuZWxlbWVudEhvdmVyKGVsZW1lbnQpOw0KICAgICAgfSk7DQogICAgICBFdmVudEJ1cy5vbignZWxlbWVudC5vdXQnLCBmdW5jdGlvbihldmVudE9iaikgew0KICAgICAgICBsZXQgZWxlbWVudCA9IGV2ZW50T2JqID8gZXZlbnRPYmouZWxlbWVudCA6IG51bGw7DQogICAgICAgIHRoYXQuZWxlbWVudE91dChlbGVtZW50KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g5rWB56iL5Zu+55qE5YWD57Sg6KKrIGhvdmVyDQogICAgZWxlbWVudEhvdmVyKGVsZW1lbnQpIHsNCiAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7DQogICAgICAhdGhpcy5lbGVtZW50T3ZlcmxheUlkcyAmJiAodGhpcy5lbGVtZW50T3ZlcmxheUlkcyA9IHt9KTsNCiAgICAgICF0aGlzLm92ZXJsYXlzICYmICh0aGlzLm92ZXJsYXlzID0gdGhpcy5icG1uTW9kZWxlci5nZXQoIm92ZXJsYXlzIikpOw0KICAgICAgLy8g5bGV56S65L+h5oGvDQogICAgICBjb25zdCBhY3Rpdml0eSA9IHRoaXMuYWN0aXZpdHlMaXN0LmZpbmQobSA9PiBtLmtleSA9PT0gZWxlbWVudC5pZCk7DQogICAgICBpZiAoIWFjdGl2aXR5KSB7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGlmICghdGhpcy5lbGVtZW50T3ZlcmxheUlkc1tlbGVtZW50LmlkXSAmJiBlbGVtZW50LnR5cGUgIT09ICJicG1uOlByb2Nlc3MiKSB7DQogICAgICAgIGxldCBodG1sID0gYDxkaXYgY2xhc3M9ImVsZW1lbnQtb3ZlcmxheXMiPg0KICAgICAgICAgICAgPHA+RWxlbWV0IGlkOiAke2VsZW1lbnQuaWR9PC9wPg0KICAgICAgICAgICAgPHA+RWxlbWV0IHR5cGU6ICR7ZWxlbWVudC50eXBlfTwvcD4NCiAgICAgICAgICA8L2Rpdj5gOyAvLyDpu5jorqTlgLwNCiAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gJ2JwbW46U3RhcnRFdmVudCcgJiYgdGhpcy5wcm9jZXNzSW5zdGFuY2UpIHsNCiAgICAgICAgICBodG1sID0gYDxwPuWPkei1t+S6uu+8miR7dGhpcy5wcm9jZXNzSW5zdGFuY2Uuc3RhcnRVc2VyLm5pY2tuYW1lfTwvcD4NCiAgICAgICAgICAgICAgICAgIDxwPumDqOmXqO+8miR7dGhpcy5wcm9jZXNzSW5zdGFuY2Uuc3RhcnRVc2VyLmRlcHROYW1lfTwvcD4NCiAgICAgICAgICAgICAgICAgIDxwPuWIm+W7uuaXtumXtO+8miR7dGhpcy5wYXJzZVRpbWUodGhpcy5wcm9jZXNzSW5zdGFuY2UuY3JlYXRlVGltZSl9YDsNCiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09ICdicG1uOlVzZXJUYXNrJykgew0KICAgICAgICAgIC8vIGRlYnVnZ2VyDQogICAgICAgICAgbGV0IHRhc2sgPSB0aGlzLnRhc2tMaXN0LmZpbmQobSA9PiBtLmlkID09PSBhY3Rpdml0eS50YXNrSWQpOyAvLyDmib7liLDmtLvliqjlr7nlupTnmoQgdGFza0lkDQogICAgICAgICAgaWYgKCF0YXNrKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KICAgICAgICAgIGh0bWwgPSBgPHA+5a6h5om55Lq677yaJHt0YXNrLmFzc2lnbmVlVXNlci5uaWNrbmFtZX08L3A+DQogICAgICAgICAgICAgICAgICA8cD7pg6jpl6jvvJoke3Rhc2suYXNzaWduZWVVc2VyLmRlcHROYW1lfTwvcD4NCiAgICAgICAgICAgICAgICAgIDxwPue7k+aenO+8miR7dGhpcy5nZXREaWN0RGF0YUxhYmVsKHRoaXMuRElDVF9UWVBFLkJQTV9QUk9DRVNTX0lOU1RBTkNFX1JFU1VMVCwgdGFzay5yZXN1bHQpfTwvcD4NCiAgICAgICAgICAgICAgICAgIDxwPuWIm+W7uuaXtumXtO+8miR7dGhpcy5wYXJzZVRpbWUodGFzay5jcmVhdGVUaW1lKX08L3A+YDsNCiAgICAgICAgICBpZiAodGFzay5lbmRUaW1lKSB7DQogICAgICAgICAgICBodG1sICs9IGA8cD7nu5PmnZ/ml7bpl7TvvJoke3RoaXMucGFyc2VUaW1lKHRhc2suZW5kVGltZSl9PC9wPmANCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKHRhc2sucmVhc29uKSB7DQogICAgICAgICAgICBodG1sICs9IGA8cD7lrqHmibnlu7rorq7vvJoke3Rhc2sucmVhc29ufTwvcD5gDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PT0gJ2JwbW46U2VydmljZVRhc2snICYmIHRoaXMucHJvY2Vzc0luc3RhbmNlKSB7DQogICAgICAgICAgaWYoYWN0aXZpdHkuc3RhcnRUaW1lPjApew0KICAgICAgICAgICAgaHRtbCA9IGA8cD7liJvlu7rml7bpl7TvvJoke3RoaXMucGFyc2VUaW1lKGFjdGl2aXR5LnN0YXJ0VGltZSl9PC9wPmA7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmKGFjdGl2aXR5LmVuZFRpbWU+MCl7DQogICAgICAgICAgICBodG1sICs9IGA8cD7nu5PmnZ/ml7bpl7TvvJoke3RoaXMucGFyc2VUaW1lKGFjdGl2aXR5LmVuZFRpbWUpfTwvcD5gDQogICAgICAgICAgfQ0KICAgICAgICAgIGNvbnNvbGUubG9nKGh0bWwpDQogICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC50eXBlID09PSAnYnBtbjpFbmRFdmVudCcgJiYgdGhpcy5wcm9jZXNzSW5zdGFuY2UpIHsNCiAgICAgICAgICBodG1sID0gYDxwPue7k+aenO+8miR7dGhpcy5nZXREaWN0RGF0YUxhYmVsKHRoaXMuRElDVF9UWVBFLkJQTV9QUk9DRVNTX0lOU1RBTkNFX1JFU1VMVCwgdGhpcy5wcm9jZXNzSW5zdGFuY2UucmVzdWx0KX08L3A+YDsNCiAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzSW5zdGFuY2UuZW5kVGltZSkgew0KICAgICAgICAgICAgaHRtbCArPSBgPHA+57uT5p2f5pe26Ze077yaJHt0aGlzLnBhcnNlVGltZSh0aGlzLnByb2Nlc3NJbnN0YW5jZS5lbmRUaW1lKX08L3A+YA0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmVsZW1lbnRPdmVybGF5SWRzW2VsZW1lbnQuaWRdID0gdGhpcy5vdmVybGF5cy5hZGQoZWxlbWVudCwgew0KICAgICAgICAgIHBvc2l0aW9uOiB7IGxlZnQ6IDAsIGJvdHRvbTogMCB9LA0KICAgICAgICAgIGh0bWw6IGA8ZGl2IGNsYXNzPSJlbGVtZW50LW92ZXJsYXlzIj4ke2h0bWx9PC9kaXY+YA0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOa1geeoi+WbvueahOWFg+e0oOiiqyBvdXQNCiAgICBlbGVtZW50T3V0KGVsZW1lbnQpIHsNCiAgICAgIHRoaXMub3ZlcmxheXMucmVtb3ZlKHsgZWxlbWVudCB9KTsNCiAgICAgIHRoaXMuZWxlbWVudE92ZXJsYXlJZHNbZWxlbWVudC5pZF0gPSBudWxsOw0KICAgIH0sDQogIH0NCn07DQo="},{"version":3,"sources":["ProcessViewer.vue"],"names":[],"mappings":";AASA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProcessViewer.vue","sourceRoot":"src/components/bpmnProcessDesigner/package/designer","sourcesContent":["<template>\r\n  <div class=\"my-process-designer\">\r\n    <div class=\"my-process-designer__container\">\r\n      <div class=\"my-process-designer__canvas\" ref=\"bpmn-canvas\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BpmnViewer from \"bpmn-js/lib/Viewer\";\r\nimport DefaultEmptyXML from \"./plugins/defaultEmpty\";\r\n\r\nexport default {\r\n  name: \"MyProcessViewer\",\r\n  componentName: \"MyProcessViewer\",\r\n  props: {\r\n    value: {  // BPMN XML 字符串\r\n      type: String,\r\n    },\r\n    prefix: { // 使用哪个引擎\r\n      type: String,\r\n      default: \"camunda\",\r\n    },\r\n    activityData: { // 活动的数据。传递时，可高亮流程\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    processInstanceData: { // 流程实例的数据。传递时，可展示流程发起人等信息\r\n      type: Object,\r\n    },\r\n    taskData: { // 任务实例的数据。传递时，可展示 UserTask 审核相关的信息\r\n      type: Array,\r\n      default: () => [],\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      xml: '',\r\n      activityList: [],\r\n      processInstance: undefined,\r\n      taskList: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.xml = this.value;\r\n    this.activityList = this.activityData;\r\n    // 初始化\r\n    this.initBpmnModeler();\r\n    this.createNewDiagram(this.xml);\r\n    this.$once(\"hook:beforeDestroy\", () => {\r\n      if (this.bpmnModeler) this.bpmnModeler.destroy();\r\n      this.$emit(\"destroy\", this.bpmnModeler);\r\n      this.bpmnModeler = null;\r\n    });\r\n    // 初始模型的监听器\r\n    this.initModelListeners();\r\n  },\r\n  watch: {\r\n    value: function (newValue) { // 在 xmlString 发生变化时，重新创建，从而绘制流程图\r\n      this.xml = newValue;\r\n      this.createNewDiagram(this.xml);\r\n    },\r\n    activityData: function (newActivityData) {\r\n      this.activityList = newActivityData;\r\n      this.createNewDiagram(this.xml);\r\n    },\r\n    processInstanceData: function (newProcessInstanceData) {\r\n      this.processInstance = newProcessInstanceData;\r\n      this.createNewDiagram(this.xml);\r\n    },\r\n    taskData: function (newTaskListData) {\r\n      this.taskList = newTaskListData;\r\n      this.createNewDiagram(this.xml);\r\n    }\r\n  },\r\n  methods: {\r\n    initBpmnModeler() {\r\n      if (this.bpmnModeler) return;\r\n      this.bpmnModeler = new BpmnViewer({\r\n        container: this.$refs[\"bpmn-canvas\"],\r\n        bpmnRenderer: {\r\n        }\r\n      })\r\n    },\r\n    /* 创建新的流程图 */\r\n    async createNewDiagram(xml) {\r\n      // 将字符串转换成图显示出来\r\n      let newId = `Process_${new Date().getTime()}`;\r\n      let newName = `业务流程_${new Date().getTime()}`;\r\n      let xmlString = xml || DefaultEmptyXML(newId, newName, this.prefix);\r\n      try {\r\n        // console.log(this.bpmnModeler.importXML);\r\n        let { warnings } = await this.bpmnModeler.importXML(xmlString);\r\n        if (warnings && warnings.length) {\r\n          warnings.forEach(warn => console.warn(warn));\r\n        }\r\n        // 高亮流程图\r\n        await this.highlightDiagram();\r\n        const canvas = this.bpmnModeler.get('canvas');\r\n        canvas.zoom(\"fit-viewport\", \"auto\");\r\n      } catch (e) {\r\n        console.error(e);\r\n        // console.error(`[Process Designer Warn]: ${e?.message || e}`);\r\n      }\r\n    },\r\n    /* 高亮流程图 */\r\n    // TODO 芋艿：如果多个 endActivity 的话，目前的逻辑可能有一定的问题。https://www.jdon.com/workflow/multi-events.html\r\n    async highlightDiagram() {\r\n      const activityList = this.activityList;\r\n      if (activityList.length === 0) {\r\n        return;\r\n      }\r\n      // 参考自 https://gitee.com/tony2y/RuoYi-flowable/blob/master/ruoyi-ui/src/components/Process/index.vue#L222 实现\r\n      // 再次基础上，增加不同审批结果的颜色等等\r\n      let canvas = this.bpmnModeler.get('canvas');\r\n      let todoActivity = activityList.find(m => !m.endTime) // 找到待办的任务\r\n      let endActivity = activityList[activityList.length - 1] // 获得最后一个任务\r\n      // debugger\r\n      // console.log(this.bpmnModeler.getDefinitions().rootElements[0].flowElements);\r\n      this.bpmnModeler.getDefinitions().rootElements[0].flowElements?.forEach(n => {\r\n        let activity = activityList.find(m => m.key === n.id) // 找到对应的活动\r\n        if (!activity) {\r\n          return;\r\n        }\r\n        if (n.$type === 'bpmn:UserTask') { // 用户任务\r\n          // 处理用户任务的高亮\r\n          const task = this.taskList.find(m => m.id === activity.taskId); // 找到活动对应的 taskId\r\n          if (!task) {\r\n            return;\r\n          }\r\n          // 高亮任务\r\n          canvas.addMarker(n.id, this.getResultCss(task.result));\r\n\r\n          // 如果非通过，就不走后面的线条了\r\n          if (task.result !== 2) {\r\n            return;\r\n          }\r\n          // 处理 outgoing 出线\r\n          const outgoing = this.getActivityOutgoing(activity);\r\n          outgoing?.forEach(nn => {\r\n            // debugger\r\n            let targetActivity = activityList.find(m => m.key === nn.targetRef.id)\r\n            // 如果目标活动存在，则根据该活动是否结束，进行【bpmn:SequenceFlow】连线的高亮设置\r\n            if (targetActivity) {\r\n              canvas.addMarker(nn.id, targetActivity.endTime ? 'highlight' : 'highlight-todo');\r\n            } else if (nn.targetRef.$type === 'bpmn:ExclusiveGateway') { // TODO 芋艿：这个流程，暂时没走到过\r\n              canvas.addMarker(nn.id, activity.endTime ? 'highlight' : 'highlight-todo');\r\n              canvas.addMarker(nn.targetRef.id, activity.endTime ? 'highlight' : 'highlight-todo');\r\n            } else if (nn.targetRef.$type === 'bpmn:EndEvent') { // TODO 芋艿：这个流程，暂时没走到过\r\n              if (!todoActivity && endActivity.key === n.id) {\r\n                canvas.addMarker(nn.id, 'highlight');\r\n                canvas.addMarker(nn.targetRef.id, 'highlight');\r\n              }\r\n              if (!activity.endTime) {\r\n                canvas.addMarker(nn.id, 'highlight-todo');\r\n                canvas.addMarker(nn.targetRef.id, 'highlight-todo');\r\n              }\r\n            }\r\n          });\r\n        } else if (n.$type === 'bpmn:ExclusiveGateway') { // 排它网关\r\n          // 设置【bpmn:ExclusiveGateway】排它网关的高亮\r\n          canvas.addMarker(n.id, this.getActivityHighlightCss(activity));\r\n          // 查找需要高亮的连线\r\n          let matchNN = undefined;\r\n          let matchActivity = undefined;\r\n          n.outgoing?.forEach(nn => {\r\n            let targetActivity = activityList.find(m => m.key === nn.targetRef.id);\r\n            if (!targetActivity) {\r\n              return;\r\n            }\r\n            // 特殊判断 endEvent 类型的原因，ExclusiveGateway 可能后续连有 2 个路径：\r\n            //  1. 一个是 UserTask => EndEvent\r\n            //  2. 一个是 EndEvent\r\n            // 在选择路径 1 时，其实 EndEvent 可能也存在，导致 1 和 2 都高亮，显然是不正确的。\r\n            // 所以，在 matchActivity 为 EndEvent 时，需要进行覆盖~~\r\n            if (!matchActivity || matchActivity.type === 'endEvent') {\r\n              matchNN = nn;\r\n              matchActivity = targetActivity;\r\n            }\r\n          })\r\n          if (matchNN && matchActivity) {\r\n            canvas.addMarker(matchNN.id, this.getActivityHighlightCss(matchActivity));\r\n          }\r\n        } else if (n.$type === 'bpmn:ParallelGateway') { // 并行网关\r\n          // 设置【bpmn:ParallelGateway】并行网关的高亮\r\n          canvas.addMarker(n.id, this.getActivityHighlightCss(activity));\r\n          n.outgoing?.forEach(nn => {\r\n            // 获得连线是否有指向目标。如果有，则进行高亮\r\n            const targetActivity = activityList.find(m => m.key === nn.targetRef.id)\r\n            if (targetActivity) {\r\n              canvas.addMarker(nn.id, this.getActivityHighlightCss(targetActivity)); // 高亮【bpmn:SequenceFlow】连线\r\n              // 高亮【...】目标。其中 ... 可以是 bpm:UserTask、也可以是其它的。当然，如果是 bpm:UserTask 的话，其实不做高亮也没问题，因为上面有逻辑做了这块。\r\n              canvas.addMarker(nn.targetRef.id, this.getActivityHighlightCss(targetActivity));\r\n            }\r\n          })\r\n        } else if (n.$type === 'bpmn:StartEvent') { // 开始节点\r\n          n.outgoing?.forEach(nn => { // outgoing 例如说【bpmn:SequenceFlow】连线\r\n            // 获得连线是否有指向目标。如果有，则进行高亮\r\n            let targetActivity = activityList.find(m => m.key === nn.targetRef.id);\r\n            if (targetActivity) {\r\n              canvas.addMarker(nn.id, 'highlight'); // 高亮【bpmn:SequenceFlow】连线\r\n              canvas.addMarker(n.id, 'highlight'); // 高亮【bpmn:StartEvent】开始节点（自己）\r\n            }\r\n          });\r\n        } else if (n.$type === 'bpmn:EndEvent') { // 结束节点\r\n          if (!this.processInstance || this.processInstance.result === 1) {\r\n            return;\r\n          }\r\n          canvas.addMarker(n.id, this.getResultCss(this.processInstance.result));\r\n        } else if (n.$type === 'bpmn:ServiceTask'){ //服务任务\r\n          if(activity.startTime>0 && activity.endTime===0){//进入执行，标识进行色\r\n            canvas.addMarker(n.id, this.getResultCss(1));\r\n          }\r\n          if(activity.endTime>0){// 执行完成，节点标识完成色, 所有outgoing标识完成色。\r\n            canvas.addMarker(n.id, this.getResultCss(2));\r\n            const outgoing = this.getActivityOutgoing(activity)\r\n            outgoing?.forEach(out=>{\r\n              canvas.addMarker(out.id,this.getResultCss(2))\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    getActivityHighlightCss(activity) {\r\n      return activity.endTime ? 'highlight' : 'highlight-todo';\r\n    },\r\n    getResultCss(result) {\r\n      if (result === 1) { // 审批中\r\n        return 'highlight-todo';\r\n      } else if (result === 2) { // 已通过\r\n        return 'highlight';\r\n      } else if (result === 3) { // 不通过\r\n        return 'highlight-reject';\r\n      } else if (result === 4) { // 已取消\r\n        return 'highlight-cancel';\r\n      } else if (result === 5) { // 已退回\r\n        return 'highlight-back';\r\n      } else if (result === 6) { // 已委派\r\n        return 'highlight-todo';\r\n      }\r\n      return '';\r\n    },\r\n    getActivityOutgoing(activity) {\r\n      // 如果有 outgoing，则直接使用它\r\n      if (activity.outgoing && activity.outgoing.length > 0) {\r\n        return activity.outgoing;\r\n      }\r\n      // 如果没有，则遍历获得起点为它的【bpmn:SequenceFlow】节点们。原因是：bpmn-js 的 UserTask 拿不到 outgoing\r\n      const flowElements = this.bpmnModeler.getDefinitions().rootElements[0].flowElements;\r\n      const outgoing = [];\r\n      flowElements.forEach(item => {\r\n        if (item.$type !== 'bpmn:SequenceFlow') {\r\n          return;\r\n        }\r\n        if (item.sourceRef.id === activity.key) {\r\n          outgoing.push(item);\r\n        }\r\n      });\r\n      return outgoing;\r\n    },\r\n    initModelListeners() {\r\n      const EventBus = this.bpmnModeler.get(\"eventBus\");\r\n      const that = this;\r\n      // 注册需要的监听事件\r\n      EventBus.on('element.hover', function(eventObj) {\r\n        let element = eventObj ? eventObj.element : null;\r\n        that.elementHover(element);\r\n      });\r\n      EventBus.on('element.out', function(eventObj) {\r\n        let element = eventObj ? eventObj.element : null;\r\n        that.elementOut(element);\r\n      });\r\n    },\r\n    // 流程图的元素被 hover\r\n    elementHover(element) {\r\n      this.element = element;\r\n      !this.elementOverlayIds && (this.elementOverlayIds = {});\r\n      !this.overlays && (this.overlays = this.bpmnModeler.get(\"overlays\"));\r\n      // 展示信息\r\n      const activity = this.activityList.find(m => m.key === element.id);\r\n      if (!activity) {\r\n        return;\r\n      }\r\n      if (!this.elementOverlayIds[element.id] && element.type !== \"bpmn:Process\") {\r\n        let html = `<div class=\"element-overlays\">\r\n            <p>Elemet id: ${element.id}</p>\r\n            <p>Elemet type: ${element.type}</p>\r\n          </div>`; // 默认值\r\n        if (element.type === 'bpmn:StartEvent' && this.processInstance) {\r\n          html = `<p>发起人：${this.processInstance.startUser.nickname}</p>\r\n                  <p>部门：${this.processInstance.startUser.deptName}</p>\r\n                  <p>创建时间：${this.parseTime(this.processInstance.createTime)}`;\r\n        } else if (element.type === 'bpmn:UserTask') {\r\n          // debugger\r\n          let task = this.taskList.find(m => m.id === activity.taskId); // 找到活动对应的 taskId\r\n          if (!task) {\r\n            return;\r\n          }\r\n          html = `<p>审批人：${task.assigneeUser.nickname}</p>\r\n                  <p>部门：${task.assigneeUser.deptName}</p>\r\n                  <p>结果：${this.getDictDataLabel(this.DICT_TYPE.BPM_PROCESS_INSTANCE_RESULT, task.result)}</p>\r\n                  <p>创建时间：${this.parseTime(task.createTime)}</p>`;\r\n          if (task.endTime) {\r\n            html += `<p>结束时间：${this.parseTime(task.endTime)}</p>`\r\n          }\r\n          if (task.reason) {\r\n            html += `<p>审批建议：${task.reason}</p>`\r\n          }\r\n        } else if (element.type === 'bpmn:ServiceTask' && this.processInstance) {\r\n          if(activity.startTime>0){\r\n            html = `<p>创建时间：${this.parseTime(activity.startTime)}</p>`;\r\n          }\r\n          if(activity.endTime>0){\r\n            html += `<p>结束时间：${this.parseTime(activity.endTime)}</p>`\r\n          }\r\n          console.log(html)\r\n        } else if (element.type === 'bpmn:EndEvent' && this.processInstance) {\r\n          html = `<p>结果：${this.getDictDataLabel(this.DICT_TYPE.BPM_PROCESS_INSTANCE_RESULT, this.processInstance.result)}</p>`;\r\n          if (this.processInstance.endTime) {\r\n            html += `<p>结束时间：${this.parseTime(this.processInstance.endTime)}</p>`\r\n          }\r\n        }\r\n        this.elementOverlayIds[element.id] = this.overlays.add(element, {\r\n          position: { left: 0, bottom: 0 },\r\n          html: `<div class=\"element-overlays\">${html}</div>`\r\n        });\r\n      }\r\n    },\r\n    // 流程图的元素被 out\r\n    elementOut(element) {\r\n      this.overlays.remove({ element });\r\n      this.elementOverlayIds[element.id] = null;\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\n/** 处理中 */\r\n.highlight-todo.djs-connection > .djs-visual > path {\r\n  stroke: #1890ff !important;\r\n  stroke-dasharray: 4px !important;\r\n  fill-opacity: 0.2 !important;\r\n}\r\n.highlight-todo.djs-shape .djs-visual > :nth-child(1) {\r\n  fill: #1890ff !important;\r\n  stroke: #1890ff !important;\r\n  stroke-dasharray: 4px !important;\r\n  fill-opacity: 0.2 !important;\r\n}\r\n\r\n:deep(.highlight-todo.djs-connection > .djs-visual > path) {\r\n  stroke: #1890ff !important;\r\n  stroke-dasharray: 4px !important;\r\n  fill-opacity: 0.2 !important;\r\n  marker-end: url(#sequenceflow-end-_E7DFDF-_E7DFDF-803g1kf6zwzmcig1y2ulm5egr);\r\n}\r\n:deep(.highlight-todo.djs-shape .djs-visual > :nth-child(1)) {\r\n  fill: #1890ff !important;\r\n  stroke: #1890ff !important;\r\n  stroke-dasharray: 4px !important;\r\n  fill-opacity: 0.2 !important;\r\n}\r\n\r\n/** 通过 */\r\n.highlight.djs-shape .djs-visual > :nth-child(1) {\r\n  fill: green !important;\r\n  stroke: green !important;\r\n  fill-opacity: 0.2 !important;\r\n}\r\n.highlight.djs-shape .djs-visual > :nth-child(2) {\r\n  fill: green !important;\r\n}\r\n.highlight.djs-shape .djs-visual > path {\r\n  fill: green !important;\r\n  fill-opacity: 0.2 !important;\r\n  stroke: green !important;\r\n}\r\n.highlight.djs-connection > .djs-visual > path {\r\n  stroke: green !important;\r\n}\r\n\r\n.highlight:not(.djs-connection) .djs-visual > :nth-child(1) {\r\n  fill: green !important; /* color elements as green */\r\n}\r\n\r\n:deep(.highlight.djs-shape .djs-visual > :nth-child(1)) {\r\n  fill: green !important;\r\n  stroke: green !important;\r\n  fill-opacity: 0.2 !important;\r\n}\r\n:deep(.highlight.djs-shape .djs-visual > :nth-child(2)) {\r\n  fill: green !important;\r\n}\r\n:deep(.highlight.djs-shape .djs-visual > path) {\r\n  fill: green !important;\r\n  fill-opacity: 0.2 !important;\r\n  stroke: green !important;\r\n}\r\n:deep(.highlight.djs-connection > .djs-visual > path) {\r\n  stroke: green !important;\r\n}\r\n\r\n/** 不通过 */\r\n.highlight-reject.djs-shape .djs-visual > :nth-child(1) {\r\n  fill: red !important;\r\n  stroke: red !important;\r\n  fill-opacity: 0.2 !important;\r\n}\r\n.highlight-reject.djs-shape .djs-visual > :nth-child(2) {\r\n  fill: red !important;\r\n}\r\n.highlight-reject.djs-shape .djs-visual > path {\r\n  fill: red !important;\r\n  fill-opacity: 0.2 !important;\r\n  stroke: red !important;\r\n}\r\n.highlight-reject.djs-connection > .djs-visual > path {\r\n  stroke: red !important;\r\n}\r\n\r\n.highlight-reject:not(.djs-connection) .djs-visual > :nth-child(1) {\r\n  fill: red !important; /* color elements as green */\r\n}\r\n\r\n:deep(.highlight-reject.djs-shape .djs-visual > :nth-child(1)) {\r\n  fill: red !important;\r\n  stroke: red !important;\r\n  fill-opacity: 0.2 !important;\r\n}\r\n:deep(.highlight-reject.djs-shape .djs-visual > :nth-child(2)) {\r\n  fill: red !important;\r\n}\r\n:deep(.highlight-reject.djs-shape .djs-visual > path) {\r\n  fill: red !important;\r\n  fill-opacity: 0.2 !important;\r\n  stroke: red !important;\r\n}\r\n:deep(.highlight-reject.djs-connection > .djs-visual > path) {\r\n  stroke: red !important;\r\n}\r\n\r\n/** 已取消 */\r\n.highlight-cancel.djs-shape .djs-visual > :nth-child(1) {\r\n  fill: grey !important;\r\n  stroke: grey !important;\r\n  fill-opacity: 0.2 !important;\r\n}\r\n.highlight-cancel.djs-shape .djs-visual > :nth-child(2) {\r\n  fill: grey !important;\r\n}\r\n.highlight-cancel.djs-shape .djs-visual > path {\r\n  fill: grey !important;\r\n  fill-opacity: 0.2 !important;\r\n  stroke: grey !important;\r\n}\r\n.highlight-cancel.djs-connection > .djs-visual > path {\r\n  stroke: grey !important;\r\n}\r\n\r\n.highlight-cancel:not(.djs-connection) .djs-visual > :nth-child(1) {\r\n  fill: grey !important; /* color elements as green */\r\n}\r\n\r\n:deep(.highlight-cancel.djs-shape .djs-visual > :nth-child(1)) {\r\n  fill: grey !important;\r\n  stroke: grey !important;\r\n  fill-opacity: 0.2 !important;\r\n}\r\n:deep(.highlight-cancel.djs-shape .djs-visual > :nth-child(2)) {\r\n  fill: grey !important;\r\n}\r\n:deep(.highlight-cancel.djs-shape .djs-visual > path) {\r\n  fill: grey !important;\r\n  fill-opacity: 0.2 !important;\r\n  stroke: grey !important;\r\n}\r\n:deep(.highlight-cancel.djs-connection > .djs-visual > path) {\r\n  stroke: grey !important;\r\n}\r\n/**驳回 */\r\n.highlight-back.djs-connection > .djs-visual > path {\r\n  stroke: #FFBA00 !important;\r\n  stroke-dasharray: 4px !important;\r\n  fill-opacity: 0.2 !important;\r\n}\r\n\r\n.highlight-back.djs-shape .djs-visual > :nth-child(1) {\r\n  fill: #FFBA00 !important;\r\n  stroke: #FFBA00 !important;\r\n  stroke-dasharray: 4px !important;\r\n  fill-opacity: 0.2 !important;\r\n}\r\n\r\n:deep(.highlight-back.djs-connection > .djs-visual > path) {\r\n  stroke: #FFBA00 !important;\r\n  stroke-dasharray: 4px !important;\r\n  fill-opacity: 0.2 !important;\r\n  marker-end: url(#sequenceflow-end-_E7DFDF-_E7DFDF-803g1kf6zwzmcig1y2ulm5egr);\r\n}\r\n\r\n:deep(.highlight-back.djs-shape .djs-visual > :nth-child(1)) {\r\n  fill: #FFBA00 !important;\r\n  stroke: #FFBA00 !important;\r\n  stroke-dasharray: 4px !important;\r\n  fill-opacity: 0.2 !important;\r\n}\r\n.element-overlays {\r\n  box-sizing: border-box;\r\n  padding: 8px;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  border-radius: 4px;\r\n  color: #fafafa;\r\n  width: 200px;\r\n}\r\n</style>\r\n"]}]}