{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\mp\\components\\wx-material-select\\main.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\mp\\components\\wx-material-select\\main.vue","mtime":1704630438004},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgV3hOZXdzIGZyb20gJ0Avdmlld3MvbXAvY29tcG9uZW50cy93eC1uZXdzL21haW4udnVlJzsNCmltcG9ydCBXeFZvaWNlUGxheWVyIGZyb20gJ0Avdmlld3MvbXAvY29tcG9uZW50cy93eC12b2ljZS1wbGF5L21haW4udnVlJzsNCmltcG9ydCBXeFZpZGVvUGxheWVyIGZyb20gJ0Avdmlld3MvbXAvY29tcG9uZW50cy93eC12aWRlby1wbGF5L21haW4udnVlJzsNCmltcG9ydCB7IGdldE1hdGVyaWFsUGFnZSB9IGZyb20gIkAvYXBpL21wL21hdGVyaWFsIjsNCmltcG9ydCB7IGdldEZyZWVQdWJsaXNoUGFnZSB9IGZyb20gIkAvYXBpL21wL2ZyZWVQdWJsaXNoIjsNCmltcG9ydCB7IGdldERyYWZ0UGFnZSB9IGZyb20gIkAvYXBpL21wL2RyYWZ0IjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAid3hNYXRlcmlhbFNlbGVjdCIsDQogIGNvbXBvbmVudHM6IHsNCiAgICBXeE5ld3MsDQogICAgV3hWb2ljZVBsYXllciwNCiAgICBXeFZpZGVvUGxheWVyDQogIH0sDQogIHByb3BzOiB7DQogICAgb2JqRGF0YTogew0KICAgICAgdHlwZTogT2JqZWN0LCAvLyB0eXBlIC0g57G75Z6L77ybYWNjb3VudElkIC0g5YWs5LyX5Y+36LSm5Y+357yW5Y+3DQogICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgIH0sDQogICAgbmV3c1R5cGU6eyAvLyDlm77mlofnsbvlnovvvJox44CB5bey5Y+R5biD5Zu+5paH77ybMuOAgeiNieeov+euseWbvuaWhw0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogIjEiDQogICAgfSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g6YGu572p5bGCDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIC8vIOaAu+adoeaVsA0KICAgICAgdG90YWw6IDAsDQogICAgICAvLyDmlbDmja7liJfooagNCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgLy8g5p+l6K+i5Y+C5pWwDQogICAgICBxdWVyeVBhcmFtczogew0KICAgICAgICBwYWdlTm86IDEsDQogICAgICAgIHBhZ2VTaXplOiAxMCwNCiAgICAgICAgYWNjb3VudElkOiB0aGlzLm9iakRhdGEuYWNjb3VudElkLA0KICAgICAgfSwNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRQYWdlKCkNCiAgfSwNCiAgbWV0aG9kczp7DQogICAgc2VsZWN0TWF0ZXJpYWwoaXRlbSkgew0KICAgICAgdGhpcy4kZW1pdCgnc2VsZWN0TWF0ZXJpYWwnLCBpdGVtKQ0KICAgIH0sDQogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZVF1ZXJ5KCkgew0KICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTm8gPSAxDQogICAgICB0aGlzLmdldFBhZ2UoKQ0KICAgIH0sDQogICAgZ2V0UGFnZSgpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCiAgICAgIGlmICh0aGlzLm9iakRhdGEudHlwZSA9PT0gJ25ld3MnICYmIHRoaXMubmV3c1R5cGUgPT09ICcxJykgeyAvLyDjgJDlm77mlofjgJErIOOAkOW3suWPkeW4g+OAkQ0KICAgICAgICB0aGlzLmdldEZyZWVQdWJsaXNoUGFnZSgpOw0KICAgICAgfSBlbHNlIGlmICh0aGlzLm9iakRhdGEudHlwZSA9PT0gJ25ld3MnICYmIHRoaXMubmV3c1R5cGUgPT09ICcyJykgeyAvLyDjgJDlm77mlofjgJErIOOAkOiNieeov+OAkQ0KICAgICAgICB0aGlzLmdldERyYWZ0UGFnZSgpOw0KICAgICAgfSBlbHNlIHsgLy8g44CQ57Sg5p2Q44CRDQogICAgICAgIHRoaXMuZ2V0TWF0ZXJpYWxQYWdlKCk7DQogICAgICB9DQogICAgfSwNCiAgICBnZXRNYXRlcmlhbFBhZ2UoKSB7DQogICAgICBnZXRNYXRlcmlhbFBhZ2Uoew0KICAgICAgICAuLi50aGlzLnF1ZXJ5UGFyYW1zLA0KICAgICAgICB0eXBlOiB0aGlzLm9iakRhdGEudHlwZQ0KICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdA0KICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbA0KICAgICAgfSkuZmluYWxseSgoKSA9PiB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0RnJlZVB1Ymxpc2hQYWdlKCkgew0KICAgICAgZ2V0RnJlZVB1Ymxpc2hQYWdlKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAvLyDlsIYgdGh1bWJVcmwg6L2s5oiQIHBpY1VybO+8jOS/neivgSB3eC1uZXdzIOe7hOS7tuWPr+S7pemihOiniOWwgemdog0KICAgICAgICByZXNwb25zZS5kYXRhLmxpc3QuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICBjb25zdCBuZXdzSXRlbSA9IGl0ZW0uY29udGVudC5uZXdzSXRlbTsNCiAgICAgICAgICBuZXdzSXRlbS5mb3JFYWNoKGFydGljbGUgPT4gew0KICAgICAgICAgICAgYXJ0aWNsZS5waWNVcmwgPSBhcnRpY2xlLnRodW1iVXJsOw0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdA0KICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbA0KICAgICAgfSkuZmluYWxseSgoKSA9PiB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0RHJhZnRQYWdlKCkgew0KICAgICAgZ2V0RHJhZnRQYWdlKCh0aGlzLnF1ZXJ5UGFyYW1zKSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIC8vIOWwhiB0aHVtYlVybCDovazmiJAgcGljVXJs77yM5L+d6K+BIHd4LW5ld3Mg57uE5Lu25Y+v5Lul6aKE6KeI5bCB6Z2iDQogICAgICAgIHJlc3BvbnNlLmRhdGEubGlzdC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgIGNvbnN0IG5ld3NJdGVtID0gaXRlbS5jb250ZW50Lm5ld3NJdGVtOw0KICAgICAgICAgIG5ld3NJdGVtLmZvckVhY2goYXJ0aWNsZSA9PiB7DQogICAgICAgICAgICBhcnRpY2xlLnBpY1VybCA9IGFydGljbGUudGh1bWJVcmw7DQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0DQogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsDQogICAgICB9KS5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgIH0pDQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["main.vue"],"names":[],"mappings":";AAiGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.vue","sourceRoot":"src/views/mp/components/wx-material-select","sourcesContent":["<!--\r\n  - Copyright (C) 2018-2019\r\n  - All rights reserved, Designed By www.joolun.com\r\n  芋道源码：\r\n  ① 移除 avue 组件，使用 ElementUI 原生组件\r\n-->\r\n<template>\r\n  <!-- 类型：图片 -->\r\n  <div v-if=\"objData.type === 'image'\">\r\n    <div class=\"waterfall\" v-loading=\"loading\">\r\n      <div class=\"waterfall-item\" v-for=\"item in list\" :key=\"item.mediaId\">\r\n        <img class=\"material-img\" :src=\"item.url\">\r\n        <p class=\"item-name\">{{item.name}}</p>\r\n        <el-row class=\"ope-row\">\r\n          <el-button size=\"mini\" type=\"success\" @click=\"selectMaterial(item)\">选择\r\n            <i class=\"el-icon-circle-check el-icon--right\"></i>\r\n          </el-button>\r\n        </el-row>\r\n      </div>\r\n    </div>\r\n    <!-- 分页组件 -->\r\n    <pagination v-show=\"total > 0\" :total=\"total\" :page.sync=\"queryParams.pageNo\" :limit.sync=\"queryParams.pageSize\"\r\n                @pagination=\"getMaterialPage\"/>\r\n  </div>\r\n  <!-- 类型：语音 -->\r\n  <div v-else-if=\"objData.type === 'voice'\">\r\n    <!-- 列表 -->\r\n    <el-table v-loading=\"loading\" :data=\"list\">\r\n      <el-table-column label=\"编号\" align=\"center\" prop=\"mediaId\" />\r\n      <el-table-column label=\"文件名\" align=\"center\" prop=\"name\" />\r\n      <el-table-column label=\"语音\" align=\"center\">\r\n        <template v-slot=\"scope\">\r\n          <wx-voice-player :url=\"scope.row.url\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"上传时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n        <template v-slot=\"scope\">\r\n          <span>{{ parseTime(scope.row.createTime) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\" fixed=\"right\" class-name=\"small-padding fixed-width\">\r\n        <template v-slot=\"scope\">\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-circle-plus\"\r\n                     @click=\"selectMaterial(scope.row)\">选择</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页组件 -->\r\n    <pagination v-show=\"total > 0\" :total=\"total\" :page.sync=\"queryParams.pageNo\" :limit.sync=\"queryParams.pageSize\"\r\n                @pagination=\"getPage\"/>\r\n  </div>\r\n  <div v-else-if=\"objData.type === 'video'\">\r\n    <!-- 列表 -->\r\n    <el-table v-loading=\"loading\" :data=\"list\">\r\n      <el-table-column label=\"编号\" align=\"center\" prop=\"mediaId\" />\r\n      <el-table-column label=\"文件名\" align=\"center\" prop=\"name\" />\r\n      <el-table-column label=\"标题\" align=\"center\" prop=\"title\" />\r\n      <el-table-column label=\"介绍\" align=\"center\" prop=\"introduction\" />\r\n      <el-table-column label=\"视频\" align=\"center\">\r\n        <template v-slot=\"scope\">\r\n          <wx-video-player :url=\"scope.row.url\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"上传时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n        <template v-slot=\"scope\">\r\n          <span>{{ parseTime(scope.row.createTime) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\" fixed=\"right\" class-name=\"small-padding fixed-width\">\r\n        <template v-slot=\"scope\">\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-circle-plus\"\r\n                     @click=\"selectMaterial(scope.row)\">选择</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页组件 -->\r\n    <pagination v-show=\"total > 0\" :total=\"total\" :page.sync=\"queryParams.pageNo\" :limit.sync=\"queryParams.pageSize\"\r\n                @pagination=\"getMaterialPage\"/>\r\n  </div>\r\n  <div v-else-if=\"objData.type === 'news'\">\r\n    <div class=\"waterfall\" v-loading=\"loading\">\r\n      <div class=\"waterfall-item\" v-for=\"item in list\" :key=\"item.mediaId\" v-if=\"item.content && item.content.newsItem\">\r\n        <wx-news :articles=\"item.content.newsItem\" />\r\n        <el-row class=\"ope-row\">\r\n          <el-button size=\"mini\" type=\"success\" @click=\"selectMaterial(item)\">\r\n            选择<i class=\"el-icon-circle-check el-icon--right\"></i>\r\n          </el-button>\r\n        </el-row>\r\n      </div>\r\n    </div>\r\n    <!-- 分页组件 -->\r\n    <pagination v-show=\"total > 0\" :total=\"total\" :page.sync=\"queryParams.pageNo\" :limit.sync=\"queryParams.pageSize\"\r\n                @pagination=\"getMaterialPage\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport WxNews from '@/views/mp/components/wx-news/main.vue';\r\nimport WxVoicePlayer from '@/views/mp/components/wx-voice-play/main.vue';\r\nimport WxVideoPlayer from '@/views/mp/components/wx-video-play/main.vue';\r\nimport { getMaterialPage } from \"@/api/mp/material\";\r\nimport { getFreePublishPage } from \"@/api/mp/freePublish\";\r\nimport { getDraftPage } from \"@/api/mp/draft\";\r\n\r\nexport default {\r\n  name: \"wxMaterialSelect\",\r\n  components: {\r\n    WxNews,\r\n    WxVoicePlayer,\r\n    WxVideoPlayer\r\n  },\r\n  props: {\r\n    objData: {\r\n      type: Object, // type - 类型；accountId - 公众号账号编号\r\n      required: true\r\n    },\r\n    newsType:{ // 图文类型：1、已发布图文；2、草稿箱图文\r\n      type: String,\r\n      default: \"1\"\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: false,\r\n      // 总条数\r\n      total: 0,\r\n      // 数据列表\r\n      list: [],\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n        accountId: this.objData.accountId,\r\n      },\r\n    }\r\n  },\r\n  created() {\r\n    this.getPage()\r\n  },\r\n  methods:{\r\n    selectMaterial(item) {\r\n      this.$emit('selectMaterial', item)\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageNo = 1\r\n      this.getPage()\r\n    },\r\n    getPage() {\r\n      this.loading = true\r\n      if (this.objData.type === 'news' && this.newsType === '1') { // 【图文】+ 【已发布】\r\n        this.getFreePublishPage();\r\n      } else if (this.objData.type === 'news' && this.newsType === '2') { // 【图文】+ 【草稿】\r\n        this.getDraftPage();\r\n      } else { // 【素材】\r\n        this.getMaterialPage();\r\n      }\r\n    },\r\n    getMaterialPage() {\r\n      getMaterialPage({\r\n        ...this.queryParams,\r\n        type: this.objData.type\r\n      }).then(response => {\r\n        this.list = response.data.list\r\n        this.total = response.data.total\r\n      }).finally(() => {\r\n        this.loading = false\r\n      })\r\n    },\r\n    getFreePublishPage() {\r\n      getFreePublishPage(this.queryParams).then(response => {\r\n        // 将 thumbUrl 转成 picUrl，保证 wx-news 组件可以预览封面\r\n        response.data.list.forEach(item => {\r\n          const newsItem = item.content.newsItem;\r\n          newsItem.forEach(article => {\r\n            article.picUrl = article.thumbUrl;\r\n          })\r\n        })\r\n        this.list = response.data.list\r\n        this.total = response.data.total\r\n      }).finally(() => {\r\n        this.loading = false\r\n      })\r\n    },\r\n    getDraftPage() {\r\n      getDraftPage((this.queryParams)).then(response => {\r\n        // 将 thumbUrl 转成 picUrl，保证 wx-news 组件可以预览封面\r\n        response.data.list.forEach(item => {\r\n          const newsItem = item.content.newsItem;\r\n          newsItem.forEach(article => {\r\n            article.picUrl = article.thumbUrl;\r\n          })\r\n        })\r\n        this.list = response.data.list\r\n        this.total = response.data.total\r\n      }).finally(() => {\r\n        this.loading = false\r\n      })\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n/*瀑布流样式*/\r\n.waterfall {\r\n  width: 100%;\r\n  column-gap:10px;\r\n  column-count: 5;\r\n  margin: 0 auto;\r\n}\r\n.waterfall-item {\r\n  padding: 10px;\r\n  margin-bottom: 10px;\r\n  break-inside: avoid;\r\n  border: 1px solid #eaeaea;\r\n}\r\n.material-img {\r\n  width: 100%;\r\n}\r\np {\r\n  line-height: 30px;\r\n}\r\n@media (min-width: 992px) and (max-width: 1300px) {\r\n  .waterfall {\r\n    column-count: 3;\r\n  }\r\n  p {\r\n    color:red;\r\n  }\r\n}\r\n@media (min-width: 768px) and (max-width: 991px) {\r\n  .waterfall {\r\n    column-count: 2;\r\n  }\r\n  p {\r\n    color: orange;\r\n  }\r\n}\r\n@media (max-width: 767px) {\r\n  .waterfall {\r\n    column-count: 1;\r\n  }\r\n}\r\n/*瀑布流样式*/\r\n</style>\r\n"]}]}