{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\login.vue","mtime":1704874133934},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQge3NlbmRTbXNDb2RlLCBzbXNMb2dpbn0gZnJvbSAiQC9hcGkvbG9naW4iOw0KaW1wb3J0IHtnZXRUZW5hbnRJZEJ5TmFtZX0gZnJvbSAiQC9hcGkvc3lzdGVtL3RlbmFudCI7DQppbXBvcnQge1N5c3RlbVVzZXJTb2NpYWxUeXBlRW51bX0gZnJvbSAiQC91dGlscy9jb25zdGFudHMiOw0KaW1wb3J0IHtnZXRDYXB0Y2hhRW5hYmxlLCBnZXRUZW5hbnRFbmFibGV9IGZyb20gIkAvdXRpbHMvcnVveWkiOw0KaW1wb3J0IHsNCiAgZ2V0UGFzc3dvcmQsDQogIGdldFJlbWVtYmVyTWUsIGdldFRlbmFudE5hbWUsDQogIGdldFVzZXJuYW1lLA0KICByZW1vdmVQYXNzd29yZCwgcmVtb3ZlUmVtZW1iZXJNZSwgcmVtb3ZlVGVuYW50TmFtZSwNCiAgcmVtb3ZlVXNlcm5hbWUsDQogIHNldFBhc3N3b3JkLCBzZXRSZW1lbWJlck1lLCBzZXRUZW5hbnRJZCwgc2V0VGVuYW50TmFtZSwgc2V0VG9rZW4sDQogIHNldFVzZXJuYW1lDQp9IGZyb20gIkAvdXRpbHMvYXV0aCI7DQoNCmltcG9ydCBWZXJpZnkgZnJvbSAnQC9jb21wb25lbnRzL1ZlcmlmaXRpb24vVmVyaWZ5JzsNCmltcG9ydCB7cmVzZXRVc2VyUHdkfSBmcm9tICJAL2FwaS9zeXN0ZW0vdXNlciI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkxvZ2luIiwNCiAgY29tcG9uZW50czogew0KICAgIFZlcmlmeQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBjb2RlVXJsOiAiIiwNCiAgICAgIGNhcHRjaGFFbmFibGU6IGZhbHNlLA0KICAgICAgdGVuYW50RW5hYmxlOiBmYWxzZSwNCiAgICAgIG1vYmlsZUNvZGVUaW1lcjogMCwNCiAgICAgIGxvZ2luRm9ybTogew0KICAgICAgICBsb2dpblR5cGU6ICJzbXMiLA0KICAgICAgICB1c2VybmFtZTogImFkbWluIiwNCiAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbjEyMyIsDQogICAgICAgIGNhcHRjaGFWZXJpZmljYXRpb246ICIiLA0KICAgICAgICBlbWFpbDogIiIsDQogICAgICAgIGVtYWlsQ29kZTogIiIsDQogICAgICAgIHJlbWVtYmVyTWU6IGZhbHNlLA0KICAgICAgICB0ZW5hbnROYW1lOiAiUVJDT0RFIiwNCiAgICAgIH0sDQogICAgICBzY2VuZTogMjEsDQoNCiAgICAgIExvZ2luUnVsZXM6IHsNCiAgICAgICAgdXNlcm5hbWU6IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICJibHVyIiwgbWVzc2FnZTogIlVzZXJuYW1lIGNhbm5vdCBiZSBlbXB0eSJ9DQogICAgICAgIF0sDQogICAgICAgIHBhc3N3b3JkOiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAiYmx1ciIsIG1lc3NhZ2U6ICJQYXNzd29yZCBjYW5ub3QgYmUgZW1wdHkifQ0KICAgICAgICBdLA0KICAgICAgICBlbWFpbDogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogImJsdXIiLCBtZXNzYWdlOiAiRW1haWwgY2Fubm90IGJlIGVtcHR5In0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbiAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7DQogICAgICAgICAgICAgIGlmICgvXigoW148PigpXFtcXVxcLiw7OlxzQCJdKyhcLltePD4oKVxbXF1cXC4sOzpcc0AiXSspKil8KCIuKyIpKUAoKFxbWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfVxdKXwoKFthLXpBLVpcLTAtOV0rXC4pK1thLXpBLVpdezIsfSkpJC8udGVzdCh2YWx1ZSkgPT09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCJJbnZhbGlkIGVtYWlsIGZvcm1hdCIpKTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LCB0cmlnZ2VyOiAiYmx1ciINCiAgICAgICAgICB9DQogICAgICAgIF0NCiAgICAgIH0sDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIHJlZGlyZWN0OiB1bmRlZmluZWQsDQogICAgICAvLyDmnprkuL4NCiAgICAgIC8vIFN5c1VzZXJTb2NpYWxUeXBlRW51bTogU3lzdGVtVXNlclNvY2lhbFR5cGVFbnVtLA0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgLy8g56ef5oi35byA5YWzDQogICAgLy8gdGhpcy50ZW5hbnRFbmFibGUgPSBnZXRUZW5hbnRFbmFibGUoKTsNCiAgICAvLyBpZiAodGhpcy50ZW5hbnRFbmFibGUpIHsNCiAgICAvLyAgIGdldFRlbmFudElkQnlOYW1lKHRoaXMubG9naW5Gb3JtLnRlbmFudE5hbWUpLnRoZW4ocmVzID0+IHsgLy8g6K6+572u56ef5oi3DQogICAgLy8gICAgIGNvbnN0IHRlbmFudElkID0gcmVzLmRhdGE7DQogICAgLy8gICAgIGlmICh0ZW5hbnRJZCAmJiB0ZW5hbnRJZCA+PSAwKSB7DQogICAgLy8gICAgICAgc2V0VGVuYW50SWQodGVuYW50SWQpDQogICAgLy8gICAgIH0NCiAgICAvLyAgIH0pOw0KICAgIC8vIH0NCiAgICAvLyDpqozor4HnoIHlvIDlhbMNCiAgICAvLyB0aGlzLmNhcHRjaGFFbmFibGUgPSBnZXRDYXB0Y2hhRW5hYmxlKCk7DQogICAgLy8g6YeN5a6a5ZCR5Zyw5Z2ADQogICAgLy8gdGhpcy5yZWRpcmVjdCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnJlZGlyZWN0ID8gZGVjb2RlVVJJQ29tcG9uZW50KHRoaXMuJHJvdXRlLnF1ZXJ5LnJlZGlyZWN0KSA6IHVuZGVmaW5lZDsNCiAgICAvLyB0aGlzLmdldENvb2tpZSgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6YKu566x55m75b2VDQogICAgU21zTG9naW4oKSB7DQogICAgICBjb25zdCBlbWFpbCA9IHRoaXMubG9naW5Gb3JtLmVtYWlsLnRyaW0oKQ0KICAgICAgY29uc3QgZW1haWxDb2RlID0gdGhpcy5sb2dpbkZvcm0uZW1haWxDb2RlDQogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICBzbXNMb2dpbihlbWFpbCxlbWFpbENvZGUpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpDQogICAgICAgICAgY29uc29sZS5sb2cocmVzLm1zZykNCiAgICAgICAgICBpZiAocmVzLm1zZyA9PT0gJ1NVQ0NFU1MnKXsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOicvcXJjb2RlJyxxdWVyeTp7ZW1haWx9fSk7DQoNCiAgICAgICAgICB9ZWxzZSB7DQogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJJbmNvcnJlY3QgdmVyaWZpY2F0aW9uIGNvZGUuIFBsZWFzZSByZXRyaWV2ZSBpdCBhZ2Fpbn4iKQ0KICAgICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsNCiAgICAgICAgICAgICAgdGl0bGU6ICdFcnJvcicsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbmNvcnJlY3QgdmVyaWZpY2F0aW9uIGNvZGUuIFBsZWFzZSByZXRyaWV2ZSBpdCBhZ2Fpbi5+Jw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KDQogICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICByZWplY3QoZXJyb3IpDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0Q29kZSgpIHsNCiAgICAgIC8vIOaDheWGteS4gO+8jOacquW8gOWQr++8muWImeebtOaOpeeZu+W9lQ0KICAgICAgaWYgKCF0aGlzLmNhcHRjaGFFbmFibGUpIHsNCiAgICAgICAgdGhpcy5oYW5kbGVMb2dpbih7fSkNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgICAvLyDmg4XlhrXkuozvvIzlt7LlvIDlkK/vvJrliJnlsZXnpLrpqozor4HnoIHvvJvlj6rmnInlrozmiJDpqozor4HnoIHnmoTmg4XlhrXvvIzmiY3ov5vooYznmbvlvZUNCiAgICAgIC8vIOW8ueWHuumqjOivgeeggQ0KICAgICAgdGhpcy4kcmVmcy52ZXJpZnkuc2hvdygpDQogICAgfSwNCiAgICBnZXRDb29raWUoKSB7DQogICAgICBjb25zdCB1c2VybmFtZSA9IGdldFVzZXJuYW1lKCk7DQogICAgICBjb25zdCBwYXNzd29yZCA9IGdldFBhc3N3b3JkKCk7DQogICAgICBjb25zdCByZW1lbWJlck1lID0gZ2V0UmVtZW1iZXJNZSgpOw0KICAgICAgY29uc3QgdGVuYW50TmFtZSA9IGdldFRlbmFudE5hbWUoKTsNCiAgICAgIHRoaXMubG9naW5Gb3JtID0gew0KICAgICAgICAuLi50aGlzLmxvZ2luRm9ybSwNCiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lID8gdXNlcm5hbWUgOiB0aGlzLmxvZ2luRm9ybS51c2VybmFtZSwNCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkID8gcGFzc3dvcmQgOiB0aGlzLmxvZ2luRm9ybS5wYXNzd29yZCwNCiAgICAgICAgcmVtZW1iZXJNZTogcmVtZW1iZXJNZSA/IGdldFJlbWVtYmVyTWUoKSA6IGZhbHNlLA0KICAgICAgICB0ZW5hbnROYW1lOiB0ZW5hbnROYW1lID8gdGVuYW50TmFtZSA6IHRoaXMubG9naW5Gb3JtLnRlbmFudE5hbWUsDQogICAgICB9Ow0KICAgIH0sDQogICAgaGFuZGxlTG9naW4oY2FwdGNoYVBhcmFtcykgew0KICAgICAgdGhpcy4kcmVmcy5sb2dpbkZvcm0udmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgICAgIC8vIC8vIOiuvue9riBDb29raWUNCiAgICAgICAgICAvLyBpZiAodGhpcy5sb2dpbkZvcm0ucmVtZW1iZXJNZSkgew0KICAgICAgICAgIC8vICAgc2V0VXNlcm5hbWUodGhpcy5sb2dpbkZvcm0udXNlcm5hbWUpDQogICAgICAgICAgLy8gICBzZXRQYXNzd29yZCh0aGlzLmxvZ2luRm9ybS5wYXNzd29yZCkNCiAgICAgICAgICAvLyAgIHNldFJlbWVtYmVyTWUodGhpcy5sb2dpbkZvcm0ucmVtZW1iZXJNZSkNCiAgICAgICAgICAvLyAgIHNldFRlbmFudE5hbWUodGhpcy5sb2dpbkZvcm0udGVuYW50TmFtZSkNCiAgICAgICAgICAvLyB9IGVsc2Ugew0KICAgICAgICAgIC8vICAgcmVtb3ZlVXNlcm5hbWUoKQ0KICAgICAgICAgIC8vICAgcmVtb3ZlUGFzc3dvcmQoKQ0KICAgICAgICAgIC8vICAgcmVtb3ZlUmVtZW1iZXJNZSgpDQogICAgICAgICAgLy8gICByZW1vdmVUZW5hbnROYW1lKCkNCiAgICAgICAgICAvLyB9DQogICAgICAgICAgdGhpcy5sb2dpbkZvcm0uY2FwdGNoYVZlcmlmaWNhdGlvbiA9IGNhcHRjaGFQYXJhbXMuY2FwdGNoYVZlcmlmaWNhdGlvbg0KICAgICAgICAgIC8vIOWPkei1t+eZu+mZhg0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCLlj5HotbfnmbvlvZUiLCB0aGlzLmxvZ2luRm9ybSk7DQogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2godGhpcy5sb2dpbkZvcm0ubG9naW5UeXBlID09PSAic21zIiA/ICJTbXNMb2dpbiIgOiAiTG9naW4iLCB0aGlzLmxvZ2luRm9ybSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogdGhpcy5yZWRpcmVjdCB8fCAiLyJ9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIC8vIGFzeW5jIGRvU29jaWFsTG9naW4oc29jaWFsVHlwZUVudW0pIHsNCiAgICAvLyAgIC8vIOiuvue9rueZu+W9leS4rQ0KICAgIC8vICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAvLyAgIGxldCB0ZW5hbnQgPSBmYWxzZTsNCiAgICAvLyAgIGlmICh0aGlzLnRlbmFudEVuYWJsZSkgew0KICAgIC8vICAgICBhd2FpdCB0aGlzLiRwcm9tcHQoJ+ivt+i+k+WFpeenn+aIt+WQjeensCcsICLmj5DnpLoiLCB7DQogICAgLy8gICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLA0KICAgIC8vICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiDQogICAgLy8gICAgIH0pLnRoZW4oYXN5bmMgKHt2YWx1ZX0pID0+IHsNCiAgICAvLyAgICAgICBhd2FpdCBnZXRUZW5hbnRJZEJ5TmFtZSh2YWx1ZSkudGhlbihyZXMgPT4gew0KICAgIC8vICAgICAgICAgY29uc3QgdGVuYW50SWQgPSByZXMuZGF0YTsNCiAgICAvLyAgICAgICAgIHRlbmFudCA9IHRydWUNCiAgICAvLyAgICAgICAgIGlmICh0ZW5hbnRJZCAmJiB0ZW5hbnRJZCA+PSAwKSB7DQogICAgLy8gICAgICAgICAgIHNldFRlbmFudElkKHRlbmFudElkKQ0KICAgIC8vICAgICAgICAgfQ0KICAgIC8vICAgICAgIH0pOw0KICAgIC8vICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgLy8gICAgICAgLy8g5Y+W5raI55m75b2V5oyJ6ZKuIGxvYWRpbmfnirbmgIENCiAgICAvLyAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAvLw0KICAgIC8vICAgICAgIHJldHVybiBmYWxzZQ0KICAgIC8vICAgICB9KTsNCiAgICAvLyAgIH0gZWxzZSB7DQogICAgLy8gICAgIHRlbmFudCA9IHRydWUNCiAgICAvLyAgIH0NCiAgICAvLyAgaWYodGVuYW50KXsNCiAgICAvLyAgICAvLyDorqHnrpcgcmVkaXJlY3RVcmkNCiAgICAvLyAgICBjb25zdCByZWRpcmVjdFVyaSA9IGxvY2F0aW9uLm9yaWdpbiArICcvc29jaWFsLWxvZ2luPycNCiAgICAvLyAgICAgICsgZW5jb2RlVVJJQ29tcG9uZW50KCd0eXBlPScgKyBzb2NpYWxUeXBlRW51bS50eXBlICsgJyZyZWRpcmVjdD0nICsgKHRoaXMucmVkaXJlY3QgfHwgIi8iKSk7IC8vIOmHjeWumuWQkeS4jeiDveS4og0KICAgIC8vICAgIC8vIGNvbnN0IHJlZGlyZWN0VXJpID0gJ2h0dHA6Ly8xMjcuMC4wLjE6NDgwODAvYXBpL2dpdGVlL2NhbGxiYWNrJzsNCiAgICAvLyAgICAvLyBjb25zdCByZWRpcmVjdFVyaSA9ICdodHRwOi8vMTI3LjAuMC4xOjQ4MDgwL2FwaS9kaW5ndGFsay9jYWxsYmFjayc7DQogICAgLy8gICAgLy8g6L+b6KGM6Lez6L2sDQogICAgLy8gICAgc29jaWFsQXV0aFJlZGlyZWN0KHNvY2lhbFR5cGVFbnVtLnR5cGUsIGVuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdFVyaSkpLnRoZW4oKHJlcykgPT4gew0KICAgIC8vICAgICAgLy8gY29uc29sZS5sb2cocmVzLnVybCk7DQogICAgLy8gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlcy5kYXRhOw0KICAgIC8vICAgIH0pOw0KICAgIC8vICB9DQogICAgLy8gfSwNCiAgICAvKiogPT09PT09PT09PSDku6XkuIvkuLrljYfnuqfnn63kv6HnmbvlvZUgPT09PT09PT09PSAqLw0KICAgIGdldFNtc0NvZGUoKSB7DQogICAgICBpZiAodGhpcy5tb2JpbGVDb2RlVGltZXIgPiAwKSByZXR1cm47DQogICAgICB0aGlzLiRyZWZzLmxvZ2luRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIGlmICghdmFsaWQpIHJldHVybjsNCiAgICAgICAgc2VuZFNtc0NvZGUodGhpcy5sb2dpbkZvcm0uZW1haWwpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLojrflj5bpqozor4HnoIHmiJDlip8iKQ0KICAgICAgICAgIHRoaXMubW9iaWxlQ29kZVRpbWVyID0gNjA7DQogICAgICAgICAgbGV0IG1zZ1RpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5tb2JpbGVDb2RlVGltZXIgPSB0aGlzLm1vYmlsZUNvZGVUaW1lciAtIDE7DQogICAgICAgICAgICBpZiAodGhpcy5tb2JpbGVDb2RlVGltZXIgPD0gMCkgew0KICAgICAgICAgICAgICBjbGVhckludGVydmFsKG1zZ1RpbWVyKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LCAxMDAwKTsNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template xmlns=\"\">\r\n  <div class=\"container\">\r\n    <!-- 登录区域 -->\r\n    <div class=\"content\">\r\n      <!-- 配图 -->\r\n      <div class=\"pic\"></div>\r\n      <!-- 表单 -->\r\n      <div class=\"field\">\r\n        <!-- [移动端]标题 -->\r\n        <h2 class=\"mobile-title\">\r\n          <h3 class=\"title\">QRCODE</h3>\r\n        </h2>\r\n\r\n        <!-- 表单 -->\r\n        <div class=\"form-cont\">\r\n          <el-tabs class=\"form\" v-model=\"loginForm.loginType\" style=\" float:none;\">\r\n            <el-tab-pane label=\"Email Verification Login\" name=\"sms\">\r\n            </el-tab-pane>\r\n        \r\n          </el-tabs>\r\n          <div>\r\n            <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"LoginRules\" class=\"login-form\">\r\n\r\n              <!-- 邮箱验证码登录 -->\r\n              <div v-if=\"loginForm.loginType === 'sms'\">\r\n                <el-form-item prop=\"email\">\r\n                  <el-input v-model=\"loginForm.email\" type=\"text\" auto-complete=\"off\" placeholder=\"Enter your email\">\r\n                    <svg-icon slot=\"prefix\" icon-class=\"email\" class=\"el-input__icon input-icon\"/>\r\n                  </el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"emailCode\">\r\n                  <el-input v-model=\"loginForm.emailCode\" type=\"text\" auto-complete=\"off\" placeholder=\"Email Verification Code\"\r\n                            class=\"sms-login-mobile-code-prefix\">\r\n                    <template>\r\n                      <svg-icon slot=\"prefix\" icon-class=\"email\" class=\"el-input__icon input-icon\"/>\r\n                    </template>\r\n                    <template slot=\"append\">\r\n                      <span v-if=\"mobileCodeTimer <= 0\" class=\"getMobileCode\" @click=\"getSmsCode\" style=\"cursor: pointer;\">Get verification code</span>\r\n                      <span v-if=\"mobileCodeTimer > 0\" class=\"getMobileCode\">{{ mobileCodeTimer }}seconds</span>\r\n                    </template>\r\n                  </el-input>\r\n                </el-form-item>\r\n              </div>\r\n\r\n              <!-- 下方的登录按钮 -->\r\n              <el-form-item style=\"width:100%;\">\r\n                <el-button :loading=\"loading\" size=\"medium\" type=\"primary\" style=\"width:100%;\"\r\n                    @click.native.prevent=\"SmsLogin\">\r\n                  <span v-if=\"!loading\">Log In</span>\r\n                  <span v-else>Logging In...</span>\r\n                </el-button>\r\n              </el-form-item>\r\n\r\n            </el-form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 图形验证码 -->\r\n<!--    <Verify ref=\"verify\" :captcha-type=\"'blockPuzzle'\" :img-size=\"{width:'400px',height:'200px'}\"-->\r\n<!--            @success=\"handleLogin\" />-->\r\n\r\n    <!-- footer -->\r\n    <div class=\"footer\">\r\n      Copyright © 2023-2024 QRCODE All Rights Reserved.\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {sendSmsCode, smsLogin} from \"@/api/login\";\r\nimport {getTenantIdByName} from \"@/api/system/tenant\";\r\nimport {SystemUserSocialTypeEnum} from \"@/utils/constants\";\r\nimport {getCaptchaEnable, getTenantEnable} from \"@/utils/ruoyi\";\r\nimport {\r\n  getPassword,\r\n  getRememberMe, getTenantName,\r\n  getUsername,\r\n  removePassword, removeRememberMe, removeTenantName,\r\n  removeUsername,\r\n  setPassword, setRememberMe, setTenantId, setTenantName, setToken,\r\n  setUsername\r\n} from \"@/utils/auth\";\r\n\r\nimport Verify from '@/components/Verifition/Verify';\r\nimport {resetUserPwd} from \"@/api/system/user\";\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  components: {\r\n    Verify\r\n  },\r\n  data() {\r\n    return {\r\n      codeUrl: \"\",\r\n      captchaEnable: false,\r\n      tenantEnable: false,\r\n      mobileCodeTimer: 0,\r\n      loginForm: {\r\n        loginType: \"sms\",\r\n        username: \"admin\",\r\n        password: \"admin123\",\r\n        captchaVerification: \"\",\r\n        email: \"\",\r\n        emailCode: \"\",\r\n        rememberMe: false,\r\n        tenantName: \"QRCODE\",\r\n      },\r\n      scene: 21,\r\n\r\n      LoginRules: {\r\n        username: [\r\n          {required: true, trigger: \"blur\", message: \"Username cannot be empty\"}\r\n        ],\r\n        password: [\r\n          {required: true, trigger: \"blur\", message: \"Password cannot be empty\"}\r\n        ],\r\n        email: [\r\n          {required: true, trigger: \"blur\", message: \"Email cannot be empty\"},\r\n          {\r\n            validator: function (rule, value, callback) {\r\n              if (/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(value) === false) {\r\n                callback(new Error(\"Invalid email format\"));\r\n              } else {\r\n                callback();\r\n              }\r\n            }, trigger: \"blur\"\r\n          }\r\n        ]\r\n      },\r\n      loading: false,\r\n      redirect: undefined,\r\n      // 枚举\r\n      // SysUserSocialTypeEnum: SystemUserSocialTypeEnum,\r\n    };\r\n  },\r\n  created() {\r\n    // 租户开关\r\n    // this.tenantEnable = getTenantEnable();\r\n    // if (this.tenantEnable) {\r\n    //   getTenantIdByName(this.loginForm.tenantName).then(res => { // 设置租户\r\n    //     const tenantId = res.data;\r\n    //     if (tenantId && tenantId >= 0) {\r\n    //       setTenantId(tenantId)\r\n    //     }\r\n    //   });\r\n    // }\r\n    // 验证码开关\r\n    // this.captchaEnable = getCaptchaEnable();\r\n    // 重定向地址\r\n    // this.redirect = this.$route.query.redirect ? decodeURIComponent(this.$route.query.redirect) : undefined;\r\n    // this.getCookie();\r\n  },\r\n  methods: {\r\n    // 邮箱登录\r\n    SmsLogin() {\r\n      const email = this.loginForm.email.trim()\r\n      const emailCode = this.loginForm.emailCode\r\n      return new Promise((resolve, reject) => {\r\n        smsLogin(email,emailCode).then(res => {\r\n          console.log(res)\r\n          console.log(res.msg)\r\n          if (res.msg === 'SUCCESS'){\r\n            this.$router.push({path:'/qrcode',query:{email}});\r\n\r\n          }else {\r\n            console.error(\"Incorrect verification code. Please retrieve it again~\")\r\n            this.$notify.error({\r\n              title: 'Error',\r\n              message: 'Incorrect verification code. Please retrieve it again.~'\r\n            });\r\n          }\r\n\r\n        }).catch(error => {\r\n          reject(error)\r\n        })\r\n      })\r\n    },\r\n    getCode() {\r\n      // 情况一，未开启：则直接登录\r\n      if (!this.captchaEnable) {\r\n        this.handleLogin({})\r\n        return;\r\n      }\r\n\r\n      // 情况二，已开启：则展示验证码；只有完成验证码的情况，才进行登录\r\n      // 弹出验证码\r\n      this.$refs.verify.show()\r\n    },\r\n    getCookie() {\r\n      const username = getUsername();\r\n      const password = getPassword();\r\n      const rememberMe = getRememberMe();\r\n      const tenantName = getTenantName();\r\n      this.loginForm = {\r\n        ...this.loginForm,\r\n        username: username ? username : this.loginForm.username,\r\n        password: password ? password : this.loginForm.password,\r\n        rememberMe: rememberMe ? getRememberMe() : false,\r\n        tenantName: tenantName ? tenantName : this.loginForm.tenantName,\r\n      };\r\n    },\r\n    handleLogin(captchaParams) {\r\n      this.$refs.loginForm.validate(valid => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          // // 设置 Cookie\r\n          // if (this.loginForm.rememberMe) {\r\n          //   setUsername(this.loginForm.username)\r\n          //   setPassword(this.loginForm.password)\r\n          //   setRememberMe(this.loginForm.rememberMe)\r\n          //   setTenantName(this.loginForm.tenantName)\r\n          // } else {\r\n          //   removeUsername()\r\n          //   removePassword()\r\n          //   removeRememberMe()\r\n          //   removeTenantName()\r\n          // }\r\n          this.loginForm.captchaVerification = captchaParams.captchaVerification\r\n          // 发起登陆\r\n          // console.log(\"发起登录\", this.loginForm);\r\n          this.$store.dispatch(this.loginForm.loginType === \"sms\" ? \"SmsLogin\" : \"Login\", this.loginForm).then(() => {\r\n            this.$router.push({path: this.redirect || \"/\"}).catch(() => {\r\n            });\r\n          }).catch(() => {\r\n            this.loading = false;\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    // async doSocialLogin(socialTypeEnum) {\r\n    //   // 设置登录中\r\n    //   this.loading = true;\r\n    //   let tenant = false;\r\n    //   if (this.tenantEnable) {\r\n    //     await this.$prompt('请输入租户名称', \"提示\", {\r\n    //       confirmButtonText: \"确定\",\r\n    //       cancelButtonText: \"取消\"\r\n    //     }).then(async ({value}) => {\r\n    //       await getTenantIdByName(value).then(res => {\r\n    //         const tenantId = res.data;\r\n    //         tenant = true\r\n    //         if (tenantId && tenantId >= 0) {\r\n    //           setTenantId(tenantId)\r\n    //         }\r\n    //       });\r\n    //     }).catch(() => {\r\n    //       // 取消登录按钮 loading状态\r\n    //       this.loading = false;\r\n    //\r\n    //       return false\r\n    //     });\r\n    //   } else {\r\n    //     tenant = true\r\n    //   }\r\n    //  if(tenant){\r\n    //    // 计算 redirectUri\r\n    //    const redirectUri = location.origin + '/social-login?'\r\n    //      + encodeURIComponent('type=' + socialTypeEnum.type + '&redirect=' + (this.redirect || \"/\")); // 重定向不能丢\r\n    //    // const redirectUri = 'http://127.0.0.1:48080/api/gitee/callback';\r\n    //    // const redirectUri = 'http://127.0.0.1:48080/api/dingtalk/callback';\r\n    //    // 进行跳转\r\n    //    socialAuthRedirect(socialTypeEnum.type, encodeURIComponent(redirectUri)).then((res) => {\r\n    //      // console.log(res.url);\r\n    //      window.location.href = res.data;\r\n    //    });\r\n    //  }\r\n    // },\r\n    /** ========== 以下为升级短信登录 ========== */\r\n    getSmsCode() {\r\n      if (this.mobileCodeTimer > 0) return;\r\n      this.$refs.loginForm.validate(valid => {\r\n        if (!valid) return;\r\n        sendSmsCode(this.loginForm.email).then(res => {\r\n          this.$modal.msgSuccess(\"获取验证码成功\")\r\n          this.mobileCodeTimer = 60;\r\n          let msgTimer = setInterval(() => {\r\n            this.mobileCodeTimer = this.mobileCodeTimer - 1;\r\n            if (this.mobileCodeTimer <= 0) {\r\n              clearInterval(msgTimer);\r\n            }\r\n          }, 1000);\r\n        });\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"~@/assets/styles/login.scss\";\r\n\r\n\r\n.oauth-login {\r\n  display: flex;\r\n  align-items: center;\r\n  cursor:pointer;\r\n}\r\n.oauth-login-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 10px;\r\n}\r\n.oauth-login-item img {\r\n  height: 25px;\r\n  width: 25px;\r\n}\r\n.oauth-login-item span:hover {\r\n  text-decoration: underline red;\r\n  color: red;\r\n}\r\n.sms-login-mobile-code-prefix {\r\n  :deep(.el-input__prefix) {\r\n    top: 22%;\r\n  }\r\n}\r\n</style>\r\n"]}]}