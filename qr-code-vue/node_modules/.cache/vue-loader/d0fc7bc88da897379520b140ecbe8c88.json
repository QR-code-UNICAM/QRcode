{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\system\\role\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\system\\role\\index.vue","mtime":1704630438085},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgew0KICBhZGRSb2xlLA0KICBjaGFuZ2VSb2xlU3RhdHVzLA0KICBkZWxSb2xlLA0KICBleHBvcnRSb2xlLA0KICBnZXRSb2xlLA0KICBsaXN0Um9sZSwNCiAgdXBkYXRlUm9sZQ0KfSBmcm9tICJAL2FwaS9zeXN0ZW0vcm9sZSI7DQppbXBvcnQge2xpc3RTaW1wbGVNZW51c30gZnJvbSAiQC9hcGkvc3lzdGVtL21lbnUiOw0KaW1wb3J0IHthc3NpZ25Sb2xlTWVudSwgbGlzdFJvbGVNZW51cywgYXNzaWduUm9sZURhdGFTY29wZX0gZnJvbSAiQC9hcGkvc3lzdGVtL3Blcm1pc3Npb24iOw0KaW1wb3J0IHtsaXN0U2ltcGxlRGVwdHN9IGZyb20gIkAvYXBpL3N5c3RlbS9kZXB0IjsNCmltcG9ydCB7Q29tbW9uU3RhdHVzRW51bSwgU3lzdGVtRGF0YVNjb3BlRW51bX0gZnJvbSAiQC91dGlscy9jb25zdGFudHMiOw0KaW1wb3J0IHtESUNUX1RZUEUsIGdldERpY3REYXRhc30gZnJvbSAiQC91dGlscy9kaWN0IjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiU3lzdGVtUm9sZSIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOmBrue9qeWxgg0KICAgICAgbG9hZGluZzogdHJ1ZSwNCiAgICAgIC8vIOWvvOWHuumBrue9qeWxgg0KICAgICAgZXhwb3J0TG9hZGluZzogZmFsc2UsDQogICAgICAvLyDmmL7npLrmkJzntKLmnaHku7YNCiAgICAgIHNob3dTZWFyY2g6IHRydWUsDQogICAgICAvLyDmgLvmnaHmlbANCiAgICAgIHRvdGFsOiAwLA0KICAgICAgLy8g6KeS6Imy6KGo5qC85pWw5o2uDQogICAgICByb2xlTGlzdDogW10sDQogICAgICAvLyDlvLnlh7rlsYLmoIfpopgNCiAgICAgIHRpdGxlOiAiIiwNCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxgg0KICAgICAgb3BlbjogZmFsc2UsDQogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYLvvIjmlbDmja7mnYPpmZDvvIkNCiAgICAgIG9wZW5EYXRhU2NvcGU6IGZhbHNlLA0KICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGC77yI6I+c5Y2V5p2D6ZmQ77yJDQogICAgICBvcGVuTWVudTogZmFsc2UsDQogICAgICBtZW51RXhwYW5kOiBmYWxzZSwNCiAgICAgIG1lbnVOb2RlQWxsOiBmYWxzZSwNCiAgICAgIGRlcHRFeHBhbmQ6IHRydWUsDQogICAgICBkZXB0Tm9kZUFsbDogZmFsc2UsDQogICAgICAvLyDoj5zljZXliJfooagNCiAgICAgIG1lbnVPcHRpb25zOiBbXSwNCiAgICAgIC8vIOmDqOmXqOWIl+ihqA0KICAgICAgZGVwdE9wdGlvbnM6IFtdLCAvLyDpg6jpl6jlsZ7mgKfnu5PmnoQNCiAgICAgIGRlcHRzOiBbXSwgLy8g6YOo6Zeo5YiX6KGoDQogICAgICAvLyDmn6Xor6Llj4LmlbANCiAgICAgIHF1ZXJ5UGFyYW1zOiB7DQogICAgICAgIHBhZ2VObzogMSwNCiAgICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgICBuYW1lOiB1bmRlZmluZWQsDQogICAgICAgIGNvZGU6IHVuZGVmaW5lZCwNCiAgICAgICAgc3RhdHVzOiB1bmRlZmluZWQsDQogICAgICAgIGNyZWF0ZVRpbWU6IFtdDQogICAgICB9LA0KICAgICAgLy8g6KGo5Y2V5Y+C5pWwDQogICAgICBmb3JtOiB7fSwNCiAgICAgIGRlZmF1bHRQcm9wczogew0KICAgICAgICBsYWJlbDogIm5hbWUiLA0KICAgICAgICBjaGlsZHJlbjogImNoaWxkcmVuIg0KICAgICAgfSwNCiAgICAgIC8vIOihqOWNleagoemqjA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgbmFtZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLop5LoibLlkI3np7DkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQ0KICAgICAgICBdLA0KICAgICAgICBjb2RlOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuinkuiJsuagh+ivhuS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9DQogICAgICAgIF0sDQogICAgICAgIHNvcnQ6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6KeS6Imy6aG65bqP5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0NCiAgICAgICAgXQ0KICAgICAgfSwNCg0KICAgICAgLy8g5p6a5Li+DQogICAgICBTeXNDb21tb25TdGF0dXNFbnVtOiBDb21tb25TdGF0dXNFbnVtLA0KICAgICAgU3lzRGF0YVNjb3BlRW51bTogU3lzdGVtRGF0YVNjb3BlRW51bSwNCiAgICAgIC8vIOaVsOaNruWtl+WFuA0KICAgICAgcm9sZVR5cGVEaWN0RGF0YXM6IGdldERpY3REYXRhcyhESUNUX1RZUEUuU1lTVEVNX1JPTEVfVFlQRSksDQogICAgICBzdGF0dXNEaWN0RGF0YXM6IGdldERpY3REYXRhcyhESUNUX1RZUEUuQ09NTU9OX1NUQVRVUyksDQogICAgICBkYXRhU2NvcGVEaWN0RGF0YXM6IGdldERpY3REYXRhcyhESUNUX1RZUEUuU1lTVEVNX0RBVEFfU0NPUEUpDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldExpc3QoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8qKiDmn6Xor6Lop5LoibLliJfooaggKi8NCiAgICBnZXRMaXN0KCkgew0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgIGxpc3RSb2xlKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4oDQogICAgICAgIHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLnJvbGVMaXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0Ow0KICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsOw0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICApOw0KICAgIH0sDQogICAgLy8g6KeS6Imy54q25oCB5L+u5pS5DQogICAgaGFuZGxlU3RhdHVzQ2hhbmdlKHJvdykgew0KICAgICAgLy8g5q2k5pe277yMcm93IOW3sue7j+WPmOaIkOebruagh+eKtuaAgeS6hu+8jOaJgOS7peWPr+S7peebtOaOpeaPkOS6pOivt+axguWSjOaPkOekug0KICAgICAgbGV0IHRleHQgPSByb3cuc3RhdHVzID09PSBDb21tb25TdGF0dXNFbnVtLkVOQUJMRSA/ICLlkK/nlKgiIDogIuWBnOeUqCI7DQogICAgICB0aGlzLiRtb2RhbC5jb25maXJtKCfnoa7orqTopoEiJyArIHRleHQgKyAnIiInICsgcm93Lm5hbWUgKyAnIuinkuiJsuWQlz8nKS50aGVuKGZ1bmN0aW9uKCkgew0KICAgICAgICAgIHJldHVybiBjaGFuZ2VSb2xlU3RhdHVzKHJvdy5pZCwgcm93LnN0YXR1cyk7DQogICAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3ModGV4dCArICLmiJDlip8iKTsNCiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oKSB7DQogICAgICAgICAgLy8g5byC5bi45pe277yM6ZyA6KaB5bCGIHJvdy5zdGF0dXMg54q25oCB6YeN572u5Zue5LmL5YmN55qEDQogICAgICAgICAgcm93LnN0YXR1cyA9IHJvdy5zdGF0dXMgPT09IENvbW1vblN0YXR1c0VudW0uRU5BQkxFID8gQ29tbW9uU3RhdHVzRW51bS5ESVNBQkxFDQogICAgICAgICAgICAgIDogQ29tbW9uU3RhdHVzRW51bS5FTkFCTEU7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g5Y+W5raI5oyJ6ZKuDQogICAgY2FuY2VsKCkgew0KICAgICAgdGhpcy5vcGVuID0gZmFsc2U7DQogICAgICB0aGlzLnJlc2V0KCk7DQogICAgfSwNCiAgICAvLyDlj5bmtojmjInpkq7vvIjmlbDmja7mnYPpmZDvvIkNCiAgICBjYW5jZWxEYXRhU2NvcGUoKSB7DQogICAgICB0aGlzLm9wZW5EYXRhU2NvcGUgPSBmYWxzZTsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICB9LA0KICAgIC8vIOWPlua2iOaMiemSru+8iOiPnOWNleadg+mZkO+8iQ0KICAgIGNhbmNlbE1lbnUoKSB7DQogICAgICB0aGlzLm9wZW5NZW51ID0gZmFsc2U7DQogICAgICB0aGlzLnJlc2V0KCk7DQogICAgfSwNCiAgICAvLyDooajljZXph43nva4NCiAgICByZXNldCgpIHsNCiAgICAgIGlmICh0aGlzLiRyZWZzLm1lbnUgIT09IHVuZGVmaW5lZCkgew0KICAgICAgICB0aGlzLiRyZWZzLm1lbnUuc2V0Q2hlY2tlZEtleXMoW10pOw0KICAgICAgfQ0KICAgICAgdGhpcy5tZW51RXhwYW5kID0gZmFsc2U7DQogICAgICB0aGlzLm1lbnVOb2RlQWxsID0gZmFsc2U7DQogICAgICB0aGlzLmRlcHRFeHBhbmQgPSB0cnVlOw0KICAgICAgdGhpcy5kZXB0Tm9kZUFsbCA9IGZhbHNlOw0KICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBuYW1lOiB1bmRlZmluZWQsDQogICAgICAgIGNvZGU6IHVuZGVmaW5lZCwNCiAgICAgICAgc29ydDogMCwNCiAgICAgICAgZGVwdElkczogW10sDQogICAgICAgIG1lbnVJZHM6IFtdLA0KICAgICAgICBkYXRhU2NvcGU6IHVuZGVmaW5lZCwNCiAgICAgICAgZGVwdENoZWNrU3RyaWN0bHk6IGZhbHNlLA0KICAgICAgICBtZW51Q2hlY2tTdHJpY3RseTogdHJ1ZSwNCiAgICAgICAgcmVtYXJrOiB1bmRlZmluZWQNCiAgICAgIH07DQogICAgICB0aGlzLnJlc2V0Rm9ybSgiZm9ybSIpOw0KICAgIH0sDQogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZVF1ZXJ5KCkgew0KICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTm8gPSAxOw0KICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgfSwNCiAgICAvKiog6YeN572u5oyJ6ZKu5pON5L2cICovDQogICAgcmVzZXRRdWVyeSgpIHsNCiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsNCiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsNCiAgICB9LA0KICAgIC8vIOagkeadg+mZkO+8iOWxleW8gC/mipjlj6DvvIkNCiAgICBoYW5kbGVDaGVja2VkVHJlZUV4cGFuZCh2YWx1ZSwgdHlwZSkgew0KICAgICAgaWYgKHR5cGUgPT09ICdtZW51Jykgew0KICAgICAgICBsZXQgdHJlZUxpc3QgPSB0aGlzLm1lbnVPcHRpb25zOw0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyZWVMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgdGhpcy4kcmVmcy5tZW51LnN0b3JlLm5vZGVzTWFwW3RyZWVMaXN0W2ldLmlkXS5leHBhbmRlZCA9IHZhbHVlOw0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdkZXB0Jykgew0KICAgICAgICBsZXQgdHJlZUxpc3QgPSB0aGlzLmRlcHRPcHRpb25zOw0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyZWVMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgdGhpcy4kcmVmcy5kZXB0LnN0b3JlLm5vZGVzTWFwW3RyZWVMaXN0W2ldLmlkXS5leHBhbmRlZCA9IHZhbHVlOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAvLyDmoJHmnYPpmZDvvIjlhajpgIkv5YWo5LiN6YCJ77yJDQogICAgaGFuZGxlQ2hlY2tlZFRyZWVOb2RlQWxsKHZhbHVlLCB0eXBlKSB7DQogICAgICBpZiAodHlwZSA9PT0gJ21lbnUnKSB7DQogICAgICAgIHRoaXMuJHJlZnMubWVudS5zZXRDaGVja2VkTm9kZXModmFsdWUgPyB0aGlzLm1lbnVPcHRpb25zOiBbXSk7DQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdkZXB0Jykgew0KICAgICAgICAvLyB0aGlzLiRyZWZzLmRlcHQuc2V0Q2hlY2tlZE5vZGVzKHZhbHVlID8gdGhpcy5kZXB0T3B0aW9uczogW10pOw0KICAgICAgICB0aGlzLiRyZWZzLmRlcHQuc2V0Q2hlY2tlZE5vZGVzKHZhbHVlID8gdGhpcy5kZXB0czogW10pOw0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g5qCR5p2D6ZmQ77yI54i25a2Q6IGU5Yqo77yJDQogICAgaGFuZGxlQ2hlY2tlZFRyZWVDb25uZWN0KHZhbHVlLCB0eXBlKSB7DQogICAgICBpZiAodHlwZSA9PT0gJ21lbnUnKSB7DQogICAgICAgIHRoaXMuZm9ybS5tZW51Q2hlY2tTdHJpY3RseSA9IHZhbHVlOw0KICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnZGVwdCcpIHsNCiAgICAgICAgdGhpcy5mb3JtLmRlcHRDaGVja1N0cmljdGx5ID0gIXZhbHVlOw0KICAgICAgfQ0KICAgIH0sDQogICAgLyoqIOaWsOWinuaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZUFkZCgpIHsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgIHRoaXMub3BlbiA9IHRydWU7DQogICAgICB0aGlzLnRpdGxlID0gIua3u+WKoOinkuiJsiI7DQogICAgfSwNCiAgICAvKiog5L+u5pS55oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlVXBkYXRlKHJvdykgew0KICAgICAgdGhpcy5yZXNldCgpOw0KICAgICAgY29uc3QgaWQgPSByb3cuaWQNCiAgICAgIGdldFJvbGUoaWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhOw0KICAgICAgICB0aGlzLm9wZW4gPSB0cnVlOw0KICAgICAgICB0aGlzLnRpdGxlID0gIuS/ruaUueinkuiJsiI7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDliIbphY3oj5zljZXmnYPpmZDmk43kvZwgKi8NCiAgICBoYW5kbGVNZW51KHJvdykgew0KICAgICAgdGhpcy5yZXNldCgpOw0KICAgICAgY29uc3QgaWQgPSByb3cuaWQNCiAgICAgIC8vIOWkhOeQhuS6hiBmb3JtIOeahOinkuiJsiBuYW1lIOWSjCBjb2RlIOeahOWxleekug0KICAgICAgdGhpcy5mb3JtLmlkID0gaWQ7DQogICAgICB0aGlzLmZvcm0ubmFtZSA9IHJvdy5uYW1lOw0KICAgICAgdGhpcy5mb3JtLmNvZGUgPSByb3cuY29kZTsNCiAgICAgIC8vIOaJk+W8gOW8ueeqlw0KICAgICAgdGhpcy5vcGVuTWVudSA9IHRydWU7DQogICAgICAvLyDojrflvpfoj5zljZXliJfooagNCiAgICAgIGxpc3RTaW1wbGVNZW51cygpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAvLyDlpITnkIYgbWVudU9wdGlvbnMg5Y+C5pWwDQogICAgICAgIHRoaXMubWVudU9wdGlvbnMgPSBbXTsNCiAgICAgICAgdGhpcy5tZW51T3B0aW9ucy5wdXNoKC4uLnRoaXMuaGFuZGxlVHJlZShyZXNwb25zZS5kYXRhLCAiaWQiKSk7DQogICAgICAgIC8vIOiOt+WPluinkuiJsuaLpeacieeahOiPnOWNleadg+mZkA0KICAgICAgICBsaXN0Um9sZU1lbnVzKGlkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAvLyDorr7nva7kuLrkuKXmoLzvvIzpgb/lhY3orr7nva7niLboioLngrnoh6rliqjpgInkuK3lrZDoioLngrnvvIzop6PlhrPljYrpgInkuK3pl67popgNCiAgICAgICAgICB0aGlzLmZvcm0ubWVudUNoZWNrU3RyaWN0bHkgPSB0cnVlDQogICAgICAgICAgLy8g6K6+572u6YCJ5LitDQogICAgICAgICAgdGhpcy4kcmVmcy5tZW51LnNldENoZWNrZWRLZXlzKHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgIC8vIOiuvue9ruS4uumdnuS4peagvO+8jOe7p+e7reS9v+eUqOWNiumAieS4rQ0KICAgICAgICAgIHRoaXMuZm9ybS5tZW51Q2hlY2tTdHJpY3RseSA9IGZhbHNlDQogICAgICAgIH0pDQogICAgICB9KTsNCg0KICAgIH0sDQogICAgLyoqIOWIhumFjeaVsOaNruadg+mZkOaTjeS9nCAqLw0KICAgIGhhbmRsZURhdGFTY29wZShyb3cpIHsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgIC8vIOWkhOeQhuS6hiBmb3JtIOeahOinkuiJsiBuYW1lIOWSjCBjb2RlIOeahOWxleekug0KICAgICAgdGhpcy5mb3JtLmlkID0gcm93LmlkOw0KICAgICAgdGhpcy5mb3JtLm5hbWUgPSByb3cubmFtZTsNCiAgICAgIHRoaXMuZm9ybS5jb2RlID0gcm93LmNvZGU7DQogICAgICAvLyDmiZPlvIDlvLnnqpcNCiAgICAgIHRoaXMub3BlbkRhdGFTY29wZSA9IHRydWU7DQogICAgICAvLyDojrflvpfpg6jpl6jliJfooagNCiAgICAgIGxpc3RTaW1wbGVEZXB0cygpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAvLyDlpITnkIYgZGVwdE9wdGlvbnMg5Y+C5pWwDQogICAgICAgIHRoaXMuZGVwdE9wdGlvbnMgPSBbXTsNCiAgICAgICAgdGhpcy5kZXB0T3B0aW9ucy5wdXNoKC4uLnRoaXMuaGFuZGxlVHJlZShyZXNwb25zZS5kYXRhLCAiaWQiKSk7DQogICAgICAgIHRoaXMuZGVwdHMgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAvLyB0aGlzLmRlcHRJZHMgPSByZXNwb25zZS5kYXRhLm1hcCh4ID0+IHguaWQpOw0KICAgICAgICAvLyDojrflvpfop5LoibLmi6XmnInnmoTmlbDmja7mnYPpmZANCiAgICAgICAgZ2V0Um9sZShyb3cuaWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuZm9ybS5kYXRhU2NvcGUgPSByZXNwb25zZS5kYXRhLmRhdGFTY29wZTsNCiAgICAgICAgICB0aGlzLiRyZWZzLmRlcHQuc2V0Q2hlY2tlZEtleXMocmVzcG9uc2UuZGF0YS5kYXRhU2NvcGVEZXB0SWRzLCBmYWxzZSk7DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovDQogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBpZiAodGhpcy5mb3JtLmlkICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgIHVwZGF0ZVJvbGUodGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi5L+u5pS55oiQ5YqfIik7DQogICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlOw0KICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBhZGRSb2xlKHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuaWsOWinuaIkOWKnyIpOw0KICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsNCiAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqIOaPkOS6pOaMiemSru+8iOaVsOaNruadg+mZkO+8iSAqLw0KICAgIHN1Ym1pdERhdGFTY29wZTogZnVuY3Rpb24oKSB7DQogICAgICBpZiAodGhpcy5mb3JtLmlkICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgYXNzaWduUm9sZURhdGFTY29wZSh7DQogICAgICAgICAgcm9sZUlkOiB0aGlzLmZvcm0uaWQsDQogICAgICAgICAgZGF0YVNjb3BlOiB0aGlzLmZvcm0uZGF0YVNjb3BlLA0KICAgICAgICAgIGRhdGFTY29wZURlcHRJZHM6IHRoaXMuZm9ybS5kYXRhU2NvcGUgIT09IFN5c3RlbURhdGFTY29wZUVudW0uREVQVF9DVVNUT00gPyBbXSA6DQogICAgICAgICAgICAgIHRoaXMuJHJlZnMuZGVwdC5nZXRDaGVja2VkS2V5cygpDQogICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOw0KICAgICAgICAgIHRoaXMub3BlbkRhdGFTY29wZSA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKiDmj5DkuqTmjInpkq7vvIjoj5zljZXmnYPpmZDvvIkgKi8NCiAgICBzdWJtaXRNZW51OiBmdW5jdGlvbigpIHsNCiAgICAgIGlmICh0aGlzLmZvcm0uaWQgIT09IHVuZGVmaW5lZCkgew0KICAgICAgICBhc3NpZ25Sb2xlTWVudSh7DQogICAgICAgICAgcm9sZUlkOiB0aGlzLmZvcm0uaWQsDQogICAgICAgICAgbWVudUlkczogWy4uLnRoaXMuJHJlZnMubWVudS5nZXRDaGVja2VkS2V5cygpLCAuLi50aGlzLiRyZWZzLm1lbnUuZ2V0SGFsZkNoZWNrZWRLZXlzKCldDQogICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOw0KICAgICAgICAgIHRoaXMub3Blbk1lbnUgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlRGVsZXRlKHJvdykgew0KICAgICAgY29uc3QgaWRzID0gcm93LmlkIHx8IHRoaXMuaWRzOw0KICAgICAgdGhpcy4kbW9kYWwuY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk6KeS6Imy57yW5Y+35Li6IicgKyBpZHMgKyAnIueahOaVsOaNrumhuT8nKS50aGVuKGZ1bmN0aW9uKCkgew0KICAgICAgICAgIHJldHVybiBkZWxSb2xlKGlkcyk7DQogICAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOw0KICAgICAgfSkuY2F0Y2goKCkgPT4ge30pOw0KICAgIH0sDQogICAgLyoqIOWvvOWHuuaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZUV4cG9ydCgpIHsNCiAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gdGhpcy5xdWVyeVBhcmFtczsNCiAgICAgIHRoaXMuJG1vZGFsLmNvbmZpcm0oJ+aYr+WQpuehruiupOWvvOWHuuaJgOacieinkuiJsuaVsOaNrumhuT8nKS50aGVuKGZ1bmN0aW9uKCkgew0KICAgICAgICAgIHRoaXMuZXhwb3J0TG9hZGluZyA9IHRydWU7DQogICAgICAgICAgcmV0dXJuIGV4cG9ydFJvbGUocXVlcnlQYXJhbXMpOw0KICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLiRkb3dubG9hZC5leGNlbChyZXNwb25zZSwgJ+inkuiJsuaVsOaNri54bHMnKTsNCiAgICAgICAgICB0aGlzLmV4cG9ydExvYWRpbmcgPSBmYWxzZTsNCiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAsKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/role","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <doc-alert title=\"功能权限\" url=\"https://doc.iocoder.cn/resource-permission\" />\r\n    <doc-alert title=\"数据权限\" url=\"https://doc.iocoder.cn/data-permission\" />\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" v-show=\"showSearch\" :inline=\"true\">\r\n      <el-form-item label=\"角色名称\" prop=\"name\">\r\n        <el-input v-model=\"queryParams.name\" placeholder=\"请输入角色名称\" clearable size=\"small\" style=\"width: 240px\"\r\n                  @keyup.enter.native=\"handleQuery\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"角色标识\" prop=\"code\">\r\n        <el-input v-model=\"queryParams.code\" placeholder=\"请输入角色标识\" clearable size=\"small\" style=\"width: 240px\"\r\n                  @keyup.enter.native=\"handleQuery\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"状态\" prop=\"status\">\r\n        <el-select v-model=\"queryParams.status\" placeholder=\"角色状态\" clearable size=\"small\" style=\"width: 240px\">\r\n          <el-option v-for=\"dict in statusDictDatas\" :key=\"parseInt(dict.value)\" :label=\"dict.label\" :value=\"parseInt(dict.value)\"/>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"创建时间\" prop=\"createTime\">\r\n        <el-date-picker v-model=\"queryParams.createTime\" style=\"width: 240px\" value-format=\"yyyy-MM-dd HH:mm:ss\" type=\"daterange\"\r\n                        range-separator=\"-\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" :default-time=\"['00:00:00', '23:59:59']\" />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"primary\" plain icon=\"el-icon-plus\" size=\"mini\" @click=\"handleAdd\"\r\n                   v-hasPermi=\"['system:role:create']\">新增</el-button>\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"warning\" icon=\"el-icon-download\" size=\"mini\" @click=\"handleExport\" :loading=\"exportLoading\"\r\n                   v-hasPermi=\"['system:role:export']\">导出</el-button>\r\n      </el-col>\r\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n    </el-row>\r\n\r\n    <el-table v-loading=\"loading\" :data=\"roleList\">\r\n      <el-table-column label=\"角色编号\" prop=\"id\" width=\"120\" />\r\n      <el-table-column label=\"角色名称\" prop=\"name\" :show-overflow-tooltip=\"true\" width=\"150\" />\r\n      <el-table-column label=\"角色标识\" prop=\"code\" :show-overflow-tooltip=\"true\" width=\"150\" />\r\n      <el-table-column label=\"角色类型\" prop=\"type\" width=\"80\">\r\n        <template v-slot=\"scope\">\r\n          <dict-tag :type=\"DICT_TYPE.SYSTEM_ROLE_TYPE\" :value=\"scope.row.type\"/>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"显示顺序\" prop=\"sort\" width=\"100\" />\r\n      <el-table-column label=\"状态\" align=\"center\" width=\"100\">\r\n        <template v-slot=\"scope\">\r\n          <el-switch v-model=\"scope.row.status\" :active-value=\"0\" :inactive-value=\"1\" @change=\"handleStatusChange(scope.row)\"/>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n        <template v-slot=\"scope\">\r\n          <span>{{ parseTime(scope.row.createTime) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n        <template v-slot=\"scope\">\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(scope.row)\"\r\n                     v-hasPermi=\"['system:role:update']\">修改</el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-circle-check\" @click=\"handleMenu(scope.row)\"\r\n                     v-hasPermi=\"['system:permission:assign-role-menu']\">菜单权限</el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-circle-check\" @click=\"handleDataScope(scope.row)\"\r\n                     v-hasPermi=\"['system:permission:assign-role-data-scope']\">数据权限</el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row)\"\r\n                     v-hasPermi=\"['system:role:delete']\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"queryParams.pageNo\" :limit.sync=\"queryParams.pageSize\"\r\n                @pagination=\"getList\"/>\r\n\r\n    <!-- 添加或修改角色配置对话框 -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n        <el-form-item label=\"角色名称\" prop=\"name\">\r\n          <el-input v-model=\"form.name\" placeholder=\"请输入角色名称\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"角色标识\" prop=\"code\">\r\n          <el-input v-model=\"form.code\" placeholder=\"请输入角色标识\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"角色顺序\" prop=\"sort\">\r\n          <el-input-number v-model=\"form.sort\" controls-position=\"right\" :min=\"0\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\">\r\n          <el-input v-model=\"form.remark\" type=\"textarea\" placeholder=\"请输入内容\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 分配角色的数据权限对话框 -->\r\n    <el-dialog title=\"分配数据权限\" :visible.sync=\"openDataScope\" width=\"500px\" append-to-body>\r\n      <el-form :model=\"form\" label-width=\"80px\">\r\n        <el-form-item label=\"角色名称\">\r\n          <el-input v-model=\"form.name\" :disabled=\"true\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"角色标识\">\r\n          <el-input v-model=\"form.code\" :disabled=\"true\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"权限范围\">\r\n          <el-select v-model=\"form.dataScope\">\r\n            <el-option\r\n              v-for=\"item in dataScopeDictDatas\"\r\n              :key=\"parseInt(item.value)\"\r\n              :label=\"item.label\"\r\n              :value=\"parseInt(item.value)\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"数据权限\" v-show=\"form.dataScope === SysDataScopeEnum.DEPT_CUSTOM\">\r\n          <el-checkbox :checked=\"!form.deptCheckStrictly\" @change=\"handleCheckedTreeConnect($event, 'dept')\">父子联动(选中父节点，自动选择子节点)</el-checkbox>\r\n          <el-checkbox v-model=\"deptExpand\" @change=\"handleCheckedTreeExpand($event, 'dept')\">展开/折叠</el-checkbox>\r\n          <el-checkbox v-model=\"deptNodeAll\" @change=\"handleCheckedTreeNodeAll($event, 'dept')\">全选/全不选</el-checkbox>\r\n          <el-tree\r\n            class=\"tree-border\"\r\n            :data=\"deptOptions\"\r\n            show-checkbox\r\n            default-expand-all\r\n            ref=\"dept\"\r\n            node-key=\"id\"\r\n            :check-strictly=\"form.deptCheckStrictly\"\r\n            empty-text=\"加载中，请稍后\"\r\n            :props=\"defaultProps\"\r\n          ></el-tree>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitDataScope\">确 定</el-button>\r\n        <el-button @click=\"cancelDataScope\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 分配角色的菜单权限对话框 -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"openMenu\" width=\"500px\" append-to-body>\r\n      <el-form :model=\"form\" label-width=\"80px\">\r\n        <el-form-item label=\"角色名称\">\r\n          <el-input v-model=\"form.name\" :disabled=\"true\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"角色标识\">\r\n          <el-input v-model=\"form.code\" :disabled=\"true\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"菜单权限\">\r\n          <el-checkbox v-model=\"menuExpand\" @change=\"handleCheckedTreeExpand($event, 'menu')\">展开/折叠</el-checkbox>\r\n          <el-checkbox v-model=\"menuNodeAll\" @change=\"handleCheckedTreeNodeAll($event, 'menu')\">全选/全不选</el-checkbox>\r\n          <el-tree class=\"tree-border\" :data=\"menuOptions\" show-checkbox ref=\"menu\" node-key=\"id\"\r\n              :check-strictly=\"form.menuCheckStrictly\" empty-text=\"加载中，请稍后\" :props=\"defaultProps\"></el-tree>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitMenu\">确 定</el-button>\r\n        <el-button @click=\"cancelMenu\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  addRole,\r\n  changeRoleStatus,\r\n  delRole,\r\n  exportRole,\r\n  getRole,\r\n  listRole,\r\n  updateRole\r\n} from \"@/api/system/role\";\r\nimport {listSimpleMenus} from \"@/api/system/menu\";\r\nimport {assignRoleMenu, listRoleMenus, assignRoleDataScope} from \"@/api/system/permission\";\r\nimport {listSimpleDepts} from \"@/api/system/dept\";\r\nimport {CommonStatusEnum, SystemDataScopeEnum} from \"@/utils/constants\";\r\nimport {DICT_TYPE, getDictDatas} from \"@/utils/dict\";\r\n\r\nexport default {\r\n  name: \"SystemRole\",\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      // 导出遮罩层\r\n      exportLoading: false,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 角色表格数据\r\n      roleList: [],\r\n      // 弹出层标题\r\n      title: \"\",\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 是否显示弹出层（数据权限）\r\n      openDataScope: false,\r\n      // 是否显示弹出层（菜单权限）\r\n      openMenu: false,\r\n      menuExpand: false,\r\n      menuNodeAll: false,\r\n      deptExpand: true,\r\n      deptNodeAll: false,\r\n      // 菜单列表\r\n      menuOptions: [],\r\n      // 部门列表\r\n      deptOptions: [], // 部门属性结构\r\n      depts: [], // 部门列表\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n        name: undefined,\r\n        code: undefined,\r\n        status: undefined,\r\n        createTime: []\r\n      },\r\n      // 表单参数\r\n      form: {},\r\n      defaultProps: {\r\n        label: \"name\",\r\n        children: \"children\"\r\n      },\r\n      // 表单校验\r\n      rules: {\r\n        name: [\r\n          { required: true, message: \"角色名称不能为空\", trigger: \"blur\" }\r\n        ],\r\n        code: [\r\n          { required: true, message: \"角色标识不能为空\", trigger: \"blur\" }\r\n        ],\r\n        sort: [\r\n          { required: true, message: \"角色顺序不能为空\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n\r\n      // 枚举\r\n      SysCommonStatusEnum: CommonStatusEnum,\r\n      SysDataScopeEnum: SystemDataScopeEnum,\r\n      // 数据字典\r\n      roleTypeDictDatas: getDictDatas(DICT_TYPE.SYSTEM_ROLE_TYPE),\r\n      statusDictDatas: getDictDatas(DICT_TYPE.COMMON_STATUS),\r\n      dataScopeDictDatas: getDictDatas(DICT_TYPE.SYSTEM_DATA_SCOPE)\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    /** 查询角色列表 */\r\n    getList() {\r\n      this.loading = true;\r\n      listRole(this.queryParams).then(\r\n        response => {\r\n          this.roleList = response.data.list;\r\n          this.total = response.data.total;\r\n          this.loading = false;\r\n        }\r\n      );\r\n    },\r\n    // 角色状态修改\r\n    handleStatusChange(row) {\r\n      // 此时，row 已经变成目标状态了，所以可以直接提交请求和提示\r\n      let text = row.status === CommonStatusEnum.ENABLE ? \"启用\" : \"停用\";\r\n      this.$modal.confirm('确认要\"' + text + '\"\"' + row.name + '\"角色吗?').then(function() {\r\n          return changeRoleStatus(row.id, row.status);\r\n        }).then(() => {\r\n          this.$modal.msgSuccess(text + \"成功\");\r\n        }).catch(function() {\r\n          // 异常时，需要将 row.status 状态重置回之前的\r\n          row.status = row.status === CommonStatusEnum.ENABLE ? CommonStatusEnum.DISABLE\r\n              : CommonStatusEnum.ENABLE;\r\n        });\r\n    },\r\n    // 取消按钮\r\n    cancel() {\r\n      this.open = false;\r\n      this.reset();\r\n    },\r\n    // 取消按钮（数据权限）\r\n    cancelDataScope() {\r\n      this.openDataScope = false;\r\n      this.reset();\r\n    },\r\n    // 取消按钮（菜单权限）\r\n    cancelMenu() {\r\n      this.openMenu = false;\r\n      this.reset();\r\n    },\r\n    // 表单重置\r\n    reset() {\r\n      if (this.$refs.menu !== undefined) {\r\n        this.$refs.menu.setCheckedKeys([]);\r\n      }\r\n      this.menuExpand = false;\r\n      this.menuNodeAll = false;\r\n      this.deptExpand = true;\r\n      this.deptNodeAll = false;\r\n      this.form = {\r\n        id: undefined,\r\n        name: undefined,\r\n        code: undefined,\r\n        sort: 0,\r\n        deptIds: [],\r\n        menuIds: [],\r\n        dataScope: undefined,\r\n        deptCheckStrictly: false,\r\n        menuCheckStrictly: true,\r\n        remark: undefined\r\n      };\r\n      this.resetForm(\"form\");\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageNo = 1;\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n    // 树权限（展开/折叠）\r\n    handleCheckedTreeExpand(value, type) {\r\n      if (type === 'menu') {\r\n        let treeList = this.menuOptions;\r\n        for (let i = 0; i < treeList.length; i++) {\r\n          this.$refs.menu.store.nodesMap[treeList[i].id].expanded = value;\r\n        }\r\n      } else if (type === 'dept') {\r\n        let treeList = this.deptOptions;\r\n        for (let i = 0; i < treeList.length; i++) {\r\n          this.$refs.dept.store.nodesMap[treeList[i].id].expanded = value;\r\n        }\r\n      }\r\n    },\r\n    // 树权限（全选/全不选）\r\n    handleCheckedTreeNodeAll(value, type) {\r\n      if (type === 'menu') {\r\n        this.$refs.menu.setCheckedNodes(value ? this.menuOptions: []);\r\n      } else if (type === 'dept') {\r\n        // this.$refs.dept.setCheckedNodes(value ? this.deptOptions: []);\r\n        this.$refs.dept.setCheckedNodes(value ? this.depts: []);\r\n      }\r\n    },\r\n    // 树权限（父子联动）\r\n    handleCheckedTreeConnect(value, type) {\r\n      if (type === 'menu') {\r\n        this.form.menuCheckStrictly = value;\r\n      } else if (type === 'dept') {\r\n        this.form.deptCheckStrictly = !value;\r\n      }\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd() {\r\n      this.reset();\r\n      this.open = true;\r\n      this.title = \"添加角色\";\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.reset();\r\n      const id = row.id\r\n      getRole(id).then(response => {\r\n        this.form = response.data;\r\n        this.open = true;\r\n        this.title = \"修改角色\";\r\n      });\r\n    },\r\n    /** 分配菜单权限操作 */\r\n    handleMenu(row) {\r\n      this.reset();\r\n      const id = row.id\r\n      // 处理了 form 的角色 name 和 code 的展示\r\n      this.form.id = id;\r\n      this.form.name = row.name;\r\n      this.form.code = row.code;\r\n      // 打开弹窗\r\n      this.openMenu = true;\r\n      // 获得菜单列表\r\n      listSimpleMenus().then(response => {\r\n        // 处理 menuOptions 参数\r\n        this.menuOptions = [];\r\n        this.menuOptions.push(...this.handleTree(response.data, \"id\"));\r\n        // 获取角色拥有的菜单权限\r\n        listRoleMenus(id).then(response => {\r\n          // 设置为严格，避免设置父节点自动选中子节点，解决半选中问题\r\n          this.form.menuCheckStrictly = true\r\n          // 设置选中\r\n          this.$refs.menu.setCheckedKeys(response.data);\r\n          // 设置为非严格，继续使用半选中\r\n          this.form.menuCheckStrictly = false\r\n        })\r\n      });\r\n\r\n    },\r\n    /** 分配数据权限操作 */\r\n    handleDataScope(row) {\r\n      this.reset();\r\n      // 处理了 form 的角色 name 和 code 的展示\r\n      this.form.id = row.id;\r\n      this.form.name = row.name;\r\n      this.form.code = row.code;\r\n      // 打开弹窗\r\n      this.openDataScope = true;\r\n      // 获得部门列表\r\n      listSimpleDepts().then(response => {\r\n        // 处理 deptOptions 参数\r\n        this.deptOptions = [];\r\n        this.deptOptions.push(...this.handleTree(response.data, \"id\"));\r\n        this.depts = response.data;\r\n        // this.deptIds = response.data.map(x => x.id);\r\n        // 获得角色拥有的数据权限\r\n        getRole(row.id).then(response => {\r\n          this.form.dataScope = response.data.dataScope;\r\n          this.$refs.dept.setCheckedKeys(response.data.dataScopeDeptIds, false);\r\n        });\r\n      });\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm: function() {\r\n      this.$refs[\"form\"].validate(valid => {\r\n        if (valid) {\r\n          if (this.form.id !== undefined) {\r\n            updateRole(this.form).then(response => {\r\n              this.$modal.msgSuccess(\"修改成功\");\r\n              this.open = false;\r\n              this.getList();\r\n            });\r\n          } else {\r\n            addRole(this.form).then(response => {\r\n              this.$modal.msgSuccess(\"新增成功\");\r\n              this.open = false;\r\n              this.getList();\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    /** 提交按钮（数据权限） */\r\n    submitDataScope: function() {\r\n      if (this.form.id !== undefined) {\r\n        assignRoleDataScope({\r\n          roleId: this.form.id,\r\n          dataScope: this.form.dataScope,\r\n          dataScopeDeptIds: this.form.dataScope !== SystemDataScopeEnum.DEPT_CUSTOM ? [] :\r\n              this.$refs.dept.getCheckedKeys()\r\n        }).then(response => {\r\n          this.$modal.msgSuccess(\"修改成功\");\r\n          this.openDataScope = false;\r\n          this.getList();\r\n        });\r\n      }\r\n    },\r\n    /** 提交按钮（菜单权限） */\r\n    submitMenu: function() {\r\n      if (this.form.id !== undefined) {\r\n        assignRoleMenu({\r\n          roleId: this.form.id,\r\n          menuIds: [...this.$refs.menu.getCheckedKeys(), ...this.$refs.menu.getHalfCheckedKeys()]\r\n        }).then(response => {\r\n          this.$modal.msgSuccess(\"修改成功\");\r\n          this.openMenu = false;\r\n          this.getList();\r\n        });\r\n      }\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      const ids = row.id || this.ids;\r\n      this.$modal.confirm('是否确认删除角色编号为\"' + ids + '\"的数据项?').then(function() {\r\n          return delRole(ids);\r\n        }).then(() => {\r\n          this.getList();\r\n          this.$modal.msgSuccess(\"删除成功\");\r\n      }).catch(() => {});\r\n    },\r\n    /** 导出按钮操作 */\r\n    handleExport() {\r\n      const queryParams = this.queryParams;\r\n      this.$modal.confirm('是否确认导出所有角色数据项?').then(function() {\r\n          this.exportLoading = true;\r\n          return exportRole(queryParams);\r\n        }).then(response => {\r\n          this.$download.excel(response, '角色数据.xls');\r\n          this.exportLoading = false;\r\n      }).catch(() => {});\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}