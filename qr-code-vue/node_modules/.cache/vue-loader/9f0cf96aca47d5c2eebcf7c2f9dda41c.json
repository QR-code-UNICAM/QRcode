{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\mall\\promotion\\seckill\\activity\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\mall\\promotion\\seckill\\activity\\index.vue","mtime":1704630437957},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBnZXRTa3VPcHRpb25MaXN0IH0gZnJvbSAiQC9hcGkvbWFsbC9wcm9kdWN0L3NrdSI7DQppbXBvcnQgeyBjcmVhdGVTZWNraWxsQWN0aXZpdHksIHVwZGF0ZVNlY2tpbGxBY3Rpdml0eSwgY2xvc2VTZWNraWxsQWN0aXZpdHksIGRlbGV0ZVNlY2tpbGxBY3Rpdml0eSwgZ2V0U2Vja2lsbEFjdGl2aXR5LCBnZXRTZWNraWxsQWN0aXZpdHlQYWdlLCBleHBvcnRTZWNraWxsQWN0aXZpdHlFeGNlbCB9IGZyb20gIkAvYXBpL21hbGwvcHJvbW90aW9uL3NlY2tpbGxBY3Rpdml0eSI7DQppbXBvcnQgeyBnZXRTZWNraWxsVGltZUxpc3QgfSBmcm9tICJAL2FwaS9tYWxsL3Byb21vdGlvbi9zZWNraWxsVGltZSI7DQppbXBvcnQgeyBkZWVwQ2xvbmUgfSBmcm9tICJAL3V0aWxzIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJQcm9tb3Rpb25TZWNraWxsQWN0aXZpdHkiLA0KICAgIGNvbXBvbmVudHM6IHsNCiAgICB9LA0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAvLyDpga7nvanlsYINCiAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAgICAgICAvLyDmmL7npLrmkJzntKLmnaHku7YNCiAgICAgICAgICAgIHNob3dTZWFyY2g6IHRydWUsDQogICAgICAgICAgICAvLyDmgLvmnaHmlbANCiAgICAgICAgICAgIHRvdGFsOiAwLA0KICAgICAgICAgICAgLy8g56eS5p2A5rS75Yqo5YiX6KGoDQogICAgICAgICAgICBsaXN0OiBbXSwNCiAgICAgICAgICAgIC8vIOenkuadgOWcuuasoeWIl+ihqA0KICAgICAgICAgICAgc2Vja2lsbFRpbWVMaXN0OiBbXSwNCiAgICAgICAgICAgIC8vIOW8ueWHuuWxguagh+mimA0KICAgICAgICAgICAgdGl0bGU6ICIiLA0KICAgICAgICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGCDQogICAgICAgICAgICBvcGVuOiBmYWxzZSwNCiAgICAgICAgICAgIC8vIOafpeivouWPguaVsA0KICAgICAgICAgICAgcXVlcnlQYXJhbXM6IHsNCiAgICAgICAgICAgICAgICBwYWdlTm86IDEsDQogICAgICAgICAgICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgICAgICAgICAgIG5hbWU6IG51bGwsDQogICAgICAgICAgICAgICAgc3RhdHVzOiBudWxsLA0KICAgICAgICAgICAgICAgIHRpbWVJZDogbnVsbCwNCiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBbXSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvLyDooajljZXlj4LmlbANCiAgICAgICAgICAgIGZvcm06IHsNCiAgICAgICAgICAgICAgICBza3VJZHM6IFtdLCAvLyDpgInkuK3nmoQgU0tVDQogICAgICAgICAgICAgICAgcHJvZHVjdHM6IFtdLCAvLyDllYblk4Hkv6Hmga8NCiAgICAgICAgICAgICAgICB0aW1lSWRzOiBbXSwgLy/pgInkuK3nmoTnp5LmnYDlnLrmrKFpZA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8vIOWVhuWTgSBTS1Ug5YiX6KGoDQogICAgICAgICAgICBwcm9kdWN0U2t1czogW10sDQogICAgICAgICAgICAvLyDooajljZXmoKHpqowNCiAgICAgICAgICAgIHJ1bGVzOiB7DQogICAgICAgICAgICAgICAgbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLnp5LmnYDmtLvliqjlkI3np7DkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICAgICAgICAgICAgc3RhdHVzOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIua0u+WKqOeKtuaAgeS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9XSwNCiAgICAgICAgICAgICAgICBzdGFydEFuZEVuZFRpbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5rS75Yqo5pe26Ze05LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH1dLA0KICAgICAgICAgICAgICAgIHNvcnQ6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5o6S5bqP5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH1dLA0KICAgICAgICAgICAgICAgIHRpbWVJZHM6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi56eS5p2A5Zy65qyh5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH1dLA0KICAgICAgICAgICAgICAgIHRvdGFsUHJpY2U6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K6i5Y2V5a6e5LuY6YeR6aKd77yM5Y2V5L2N77ya5YiG5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH1dLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgfSwNCiAgICB3YXRjaDogew0KICAgICAgICAkcm91dGU6ICdnZXRMaXN0Jw0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICAvKiog5p+l6K+i5YiX6KGoICovDQogICAgICAgIGdldExpc3QoKSB7DQogICAgICAgICAgICAvLyDku47np5LmnYDml7bmrrXot7Povazov4fmnaXlubbpnovluKZ0aW1lSWTlj4LmlbDov5vooYzmn6Xor6INCiAgICAgICAgICAgIGNvbnN0IHRpbWVJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMudGltZUlkOw0KICAgICAgICAgICAgaWYgKHRpbWVJZCkgew0KICAgICAgICAgICAgICAgIHRoaXMucXVlcnlQYXJhbXMudGltZUlkID0gdGltZUlkDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgICAgICAgLy8g5omn6KGM5p+l6K+iDQogICAgICAgICAgICBnZXRTZWNraWxsQWN0aXZpdHlQYWdlKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEubGlzdCwgIuafpeivouWHuueahOWAvCIpOw0KICAgICAgICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDsNCiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDsNCiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgaWYgKHRpbWVJZCkgew0KICAgICAgICAgICAgICAgIC8v5p+l6K+i5a6M5oiQ5ZCO6K6+572u5Li656m6DQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLnRpbWVJZCA9IHVuZGVmaW5lZA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8g6I635b6XIFNLVSDllYblk4HliJfooagNCiAgICAgICAgICAgIGdldFNrdU9wdGlvbkxpc3QoKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RTa3VzID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgLy8g6I635Y+W5Y+C5LiO5Zy65qyh5YiX6KGoDQogICAgICAgICAgICBnZXRTZWNraWxsVGltZUxpc3QoKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlY2tpbGxUaW1lTGlzdCA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqIOWPlua2iOaMiemSriAqLw0KICAgICAgICBjYW5jZWwoKSB7DQogICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsNCiAgICAgICAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqIOihqOWNlemHjee9riAqLw0KICAgICAgICByZXNldCgpIHsNCiAgICAgICAgICAgIHRoaXMuZm9ybSA9IHsNCiAgICAgICAgICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICAgICAgICAgIG5hbWU6IHVuZGVmaW5lZCwNCiAgICAgICAgICAgICAgICBzdGF0dXM6IHVuZGVmaW5lZCwNCiAgICAgICAgICAgICAgICByZW1hcms6IHVuZGVmaW5lZCwNCiAgICAgICAgICAgICAgICBzdGFydFRpbWU6IHVuZGVmaW5lZCwNCiAgICAgICAgICAgICAgICBlbmRUaW1lOiB1bmRlZmluZWQsDQogICAgICAgICAgICAgICAgc29ydDogdW5kZWZpbmVkLA0KICAgICAgICAgICAgICAgIHRpbWVJZHM6IFtdLA0KICAgICAgICAgICAgICAgIHRvdGFsUHJpY2U6IHVuZGVmaW5lZCwNCiAgICAgICAgICAgICAgICBza3VJZHM6IFtdLA0KICAgICAgICAgICAgICAgIHByb2R1Y3RzOiBbXSwNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICB0aGlzLnJlc2V0Rm9ybSgiZm9ybSIpOw0KICAgICAgICB9LA0KICAgICAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovDQogICAgICAgIGhhbmRsZVF1ZXJ5KCkgew0KICAgICAgICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTm8gPSAxOw0KICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgIH0sDQogICAgICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8NCiAgICAgICAgcmVzZXRRdWVyeSgpIHsNCiAgICAgICAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsNCiAgICAgICAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsNCiAgICAgICAgfSwNCiAgICAgICAgLyoq5omT5byA56eS5p2A5Zy65qyh566h55CG6aG16Z2iICovDQogICAgICAgIG9wZW5TZWNraWxsVGltZSgpIHsNCiAgICAgICAgICAgIHRoaXMuJHRhYi5vcGVuUGFnZSgi56eS5p2A5Zy65qyh566h55CGIiwgIi9wcm9tb3Rpb24vc2Vja2lsbC10aW1lIik7DQogICAgICAgIH0sDQogICAgICAgIC8qKiDmlrDlop7mjInpkq7mk43kvZwgKi8NCiAgICAgICAgaGFuZGxlQWRkKCkgew0KICAgICAgICAgICAgdGhpcy5yZXNldCgpOw0KICAgICAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMudGl0bGUgPSAi5re75Yqg56eS5p2A5rS75YqoIjsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqIOS/ruaUueaMiemSruaTjeS9nCAqLw0KICAgICAgICBoYW5kbGVVcGRhdGUocm93KSB7DQogICAgICAgICAgICB0aGlzLnJlc2V0KCk7DQogICAgICAgICAgICBjb25zdCBpZCA9IHJvdy5pZDsNCiAgICAgICAgICAgIGdldFNlY2tpbGxBY3Rpdml0eShpZCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5mb3JtID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgICAgICAvLyDkv67mlLnmlbDmja4NCiAgICAgICAgICAgICAgICB0aGlzLmZvcm0uc3RhcnRBbmRFbmRUaW1lID0gW3Jlc3BvbnNlLmRhdGEuc3RhcnRUaW1lLCByZXNwb25zZS5kYXRhLmVuZFRpbWVdOw0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5za3VJZHMgPSByZXNwb25zZS5kYXRhLnByb2R1Y3RzLm1hcChpdGVtID0+IGl0ZW0uc2t1SWQpOw0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5wcm9kdWN0cy5mb3JFYWNoKHByb2R1Y3QgPT4gew0KICAgICAgICAgICAgICAgICAgICAvLyDojrflvpflr7nlupTnmoQgU0tVIOS/oeaBrw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBza3UgPSB0aGlzLnByb2R1Y3RTa3VzLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBwcm9kdWN0LnNrdUlkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFza3UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAvLyDorr7nva7llYblk4Hkv6Hmga8NCiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdC5uYW1lID0gc2t1Lm5hbWU7DQogICAgICAgICAgICAgICAgICAgIHByb2R1Y3Quc3B1TmFtZSA9IHNrdS5zcHVOYW1lOw0KICAgICAgICAgICAgICAgICAgICBwcm9kdWN0LnByaWNlID0gc2t1LnByaWNlOw0KICAgICAgICAgICAgICAgICAgICBwcm9kdWN0LnByb2R1Y3RTdG9jayA9IHNrdS5zdG9jazsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHByb2R1Y3QsICdzZWNraWxsU3RvY2snLCBwcm9kdWN0LnN0b2NrKTsNCiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdC5zZWNraWxsUHJpY2UgPSBwcm9kdWN0LnNlY2tpbGxQcmljZSAhPT0gdW5kZWZpbmVkID8gcHJvZHVjdC5zZWNraWxsUHJpY2UgLyAxMDAgOiB1bmRlZmluZWQ7DQoNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAvLyDmiZPlvIDlvLnnqpcNCiAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSB0cnVlOw0KICAgICAgICAgICAgICAgIHRoaXMudGl0bGUgPSAi5L+u5pS56ZmQ5pe25oqY5omj5rS75YqoIjsNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8qKiDmj5DkuqTmjInpkq4gKi8NCiAgICAgICAgc3VibWl0Rm9ybSgpIHsNCiAgICAgICAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIOWkhOeQhuaVsOaNrg0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBkZWVwQ2xvbmUodGhpcy5mb3JtKTsNCiAgICAgICAgICAgICAgICBkYXRhLnN0YXJ0VGltZSA9IHRoaXMuZm9ybS5zdGFydEFuZEVuZFRpbWVbMF07DQogICAgICAgICAgICAgICAgZGF0YS5lbmRUaW1lID0gdGhpcy5mb3JtLnN0YXJ0QW5kRW5kVGltZVsxXTsNCiAgICAgICAgICAgICAgICBkYXRhLnByb2R1Y3RzLmZvckVhY2gocHJvZHVjdCA9PiB7DQogICAgICAgICAgICAgICAgICAgIHByb2R1Y3Quc3RvY2sgPSBwcm9kdWN0LnNlY2tpbGxTdG9jazsNCiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdC5zZWNraWxsUHJpY2UgPSBwcm9kdWN0LnNlY2tpbGxQcmljZSAhPT0gdW5kZWZpbmVkID8gcHJvZHVjdC5zZWNraWxsUHJpY2UgKiAxMDAgOiB1bmRlZmluZWQ7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgLy8g5L+u5pS555qE5o+Q5LqkDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybS5pZCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY2tpbGxBY3Rpdml0eShkYXRhKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8g5re75Yqg55qE5o+Q5LqkDQogICAgICAgICAgICAgICAgY3JlYXRlU2Vja2lsbEFjdGl2aXR5KGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8iKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIC8qKiDlhbPpl63mjInpkq7mk43kvZwgKi8NCiAgICAgICAgaGFuZGxlQ2xvc2Uocm93KSB7DQogICAgICAgICAgICBjb25zdCBpZCA9IHJvdy5pZDsNCiAgICAgICAgICAgIHRoaXMuJG1vZGFsLmNvbmZpcm0oJ+aYr+WQpuehruiupOWFs+mXreenkuadgOa0u+WKqOe8luWPt+S4uiInICsgaWQgKyAnIueahOaVsOaNrumhuT8nKS50aGVuKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gY2xvc2VTZWNraWxsQWN0aXZpdHkoaWQpOw0KICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi5YWz6Zet5oiQ5YqfIik7DQogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7IH0pOw0KICAgICAgICB9LA0KICAgICAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovDQogICAgICAgIGhhbmRsZURlbGV0ZShyb3cpIHsNCiAgICAgICAgICAgIGNvbnN0IGlkID0gcm93LmlkOw0KICAgICAgICAgICAgdGhpcy4kbW9kYWwuY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk56eS5p2A5rS75Yqo57yW5Y+35Li6IicgKyBpZCArICci55qE5pWw5o2u6aG5PycpLnRoZW4oZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGVTZWNraWxsQWN0aXZpdHkoaWQpOw0KICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi5Yig6Zmk5oiQ5YqfIik7DQogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7IH0pOw0KICAgICAgICB9LA0KICAgICAgICAvKiog5om56YeP5L+u5pS55ZWG5ZOB56eS5p2A5Lu377yM56eS5p2A5bqT5a2Y77yM5q+P5Lq66ZmQ6LSt5pWw6YePICovDQogICAgICAgIGJhdGNoRWRpdFByb2R1Y3QoZWRpdFR5cGUpIHsNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdFByb2R1Y3RzID0gdGhpcy4kcmVmcy5wcm9kdWN0c1RhYmxlLnNlbGVjdGlvbjsNCiAgICAgICAgICAgIGlmIChzZWxlY3RQcm9kdWN0cy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dFcnJvcigi6K+36YCJ5oup6ZyA6KaB5L+u5pS555qE5ZWG5ZOBIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IHByb21wdFRpdGxlID0gJ+ivt+i+k+WFpSc7DQogICAgICAgICAgICBsZXQgcmVndWxhclBhdHRlcm4gPSAvXltcc1xTXSouKlteXHNdW1xzXFNdKiQvOyAvLyDliKTmlq3pnZ7nqbrvvIzkuJTpnZ7nqbrmoLwNCiAgICAgICAgICAgIC8v6ZmQ6LSt5pWwDQogICAgICAgICAgICBpZiAoZWRpdFR5cGUgPT09ICdsaW1pdEJ1eUNvdW50Jykgew0KICAgICAgICAgICAgICAgIHByb21wdFRpdGxlID0gJ+mZkOi0reaVsCc7DQogICAgICAgICAgICAgICAgcmVndWxhclBhdHRlcm4gPSAvXlswLTldKiQvOyAvL+aVsOWtlw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy/np5LmnYDku7cNCiAgICAgICAgICAgIGlmIChlZGl0VHlwZSA9PT0gJ3NlY2tpbGxQcmljZScpIHsNCiAgICAgICAgICAgICAgICBwcm9tcHRUaXRsZSA9ICfnp5LmnYDku7co5YWDKSc7DQogICAgICAgICAgICAgICAgcmVndWxhclBhdHRlcm4gPSAvXlswLTldKyhcLlswLTldezEsMn0pPyQvOyAvLyDmnInkuIDkvY3miJbkuKTkvY3lsI/mlbDnmoTmraPmlbANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8v56eS5p2A5bqT5a2YDQogICAgICAgICAgICBpZiAoZWRpdFR5cGUgPT09ICdzZWNraWxsU3RvY2snKSB7DQogICAgICAgICAgICAgICAgcHJvbXB0VGl0bGUgPSAn56eS5p2A5bqT5a2YJzsNCiAgICAgICAgICAgICAgICByZWd1bGFyUGF0dGVybiA9IC9eWzAtOV0qJC87IC8v5pWw5a2XDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRoaXMuJHByb21wdChwcm9tcHRUaXRsZSwgJ+aPkOekuicsIHsNCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+S/neWtmCcsDQogICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgICAgICAgICAgaW5wdXRQYXR0ZXJuOiByZWd1bGFyUGF0dGVybiwNCiAgICAgICAgICAgICAgICBpbnB1dEVycm9yTWVzc2FnZTogcHJvbXB0VGl0bGUgKyAn5qC85byP5LiN5q2j56GuJw0KICAgICAgICAgICAgfSkudGhlbigoeyB2YWx1ZSB9KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGVkaXRUeXBlID09PSAnbGltaXRCdXlDb3VudCcpIHsNCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0UHJvZHVjdHMuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5saW1pdEJ1eUNvdW50ID0gdmFsdWU7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChlZGl0VHlwZSA9PT0gJ3NlY2tpbGxQcmljZScpIHsNCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0UHJvZHVjdHMuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZWNraWxsUHJpY2UgPSB2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGVkaXRUeXBlID09PSAnc2Vja2lsbFN0b2NrJykgew0KICAgICAgICAgICAgICAgICAgICBzZWxlY3RQcm9kdWN0cy5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNlY2tpbGxTdG9jayA9IHZhbHVlOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pLmNhdGNoKCk7DQogICAgICAgIH0sDQogICAgICAgIC8qKiDlvZMgRm9ybSDnmoQgU0tVIOWPkeeUn+WPmOWMluaXtiAqLw0KICAgICAgICBjaGFuZ2VGb3JtU2t1KHNrdUlkcykgew0KICAgICAgICAgICAgLy8g5aSE55CG44CQ5paw5aKe44CRDQogICAgICAgICAgICBza3VJZHMuZm9yRWFjaChza3VJZCA9PiB7DQogICAgICAgICAgICAgICAgLy8g6I635b6X5a+55bqU55qEIFNLVSDkv6Hmga8NCiAgICAgICAgICAgICAgICBjb25zdCBza3UgPSB0aGlzLnByb2R1Y3RTa3VzLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBza3VJZCk7DQogICAgICAgICAgICAgICAgaWYgKCFza3UpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyDliKTmlq3lt7LlrZjlnKjvvIznm7TmjqXot7Pov4cNCiAgICAgICAgICAgICAgICBjb25zdCBwcm9kdWN0ID0gdGhpcy5mb3JtLnByb2R1Y3RzLmZpbmQoaXRlbSA9PiBpdGVtLnNrdUlkID09PSBza3VJZCk7DQogICAgICAgICAgICAgICAgaWYgKHByb2R1Y3QpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmZvcm0ucHJvZHVjdHMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgIHNrdUlkOiBza3UuaWQsDQogICAgICAgICAgICAgICAgICAgIG5hbWU6IHNrdS5uYW1lLA0KICAgICAgICAgICAgICAgICAgICBwcmljZTogc2t1LnByaWNlLA0KICAgICAgICAgICAgICAgICAgICBwcm9kdWN0U3RvY2s6IHNrdS5zdG9jaywNCiAgICAgICAgICAgICAgICAgICAgc3B1SWQ6IHNrdS5zcHVJZCwNCiAgICAgICAgICAgICAgICAgICAgc3B1TmFtZTogc2t1LnNwdU5hbWUsDQogICAgICAgICAgICAgICAgICAgIGxpbWl0QnV5Q291bnQ6IDEsDQogICAgICAgICAgICAgICAgICAgIHNlY2tpbGxTdG9jazogc2t1LnN0b2NrLA0KICAgICAgICAgICAgICAgICAgICBzZWNraWxsUHJpY2U6IHNrdS5wcmljZSwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgLy8g5aSE55CG44CQ56e76Zmk44CRDQogICAgICAgICAgICB0aGlzLmZvcm0ucHJvZHVjdHMubWFwKChwcm9kdWN0LCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgIGlmICghc2t1SWRzLmluY2x1ZGVzKHByb2R1Y3Quc2t1SWQpKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5wcm9kdWN0cy5zcGxpY2UoaW5kZXgsIDEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICAvKiog56e76ZmkIEZvcm0g55qEIFNLVSAqLw0KICAgICAgICByZW1vdmVGb3JtU2t1KHNrdUlkKSB7DQogICAgICAgICAgICB0aGlzLmZvcm0uc2t1SWRzLm1hcCgoaWQsIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHNrdUlkID09PSBpZCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm0uc2t1SWRzLnNwbGljZShpbmRleCwgMSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLmNoYW5nZUZvcm1Ta3UodGhpcy5mb3JtLnNrdUlkcyk7DQogICAgICAgIH0sDQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA4LA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/mall/promotion/seckill/activity","sourcesContent":["<template>\r\n    <div class=\"app-container\">\r\n      <doc-alert title=\"功能开启\" url=\"https://doc.iocoder.cn/mall/build/\" />\r\n\r\n        <!-- 搜索工作栏 -->\r\n        <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\"\r\n            label-width=\"68px\">\r\n            <el-form-item label=\"活动名称\" prop=\"name\">\r\n                <el-input v-model=\"queryParams.name\" placeholder=\"请输入秒杀活动名称\" clearable\r\n                    @keyup.enter.native=\"handleQuery\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"活动状态\" prop=\"status\">\r\n                <el-select v-model=\"queryParams.status\" placeholder=\"请选择活动状态\" clearable size=\"small\">\r\n                    <el-option v-for=\"dict in this.getDictDatas(DICT_TYPE.PROMOTION_ACTIVITY_STATUS)\" :key=\"dict.value\"\r\n                        :label=\"dict.label\" :value=\"dict.value\" />\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"参与场次\" prop=\"timeId\">\r\n                <el-select v-model=\"queryParams.timeId\" placeholder=\"请选择参与场次\" clearable size=\"small\">\r\n                    <el-option v-for=\"item in seckillTimeList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"创建时间\" prop=\"createTime\">\r\n                <el-date-picker v-model=\"queryParams.createTime\" style=\"width: 240px\" value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n                    type=\"daterange\" range-separator=\"-\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"\r\n                    :default-time=\"['00:00:00', '23:59:59']\" />\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleQuery\">搜索</el-button>\r\n                <el-button icon=\"el-icon-refresh\" @click=\"resetQuery\">重置</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n\r\n        <!-- 操作工具栏 -->\r\n        <el-row :gutter=\"10\" class=\"mb8\">\r\n            <el-col :span=\"1.5\">\r\n                <el-button type=\"primary\" plain icon=\"el-icon-plus\" size=\"mini\" @click=\"handleAdd\"\r\n                    v-hasPermi=\"['promotion:seckill-activity:create']\">新增秒杀活动</el-button>\r\n            </el-col>\r\n            <el-col :span=\"1.5\">\r\n                <el-button type=\"primary\" plain icon=\"el-icon-menu\" size=\"mini\" @click=\"openSeckillTime\"\r\n                    v-hasPermi=\"['promotion:seckill-activity:create']\">管理参与场次</el-button>\r\n            </el-col>\r\n            <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n        </el-row>\r\n\r\n        <!-- 列表 -->\r\n        <el-table v-loading=\"loading\" :data=\"list\">\r\n            <el-table-column label=\"活动名称\" align=\"center\" prop=\"name\" />\r\n            <el-table-column label=\"活动状态\" align=\"center\" prop=\"status\">\r\n                <template v-slot=\"scope\">\r\n                    <dict-tag :type=\"DICT_TYPE.PROMOTION_ACTIVITY_STATUS\" :value=\"scope.row.status\" />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"参与场次\" prop=\"timeIds\" width=\"250\">\r\n                <template v-slot=\"scope\">\r\n                    <span v-for=\"item in seckillTimeList\" :key=\"item.id\"\r\n                        v-if=\"scope.row.timeIds.includes(item.id)\">\r\n                        <el-tag style=\"margin:4px;\" size=\"small\">{{ item.name }}</el-tag>\r\n                    </span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"活动开始时间\" align=\"center\" prop=\"startTime\" width=\"190\">\r\n                <template v-slot=\"scope\">\r\n                    <span>{{ \"开始: \" + parseTime(scope.row.startTime) }}</span>\r\n                    <span>{{ \"结束: \" + parseTime(scope.row.endTime) }}</span>\r\n                </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"付款订单数\" align=\"center\" prop=\"orderCount\" />\r\n            <el-table-column label=\"付款人数\" align=\"center\" prop=\"userCount\" />\r\n            <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n                <template v-slot=\"scope\">\r\n                    <span>{{ parseTime(scope.row.createTime) }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n                <template v-slot=\"scope\">\r\n                    <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(scope.row)\"\r\n                        v-hasPermi=\"['promotion:seckill-activity:update']\">修改</el-button>\r\n                    <el-button size=\"mini\" type=\"text\" icon=\"el-icon-close\" @click=\"handleClose(scope.row)\"\r\n                        v-hasPermi=\"['promotion:seckill-activity:delete']\">关闭</el-button>\r\n                    <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row)\"\r\n                        v-hasPermi=\"['promotion:seckill-activity:delete']\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <!-- 分页组件 -->\r\n        <pagination v-show=\"total > 0\" :total=\"total\" :page.sync=\"queryParams.pageNo\" :limit.sync=\"queryParams.pageSize\"\r\n            @pagination=\"getList\" />\r\n\r\n        <!-- 对话框(添加 / 修改) -->\r\n        <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"1200px\" v-dialogDrag append-to-body>\r\n            <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n                <el-form-item label=\"活动名称\" prop=\"name\">\r\n                    <el-input v-model=\"form.name\" placeholder=\"请输入秒杀活动名称\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"活动时间\" prop=\"startAndEndTime\">\r\n                    <el-date-picker clearable v-model=\"form.startAndEndTime\" type=\"datetimerange\"\r\n                        value-format=\"timestamp\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"\r\n                        style=\"width: 1080px\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"排序\" prop=\"sort\">\r\n                    <el-input-number v-model=\"form.sort\" controls-position=\"right\" :min=\"0\" :max=\"10000\">\r\n                    </el-input-number>\r\n                </el-form-item>\r\n                <el-form-item label=\"备注\" prop=\"remark\">\r\n                    <el-input type=\"textarea\" v-model=\"form.remark\" placeholder=\"请输入备注\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"场次选择\">\r\n                    <el-select v-model=\"form.timeIds\" placeholder=\"请选择参与场次\" clearable size=\"small\" multiple filterable\r\n                        style=\"width: 880px\">\r\n                        <el-option v-for=\"item in seckillTimeList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\r\n                            <span style=\"float: left\">{{ item.name + ': { ' }} {{ item.startTime }} -- {{ item.endTime +\r\n                                    ' }'\r\n                            }}</span>\r\n                            <span style=\"float: right; color: #8492a6; font-size: 13px\"></span>\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"商品选择\">\r\n                    <el-select v-model=\"form.skuIds\" placeholder=\"请选择活动商品\" clearable size=\"small\" multiple filterable\r\n                        style=\"width: 880px\" @change=\"changeFormSku\">\r\n                        <el-option v-for=\"item in productSkus\" :key=\"item.id\" :label=\"item.spuName + ' ' + item.name\"\r\n                            :value=\"item.id\">\r\n                            <span style=\"float: left\">{{ item.spuName }} &nbsp; {{ item.name }}</span>\r\n                            <span style=\"float: right; color: #8492a6; font-size: 13px\">￥{{ (item.price /\r\n                                    100.0).toFixed(2)\r\n                            }}</span>\r\n                        </el-option>\r\n                    </el-select>\r\n                    <el-row>\r\n                        <el-button type=\"primary\" size=\"mini\" @click=\"batchEditProduct('limitBuyCount')\">限购</el-button>\r\n                        <el-button type=\"primary\" size=\"mini\" @click=\"batchEditProduct('seckillPrice')\">秒杀价</el-button>\r\n                        <el-button type=\"primary\" size=\"mini\" @click=\"batchEditProduct('seckillStock')\">秒杀库存</el-button>\r\n                    </el-row>\r\n                    <el-table v-loading=\"loading\" ref=\"productsTable\" :data=\"form.products\">\r\n                        <el-table-column type=\"selection\" width=\"55\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"商品名称\" align=\"center\" width=\"200\">\r\n                            <template v-slot=\"scope\">\r\n                                {{ scope.row.spuName }} &nbsp; {{ scope.row.name }}\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"商品价格\" align=\"center\" prop=\"price\">\r\n                            <template v-slot=\"scope\">\r\n                                ￥{{ (scope.row.price / 100.0).toFixed(2) }}\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"库存\" align=\"center\" prop=\"productStock\" />\r\n                        <el-table-column label=\"限购(0为不限购)\" align=\"center\" width=\"150\">\r\n                            <template v-slot=\"scope\">\r\n                                <el-input-number v-model=\"scope.row.limitBuyCount\" size=\"mini\" :min=\"0\" :max=\"10000\">\r\n                                </el-input-number>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"秒杀价(元)\" align=\"center\" width=\"150\">\r\n                            <template v-slot=\"scope\">\r\n                                <el-input-number v-model=\"scope.row.seckillPrice\" size=\"mini\" :precision=\"2\" :min=\"0\"\r\n                                    :max=\"10000\">\r\n                                </el-input-number>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"秒杀库存\" align=\"center\" width=\"150\" prop=\"seckillStock\">\r\n                            <template v-slot=\"scope\">\r\n                                <el-input-number v-model=\"scope.row.seckillStock\" size=\"mini\" :min=\"0\" :max=\"10000\">\r\n                                </el-input-number>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n                            <template v-slot=\"scope\">\r\n                                <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\"\r\n                                    @click=\"removeFormSku(scope.row.skuId)\">删除\r\n                                </el-button>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n                <el-button @click=\"cancel\">取 消</el-button>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSkuOptionList } from \"@/api/mall/product/sku\";\r\nimport { createSeckillActivity, updateSeckillActivity, closeSeckillActivity, deleteSeckillActivity, getSeckillActivity, getSeckillActivityPage, exportSeckillActivityExcel } from \"@/api/mall/promotion/seckillActivity\";\r\nimport { getSeckillTimeList } from \"@/api/mall/promotion/seckillTime\";\r\nimport { deepClone } from \"@/utils\";\r\n\r\nexport default {\r\n    name: \"PromotionSeckillActivity\",\r\n    components: {\r\n    },\r\n    data() {\r\n        return {\r\n            // 遮罩层\r\n            loading: true,\r\n            // 显示搜索条件\r\n            showSearch: true,\r\n            // 总条数\r\n            total: 0,\r\n            // 秒杀活动列表\r\n            list: [],\r\n            // 秒杀场次列表\r\n            seckillTimeList: [],\r\n            // 弹出层标题\r\n            title: \"\",\r\n            // 是否显示弹出层\r\n            open: false,\r\n            // 查询参数\r\n            queryParams: {\r\n                pageNo: 1,\r\n                pageSize: 10,\r\n                name: null,\r\n                status: null,\r\n                timeId: null,\r\n                createTime: [],\r\n            },\r\n            // 表单参数\r\n            form: {\r\n                skuIds: [], // 选中的 SKU\r\n                products: [], // 商品信息\r\n                timeIds: [], //选中的秒杀场次id\r\n            },\r\n            // 商品 SKU 列表\r\n            productSkus: [],\r\n            // 表单校验\r\n            rules: {\r\n                name: [{ required: true, message: \"秒杀活动名称不能为空\", trigger: \"blur\" }],\r\n                status: [{ required: true, message: \"活动状态不能为空\", trigger: \"blur\" }],\r\n                startAndEndTime: [{ required: true, message: \"活动时间不能为空\", trigger: \"blur\" }],\r\n                sort: [{ required: true, message: \"排序不能为空\", trigger: \"blur\" }],\r\n                timeIds: [{ required: true, message: \"秒杀场次不能为空\", trigger: \"blur\" }],\r\n                totalPrice: [{ required: true, message: \"订单实付金额，单位：分不能为空\", trigger: \"blur\" }],\r\n            }\r\n        };\r\n    },\r\n    created() {\r\n        this.getList();\r\n    },\r\n    watch: {\r\n        $route: 'getList'\r\n    },\r\n    methods: {\r\n        /** 查询列表 */\r\n        getList() {\r\n            // 从秒杀时段跳转过来并鞋带timeId参数进行查询\r\n            const timeId = this.$route.params && this.$route.params.timeId;\r\n            if (timeId) {\r\n                this.queryParams.timeId = timeId\r\n            }\r\n            this.loading = true;\r\n            // 执行查询\r\n            getSeckillActivityPage(this.queryParams).then(response => {\r\n                console.log(response.data.list, \"查询出的值\");\r\n                this.list = response.data.list;\r\n                this.total = response.data.total;\r\n                this.loading = false;\r\n            });\r\n            if (timeId) {\r\n                //查询完成后设置为空\r\n                this.$route.params.timeId = undefined\r\n            }\r\n            // 获得 SKU 商品列表\r\n            getSkuOptionList().then(response => {\r\n                this.productSkus = response.data;\r\n            });\r\n            // 获取参与场次列表\r\n            getSeckillTimeList().then(response => {\r\n                this.seckillTimeList = response.data;\r\n            });\r\n        },\r\n        /** 取消按钮 */\r\n        cancel() {\r\n            this.open = false;\r\n            this.reset();\r\n        },\r\n        /** 表单重置 */\r\n        reset() {\r\n            this.form = {\r\n                id: undefined,\r\n                name: undefined,\r\n                status: undefined,\r\n                remark: undefined,\r\n                startTime: undefined,\r\n                endTime: undefined,\r\n                sort: undefined,\r\n                timeIds: [],\r\n                totalPrice: undefined,\r\n                skuIds: [],\r\n                products: [],\r\n            };\r\n            this.resetForm(\"form\");\r\n        },\r\n        /** 搜索按钮操作 */\r\n        handleQuery() {\r\n            this.queryParams.pageNo = 1;\r\n            this.getList();\r\n        },\r\n        /** 重置按钮操作 */\r\n        resetQuery() {\r\n            this.resetForm(\"queryForm\");\r\n            this.handleQuery();\r\n        },\r\n        /**打开秒杀场次管理页面 */\r\n        openSeckillTime() {\r\n            this.$tab.openPage(\"秒杀场次管理\", \"/promotion/seckill-time\");\r\n        },\r\n        /** 新增按钮操作 */\r\n        handleAdd() {\r\n            this.reset();\r\n            this.open = true;\r\n            this.title = \"添加秒杀活动\";\r\n        },\r\n        /** 修改按钮操作 */\r\n        handleUpdate(row) {\r\n            this.reset();\r\n            const id = row.id;\r\n            getSeckillActivity(id).then(response => {\r\n                this.form = response.data;\r\n                // 修改数据\r\n                this.form.startAndEndTime = [response.data.startTime, response.data.endTime];\r\n                this.form.skuIds = response.data.products.map(item => item.skuId);\r\n                this.form.products.forEach(product => {\r\n                    // 获得对应的 SKU 信息\r\n                    const sku = this.productSkus.find(item => item.id === product.skuId);\r\n                    if (!sku) {\r\n                        return;\r\n                    }\r\n                    // 设置商品信息\r\n                    product.name = sku.name;\r\n                    product.spuName = sku.spuName;\r\n                    product.price = sku.price;\r\n                    product.productStock = sku.stock;\r\n                    this.$set(product, 'seckillStock', product.stock);\r\n                    product.seckillPrice = product.seckillPrice !== undefined ? product.seckillPrice / 100 : undefined;\r\n\r\n                });\r\n                // 打开弹窗\r\n                this.open = true;\r\n                this.title = \"修改限时折扣活动\";\r\n            })\r\n        },\r\n        /** 提交按钮 */\r\n        submitForm() {\r\n            this.$refs[\"form\"].validate(valid => {\r\n                if (!valid) {\r\n                    return;\r\n                }\r\n                // 处理数据\r\n                const data = deepClone(this.form);\r\n                data.startTime = this.form.startAndEndTime[0];\r\n                data.endTime = this.form.startAndEndTime[1];\r\n                data.products.forEach(product => {\r\n                    product.stock = product.seckillStock;\r\n                    product.seckillPrice = product.seckillPrice !== undefined ? product.seckillPrice * 100 : undefined;\r\n                });\r\n                // 修改的提交\r\n                if (this.form.id != null) {\r\n                    updateSeckillActivity(data).then(response => {\r\n                        this.$modal.msgSuccess(\"修改成功\");\r\n                        this.open = false;\r\n                        this.getList();\r\n                    });\r\n                    return;\r\n                }\r\n                // 添加的提交\r\n                createSeckillActivity(data).then(response => {\r\n                    this.$modal.msgSuccess(\"新增成功\");\r\n                    this.open = false;\r\n                    this.getList();\r\n                });\r\n            });\r\n        },\r\n        /** 关闭按钮操作 */\r\n        handleClose(row) {\r\n            const id = row.id;\r\n            this.$modal.confirm('是否确认关闭秒杀活动编号为\"' + id + '\"的数据项?').then(function () {\r\n                return closeSeckillActivity(id);\r\n            }).then(() => {\r\n                this.getList();\r\n                this.$modal.msgSuccess(\"关闭成功\");\r\n            }).catch(() => { });\r\n        },\r\n        /** 删除按钮操作 */\r\n        handleDelete(row) {\r\n            const id = row.id;\r\n            this.$modal.confirm('是否确认删除秒杀活动编号为\"' + id + '\"的数据项?').then(function () {\r\n                return deleteSeckillActivity(id);\r\n            }).then(() => {\r\n                this.getList();\r\n                this.$modal.msgSuccess(\"删除成功\");\r\n            }).catch(() => { });\r\n        },\r\n        /** 批量修改商品秒杀价，秒杀库存，每人限购数量 */\r\n        batchEditProduct(editType) {\r\n            const selectProducts = this.$refs.productsTable.selection;\r\n            if (selectProducts.length === 0) {\r\n                this.$modal.msgError(\"请选择需要修改的商品\");\r\n                return;\r\n            }\r\n            let promptTitle = '请输入';\r\n            let regularPattern = /^[\\s\\S]*.*[^\\s][\\s\\S]*$/; // 判断非空，且非空格\r\n            //限购数\r\n            if (editType === 'limitBuyCount') {\r\n                promptTitle = '限购数';\r\n                regularPattern = /^[0-9]*$/; //数字\r\n            }\r\n            //秒杀价\r\n            if (editType === 'seckillPrice') {\r\n                promptTitle = '秒杀价(元)';\r\n                regularPattern = /^[0-9]+(\\.[0-9]{1,2})?$/; // 有一位或两位小数的正数\r\n            }\r\n            //秒杀库存\r\n            if (editType === 'seckillStock') {\r\n                promptTitle = '秒杀库存';\r\n                regularPattern = /^[0-9]*$/; //数字\r\n            }\r\n\r\n            this.$prompt(promptTitle, '提示', {\r\n                confirmButtonText: '保存',\r\n                cancelButtonText: '取消',\r\n                inputPattern: regularPattern,\r\n                inputErrorMessage: promptTitle + '格式不正确'\r\n            }).then(({ value }) => {\r\n                if (editType === 'limitBuyCount') {\r\n                    selectProducts.forEach((item) => {\r\n                        item.limitBuyCount = value;\r\n                    })\r\n                }\r\n                if (editType === 'seckillPrice') {\r\n                    selectProducts.forEach((item) => {\r\n                        item.seckillPrice = value;\r\n                    })\r\n                }\r\n                if (editType === 'seckillStock') {\r\n                    selectProducts.forEach((item) => {\r\n                        item.seckillStock = value;\r\n                    })\r\n                }\r\n            }).catch();\r\n        },\r\n        /** 当 Form 的 SKU 发生变化时 */\r\n        changeFormSku(skuIds) {\r\n            // 处理【新增】\r\n            skuIds.forEach(skuId => {\r\n                // 获得对应的 SKU 信息\r\n                const sku = this.productSkus.find(item => item.id === skuId);\r\n                if (!sku) {\r\n                    return;\r\n                }\r\n                // 判断已存在，直接跳过\r\n                const product = this.form.products.find(item => item.skuId === skuId);\r\n                if (product) {\r\n                    return;\r\n                }\r\n                this.form.products.push({\r\n                    skuId: sku.id,\r\n                    name: sku.name,\r\n                    price: sku.price,\r\n                    productStock: sku.stock,\r\n                    spuId: sku.spuId,\r\n                    spuName: sku.spuName,\r\n                    limitBuyCount: 1,\r\n                    seckillStock: sku.stock,\r\n                    seckillPrice: sku.price,\r\n                });\r\n            });\r\n            // 处理【移除】\r\n            this.form.products.map((product, index) => {\r\n                if (!skuIds.includes(product.skuId)) {\r\n                    this.form.products.splice(index, 1);\r\n                }\r\n            });\r\n        },\r\n        /** 移除 Form 的 SKU */\r\n        removeFormSku(skuId) {\r\n            this.form.skuIds.map((id, index) => {\r\n                if (skuId === id) {\r\n                    this.form.skuIds.splice(index, 1);\r\n                }\r\n            });\r\n            this.changeFormSku(this.form.skuIds);\r\n        },\r\n    }\r\n};\r\n</script>\r\n"]}]}