{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\infra\\codegen\\importTable.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\infra\\codegen\\importTable.vue","mtime":1704630437878},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBnZXRTY2hlbWFUYWJsZUxpc3QsIGNyZWF0ZUNvZGVnZW5MaXN0IH0gZnJvbSAiQC9hcGkvaW5mcmEvY29kZWdlbiI7DQppbXBvcnQge2dldERhdGFTb3VyY2VDb25maWdMaXN0fSBmcm9tICJAL2FwaS9pbmZyYS9kYXRhU291cmNlQ29uZmlnIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g6YGu572p5bGCDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIC8vIOmBrue9qeWxgg0KICAgICAgdmlzaWJsZTogZmFsc2UsDQogICAgICAvLyDpgInkuK3mlbDnu4TlgLwNCiAgICAgIHRhYmxlczogW10sDQogICAgICAvLyDmgLvmnaHmlbANCiAgICAgIHRvdGFsOiAwLA0KICAgICAgLy8g6KGo5pWw5o2uDQogICAgICBkYlRhYmxlTGlzdDogW10sDQogICAgICAvLyDmn6Xor6Llj4LmlbANCiAgICAgIHF1ZXJ5UGFyYW1zOiB7DQogICAgICAgIGRhdGFTb3VyY2VDb25maWdJZDogdW5kZWZpbmVkLA0KICAgICAgICBuYW1lOiB1bmRlZmluZWQsDQogICAgICAgIGNvbW1lbnQ6IHVuZGVmaW5lZCwNCiAgICAgIH0sDQogICAgICAvLyDmlbDmja7mupDliJfooagNCiAgICAgIGRhdGFTb3VyY2VDb25maWdzOiBbXSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g5pi+56S65by55qGGDQogICAgc2hvdygpIHsNCiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7DQogICAgICAvLyDliqDovb3mlbDmja7mupANCiAgICAgIGdldERhdGFTb3VyY2VDb25maWdMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMuZGF0YVNvdXJjZUNvbmZpZ3MgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zLmRhdGFTb3VyY2VDb25maWdJZCA9IHRoaXMuZGF0YVNvdXJjZUNvbmZpZ3NbMF0uaWQ7DQogICAgICAgIC8vIOWKoOi9veihqOWIl+ihqA0KICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgY2xpY2tSb3cocm93KSB7DQogICAgICB0aGlzLiRyZWZzLnRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3cpOw0KICAgIH0sDQogICAgLy8g5aSa6YCJ5qGG6YCJ5Lit5pWw5o2uDQogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHNlbGVjdGlvbikgew0KICAgICAgdGhpcy50YWJsZXMgPSBzZWxlY3Rpb24ubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTsNCiAgICB9LA0KICAgIC8vIOafpeivouihqOaVsOaNrg0KICAgIGdldExpc3QoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgZ2V0U2NoZW1hVGFibGVMaXN0KHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5kYlRhYmxlTGlzdCA9IHJlcy5kYXRhOw0KICAgICAgfSkuZmluYWxseSgoKSA9PiB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlUXVlcnkoKSB7DQogICAgICB0aGlzLmdldExpc3QoKTsNCiAgICB9LA0KICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8NCiAgICByZXNldFF1ZXJ5KCkgew0KICAgICAgdGhpcy5yZXNldEZvcm0oInF1ZXJ5Rm9ybSIpOw0KICAgICAgdGhpcy5xdWVyeVBhcmFtcy5kYXRhU291cmNlQ29uZmlnSWQgPSB0aGlzLmRhdGFTb3VyY2VDb25maWdzWzBdLmlkOw0KICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOw0KICAgIH0sDQogICAgLyoqIOWvvOWFpeaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZUltcG9ydFRhYmxlKCkgew0KICAgICAgY3JlYXRlQ29kZWdlbkxpc3Qoew0KICAgICAgICBkYXRhU291cmNlQ29uZmlnSWQ6IHRoaXMucXVlcnlQYXJhbXMuZGF0YVNvdXJjZUNvbmZpZ0lkLA0KICAgICAgICB0YWJsZU5hbWVzOiB0aGlzLnRhYmxlcw0KICAgICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLlr7zlhaXmiJDlip8iKTsNCiAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7DQogICAgICAgIHRoaXMuJGVtaXQoIm9rIik7DQogICAgICB9KTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["importTable.vue"],"names":[],"mappings":";AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"importTable.vue","sourceRoot":"src/views/infra/codegen","sourcesContent":["<template>\r\n  <!-- 导入表 -->\r\n  <el-dialog title=\"导入表\" :visible.sync=\"visible\" width=\"800px\" top=\"5vh\" append-to-body>\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\">\r\n      <el-form-item label=\"数据源\" prop=\"dataSourceConfigId\">\r\n        <el-select v-model=\"queryParams.dataSourceConfigId\" placeholder=\"请选择数据源\" clearable>\r\n          <el-option v-for=\"config in dataSourceConfigs\"\r\n                     :key=\"config.id\" :label=\"config.name\" :value=\"config.id\"/>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"表名称\" prop=\"name\">\r\n        <el-input v-model=\"queryParams.name\" placeholder=\"请输入表名称\" clearable  @keyup.enter.native=\"handleQuery\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"表描述\" prop=\"comment\">\r\n        <el-input v-model=\"queryParams.comment\" placeholder=\"请输入表描述\" clearable @keyup.enter.native=\"handleQuery\"/>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <el-row>\r\n      <el-table v-loading=\"loading\" @row-click=\"clickRow\" ref=\"table\" :data=\"dbTableList\"\r\n                @selection-change=\"handleSelectionChange\" height=\"260px\">\r\n        <el-table-column type=\"selection\" width=\"55\" />\r\n        <el-table-column prop=\"name\" label=\"表名称\" :show-overflow-tooltip=\"true\" />\r\n        <el-table-column prop=\"comment\" label=\"表描述\" :show-overflow-tooltip=\"true\" />\r\n      </el-table>\r\n    </el-row>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button type=\"primary\" @click=\"handleImportTable\">确 定</el-button>\r\n      <el-button @click=\"visible = false\">取 消</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { getSchemaTableList, createCodegenList } from \"@/api/infra/codegen\";\r\nimport {getDataSourceConfigList} from \"@/api/infra/dataSourceConfig\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: false,\r\n      // 遮罩层\r\n      visible: false,\r\n      // 选中数组值\r\n      tables: [],\r\n      // 总条数\r\n      total: 0,\r\n      // 表数据\r\n      dbTableList: [],\r\n      // 查询参数\r\n      queryParams: {\r\n        dataSourceConfigId: undefined,\r\n        name: undefined,\r\n        comment: undefined,\r\n      },\r\n      // 数据源列表\r\n      dataSourceConfigs: [],\r\n    };\r\n  },\r\n  methods: {\r\n    // 显示弹框\r\n    show() {\r\n      this.visible = true;\r\n      // 加载数据源\r\n      getDataSourceConfigList().then(response => {\r\n        this.dataSourceConfigs = response.data;\r\n        this.queryParams.dataSourceConfigId = this.dataSourceConfigs[0].id;\r\n        // 加载表列表\r\n        this.getList();\r\n      });\r\n    },\r\n    clickRow(row) {\r\n      this.$refs.table.toggleRowSelection(row);\r\n    },\r\n    // 多选框选中数据\r\n    handleSelectionChange(selection) {\r\n      this.tables = selection.map(item => item.name);\r\n    },\r\n    // 查询表数据\r\n    getList() {\r\n      this.loading = true;\r\n      getSchemaTableList(this.queryParams).then(res => {\r\n        this.dbTableList = res.data;\r\n      }).finally(() => {\r\n        this.loading = false;\r\n      });\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.queryParams.dataSourceConfigId = this.dataSourceConfigs[0].id;\r\n      this.handleQuery();\r\n    },\r\n    /** 导入按钮操作 */\r\n    handleImportTable() {\r\n      createCodegenList({\r\n        dataSourceConfigId: this.queryParams.dataSourceConfigId,\r\n        tableNames: this.tables\r\n      }).then(res => {\r\n        this.$modal.msgSuccess(\"导入成功\");\r\n        this.visible = false;\r\n        this.$emit(\"ok\");\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}