{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\system\\menu\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\system\\menu\\index.vue","mtime":1704630438070},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBsaXN0TWVudSwgZ2V0TWVudSwgZGVsTWVudSwgYWRkTWVudSwgdXBkYXRlTWVudSB9IGZyb20gIkAvYXBpL3N5c3RlbS9tZW51IjsNCmltcG9ydCBUcmVlc2VsZWN0IGZyb20gIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0IjsNCmltcG9ydCAiQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QvZGlzdC92dWUtdHJlZXNlbGVjdC5jc3MiOw0KaW1wb3J0IEljb25TZWxlY3QgZnJvbSAiQC9jb21wb25lbnRzL0ljb25TZWxlY3QiOw0KDQppbXBvcnQgeyBTeXN0ZW1NZW51VHlwZUVudW0sIENvbW1vblN0YXR1c0VudW0gfSBmcm9tICdAL3V0aWxzL2NvbnN0YW50cycNCmltcG9ydCB7IGdldERpY3REYXRhcywgRElDVF9UWVBFIH0gZnJvbSAnQC91dGlscy9kaWN0Jw0KaW1wb3J0IHtpc0V4dGVybmFsfSBmcm9tICJAL3V0aWxzL3ZhbGlkYXRlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiU3lzdGVtTWVudSIsDQogIGNvbXBvbmVudHM6IHsgVHJlZXNlbGVjdCwgSWNvblNlbGVjdCB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICAvLyDpga7nvanlsYINCiAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAvLyDmmL7npLrmkJzntKLmnaHku7YNCiAgICAgIHNob3dTZWFyY2g6IHRydWUsDQogICAgICAvLyDoj5zljZXooajmoLzmoJHmlbDmja4NCiAgICAgIG1lbnVMaXN0OiBbXSwNCiAgICAgIC8vIOiPnOWNleagkemAiemhuQ0KICAgICAgbWVudU9wdGlvbnM6IFtdLA0KICAgICAgLy8g5by55Ye65bGC5qCH6aKYDQogICAgICB0aXRsZTogIiIsDQogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYINCiAgICAgIG9wZW46IGZhbHNlLA0KICAgICAgLy8g5piv5ZCm5bGV5byA77yM6buY6K6k5YWo6YOo5oqY5Y+gDQogICAgICBpc0V4cGFuZEFsbDogZmFsc2UsDQogICAgICAvLyDph43mlrDmuLLmn5PooajmoLznirbmgIENCiAgICAgIHJlZnJlc2hUYWJsZTogdHJ1ZSwNCiAgICAgIC8vIOafpeivouWPguaVsA0KICAgICAgcXVlcnlQYXJhbXM6IHsNCiAgICAgICAgbmFtZTogdW5kZWZpbmVkLA0KICAgICAgICB2aXNpYmxlOiB1bmRlZmluZWQNCiAgICAgIH0sDQogICAgICAvLyDooajljZXlj4LmlbANCiAgICAgIGZvcm06IHt9LA0KICAgICAgLy8g6KGo5Y2V5qCh6aqMDQogICAgICBydWxlczogew0KICAgICAgICBuYW1lOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuiPnOWNleWQjeensOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9DQogICAgICAgIF0sDQogICAgICAgIHNvcnQ6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6I+c5Y2V6aG65bqP5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0NCiAgICAgICAgXSwNCiAgICAgICAgcGF0aDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLot6/nlLHlnLDlnYDkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQ0KICAgICAgICBdLA0KICAgICAgICBzdGF0dXM6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi54q25oCB5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0NCiAgICAgICAgXQ0KICAgICAgfSwNCg0KICAgICAgLy8g5p6a5Li+DQogICAgICBNZW51VHlwZUVudW06IFN5c3RlbU1lbnVUeXBlRW51bSwNCiAgICAgIENvbW1vblN0YXR1c0VudW06IENvbW1vblN0YXR1c0VudW0sDQogICAgICAvLyDmlbDmja7lrZflhbgNCiAgICAgIG1lbnVUeXBlRGljdERhdGFzOiBnZXREaWN0RGF0YXMoRElDVF9UWVBFLlNZU1RFTV9NRU5VX1RZUEUpLA0KICAgICAgc3RhdHVzRGljdERhdGFzOiBnZXREaWN0RGF0YXMoRElDVF9UWVBFLkNPTU1PTl9TVEFUVVMpDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldExpc3QoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOmAieaLqeWbvuaghw0KICAgIHNlbGVjdGVkKG5hbWUpIHsNCiAgICAgIHRoaXMuZm9ybS5pY29uID0gbmFtZTsNCiAgICB9LA0KICAgIC8qKiDmn6Xor6Loj5zljZXliJfooaggKi8NCiAgICBnZXRMaXN0KCkgew0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgIGxpc3RNZW51KHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLm1lbnVMaXN0ID0gdGhpcy5oYW5kbGVUcmVlKHJlc3BvbnNlLmRhdGEsICJpZCIpOw0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqIOi9rOaNouiPnOWNleaVsOaNrue7k+aehCAqLw0KICAgIG5vcm1hbGl6ZXIobm9kZSkgew0KICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gJiYgIW5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7DQogICAgICAgIGRlbGV0ZSBub2RlLmNoaWxkcmVuOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgaWQ6IG5vZGUuaWQsDQogICAgICAgIGxhYmVsOiBub2RlLm5hbWUsDQogICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuDQogICAgICB9Ow0KICAgIH0sDQogICAgLyoqIOafpeivouiPnOWNleS4i+aLieagkee7k+aehCAqLw0KICAgIGdldFRyZWVzZWxlY3QoKSB7DQogICAgICBsaXN0TWVudSgpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLm1lbnVPcHRpb25zID0gW107DQogICAgICAgIGNvbnN0IG1lbnUgPSB7IGlkOiAwLCBuYW1lOiAn5Li757G755uuJywgY2hpbGRyZW46IFtdIH07DQogICAgICAgIG1lbnUuY2hpbGRyZW4gPSB0aGlzLmhhbmRsZVRyZWUocmVzcG9uc2UuZGF0YSwgImlkIik7DQogICAgICAgIHRoaXMubWVudU9wdGlvbnMucHVzaChtZW51KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g5Y+W5raI5oyJ6ZKuDQogICAgY2FuY2VsKCkgew0KICAgICAgdGhpcy5vcGVuID0gZmFsc2U7DQogICAgICB0aGlzLnJlc2V0KCk7DQogICAgfSwNCiAgICAvLyDooajljZXph43nva4NCiAgICByZXNldCgpIHsNCiAgICAgIHRoaXMuZm9ybSA9IHsNCiAgICAgICAgaWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGFyZW50SWQ6IDAsDQogICAgICAgIG5hbWU6IHVuZGVmaW5lZCwNCiAgICAgICAgaWNvbjogdW5kZWZpbmVkLA0KICAgICAgICB0eXBlOiBTeXN0ZW1NZW51VHlwZUVudW0uRElSLA0KICAgICAgICBzb3J0OiB1bmRlZmluZWQsDQogICAgICAgIHN0YXR1czogQ29tbW9uU3RhdHVzRW51bS5FTkFCTEUsDQogICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIGtlZXBBbGl2ZTogdHJ1ZSwNCiAgICAgICAgYWx3YXlzU2hvdzogdHJ1ZSwNCiAgICAgIH07DQogICAgICB0aGlzLnJlc2V0Rm9ybSgiZm9ybSIpOw0KICAgIH0sDQogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZVF1ZXJ5KCkgew0KICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgfSwNCiAgICAvKiog6YeN572u5oyJ6ZKu5pON5L2cICovDQogICAgcmVzZXRRdWVyeSgpIHsNCiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsNCiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsNCiAgICB9LA0KICAgIC8qKiDlsZXlvIAv5oqY5Y+g5pON5L2cICovDQogICAgdG9nZ2xlRXhwYW5kQWxsKCkgew0KICAgICAgdGhpcy5yZWZyZXNoVGFibGUgPSBmYWxzZTsNCiAgICAgIHRoaXMuaXNFeHBhbmRBbGwgPSAhdGhpcy5pc0V4cGFuZEFsbDsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy5yZWZyZXNoVGFibGUgPSB0cnVlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKiog5paw5aKe5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlQWRkKHJvdykgew0KICAgICAgdGhpcy5yZXNldCgpOw0KICAgICAgdGhpcy5nZXRUcmVlc2VsZWN0KCk7DQogICAgICBpZiAocm93ICE9IG51bGwgJiYgcm93LmlkKSB7DQogICAgICAgIHRoaXMuZm9ybS5wYXJlbnRJZCA9IHJvdy5pZDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZm9ybS5wYXJlbnRJZCA9IDA7DQogICAgICB9DQogICAgICB0aGlzLm9wZW4gPSB0cnVlOw0KICAgICAgdGhpcy50aXRsZSA9ICLmt7vliqDoj5zljZUiOw0KICAgIH0sDQogICAgLyoqIOS/ruaUueaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZVVwZGF0ZShyb3cpIHsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgIHRoaXMuZ2V0VHJlZXNlbGVjdCgpOw0KICAgICAgZ2V0TWVudShyb3cuaWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhOw0KICAgICAgICB0aGlzLm9wZW4gPSB0cnVlOw0KICAgICAgICB0aGlzLnRpdGxlID0gIuS/ruaUueiPnOWNlSI7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDmj5DkuqTmjInpkq4gKi8NCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbigpIHsNCiAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIC8vIOiLpeadg+mZkOexu+Wei+S4uuebruW9leaIluiAheiPnOWNleaXtu+8jOi/m+ihjCBwYXRoIOeahOagoemqjO+8jOmBv+WFjeWQjue7reaLvOaOpeWHuuadpeeahOi3r+eUseaXoOazlei3s+i9rA0KICAgICAgICAgIGlmICh0aGlzLmZvcm0udHlwZSA9PT0gU3lzdGVtTWVudVR5cGVFbnVtLkRJUg0KICAgICAgICAgICAgfHwgdGhpcy5mb3JtLnR5cGUgPT09IFN5c3RlbU1lbnVUeXBlRW51bS5NRU5VKSB7DQogICAgICAgICAgICAvLyDlpoLmnpzmmK/lpJbpk77vvIzliJnkuI3ov5vooYzmoKHpqowNCiAgICAgICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmZvcm0ucGF0aA0KICAgICAgICAgICAgaWYgKCFpc0V4dGVybmFsKHBhdGgpKSB7DQogICAgICAgICAgICAgIC8vIOeItuadg+mZkOS4uuagueiKgueCue+8jHBhdGgg5b+F6aG75LulIC8g5byA5aS0DQogICAgICAgICAgICAgIGlmICh0aGlzLmZvcm0ucGFyZW50SWQgPT09IDAgJiYgcGF0aC5jaGFyQXQoMCkgIT09ICcvJykgew0KICAgICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoJ+WJjeerr+W/hemhu+S7pSAvIOW8gOWktCcpDQogICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5mb3JtLnBhcmVudElkICE9PSAwICYmIHBhdGguY2hhckF0KDApID09PSAnLycpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCfliY3nq6/kuI3og73ku6UgLyDlvIDlpLQnKQ0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8g5o+Q5LqkDQogICAgICAgICAgaWYgKHRoaXMuZm9ybS5pZCAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICB1cGRhdGVNZW51KHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOw0KICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsNCiAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgYWRkTWVudSh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8iKTsNCiAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7DQogICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVEZWxldGUocm93KSB7DQogICAgICB0aGlzLiRtb2RhbC5jb25maXJtKCfmmK/lkKbnoa7orqTliKDpmaTlkI3np7DkuLoiJyArIHJvdy5uYW1lICsgJyLnmoTmlbDmja7pobk/JykudGhlbihmdW5jdGlvbigpIHsNCiAgICAgICAgICByZXR1cm4gZGVsTWVudShyb3cuaWQpOw0KICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLliKDpmaTmiJDlip8iKTsNCiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAuMA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/menu","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <doc-alert title=\"功能权限\" url=\"https://doc.iocoder.cn/resource-permission\" />\r\n    <doc-alert title=\"菜单路由\" url=\"https://doc.iocoder.cn/vue2/route/\" />\r\n    <!-- 搜索工作栏 -->\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\">\r\n      <el-form-item label=\"菜单名称\" prop=\"name\">\r\n        <el-input v-model=\"queryParams.name\" placeholder=\"请输入菜单名称\" clearable @keyup.enter.native=\"handleQuery\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"状态\" prop=\"status\">\r\n        <el-select v-model=\"queryParams.status\" placeholder=\"菜单状态\" clearable>\r\n          <el-option v-for=\"dict in statusDictDatas\" :key=\"parseInt(dict.value)\" :label=\"dict.label\" :value=\"parseInt(dict.value)\"/>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"primary\" plain icon=\"el-icon-plus\" size=\"mini\" @click=\"handleAdd\"\r\n                   v-hasPermi=\"['system:menu:create']\">新增</el-button>\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"info\" plain icon=\"el-icon-sort\" size=\"mini\" @click=\"toggleExpandAll\">展开/折叠</el-button>\r\n      </el-col>\r\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n    </el-row>\r\n\r\n    <el-table v-if=\"refreshTable\" v-loading=\"loading\" :data=\"menuList\" row-key=\"id\" :default-expand-all=\"isExpandAll\"\r\n              :tree-props=\"{children: 'children', hasChildren: 'hasChildren'}\">\r\n      <el-table-column prop=\"name\" label=\"菜单名称\" :show-overflow-tooltip=\"true\" width=\"250\"></el-table-column>\r\n      <el-table-column prop=\"icon\" label=\"图标\" align=\"center\" width=\"100\">\r\n        <template v-slot=\"scope\">\r\n          <svg-icon :icon-class=\"scope.row.icon\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"sort\" label=\"排序\" width=\"60\"></el-table-column>\r\n      <el-table-column prop=\"permission\" label=\"权限标识\" :show-overflow-tooltip=\"true\" />\r\n      <el-table-column prop=\"component\" label=\"组件路径\" :show-overflow-tooltip=\"true\" />\r\n      <el-table-column prop=\"componentName\" label=\"组件名称\" :show-overflow-tooltip=\"true\" />\r\n      <el-table-column prop=\"status\" label=\"状态\" width=\"80\">\r\n        <template v-slot=\"scope\">\r\n          <dict-tag :type=\"DICT_TYPE.COMMON_STATUS\" :value=\"scope.row.status\"/>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n        <template v-slot=\"scope\">\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(scope.row)\"\r\n                     v-hasPermi=\"['system:menu:update']\">修改</el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-plus\" @click=\"handleAdd(scope.row)\"\r\n                     v-hasPermi=\"['system:menu:create']\">新增</el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row)\"\r\n                     v-hasPermi=\"['system:menu:delete']\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 添加或修改菜单对话框 -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"800px\" append-to-body>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"100px\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"上级菜单\">\r\n              <treeselect v-model=\"form.parentId\" :options=\"menuOptions\" :normalizer=\"normalizer\" :show-count=\"true\"\r\n                          placeholder=\"选择上级菜单\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"菜单类型\" prop=\"type\">\r\n              <el-radio-group v-model=\"form.type\">\r\n                <el-radio v-for=\"dict in menuTypeDictDatas\" :key=\"parseInt(dict.value)\" :label=\"parseInt(dict.value)\">\r\n                  {{dict.label}}</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item v-if=\"form.type !== 3\" label=\"菜单图标\">\r\n              <el-popover placement=\"bottom-start\" width=\"460\" trigger=\"click\" @show=\"$refs['iconSelect'].reset()\">\r\n                <IconSelect ref=\"iconSelect\" @selected=\"selected\" />\r\n                <el-input slot=\"reference\" v-model=\"form.icon\" placeholder=\"点击选择图标\" readonly>\r\n                  <svg-icon v-if=\"form.icon\" slot=\"prefix\" :icon-class=\"form.icon\" class=\"el-input__icon\"\r\n                            style=\"height: 32px;width: 16px;\"/>\r\n                  <i v-else slot=\"prefix\" class=\"el-icon-search el-input__icon\" />\r\n                </el-input>\r\n              </el-popover>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"菜单名称\" prop=\"name\">\r\n              <el-input v-model=\"form.name\" placeholder=\"请输入菜单名称\" />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"显示排序\" prop=\"sort\">\r\n              <el-input-number v-model=\"form.sort\" controls-position=\"right\" :min=\"0\" />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item v-if=\"form.type !== 3\" label=\"路由地址\" prop=\"path\">\r\n              <span slot=\"label\">\r\n                <el-tooltip content=\"访问的路由地址，如：`user`。如需外网地址时，则以 `http(s)://` 开头\" placement=\"top\">\r\n                <i class=\"el-icon-question\" />\r\n                </el-tooltip>\r\n                路由地址\r\n              </span>\r\n              <el-input v-model=\"form.path\" placeholder=\"请输入路由地址\" />\r\n            </el-form-item>\r\n          </el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item v-if=\"form.type !== 1\" label=\"权限标识\">\r\n              <span slot=\"label\">\r\n                <el-tooltip content=\"Controller 方法上的权限字符，如：@PreAuthorize(`@ss.hasPermission('system:user:list')`)\" placement=\"top\">\r\n                  <i class=\"el-icon-question\" />\r\n                </el-tooltip>\r\n                权限字符\r\n              </span>\r\n\t\t\t\t\t\t\t<el-input v-model=\"form.permission\" placeholder=\"请权限标识\" maxlength=\"50\" />\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n          <el-col :span=\"12\" v-if=\"form.type === 2\">\r\n            <el-form-item label=\"组件路径\" prop=\"component\">\r\n              <el-input v-model=\"form.component\" placeholder=\"例如说：system/user/index\" />\r\n            </el-form-item>\r\n          </el-col>\r\n\t\t\t\t\t<el-col :span=\"12\" v-if=\"form.type === 2\">\r\n\t\t\t\t\t\t<el-form-item label=\"组件名称\" prop=\"componentName\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"form.componentName\" placeholder=\"例如说：SystemUser\" />\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"菜单状态\" prop=\"status\">\r\n              <span slot=\"label\">\r\n                <el-tooltip content=\"选择停用时，路由将不会出现在侧边栏，也不能被访问\" placement=\"top\">\r\n                  <i class=\"el-icon-question\" />\r\n                </el-tooltip>\r\n                菜单状态\r\n              </span>\r\n              <el-radio-group v-model=\"form.status\">\r\n                <el-radio v-for=\"dict in this.getDictDatas(DICT_TYPE.COMMON_STATUS)\"\r\n                          :key=\"dict.value\" :label=\"parseInt(dict.value)\">{{dict.label}}</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item v-if=\"form.type !== 3\" label=\"显示状态\">\r\n              <span slot=\"label\">\r\n                <el-tooltip content=\"选择隐藏时，路由将不会出现在侧边栏，但仍然可以访问\" placement=\"top\">\r\n                  <i class=\"el-icon-question\" />\r\n                </el-tooltip>\r\n                是否显示\r\n              </span>\r\n              <el-radio-group v-model=\"form.visible\">\r\n                <el-radio :key=\"true\" :label=\"true\">显示</el-radio>\r\n                <el-radio :key=\"false\" :label=\"false\">隐藏</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item v-if=\"form.type !== 3\" label=\"总是显示\">\r\n              <span slot=\"label\">\r\n                <el-tooltip content=\"选择不是时，当该菜单只有一个子菜单时，不展示自己，直接展示子菜单\" placement=\"top\">\r\n                  <i class=\"el-icon-question\" />\r\n                </el-tooltip>\r\n                 总是显示\r\n              </span>\r\n              <el-radio-group v-model=\"form.alwaysShow\">\r\n                <el-radio :key=\"true\" :label=\"true\">总是</el-radio>\r\n                <el-radio :key=\"false\" :label=\"false\">不是</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item v-if=\"form.type === 2\" label=\"是否缓存\">\r\n              <span slot=\"label\">\r\n                <el-tooltip content=\"选择缓存时，则会被 `keep-alive` 缓存，必须填写「组件名称」字段\" placement=\"top\">\r\n                  <i class=\"el-icon-question\" />\r\n                </el-tooltip>\r\n                 是否缓存\r\n              </span>\r\n\t\t\t\t\t\t\t<el-radio-group v-model=\"form.keepAlive\">\r\n\t\t\t\t\t\t\t\t<el-radio :key=\"true\" :label=\"true\">缓存</el-radio>\r\n\t\t\t\t\t\t\t\t<el-radio :key=\"false\" :label=\"false\">不缓存</el-radio>\r\n\t\t\t\t\t\t\t</el-radio-group>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { listMenu, getMenu, delMenu, addMenu, updateMenu } from \"@/api/system/menu\";\r\nimport Treeselect from \"@riophae/vue-treeselect\";\r\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\r\nimport IconSelect from \"@/components/IconSelect\";\r\n\r\nimport { SystemMenuTypeEnum, CommonStatusEnum } from '@/utils/constants'\r\nimport { getDictDatas, DICT_TYPE } from '@/utils/dict'\r\nimport {isExternal} from \"@/utils/validate\";\r\n\r\nexport default {\r\n  name: \"SystemMenu\",\r\n  components: { Treeselect, IconSelect },\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 菜单表格树数据\r\n      menuList: [],\r\n      // 菜单树选项\r\n      menuOptions: [],\r\n      // 弹出层标题\r\n      title: \"\",\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 是否展开，默认全部折叠\r\n      isExpandAll: false,\r\n      // 重新渲染表格状态\r\n      refreshTable: true,\r\n      // 查询参数\r\n      queryParams: {\r\n        name: undefined,\r\n        visible: undefined\r\n      },\r\n      // 表单参数\r\n      form: {},\r\n      // 表单校验\r\n      rules: {\r\n        name: [\r\n          { required: true, message: \"菜单名称不能为空\", trigger: \"blur\" }\r\n        ],\r\n        sort: [\r\n          { required: true, message: \"菜单顺序不能为空\", trigger: \"blur\" }\r\n        ],\r\n        path: [\r\n          { required: true, message: \"路由地址不能为空\", trigger: \"blur\" }\r\n        ],\r\n        status: [\r\n          { required: true, message: \"状态不能为空\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n\r\n      // 枚举\r\n      MenuTypeEnum: SystemMenuTypeEnum,\r\n      CommonStatusEnum: CommonStatusEnum,\r\n      // 数据字典\r\n      menuTypeDictDatas: getDictDatas(DICT_TYPE.SYSTEM_MENU_TYPE),\r\n      statusDictDatas: getDictDatas(DICT_TYPE.COMMON_STATUS)\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    // 选择图标\r\n    selected(name) {\r\n      this.form.icon = name;\r\n    },\r\n    /** 查询菜单列表 */\r\n    getList() {\r\n      this.loading = true;\r\n      listMenu(this.queryParams).then(response => {\r\n        this.menuList = this.handleTree(response.data, \"id\");\r\n        this.loading = false;\r\n      });\r\n    },\r\n    /** 转换菜单数据结构 */\r\n    normalizer(node) {\r\n      if (node.children && !node.children.length) {\r\n        delete node.children;\r\n      }\r\n      return {\r\n        id: node.id,\r\n        label: node.name,\r\n        children: node.children\r\n      };\r\n    },\r\n    /** 查询菜单下拉树结构 */\r\n    getTreeselect() {\r\n      listMenu().then(response => {\r\n        this.menuOptions = [];\r\n        const menu = { id: 0, name: '主类目', children: [] };\r\n        menu.children = this.handleTree(response.data, \"id\");\r\n        this.menuOptions.push(menu);\r\n      });\r\n    },\r\n    // 取消按钮\r\n    cancel() {\r\n      this.open = false;\r\n      this.reset();\r\n    },\r\n    // 表单重置\r\n    reset() {\r\n      this.form = {\r\n        id: undefined,\r\n        parentId: 0,\r\n        name: undefined,\r\n        icon: undefined,\r\n        type: SystemMenuTypeEnum.DIR,\r\n        sort: undefined,\r\n        status: CommonStatusEnum.ENABLE,\r\n        visible: true,\r\n        keepAlive: true,\r\n        alwaysShow: true,\r\n      };\r\n      this.resetForm(\"form\");\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n    /** 展开/折叠操作 */\r\n    toggleExpandAll() {\r\n      this.refreshTable = false;\r\n      this.isExpandAll = !this.isExpandAll;\r\n      this.$nextTick(() => {\r\n        this.refreshTable = true;\r\n      });\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd(row) {\r\n      this.reset();\r\n      this.getTreeselect();\r\n      if (row != null && row.id) {\r\n        this.form.parentId = row.id;\r\n      } else {\r\n        this.form.parentId = 0;\r\n      }\r\n      this.open = true;\r\n      this.title = \"添加菜单\";\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.reset();\r\n      this.getTreeselect();\r\n      getMenu(row.id).then(response => {\r\n        this.form = response.data;\r\n        this.open = true;\r\n        this.title = \"修改菜单\";\r\n      });\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm: function() {\r\n      this.$refs[\"form\"].validate(valid => {\r\n        if (valid) {\r\n          // 若权限类型为目录或者菜单时，进行 path 的校验，避免后续拼接出来的路由无法跳转\r\n          if (this.form.type === SystemMenuTypeEnum.DIR\r\n            || this.form.type === SystemMenuTypeEnum.MENU) {\r\n            // 如果是外链，则不进行校验\r\n            const path = this.form.path\r\n            if (!isExternal(path)) {\r\n              // 父权限为根节点，path 必须以 / 开头\r\n              if (this.form.parentId === 0 && path.charAt(0) !== '/') {\r\n                this.$modal.msgSuccess('前端必须以 / 开头')\r\n                return\r\n              } else if (this.form.parentId !== 0 && path.charAt(0) === '/') {\r\n                this.$modal.msgSuccess('前端不能以 / 开头')\r\n                return\r\n              }\r\n            }\r\n          }\r\n\r\n          // 提交\r\n          if (this.form.id !== undefined) {\r\n            updateMenu(this.form).then(response => {\r\n              this.$modal.msgSuccess(\"修改成功\");\r\n              this.open = false;\r\n              this.getList();\r\n            });\r\n          } else {\r\n            addMenu(this.form).then(response => {\r\n              this.$modal.msgSuccess(\"新增成功\");\r\n              this.open = false;\r\n              this.getList();\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      this.$modal.confirm('是否确认删除名称为\"' + row.name + '\"的数据项?').then(function() {\r\n          return delMenu(row.id);\r\n        }).then(() => {\r\n          this.getList();\r\n          this.$modal.msgSuccess(\"删除成功\");\r\n      }).catch(() => {});\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}