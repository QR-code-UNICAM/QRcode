{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\PropertiesPanel.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\PropertiesPanel.vue","mtime":1704630437711},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgRWxlbWVudEJhc2VJbmZvIGZyb20gIi4vYmFzZS9FbGVtZW50QmFzZUluZm8iOw0KaW1wb3J0IEVsZW1lbnRPdGhlckNvbmZpZyBmcm9tICIuL290aGVyL0VsZW1lbnRPdGhlckNvbmZpZyI7DQppbXBvcnQgRWxlbWVudFRhc2sgZnJvbSAiLi90YXNrL0VsZW1lbnRUYXNrIjsNCmltcG9ydCBFbGVtZW50TXVsdGlJbnN0YW5jZSBmcm9tICIuL211bHRpLWluc3RhbmNlL0VsZW1lbnRNdWx0aUluc3RhbmNlIjsNCmltcG9ydCBGbG93Q29uZGl0aW9uIGZyb20gIi4vZmxvdy1jb25kaXRpb24vRmxvd0NvbmRpdGlvbiI7DQppbXBvcnQgU2lnbmFsQW5kTWFzc2FnZSBmcm9tICIuL3NpZ25hbC1tZXNzYWdlL1NpZ25hbEFuZE1lc3NhZ2UiOw0KaW1wb3J0IEVsZW1lbnRMaXN0ZW5lcnMgZnJvbSAiLi9saXN0ZW5lcnMvRWxlbWVudExpc3RlbmVycyI7DQppbXBvcnQgRWxlbWVudFByb3BlcnRpZXMgZnJvbSAiLi9wcm9wZXJ0aWVzL0VsZW1lbnRQcm9wZXJ0aWVzIjsNCmltcG9ydCBFbGVtZW50Rm9ybSBmcm9tICIuL2Zvcm0vRWxlbWVudEZvcm0iOw0KaW1wb3J0IFVzZXJUYXNrTGlzdGVuZXJzIGZyb20gIi4vbGlzdGVuZXJzL1VzZXJUYXNrTGlzdGVuZXJzIjsNCi8qKg0KICog5L6n6L655qCPDQogKiBAQXV0aG9yIE1peXVlRkUNCiAqIEBIb21lIGh0dHBzOi8vZ2l0aHViLmNvbS9taXl1ZXNjDQogKiBARGF0ZSAyMDIx5bm0M+aciDMx5pelMTg6NTc6NTENCiAqLw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiTXlQcm9wZXJ0aWVzUGFuZWwiLA0KICBjb21wb25lbnRzOiB7DQogICAgVXNlclRhc2tMaXN0ZW5lcnMsDQogICAgRWxlbWVudEZvcm0sDQogICAgRWxlbWVudFByb3BlcnRpZXMsDQogICAgRWxlbWVudExpc3RlbmVycywNCiAgICBTaWduYWxBbmRNYXNzYWdlLA0KICAgIEZsb3dDb25kaXRpb24sDQogICAgRWxlbWVudE11bHRpSW5zdGFuY2UsDQogICAgRWxlbWVudFRhc2ssDQogICAgRWxlbWVudE90aGVyQ29uZmlnLA0KICAgIEVsZW1lbnRCYXNlSW5mbw0KICB9LA0KICBjb21wb25lbnROYW1lOiAiTXlQcm9wZXJ0aWVzUGFuZWwiLA0KICBwcm9wczogew0KICAgIGJwbW5Nb2RlbGVyOiBPYmplY3QsDQogICAgcHJlZml4OiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAiY2FtdW5kYSINCiAgICB9LA0KICAgIHdpZHRoOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICBkZWZhdWx0OiA0ODANCiAgICB9LA0KICAgIGlkRWRpdERpc2FibGVkOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICB9LA0KICAgIG1vZGVsOiBPYmplY3QsIC8vIOa1geeoi+aooeWei+eahOaVsOaNrg0KICB9LA0KICBwcm92aWRlKCkgew0KICAgIHJldHVybiB7DQogICAgICBwcmVmaXg6IHRoaXMucHJlZml4LA0KICAgICAgd2lkdGg6IHRoaXMud2lkdGgNCiAgICB9Ow0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBhY3RpdmVUYWI6ICJiYXNlIiwNCiAgICAgIGVsZW1lbnRJZDogIiIsDQogICAgICBlbGVtZW50VHlwZTogIiIsDQogICAgICBlbGVtZW50QnVzaW5lc3NPYmplY3Q6IHt9LCAvLyDlhYPntKAgYnVzaW5lc3NPYmplY3Qg6ZWc5YOP77yM5o+Q5L6b57uZ6ZyA6KaB5YGa5Yik5pat55qE57uE5Lu25L2/55SoDQogICAgICBjb25kaXRpb25Gb3JtVmlzaWJsZTogZmFsc2UsIC8vIOa1gei9rOadoeS7tuiuvue9rg0KICAgICAgZm9ybVZpc2libGU6IGZhbHNlIC8vIOihqOWNlemFjee9rg0KICAgIH07DQogIH0sDQogIHdhdGNoOiB7DQogICAgZWxlbWVudElkOiB7DQogICAgICBoYW5kbGVyKCkgew0KICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9ICJiYXNlIjsNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5pbml0TW9kZWxzKCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0TW9kZWxzKCkgew0KICAgICAgLy8g5Yid5aeL5YyWIG1vZGVsZXIg5Lul5Y+K5YW25LuWIG1vZGRsZQ0KICAgICAgaWYgKCF0aGlzLmJwbW5Nb2RlbGVyKSB7DQogICAgICAgIC8vIOmBv+WFjeWKoOi9veaXtiDmtYHnqIvlm74g5bm25pyq5Yqg6L295a6M5oiQDQogICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuaW5pdE1vZGVscygpLCAxMCk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLnRpbWVyKSBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7DQogICAgICB3aW5kb3cuYnBtbkluc3RhbmNlcyA9IHsNCiAgICAgICAgbW9kZWxlcjogdGhpcy5icG1uTW9kZWxlciwNCiAgICAgICAgbW9kZWxpbmc6IHRoaXMuYnBtbk1vZGVsZXIuZ2V0KCJtb2RlbGluZyIpLA0KICAgICAgICBtb2RkbGU6IHRoaXMuYnBtbk1vZGVsZXIuZ2V0KCJtb2RkbGUiKSwNCiAgICAgICAgZXZlbnRCdXM6IHRoaXMuYnBtbk1vZGVsZXIuZ2V0KCJldmVudEJ1cyIpLA0KICAgICAgICBicG1uRmFjdG9yeTogdGhpcy5icG1uTW9kZWxlci5nZXQoImJwbW5GYWN0b3J5IiksDQogICAgICAgIGVsZW1lbnRGYWN0b3J5OiB0aGlzLmJwbW5Nb2RlbGVyLmdldCgiZWxlbWVudEZhY3RvcnkiKSwNCiAgICAgICAgZWxlbWVudFJlZ2lzdHJ5OiB0aGlzLmJwbW5Nb2RlbGVyLmdldCgiZWxlbWVudFJlZ2lzdHJ5IiksDQogICAgICAgIHJlcGxhY2U6IHRoaXMuYnBtbk1vZGVsZXIuZ2V0KCJyZXBsYWNlIiksDQogICAgICAgIHNlbGVjdGlvbjogdGhpcy5icG1uTW9kZWxlci5nZXQoInNlbGVjdGlvbiIpDQogICAgICB9Ow0KICAgICAgdGhpcy5nZXRBY3RpdmVFbGVtZW50KCk7DQogICAgfSwNCiAgICBnZXRBY3RpdmVFbGVtZW50KCkgew0KICAgICAgLy8g5Yid5aeL56ys5LiA5Liq6YCJ5Lit5YWD57SgIGJwbW46UHJvY2Vzcw0KICAgICAgdGhpcy5pbml0Rm9ybU9uQ2hhbmdlZChudWxsKTsNCiAgICAgIHRoaXMuYnBtbk1vZGVsZXIub24oImltcG9ydC5kb25lIiwgZSA9PiB7DQogICAgICAgIHRoaXMuaW5pdEZvcm1PbkNoYW5nZWQobnVsbCk7DQogICAgICB9KTsNCiAgICAgIC8vIOebkeWQrOmAieaLqeS6i+S7tu+8jOS/ruaUueW9k+WJjea/gOa0u+eahOWFg+e0oOS7peWPiuihqOWNlQ0KICAgICAgdGhpcy5icG1uTW9kZWxlci5vbigic2VsZWN0aW9uLmNoYW5nZWQiLCAoeyBuZXdTZWxlY3Rpb24gfSkgPT4gew0KICAgICAgICB0aGlzLmluaXRGb3JtT25DaGFuZ2VkKG5ld1NlbGVjdGlvblswXSB8fCBudWxsKTsNCiAgICAgIH0pOw0KICAgICAgdGhpcy5icG1uTW9kZWxlci5vbigiZWxlbWVudC5jaGFuZ2VkIiwgKHsgZWxlbWVudCB9KSA9PiB7DQogICAgICAgIC8vIOS/neivgSDkv67mlLkgIum7mOiupOa1gei9rOi3r+W+hCIg57G75Ly86ZyA6KaB5L+u5pS55aSa5Liq5YWD57Sg55qE5LqL5Lu25Y+R55Sf55qE5pe25YCZ77yM5pu05paw6KGo5Y2V55qE5YWD57Sg5LiO5Y6f6YCJ5Lit5YWD57Sg5LiN5LiA6Ie044CCDQogICAgICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuaWQgPT09IHRoaXMuZWxlbWVudElkKSB7DQogICAgICAgICAgdGhpcy5pbml0Rm9ybU9uQ2hhbmdlZChlbGVtZW50KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDliJ3lp4vljJbmlbDmja4NCiAgICBpbml0Rm9ybU9uQ2hhbmdlZChlbGVtZW50KSB7DQogICAgICBsZXQgYWN0aXZhdGVkRWxlbWVudCA9IGVsZW1lbnQ7DQogICAgICBpZiAoIWFjdGl2YXRlZEVsZW1lbnQpIHsNCiAgICAgICAgYWN0aXZhdGVkRWxlbWVudCA9DQogICAgICAgICAgd2luZG93LmJwbW5JbnN0YW5jZXMuZWxlbWVudFJlZ2lzdHJ5LmZpbmQoZWwgPT4gZWwudHlwZSA9PT0gImJwbW46UHJvY2VzcyIpID8/DQogICAgICAgICAgd2luZG93LmJwbW5JbnN0YW5jZXMuZWxlbWVudFJlZ2lzdHJ5LmZpbmQoZWwgPT4gZWwudHlwZSA9PT0gImJwbW46Q29sbGFib3JhdGlvbiIpOw0KICAgICAgfQ0KICAgICAgaWYgKCFhY3RpdmF0ZWRFbGVtZW50KSByZXR1cm47DQogICAgICBjb25zb2xlLmxvZyhgDQogICAgICAgICAgICAgIC0tLS0tLS0tLS0NCiAgICAgIHNlbGVjdCBlbGVtZW50IGNoYW5nZWQ6DQogICAgICAgICAgICAgICAgaWQ6ICAke2FjdGl2YXRlZEVsZW1lbnQuaWR9DQogICAgICAgICAgICAgIHR5cGU6ICAke2FjdGl2YXRlZEVsZW1lbnQuYnVzaW5lc3NPYmplY3QuJHR5cGV9DQogICAgICAgICAgICAgIC0tLS0tLS0tLS0NCiAgICAgICAgICAgICAgYCk7DQogICAgICBjb25zb2xlLmxvZygiYnVzaW5lc3NPYmplY3Q6ICIsIGFjdGl2YXRlZEVsZW1lbnQuYnVzaW5lc3NPYmplY3QpOw0KICAgICAgd2luZG93LmJwbW5JbnN0YW5jZXMuYnBtbkVsZW1lbnQgPSBhY3RpdmF0ZWRFbGVtZW50Ow0KICAgICAgdGhpcy5icG1uRWxlbWVudCA9IGFjdGl2YXRlZEVsZW1lbnQ7DQogICAgICB0aGlzLmVsZW1lbnRJZCA9IGFjdGl2YXRlZEVsZW1lbnQuaWQ7DQogICAgICB0aGlzLmVsZW1lbnRUeXBlID0gYWN0aXZhdGVkRWxlbWVudC50eXBlLnNwbGl0KCI6IilbMV0gfHwgIiI7DQogICAgICB0aGlzLmVsZW1lbnRCdXNpbmVzc09iamVjdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYWN0aXZhdGVkRWxlbWVudC5idXNpbmVzc09iamVjdCkpOw0KICAgICAgdGhpcy5jb25kaXRpb25Gb3JtVmlzaWJsZSA9ICEhKA0KICAgICAgICB0aGlzLmVsZW1lbnRUeXBlID09PSAiU2VxdWVuY2VGbG93IiAmJg0KICAgICAgICBhY3RpdmF0ZWRFbGVtZW50LnNvdXJjZSAmJg0KICAgICAgICBhY3RpdmF0ZWRFbGVtZW50LnNvdXJjZS50eXBlLmluZGV4T2YoIlN0YXJ0RXZlbnQiKSA9PT0gLTENCiAgICAgICk7DQogICAgICB0aGlzLmZvcm1WaXNpYmxlID0gdGhpcy5lbGVtZW50VHlwZSA9PT0gIlVzZXJUYXNrIiB8fCB0aGlzLmVsZW1lbnRUeXBlID09PSAiU3RhcnRFdmVudCI7DQogICAgfSwNCiAgICBiZWZvcmVEZXN0cm95KCkgew0KICAgICAgd2luZG93LmJwbW5JbnN0YW5jZXMgPSBudWxsOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["PropertiesPanel.vue"],"names":[],"mappings":";AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PropertiesPanel.vue","sourceRoot":"src/components/bpmnProcessDesigner/package/penal","sourcesContent":["<template>\r\n  <div class=\"process-panel__container\" :style=\"{ width: `${this.width}px` }\">\r\n    <el-collapse v-model=\"activeTab\">\r\n      <el-collapse-item name=\"base\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-info\"></i>常规</div>\r\n        <element-base-info :id-edit-disabled=\"idEditDisabled\" :business-object=\"elementBusinessObject\" :type=\"elementType\"\r\n                           :model=\"model\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"condition\" v-if=\"elementType === 'Process'\" key=\"message\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-s-comment\"></i>消息与信号</div>\r\n        <signal-and-massage />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"condition\" v-if=\"conditionFormVisible\" key=\"condition\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-s-promotion\"></i>流转条件</div>\r\n        <flow-condition :business-object=\"elementBusinessObject\" :type=\"elementType\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"condition\" v-if=\"formVisible\" key=\"form\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-s-order\"></i>表单</div>\r\n<!--        <element-form :id=\"elementId\" :type=\"elementType\" />-->\r\n        友情提示：使用 <router-link target=\"_blank\" :to=\"{path:'/bpm/manager/form'}\"><el-link type=\"danger\">流程表单</el-link> </router-link>\r\n        替代，提供更好的表单设计功能\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"task\" v-if=\"elementType.indexOf('Task') !== -1\" key=\"task\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-s-claim\"></i>任务</div>\r\n        <element-task :id=\"elementId\" :type=\"elementType\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"multiInstance\" v-if=\"elementType.indexOf('Task') !== -1\" key=\"multiInstance\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-s-help\"></i>多实例</div>\r\n        <element-multi-instance :business-object=\"elementBusinessObject\" :type=\"elementType\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"listeners\" key=\"listeners\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-message-solid\"></i>执行监听器</div>\r\n        <element-listeners :id=\"elementId\" :type=\"elementType\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"taskListeners\" v-if=\"elementType === 'UserTask'\" key=\"taskListeners\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-message-solid\"></i>任务监听器</div>\r\n        <user-task-listeners :id=\"elementId\" :type=\"elementType\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"extensions\" key=\"extensions\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-circle-plus\"></i>扩展属性</div>\r\n        <element-properties :id=\"elementId\" :type=\"elementType\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"other\" key=\"other\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-s-promotion\"></i>其他</div>\r\n        <element-other-config :id=\"elementId\" />\r\n      </el-collapse-item>\r\n    </el-collapse>\r\n  </div>\r\n</template>\r\n<script>\r\nimport ElementBaseInfo from \"./base/ElementBaseInfo\";\r\nimport ElementOtherConfig from \"./other/ElementOtherConfig\";\r\nimport ElementTask from \"./task/ElementTask\";\r\nimport ElementMultiInstance from \"./multi-instance/ElementMultiInstance\";\r\nimport FlowCondition from \"./flow-condition/FlowCondition\";\r\nimport SignalAndMassage from \"./signal-message/SignalAndMessage\";\r\nimport ElementListeners from \"./listeners/ElementListeners\";\r\nimport ElementProperties from \"./properties/ElementProperties\";\r\nimport ElementForm from \"./form/ElementForm\";\r\nimport UserTaskListeners from \"./listeners/UserTaskListeners\";\r\n/**\r\n * 侧边栏\r\n * @Author MiyueFE\r\n * @Home https://github.com/miyuesc\r\n * @Date 2021年3月31日18:57:51\r\n */\r\nexport default {\r\n  name: \"MyPropertiesPanel\",\r\n  components: {\r\n    UserTaskListeners,\r\n    ElementForm,\r\n    ElementProperties,\r\n    ElementListeners,\r\n    SignalAndMassage,\r\n    FlowCondition,\r\n    ElementMultiInstance,\r\n    ElementTask,\r\n    ElementOtherConfig,\r\n    ElementBaseInfo\r\n  },\r\n  componentName: \"MyPropertiesPanel\",\r\n  props: {\r\n    bpmnModeler: Object,\r\n    prefix: {\r\n      type: String,\r\n      default: \"camunda\"\r\n    },\r\n    width: {\r\n      type: Number,\r\n      default: 480\r\n    },\r\n    idEditDisabled: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    model: Object, // 流程模型的数据\r\n  },\r\n  provide() {\r\n    return {\r\n      prefix: this.prefix,\r\n      width: this.width\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      activeTab: \"base\",\r\n      elementId: \"\",\r\n      elementType: \"\",\r\n      elementBusinessObject: {}, // 元素 businessObject 镜像，提供给需要做判断的组件使用\r\n      conditionFormVisible: false, // 流转条件设置\r\n      formVisible: false // 表单配置\r\n    };\r\n  },\r\n  watch: {\r\n    elementId: {\r\n      handler() {\r\n        this.activeTab = \"base\";\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.initModels();\r\n  },\r\n  methods: {\r\n    initModels() {\r\n      // 初始化 modeler 以及其他 moddle\r\n      if (!this.bpmnModeler) {\r\n        // 避免加载时 流程图 并未加载完成\r\n        this.timer = setTimeout(() => this.initModels(), 10);\r\n        return;\r\n      }\r\n      if (this.timer) clearTimeout(this.timer);\r\n      window.bpmnInstances = {\r\n        modeler: this.bpmnModeler,\r\n        modeling: this.bpmnModeler.get(\"modeling\"),\r\n        moddle: this.bpmnModeler.get(\"moddle\"),\r\n        eventBus: this.bpmnModeler.get(\"eventBus\"),\r\n        bpmnFactory: this.bpmnModeler.get(\"bpmnFactory\"),\r\n        elementFactory: this.bpmnModeler.get(\"elementFactory\"),\r\n        elementRegistry: this.bpmnModeler.get(\"elementRegistry\"),\r\n        replace: this.bpmnModeler.get(\"replace\"),\r\n        selection: this.bpmnModeler.get(\"selection\")\r\n      };\r\n      this.getActiveElement();\r\n    },\r\n    getActiveElement() {\r\n      // 初始第一个选中元素 bpmn:Process\r\n      this.initFormOnChanged(null);\r\n      this.bpmnModeler.on(\"import.done\", e => {\r\n        this.initFormOnChanged(null);\r\n      });\r\n      // 监听选择事件，修改当前激活的元素以及表单\r\n      this.bpmnModeler.on(\"selection.changed\", ({ newSelection }) => {\r\n        this.initFormOnChanged(newSelection[0] || null);\r\n      });\r\n      this.bpmnModeler.on(\"element.changed\", ({ element }) => {\r\n        // 保证 修改 \"默认流转路径\" 类似需要修改多个元素的事件发生的时候，更新表单的元素与原选中元素不一致。\r\n        if (element && element.id === this.elementId) {\r\n          this.initFormOnChanged(element);\r\n        }\r\n      });\r\n    },\r\n    // 初始化数据\r\n    initFormOnChanged(element) {\r\n      let activatedElement = element;\r\n      if (!activatedElement) {\r\n        activatedElement =\r\n          window.bpmnInstances.elementRegistry.find(el => el.type === \"bpmn:Process\") ??\r\n          window.bpmnInstances.elementRegistry.find(el => el.type === \"bpmn:Collaboration\");\r\n      }\r\n      if (!activatedElement) return;\r\n      console.log(`\r\n              ----------\r\n      select element changed:\r\n                id:  ${activatedElement.id}\r\n              type:  ${activatedElement.businessObject.$type}\r\n              ----------\r\n              `);\r\n      console.log(\"businessObject: \", activatedElement.businessObject);\r\n      window.bpmnInstances.bpmnElement = activatedElement;\r\n      this.bpmnElement = activatedElement;\r\n      this.elementId = activatedElement.id;\r\n      this.elementType = activatedElement.type.split(\":\")[1] || \"\";\r\n      this.elementBusinessObject = JSON.parse(JSON.stringify(activatedElement.businessObject));\r\n      this.conditionFormVisible = !!(\r\n        this.elementType === \"SequenceFlow\" &&\r\n        activatedElement.source &&\r\n        activatedElement.source.type.indexOf(\"StartEvent\") === -1\r\n      );\r\n      this.formVisible = this.elementType === \"UserTask\" || this.elementType === \"StartEvent\";\r\n    },\r\n    beforeDestroy() {\r\n      window.bpmnInstances = null;\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}