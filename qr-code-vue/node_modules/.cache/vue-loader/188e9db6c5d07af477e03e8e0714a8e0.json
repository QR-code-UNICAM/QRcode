{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\mp\\components\\wx-reply\\main.vue?vue&type=style&index=0&id=00bc7533&lang=scss&scoped=true","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\mp\\components\\wx-reply\\main.vue","mtime":1704630438013},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoucHVibGljLWFjY291bnQtbWFuYWdlbWVudHsNCiAgLmVsLWlucHV0ew0KICAgIHdpZHRoOiA3MCU7DQogICAgbWFyZ2luLXJpZ2h0OiAyJTsNCiAgfQ0KfQ0KLnBhZ2luYXRpb257DQogIHRleHQtYWxpZ246IHJpZ2h0Ow0KICBtYXJnaW4tcmlnaHQ6IDI1cHg7DQp9DQouc2VsZWN0LWl0ZW17DQogIHdpZHRoOiAyODBweDsNCiAgcGFkZGluZzogMTBweDsNCiAgbWFyZ2luOiAwIGF1dG8gMTBweCBhdXRvOw0KICBib3JkZXI6IDFweCBzb2xpZCAjZWFlYWVhOw0KfQ0KLnNlbGVjdC1pdGVtMnsNCiAgcGFkZGluZzogMTBweDsNCiAgbWFyZ2luOiAwIGF1dG8gMTBweCBhdXRvOw0KICBib3JkZXI6IDFweCBzb2xpZCAjZWFlYWVhOw0KfQ0KLm9wZS1yb3d7DQogIHBhZGRpbmctdG9wOiAxMHB4Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQouaXRlbS1uYW1lew0KICBmb250LXNpemU6IDEycHg7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIHRleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7DQogIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5lbC1mb3JtLWl0ZW1fX2NvbnRlbnR7DQogIGxpbmUtaGVpZ2h0OnVuc2V0IWltcG9ydGFudDsNCn0NCi5jb2wtc2VsZWN0ew0KICBib3JkZXI6IDFweCBzb2xpZCByZ2IoMjM0LCAyMzQsIDIzNCk7DQogIHBhZGRpbmc6IDUwcHggMHB4Ow0KICBoZWlnaHQ6IDE2MHB4Ow0KICB3aWR0aDogNDkuNSU7DQp9DQouY29sLXNlbGVjdDJ7DQogIGJvcmRlcjogMXB4IHNvbGlkIHJnYigyMzQsIDIzNCwgMjM0KTsNCiAgcGFkZGluZzogNTBweCAwcHg7DQogIGhlaWdodDogMTYwcHg7DQp9DQouY29sLWFkZHsNCiAgYm9yZGVyOiAxcHggc29saWQgcmdiKDIzNCwgMjM0LCAyMzQpOw0KICBwYWRkaW5nOiA1MHB4IDBweDsNCiAgaGVpZ2h0OiAxNjBweDsNCiAgd2lkdGg6IDQ5LjUlOw0KICBmbG9hdDogcmlnaHQNCn0NCi5hdmF0YXItdXBsb2FkZXItaWNvbiB7DQogIGJvcmRlcjogMXB4IHNvbGlkICNkOWQ5ZDk7DQogIGZvbnQtc2l6ZTogMjhweDsNCiAgY29sb3I6ICM4YzkzOWQ7DQogIHdpZHRoOiAxMDBweCFpbXBvcnRhbnQ7DQogIGhlaWdodDogMTAwcHghaW1wb3J0YW50Ow0KICBsaW5lLWhlaWdodDogMTAwcHghaW1wb3J0YW50Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoubWF0ZXJpYWwtaW1nIHsNCiAgd2lkdGg6IDEwMCU7DQp9DQoudGh1bWItZGl2ew0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5pdGVtLWluZm9zew0KICB3aWR0aDogMzAlOw0KICBtYXJnaW46IGF1dG8NCn0NCg=="},{"version":3,"sources":["main.vue"],"names":[],"mappings":";AAydA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.vue","sourceRoot":"src/views/mp/components/wx-reply","sourcesContent":["<!--\r\n  - Copyright (C) 2018-2019\r\n  - All rights reserved, Designed By www.joolun.com\r\n  芋道源码：\r\n  ① 移除多余的 rep 为前缀的变量，让 message 消息更简单\r\n  ② 代码优化，补充注释，提升阅读性\r\n  ③ 优化消息的临时缓存策略，发送消息时，只清理被发送消息的 tab，不会强制切回到 text 输入\r\n  ④ 支持发送【视频】消息时，支持新建视频\r\n-->\r\n<template>\r\n  <el-tabs type=\"border-card\" v-model=\"objData.type\" @tab-click=\"handleClick\">\r\n    <!-- 类型 1：文本 -->\r\n    <el-tab-pane name=\"text\">\r\n      <span slot=\"label\"><i class=\"el-icon-document\"></i> 文本</span>\r\n      <el-input type=\"textarea\" :rows=\"5\" placeholder=\"请输入内容\" v-model=\"objData.content\" @input=\"inputContent\" />\r\n    </el-tab-pane>\r\n    <!-- 类型 2：图片 -->\r\n    <el-tab-pane name=\"image\">\r\n      <span slot=\"label\"><i class=\"el-icon-picture\"></i> 图片</span>\r\n      <el-row>\r\n        <!-- 情况一：已经选择好素材、或者上传好图片 -->\r\n        <div class=\"select-item\" v-if=\"objData.url\">\r\n          <img class=\"material-img\" :src=\"objData.url\">\r\n          <p class=\"item-name\" v-if=\"objData.name\">{{objData.name}}</p>\r\n          <el-row class=\"ope-row\">\r\n            <el-button type=\"danger\" icon=\"el-icon-delete\" circle @click=\"deleteObj\"></el-button>\r\n          </el-row>\r\n        </div>\r\n        <!-- 情况二：未做完上述操作 -->\r\n        <div v-else>\r\n          <el-row style=\"text-align: center\">\r\n            <!-- 选择素材 -->\r\n            <el-col :span=\"12\" class=\"col-select\">\r\n              <el-button type=\"success\" @click=\"openMaterial\">\r\n                素材库选择<i class=\"el-icon-circle-check el-icon--right\"></i>\r\n              </el-button>\r\n              <el-dialog title=\"选择图片\" :visible.sync=\"dialogImageVisible\" width=\"90%\" append-to-body>\r\n                <wx-material-select :obj-data=\"objData\" @selectMaterial=\"selectMaterial\" />\r\n              </el-dialog>\r\n            </el-col>\r\n            <!-- 文件上传 -->\r\n            <el-col :span=\"12\" class=\"col-add\">\r\n              <el-upload :action=\"actionUrl\" :headers=\"headers\" multiple :limit=\"1\" :file-list=\"fileList\" :data=\"uploadData\"\r\n                         :before-upload=\"beforeImageUpload\" :on-success=\"handleUploadSuccess\">\r\n                <el-button type=\"primary\">上传图片</el-button>\r\n                <div slot=\"tip\" class=\"el-upload__tip\">支持 bmp/png/jpeg/jpg/gif 格式，大小不超过 2M</div>\r\n              </el-upload>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n      </el-row>\r\n    </el-tab-pane>\r\n    <!-- 类型 3：语音 -->\r\n    <el-tab-pane name=\"voice\">\r\n      <span slot=\"label\"><i class=\"el-icon-phone\"></i> 语音</span>\r\n      <el-row>\r\n        <div class=\"select-item2\" v-if=\"objData.url\">\r\n          <p class=\"item-name\">{{objData.name}}</p>\r\n          <div class=\"item-infos\">\r\n            <wx-voice-player :url=\"objData.url\" />\r\n          </div>\r\n          <el-row class=\"ope-row\">\r\n            <el-button type=\"danger\" icon=\"el-icon-delete\" circle @click=\"deleteObj\"></el-button>\r\n          </el-row>\r\n        </div>\r\n        <div v-else>\r\n          <el-row style=\"text-align: center\">\r\n            <!-- 选择素材 -->\r\n            <el-col :span=\"12\" class=\"col-select\">\r\n              <el-button type=\"success\" @click=\"openMaterial\">\r\n                素材库选择<i class=\"el-icon-circle-check el-icon--right\"></i>\r\n              </el-button>\r\n              <el-dialog title=\"选择语音\" :visible.sync=\"dialogVoiceVisible\" width=\"90%\" append-to-body>\r\n                <WxMaterialSelect :objData=\"objData\" @selectMaterial=\"selectMaterial\"></WxMaterialSelect>\r\n              </el-dialog>\r\n            </el-col>\r\n            <!-- 文件上传 -->\r\n            <el-col :span=\"12\" class=\"col-add\">\r\n              <el-upload :action=\"actionUrl\" :headers=\"headers\" multiple :limit=\"1\" :file-list=\"fileList\" :data=\"uploadData\"\r\n                         :before-upload=\"beforeVoiceUpload\" :on-success=\"handleUploadSuccess\">\r\n                <el-button type=\"primary\">点击上传</el-button>\r\n                <div slot=\"tip\" class=\"el-upload__tip\">格式支持 mp3/wma/wav/amr，文件大小不超过 2M，播放长度不超过 60s</div>\r\n              </el-upload>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n      </el-row>\r\n    </el-tab-pane>\r\n    <!-- 类型 4：视频 -->\r\n    <el-tab-pane name=\"video\">\r\n      <span slot=\"label\"><i class=\"el-icon-share\"></i> 视频</span>\r\n      <el-row>\r\n        <el-input v-model=\"objData.title\" placeholder=\"请输入标题\" @input=\"inputContent\" />\r\n        <div style=\"margin: 20px 0;\"></div>\r\n        <el-input v-model=\"objData.description\" placeholder=\"请输入描述\" @input=\"inputContent\" />\r\n        <div style=\"margin: 20px 0;\"></div>\r\n        <div style=\"text-align: center;\">\r\n          <wx-video-player v-if=\"objData.url\" :url=\"objData.url\" />\r\n        </div>\r\n        <div style=\"margin: 20px 0;\"></div>\r\n        <el-row style=\"text-align: center\">\r\n          <!-- 选择素材 -->\r\n          <el-col :span=\"12\">\r\n            <el-button type=\"success\" @click=\"openMaterial\">\r\n              素材库选择<i class=\"el-icon-circle-check el-icon--right\"></i>\r\n            </el-button>\r\n            <el-dialog title=\"选择视频\" :visible.sync=\"dialogVideoVisible\" width=\"90%\" append-to-body>\r\n              <wx-material-select :objData=\"objData\" @selectMaterial=\"selectMaterial\" />\r\n            </el-dialog>\r\n          </el-col>\r\n          <!-- 文件上传 -->\r\n          <el-col :span=\"12\">\r\n            <el-upload :action=\"actionUrl\" :headers=\"headers\" multiple :limit=\"1\" :file-list=\"fileList\" :data=\"uploadData\"\r\n                       :before-upload=\"beforeVideoUpload\" :on-success=\"handleUploadSuccess\">\r\n              <el-button type=\"primary\">新建视频<i class=\"el-icon-upload el-icon--right\"></i></el-button>\r\n            </el-upload>\r\n          </el-col>\r\n        </el-row>\r\n      </el-row>\r\n    </el-tab-pane>\r\n    <!-- 类型 5：图文 -->\r\n    <el-tab-pane name=\"news\">\r\n      <span slot=\"label\"><i class=\"el-icon-news\"></i> 图文</span>\r\n      <el-row>\r\n        <div class=\"select-item\" v-if=\"objData.articles\">\r\n          <wx-news :articles=\"objData.articles\" />\r\n          <el-row class=\"ope-row\">\r\n            <el-button type=\"danger\" icon=\"el-icon-delete\" circle @click=\"deleteObj\" />\r\n          </el-row>\r\n        </div>\r\n        <!-- 选择素材 -->\r\n        <div v-if=\"!objData.content\">\r\n          <el-row style=\"text-align: center\">\r\n            <el-col :span=\"24\">\r\n              <el-button type=\"success\" @click=\"openMaterial\">{{newsType === '1' ? '选择已发布图文' : '选择草稿箱图文'}}<i class=\"el-icon-circle-check el-icon--right\"></i></el-button>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n        <el-dialog title=\"选择图文\" :visible.sync=\"dialogNewsVisible\" width=\"90%\" append-to-body>\r\n          <wx-material-select :objData=\"objData\" @selectMaterial=\"selectMaterial\" :newsType=\"newsType\" />\r\n        </el-dialog>\r\n      </el-row>\r\n    </el-tab-pane>\r\n    <!-- 类型 6：音乐 -->\r\n    <el-tab-pane name=\"music\">\r\n      <span slot=\"label\"><i class=\"el-icon-service\"></i> 音乐</span>\r\n      <el-row>\r\n        <el-col :span=\"6\">\r\n          <div class=\"thumb-div\">\r\n            <img style=\"width: 100px\" v-if=\"objData.thumbMediaUrl\" :src=\"objData.thumbMediaUrl\">\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n            <div class=\"thumb-but\">\r\n              <el-upload :action=\"actionUrl\" :headers=\"headers\" multiple :limit=\"1\" :file-list=\"fileList\" :data=\"uploadData\"\r\n                         :before-upload=\"beforeThumbImageUpload\" :on-success=\"handleUploadSuccess\">\r\n                <el-button slot=\"trigger\" size=\"mini\" type=\"text\">本地上传</el-button>\r\n                <el-button size=\"mini\" type=\"text\" @click=\"openMaterial\" style=\"margin-left: 5px\">素材库选择</el-button>\r\n              </el-upload>\r\n            </div>\r\n          </div>\r\n          <el-dialog title=\"选择图片\" :visible.sync=\"dialogThumbVisible\" width=\"80%\" append-to-body>\r\n            <wx-material-select :objData=\"{type:'image', accountId: objData.accountId}\" @selectMaterial=\"selectMaterial\" />\r\n          </el-dialog>\r\n        </el-col>\r\n        <el-col :span=\"18\">\r\n          <el-input v-model=\"objData.title\" placeholder=\"请输入标题\" @input=\"inputContent\" />\r\n          <div style=\"margin: 20px 0;\"></div>\r\n          <el-input v-model=\"objData.description\" placeholder=\"请输入描述\" @input=\"inputContent\" />\r\n        </el-col>\r\n      </el-row>\r\n      <div style=\"margin: 20px 0;\"></div>\r\n      <el-input v-model=\"objData.musicUrl\" placeholder=\"请输入音乐链接\" @input=\"inputContent\" />\r\n      <div style=\"margin: 20px 0;\"></div>\r\n      <el-input v-model=\"objData.hqMusicUrl\" placeholder=\"请输入高质量音乐链接\" @input=\"inputContent\" />\r\n    </el-tab-pane>\r\n  </el-tabs>\r\n</template>\r\n\r\n<script>\r\nimport WxNews from '@/views/mp/components/wx-news/main.vue'\r\nimport WxMaterialSelect from '@/views/mp/components/wx-material-select/main.vue'\r\nimport WxVoicePlayer from '@/views/mp/components/wx-voice-play/main.vue';\r\nimport WxVideoPlayer from '@/views/mp/components/wx-video-play/main.vue';\r\n\r\nimport { getAccessToken } from '@/utils/auth'\r\n\r\nexport default {\r\n  name: \"wxReplySelect\",\r\n  components: {\r\n    WxNews,\r\n    WxMaterialSelect,\r\n    WxVoicePlayer,\r\n    WxVideoPlayer\r\n  },\r\n  props: {\r\n    objData: { // 消息对象。\r\n      type: Object, // 设置为 Object 的原因，方便属性的传递\r\n      required: true,\r\n    },\r\n    newsType:{ // 图文类型：1、已发布图文；2、草稿箱图文\r\n      type: String,\r\n      default: \"1\"\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      tempPlayerObj: {\r\n        type: '2'\r\n      },\r\n\r\n      tempObj: new Map().set( // 临时缓存，切换消息类型的 tab 的时候，可以保存对应的数据；\r\n          this.objData.type, // 消息类型\r\n          Object.assign({}, this.objData)), // 消息内容\r\n\r\n      // ========== 素材选择的弹窗，是否可见 ==========\r\n      dialogNewsVisible: false, // 图文\r\n      dialogImageVisible: false, // 图片\r\n      dialogVoiceVisible: false, // 语音\r\n      dialogVideoVisible: false, // 视频\r\n      dialogThumbVisible: false, // 缩略图\r\n\r\n      // ========== 文件上传（图片、语音、视频） ==========\r\n      fileList: [], // 文件列表\r\n      uploadData: {\r\n        \"accountId\": undefined,\r\n        \"type\": this.objData.type,\r\n        \"title\":'',\r\n        \"introduction\":''\r\n      },\r\n      actionUrl: process.env.VUE_APP_BASE_API + '/admin-api/mp/material/upload-temporary',\r\n      headers: { Authorization: \"Bearer \" + getAccessToken() }, // 设置上传的请求头部\r\n    }\r\n  },\r\n  methods:{\r\n    beforeThumbImageUpload(file){\r\n      const isType = file.type === 'image/jpeg'\r\n          || file.type === 'image/png'\r\n          || file.type === 'image/gif'\r\n          || file.type === 'image/bmp'\r\n          || file.type === 'image/jpg';\r\n      if (!isType) {\r\n        this.$message.error('上传图片格式不对!');\r\n        return false;\r\n      }\r\n      const isLt = file.size / 1024 / 1024 < 2;\r\n      if (!isLt) {\r\n        this.$message.error('上传图片大小不能超过 2M!');\r\n        return false;\r\n      }\r\n      this.uploadData.accountId = this.objData.accountId;\r\n      return true;\r\n    },\r\n    beforeVoiceUpload(file){\r\n      // 校验格式\r\n      const isType = file.type === 'audio/mp3'\r\n          || file.type === 'audio/mpeg'\r\n          || file.type === 'audio/wma'\r\n          || file.type === 'audio/wav'\r\n          || file.type === 'audio/amr';\r\n      if (!isType) {\r\n        this.$message.error('上传语音格式不对!' + file.type);\r\n        return false;\r\n      }\r\n      // 校验大小\r\n      const isLt = file.size / 1024 / 1024 < 2;\r\n      if (!isLt) {\r\n        this.$message.error('上传语音大小不能超过 2M!');\r\n        return false;\r\n      }\r\n      this.uploadData.accountId = this.objData.accountId;\r\n      return true;\r\n    },\r\n    beforeImageUpload(file) {\r\n      // 校验格式\r\n      const isType = file.type === 'image/jpeg'\r\n          || file.type === 'image/png'\r\n          || file.type === 'image/gif'\r\n          || file.type === 'image/bmp'\r\n          || file.type === 'image/jpg';\r\n      if (!isType) {\r\n        this.$message.error('上传图片格式不对!');\r\n        return false;\r\n      }\r\n      // 校验大小\r\n      const isLt = file.size / 1024 / 1024 < 2;\r\n      if (!isLt) {\r\n        this.$message.error('上传图片大小不能超过 2M!');\r\n        return false;\r\n      }\r\n      this.uploadData.accountId = this.objData.accountId;\r\n      return true;\r\n    },\r\n    beforeVideoUpload(file){\r\n      // 校验格式\r\n      const isType = file.type === 'video/mp4';\r\n      if (!isType) {\r\n        this.$message.error('上传视频格式不对!');\r\n        return false;\r\n      }\r\n      // 校验大小\r\n      const isLt = file.size / 1024 / 1024 < 10;\r\n      if (!isLt) {\r\n        this.$message.error('上传视频大小不能超过 10M!');\r\n        return false;\r\n      }\r\n      this.uploadData.accountId = this.objData.accountId;\r\n      return true;\r\n    },\r\n    handleUploadSuccess(response, file, fileList) {\r\n      if (response.code !== 0) {\r\n        this.$message.error('上传出错：' + response.msg)\r\n        return false;\r\n      }\r\n\r\n      // 清空上传时的各种数据\r\n      this.fileList = []\r\n      this.uploadData.title = ''\r\n      this.uploadData.introduction = ''\r\n\r\n      // 上传好的文件，本质是个素材，所以可以进行选中\r\n      let item = response.data\r\n      this.selectMaterial(item)\r\n    },\r\n    /**\r\n     * 切换消息类型的 tab\r\n     *\r\n     * @param tab tab\r\n     */\r\n    handleClick(tab) {\r\n      // 设置后续文件上传的文件类型\r\n      this.uploadData.type = this.objData.type;\r\n      if (this.uploadData.type === 'music') { // 【音乐】上传的是缩略图\r\n        this.uploadData.type = 'thumb';\r\n      }\r\n\r\n      // 从 tempObj 临时缓存中，获取对应的数据，并设置回 objData\r\n      let tempObjItem = this.tempObj.get(this.objData.type)\r\n      if (tempObjItem) {\r\n        this.objData.content = tempObjItem.content ? tempObjItem.content : null\r\n        this.objData.mediaId = tempObjItem.mediaId ? tempObjItem.mediaId : null\r\n        this.objData.url = tempObjItem.url ? tempObjItem.url : null\r\n        this.objData.name = tempObjItem.url ? tempObjItem.name : null\r\n        this.objData.title = tempObjItem.title ? tempObjItem.title : null\r\n        this.objData.description = tempObjItem.description ? tempObjItem.description : null\r\n        return;\r\n      }\r\n      // 如果获取不到，需要把 objData 复原\r\n      // 必须使用 $set 赋值，不然 input 无法输入内容\r\n      this.$set(this.objData, 'content', '');\r\n      this.$delete(this.objData, 'mediaId');\r\n      this.$delete(this.objData, 'url');\r\n      this.$set(this.objData, 'title', '');\r\n      this.$set(this.objData, 'description', '');\r\n\r\n    },\r\n    /**\r\n     * 选择素材，将设置设置到 objData 变量\r\n     *\r\n     * @param item 素材\r\n     */\r\n    selectMaterial(item) {\r\n      // 选择好素材，所以隐藏弹窗\r\n      this.closeMaterial();\r\n\r\n      // 创建 tempObjItem 对象，并设置对应的值\r\n      let tempObjItem = {}\r\n      tempObjItem.type = this.objData.type;\r\n      if (this.objData.type === 'news') {\r\n        tempObjItem.articles = item.content.newsItem\r\n        this.objData.articles = item.content.newsItem\r\n      } else if (this.objData.type === 'music') { // 音乐需要特殊处理，因为选择的是图片的缩略图\r\n        tempObjItem.thumbMediaId = item.mediaId\r\n        this.objData.thumbMediaId = item.mediaId\r\n        tempObjItem.thumbMediaUrl = item.url\r\n        this.objData.thumbMediaUrl = item.url\r\n        // title、introduction、musicUrl、hqMusicUrl：从 objData 到 tempObjItem，避免上传素材后，被覆盖掉\r\n        tempObjItem.title = this.objData.title || ''\r\n        tempObjItem.introduction = this.objData.introduction  || ''\r\n        tempObjItem.musicUrl = this.objData.musicUrl  || ''\r\n        tempObjItem.hqMusicUrl = this.objData.hqMusicUrl  || ''\r\n      } else if (this.objData.type === 'image'\r\n          || this.objData.type === 'voice') {\r\n        tempObjItem.mediaId = item.mediaId\r\n        this.objData.mediaId = item.mediaId\r\n        tempObjItem.url = item.url;\r\n        this.objData.url = item.url;\r\n        tempObjItem.name = item.name\r\n        this.objData.name = item.name\r\n      } else if (this.objData.type === 'video') {\r\n        tempObjItem.mediaId = item.mediaId\r\n        this.objData.mediaId = item.mediaId\r\n        tempObjItem.url = item.url;\r\n        this.objData.url = item.url;\r\n        tempObjItem.name = item.name\r\n        this.objData.name = item.name\r\n        // title、introduction：从 item 到 tempObjItem，因为素材里有 title、introduction\r\n        if (item.title) {\r\n          this.objData.title = item.title || ''\r\n          tempObjItem.title = item.title || ''\r\n        }\r\n        if (item.introduction) {\r\n          this.objData.description = item.introduction || '' // 消息使用的是 description，素材使用的是 introduction，所以转换下\r\n          tempObjItem.description = item.introduction || ''\r\n        }\r\n      } else if (this.objData.type === 'text') {\r\n        this.objData.content = item.content || ''\r\n      }\r\n      // 最终设置到临时缓存\r\n      this.tempObj.set(this.objData.type, tempObjItem)\r\n    },\r\n    openMaterial() {\r\n      if (this.objData.type === 'news') {\r\n        this.dialogNewsVisible = true\r\n      } else if(this.objData.type === 'image') {\r\n        this.dialogImageVisible = true\r\n      } else if(this.objData.type === 'voice') {\r\n        this.dialogVoiceVisible = true\r\n      } else if(this.objData.type === 'video') {\r\n        this.dialogVideoVisible = true\r\n      } else if(this.objData.type === 'music') {\r\n        this.dialogThumbVisible = true\r\n      }\r\n    },\r\n    closeMaterial() {\r\n      this.dialogNewsVisible = false\r\n      this.dialogImageVisible = false\r\n      this.dialogVoiceVisible = false\r\n      this.dialogVideoVisible = false\r\n      this.dialogThumbVisible = false\r\n    },\r\n    deleteObj() {\r\n      if (this.objData.type === 'news') {\r\n        this.$delete(this.objData, 'articles');\r\n      } else if(this.objData.type === 'image') {\r\n        this.objData.mediaId = null\r\n        this.$delete(this.objData, 'url');\r\n        this.objData.name = null\r\n      } else if(this.objData.type === 'voice') {\r\n        this.objData.mediaId = null\r\n        this.$delete(this.objData, 'url');\r\n        this.objData.name = null\r\n      } else if(this.objData.type === 'video') {\r\n        this.objData.mediaId = null\r\n        this.$delete(this.objData, 'url');\r\n        this.objData.name = null\r\n        this.objData.title = null\r\n        this.objData.description = null\r\n      } else if(this.objData.type === 'music') {\r\n        this.objData.thumbMediaId = null\r\n        this.objData.thumbMediaUrl = null\r\n        this.objData.title = null\r\n        this.objData.description = null\r\n        this.objData.musicUrl = null\r\n        this.objData.hqMusicUrl = null\r\n      } else if(this.objData.type === 'text') {\r\n        this.objData.content = null\r\n      }\r\n      // 覆盖缓存\r\n      this.tempObj.set(this.objData.type, Object.assign({}, this.objData));\r\n    },\r\n    /**\r\n     * 输入时，缓存每次 objData 到 tempObj 中\r\n     *\r\n     * why？不确定为什么 v-model=\"objData.content\" 不能自动缓存，所以通过这样的方式\r\n     */\r\n    inputContent(str) {\r\n      // 覆盖缓存\r\n      this.tempObj.set(this.objData.type, Object.assign({}, this.objData));\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.public-account-management{\r\n  .el-input{\r\n    width: 70%;\r\n    margin-right: 2%;\r\n  }\r\n}\r\n.pagination{\r\n  text-align: right;\r\n  margin-right: 25px;\r\n}\r\n.select-item{\r\n  width: 280px;\r\n  padding: 10px;\r\n  margin: 0 auto 10px auto;\r\n  border: 1px solid #eaeaea;\r\n}\r\n.select-item2{\r\n  padding: 10px;\r\n  margin: 0 auto 10px auto;\r\n  border: 1px solid #eaeaea;\r\n}\r\n.ope-row{\r\n  padding-top: 10px;\r\n  text-align: center;\r\n}\r\n.item-name{\r\n  font-size: 12px;\r\n  overflow: hidden;\r\n  text-overflow:ellipsis;\r\n  white-space: nowrap;\r\n  text-align: center;\r\n}\r\n.el-form-item__content{\r\n  line-height:unset!important;\r\n}\r\n.col-select{\r\n  border: 1px solid rgb(234, 234, 234);\r\n  padding: 50px 0px;\r\n  height: 160px;\r\n  width: 49.5%;\r\n}\r\n.col-select2{\r\n  border: 1px solid rgb(234, 234, 234);\r\n  padding: 50px 0px;\r\n  height: 160px;\r\n}\r\n.col-add{\r\n  border: 1px solid rgb(234, 234, 234);\r\n  padding: 50px 0px;\r\n  height: 160px;\r\n  width: 49.5%;\r\n  float: right\r\n}\r\n.avatar-uploader-icon {\r\n  border: 1px solid #d9d9d9;\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 100px!important;\r\n  height: 100px!important;\r\n  line-height: 100px!important;\r\n  text-align: center;\r\n}\r\n.material-img {\r\n  width: 100%;\r\n}\r\n.thumb-div{\r\n  display: inline-block;\r\n  text-align: center;\r\n}\r\n.item-infos{\r\n  width: 30%;\r\n  margin: auto\r\n}\r\n</style>\r\n"]}]}