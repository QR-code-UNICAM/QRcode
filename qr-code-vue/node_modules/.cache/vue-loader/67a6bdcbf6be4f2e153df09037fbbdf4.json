{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\mp\\account\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\mp\\account\\index.vue","mtime":1704630437997},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgew0KICBjbGVhckFjY291bnRRdW90YSwNCiAgY3JlYXRlQWNjb3VudCwNCiAgZGVsZXRlQWNjb3VudCwNCiAgZ2VuZXJhdGVBY2NvdW50UXJDb2RlLA0KICBnZXRBY2NvdW50LA0KICBnZXRBY2NvdW50UGFnZSwNCiAgdXBkYXRlQWNjb3VudA0KfSBmcm9tICdAL2FwaS9tcC9hY2NvdW50Jw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdNcEFjY291bnQnLA0KICBjb21wb25lbnRzOiB7fSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g6YGu572p5bGCDQogICAgICBsb2FkaW5nOiB0cnVlLA0KICAgICAgLy8g5pi+56S65pCc57Si5p2h5Lu2DQogICAgICBzaG93U2VhcmNoOiB0cnVlLA0KICAgICAgLy8g5oC75p2h5pWwDQogICAgICB0b3RhbDogMCwNCiAgICAgIC8vIOWFrOS8l+WPt+i0puWPt+WIl+ihqA0KICAgICAgbGlzdDogW10sDQogICAgICAvLyDlvLnlh7rlsYLmoIfpopgNCiAgICAgIHRpdGxlOiAnJywNCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxgg0KICAgICAgb3BlbjogZmFsc2UsDQogICAgICAvLyDmn6Xor6Llj4LmlbANCiAgICAgIHF1ZXJ5UGFyYW1zOiB7DQogICAgICAgIHBhZ2VObzogMSwNCiAgICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgICBuYW1lOiBudWxsLA0KICAgICAgICBhY2NvdW50OiBudWxsLA0KICAgICAgICBhcHBJZDogbnVsbCwNCiAgICAgIH0sDQogICAgICAvLyDooajljZXlj4LmlbANCiAgICAgIGZvcm06IHt9LA0KICAgICAgLy8g6KGo5Y2V5qCh6aqMDQogICAgICBydWxlczogew0KICAgICAgICBuYW1lOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5ZCN56ew5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInfV0sDQogICAgICAgIGFjY291bnQ6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICflhazkvJflj7fotKblj7fkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cid9XSwNCiAgICAgICAgYXBwSWQ6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICflhazkvJflj7cgYXBwSWQg5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInfV0sDQogICAgICAgIGFwcFNlY3JldDogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+WFrOS8l+WPt+WvhumSpeS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJ31dLA0KICAgICAgICB0b2tlbjogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+WFrOS8l+WPtyB0b2tlbiDkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cid9XSwNCiAgICAgIH0sDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0TGlzdCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvKiog5p+l6K+i5YiX6KGoICovDQogICAgZ2V0TGlzdCgpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCiAgICAgIC8vIOWkhOeQhuafpeivouWPguaVsA0KICAgICAgbGV0IHBhcmFtcyA9IHsuLi50aGlzLnF1ZXJ5UGFyYW1zfQ0KICAgICAgLy8g5omn6KGM5p+l6K+iDQogICAgICBnZXRBY2NvdW50UGFnZShwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3QNCiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWwNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgIH0pDQogICAgfSwNCiAgICAvKiog5Y+W5raI5oyJ6ZKuICovDQogICAgY2FuY2VsKCkgew0KICAgICAgdGhpcy5vcGVuID0gZmFsc2UNCiAgICAgIHRoaXMucmVzZXQoKQ0KICAgIH0sDQogICAgLyoqIOihqOWNlemHjee9riAqLw0KICAgIHJlc2V0KCkgew0KICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBuYW1lOiB1bmRlZmluZWQsDQogICAgICAgIGFjY291bnQ6IHVuZGVmaW5lZCwNCiAgICAgICAgYXBwSWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgYXBwU2VjcmV0OiB1bmRlZmluZWQsDQogICAgICAgIHRva2VuOiB1bmRlZmluZWQsDQogICAgICAgIGFlc0tleTogdW5kZWZpbmVkLA0KICAgICAgICByZW1hcms6IHVuZGVmaW5lZCwNCiAgICAgIH0NCiAgICAgIHRoaXMucmVzZXRGb3JtKCdmb3JtJykNCiAgICB9LA0KICAgIC8qKiDmkJzntKLmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVRdWVyeSgpIHsNCiAgICAgIHRoaXMucXVlcnlQYXJhbXMucGFnZU5vID0gMQ0KICAgICAgdGhpcy5nZXRMaXN0KCkNCiAgICB9LA0KICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8NCiAgICByZXNldFF1ZXJ5KCkgew0KICAgICAgdGhpcy5kYXRlUmFuZ2VDcmVhdGVUaW1lID0gW10NCiAgICAgIHRoaXMucmVzZXRGb3JtKCdxdWVyeUZvcm0nKQ0KICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpDQogICAgfSwNCiAgICAvKiog5paw5aKe5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlQWRkKCkgew0KICAgICAgdGhpcy5yZXNldCgpDQogICAgICB0aGlzLm9wZW4gPSB0cnVlDQogICAgICB0aGlzLnRpdGxlID0gJ+a3u+WKoOWFrOS8l+WPt+i0puWPtycNCiAgICB9LA0KICAgIC8qKiDkv67mlLnmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVVcGRhdGUocm93KSB7DQogICAgICB0aGlzLnJlc2V0KCkNCiAgICAgIGNvbnN0IGlkID0gcm93LmlkDQogICAgICBnZXRBY2NvdW50KGlkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5mb3JtID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgICB0aGlzLm9wZW4gPSB0cnVlDQogICAgICAgIHRoaXMudGl0bGUgPSAn5L+u5pS55YWs5LyX5Y+36LSm5Y+3Jw0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qKiDmj5DkuqTmjInpkq4gKi8NCiAgICBzdWJtaXRGb3JtKCkgew0KICAgICAgdGhpcy4kcmVmc1snZm9ybSddLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKCF2YWxpZCkgew0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICAgIC8vIOS/ruaUueeahOaPkOS6pA0KICAgICAgICBpZiAodGhpcy5mb3JtLmlkICE9IG51bGwpIHsNCiAgICAgICAgICB1cGRhdGVBY2NvdW50KHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCfkv67mlLnmiJDlip8nKQ0KICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpDQogICAgICAgICAgfSkNCiAgICAgICAgICByZXR1cm4NCiAgICAgICAgfQ0KICAgICAgICAvLyDmt7vliqDnmoTmj5DkuqQNCiAgICAgICAgY3JlYXRlQWNjb3VudCh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoJ+aWsOWinuaIkOWKnycpDQogICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2UNCiAgICAgICAgICB0aGlzLmdldExpc3QoKQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVEZWxldGUocm93KSB7DQogICAgICBjb25zdCBpZCA9IHJvdy5pZA0KICAgICAgdGhpcy4kbW9kYWwuY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk5YWs5LyX5Y+36LSm5Y+357yW5Y+35Li6IicgKyByb3cubmFtZSArICci55qE5pWw5o2u6aG5PycpLnRoZW4oZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gZGVsZXRlQWNjb3VudChpZCkNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLmdldExpc3QoKQ0KICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCfliKDpmaTmiJDlip8nKQ0KICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qKiDnlJ/miJDkuoznu7TnoIHnmoTmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVHZW5lcmF0ZVFyQ29kZShyb3cpIHsNCiAgICAgIGNvbnN0IGlkID0gcm93LmlkDQogICAgICB0aGlzLiRtb2RhbC5jb25maXJtKCfmmK/lkKbnoa7orqTnlJ/miJDlhazkvJflj7fotKblj7fnvJblj7fkuLoiJyArIHJvdy5uYW1lICsgJyLnmoTkuoznu7TnoIE/JykudGhlbihmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBnZW5lcmF0ZUFjY291bnRRckNvZGUoaWQpDQogICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy5nZXRMaXN0KCkNCiAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygn55Sf5oiQ5LqM57u056CB5oiQ5YqfJykNCiAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgIH0pDQogICAgfSwNCiAgICAvKiog5riF56m65LqM57u056CBIEFQSSDphY3pop3nmoTmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVDbGVhblF1b3RhKHJvdykgew0KICAgICAgY29uc3QgaWQgPSByb3cuaWQNCiAgICAgIHRoaXMuJG1vZGFsLmNvbmZpcm0oJ+aYr+WQpuehruiupOa4heepuueUn+aIkOWFrOS8l+WPt+i0puWPt+e8luWPt+S4uiInICsgcm93Lm5hbWUgKyAnIueahCBBUEkg6YWN6aKdPycpLnRoZW4oZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gY2xlYXJBY2NvdW50UXVvdGEoaWQpDQogICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygn5riF56m6IEFQSSDphY3pop3miJDlip8nKQ0KICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgfSkNCiAgICB9LA0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA2HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/mp/account","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <doc-alert title=\"公众号接入\" url=\"https://doc.iocoder.cn/mp/account/\" />\r\n\r\n    <!-- 搜索工作栏 -->\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\r\n      <el-form-item label=\"名称\" prop=\"name\">\r\n        <el-input v-model=\"queryParams.name\" placeholder=\"请输入名称\" clearable\r\n                  @keyup.enter.native=\"handleQuery\"/>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <!-- 操作工具栏 -->\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"primary\" plain icon=\"el-icon-plus\" size=\"mini\" @click=\"handleAdd\"\r\n                   v-hasPermi=\"['mp:account:create']\">新增\r\n        </el-button>\r\n      </el-col>\r\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n    </el-row>\r\n\r\n    <!-- 列表 -->\r\n    <el-table v-loading=\"loading\" :data=\"list\">\r\n      <el-table-column label=\"名称\" align=\"center\" prop=\"name\"/>\r\n      <el-table-column label=\"微信号\" align=\"center\" prop=\"account\" width=\"180\"/>\r\n      <el-table-column label=\"appId\" align=\"center\" prop=\"appId\" width=\"180\"/>\r\n<!--      <el-table-column label=\"appSecret\" align=\"center\" prop=\"appSecret\" width=\"180\"/>-->\r\n<!--      <el-table-column label=\"token\" align=\"center\" prop=\"token\"/>-->\r\n<!--      <el-table-column label=\"消息加解密密钥\" align=\"center\" prop=\"aesKey\"/>-->\r\n      <el-table-column label=\"服务器地址(URL)\" align=\"center\" prop=\"appId\" width=\"360\">\r\n        <template v-slot=\"scope\">\r\n          {{ 'http://服务端地址/mp/open/' + scope.row.appId }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"二维码\" align=\"center\" prop=\"qrCodeUrl\">\r\n        <template v-slot=\"scope\">\r\n          <img v-if=\"scope.row.qrCodeUrl\" :src=\"scope.row.qrCodeUrl\" alt=\"二维码\" style=\"height: 100px;\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"备注\" align=\"center\" prop=\"remark\"/>\r\n<!--      <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">-->\r\n<!--        <template v-slot=\"scope\">-->\r\n<!--          <span>{{ parseTime(scope.row.createTime) }}</span>-->\r\n<!--        </template>-->\r\n<!--      </el-table-column>-->\r\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n        <template v-slot=\"scope\">\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(scope.row)\"\r\n                     v-hasPermi=\"['mp:account:update']\">修改\r\n          </el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row)\"\r\n                     v-hasPermi=\"['mp:account:delete']\">删除\r\n          </el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-refresh\" @click=\"handleGenerateQrCode(scope.row)\"\r\n                     v-hasPermi=\"['mp:account:qr-code']\">生成二维码\r\n          </el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-share\" @click=\"handleCleanQuota(scope.row)\"\r\n                     v-hasPermi=\"['mp:account:clear-quota']\">清空 API 配额\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页组件 -->\r\n    <pagination v-show=\"total > 0\" :total=\"total\" :page.sync=\"queryParams.pageNo\" :limit.sync=\"queryParams.pageSize\"\r\n                @pagination=\"getList\"/>\r\n\r\n    <!-- 对话框(添加 / 修改) -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\r\n        <el-form-item label=\"名称\" prop=\"name\">\r\n          <el-input v-model=\"form.name\" placeholder=\"请输入名称\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"微信号\" prop=\"account\">\r\n         <span slot=\"label\">\r\n           <el-tooltip content=\"在微信公众平台（mp.weixin.qq.com）的菜单 [设置与开发 - 公众号设置 - 账号详情] 中能找到「微信号」\" placement=\"top\">\r\n              <i class=\"el-icon-question\" />\r\n           </el-tooltip>\r\n           微信号\r\n          </span>\r\n          <el-input v-model=\"form.account\" placeholder=\"请输入微信号\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"appId\" prop=\"appId\">\r\n          <span slot=\"label\">\r\n            <el-tooltip content=\"在微信公众平台（mp.weixin.qq.com）的菜单 [设置与开发 - 公众号设置 - 基本设置] 中能找到「开发者ID(AppID)」\" placement=\"top\">\r\n              <i class=\"el-icon-question\" />\r\n            </el-tooltip>\r\n            appId\r\n          </span>\r\n          <el-input v-model=\"form.appId\" placeholder=\"请输入公众号 appId\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"appSecret\" prop=\"appSecret\">\r\n          <span slot=\"label\">\r\n            <el-tooltip content=\"在微信公众平台（mp.weixin.qq.com）的菜单 [设置与开发 - 公众号设置 - 基本设置] 中能找到「开发者密码(AppSecret)」\" placement=\"top\">\r\n              <i class=\"el-icon-question\" />\r\n            </el-tooltip>\r\n            appSecret\r\n          </span>\r\n          <el-input v-model=\"form.appSecret\" placeholder=\"请输入公众号 appSecret\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"token\" prop=\"token\">\r\n          <el-input v-model=\"form.token\" placeholder=\"请输入公众号token\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"消息加解密密钥\" prop=\"aesKey\">\r\n          <el-input v-model=\"form.aesKey\" placeholder=\"请输入消息加解密密钥\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\" prop=\"remark\">\r\n          <el-input type=\"textarea\" v-model=\"form.remark\" placeholder=\"请输入备注\"/>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  clearAccountQuota,\r\n  createAccount,\r\n  deleteAccount,\r\n  generateAccountQrCode,\r\n  getAccount,\r\n  getAccountPage,\r\n  updateAccount\r\n} from '@/api/mp/account'\r\n\r\nexport default {\r\n  name: 'MpAccount',\r\n  components: {},\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 公众号账号列表\r\n      list: [],\r\n      // 弹出层标题\r\n      title: '',\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n        name: null,\r\n        account: null,\r\n        appId: null,\r\n      },\r\n      // 表单参数\r\n      form: {},\r\n      // 表单校验\r\n      rules: {\r\n        name: [{required: true, message: '名称不能为空', trigger: 'blur'}],\r\n        account: [{required: true, message: '公众号账号不能为空', trigger: 'blur'}],\r\n        appId: [{required: true, message: '公众号 appId 不能为空', trigger: 'blur'}],\r\n        appSecret: [{required: true, message: '公众号密钥不能为空', trigger: 'blur'}],\r\n        token: [{required: true, message: '公众号 token 不能为空', trigger: 'blur'}],\r\n      },\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    /** 查询列表 */\r\n    getList() {\r\n      this.loading = true\r\n      // 处理查询参数\r\n      let params = {...this.queryParams}\r\n      // 执行查询\r\n      getAccountPage(params).then(response => {\r\n        this.list = response.data.list\r\n        this.total = response.data.total\r\n        this.loading = false\r\n      })\r\n    },\r\n    /** 取消按钮 */\r\n    cancel() {\r\n      this.open = false\r\n      this.reset()\r\n    },\r\n    /** 表单重置 */\r\n    reset() {\r\n      this.form = {\r\n        id: undefined,\r\n        name: undefined,\r\n        account: undefined,\r\n        appId: undefined,\r\n        appSecret: undefined,\r\n        token: undefined,\r\n        aesKey: undefined,\r\n        remark: undefined,\r\n      }\r\n      this.resetForm('form')\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageNo = 1\r\n      this.getList()\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.dateRangeCreateTime = []\r\n      this.resetForm('queryForm')\r\n      this.handleQuery()\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd() {\r\n      this.reset()\r\n      this.open = true\r\n      this.title = '添加公众号账号'\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.reset()\r\n      const id = row.id\r\n      getAccount(id).then(response => {\r\n        this.form = response.data\r\n        this.open = true\r\n        this.title = '修改公众号账号'\r\n      })\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm() {\r\n      this.$refs['form'].validate(valid => {\r\n        if (!valid) {\r\n          return\r\n        }\r\n        // 修改的提交\r\n        if (this.form.id != null) {\r\n          updateAccount(this.form).then(response => {\r\n            this.$modal.msgSuccess('修改成功')\r\n            this.open = false\r\n            this.getList()\r\n          })\r\n          return\r\n        }\r\n        // 添加的提交\r\n        createAccount(this.form).then(response => {\r\n          this.$modal.msgSuccess('新增成功')\r\n          this.open = false\r\n          this.getList()\r\n        })\r\n      })\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      const id = row.id\r\n      this.$modal.confirm('是否确认删除公众号账号编号为\"' + row.name + '\"的数据项?').then(function () {\r\n        return deleteAccount(id)\r\n      }).then(() => {\r\n        this.getList()\r\n        this.$modal.msgSuccess('删除成功')\r\n      }).catch(() => {\r\n      })\r\n    },\r\n    /** 生成二维码的按钮操作 */\r\n    handleGenerateQrCode(row) {\r\n      const id = row.id\r\n      this.$modal.confirm('是否确认生成公众号账号编号为\"' + row.name + '\"的二维码?').then(function () {\r\n        return generateAccountQrCode(id)\r\n      }).then(() => {\r\n        this.getList()\r\n        this.$modal.msgSuccess('生成二维码成功')\r\n      }).catch(() => {\r\n      })\r\n    },\r\n    /** 清空二维码 API 配额的按钮操作 */\r\n    handleCleanQuota(row) {\r\n      const id = row.id\r\n      this.$modal.confirm('是否确认清空生成公众号账号编号为\"' + row.name + '\"的 API 配额?').then(function () {\r\n        return clearAccountQuota(id)\r\n      }).then(() => {\r\n        this.$modal.msgSuccess('清空 API 配额成功')\r\n      }).catch(() => {\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n"]}]}