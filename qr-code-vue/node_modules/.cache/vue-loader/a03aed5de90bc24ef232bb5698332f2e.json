{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\Verifition\\Verify\\VerifyPoints.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\Verifition\\Verify\\VerifyPoints.vue","mtime":1704630437680},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovKioNCiAqIFZlcmlmeVBvaW50cw0KICogQGRlc2NyaXB0aW9uIOeCuemAiQ0KICogKi8NCmltcG9ydCB7IHJlc2V0U2l6ZSB9IGZyb20gJy4vLi4vdXRpbHMvdXRpbCcNCmltcG9ydCB7IGFlc0VuY3J5cHQgfSBmcm9tICdAL3V0aWxzL2FzZScNCmltcG9ydCB7IHJlcUdldCwgcmVxQ2hlY2sgfSBmcm9tICdAL2FwaS9sb2dpbicNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnVmVyaWZ5UG9pbnRzJywNCiAgcHJvcHM6IHsNCiAgICAvLyDlvLnlh7rlvI9wb3DvvIzlm7rlrppmaXhlZA0KICAgIG1vZGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICdmaXhlZCcNCiAgICB9LA0KICAgIGNhcHRjaGFUeXBlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgfSwNCiAgICAvLyDpl7TpmpQNCiAgICB2U3BhY2U6IHsNCiAgICAgIHR5cGU6IE51bWJlciwNCiAgICAgIGRlZmF1bHQ6IDUNCiAgICB9LA0KICAgIGltZ1NpemU6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgd2lkdGg6ICczMTBweCcsDQogICAgICAgICAgaGVpZ2h0OiAnMTU1cHgnDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGJhclNpemU6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgd2lkdGg6ICczMTBweCcsDQogICAgICAgICAgaGVpZ2h0OiAnNDBweCcNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgZGVmYXVsdEltZzogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJycNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNlY3JldEtleTogJycsIC8vIOWQjuerr+i/lOWbnueahGFzZeWKoOWvhuenmOmSpQ0KICAgICAgY2hlY2tOdW06IDMsIC8vIOm7mOiupOmcgOimgeeCueWHu+eahOWtl+aVsA0KICAgICAgZm9udFBvczogW10sIC8vIOmAieS4reeahOWdkOagh+S/oeaBrw0KICAgICAgY2hlY2tQb3NBcnI6IFtdLCAvLyDnlKjmiLfngrnlh7vnmoTlnZDmoIcNCiAgICAgIG51bTogMSwgLy8g54K55Ye755qE6K6w5pWwDQogICAgICBwb2ludEJhY2tJbWdCYXNlOiAnJywgLy8g5ZCO56uv6I635Y+W5Yiw55qE6IOM5pmv5Zu+54mHDQogICAgICBwb2luVGV4dExpc3Q6IFtdLCAvLyDlkI7nq6/ov5Tlm57nmoTngrnlh7vlrZfkvZPpobrluo8NCiAgICAgIGJhY2tUb2tlbjogJycsIC8vIOWQjuerr+i/lOWbnueahHRva2Vu5YC8DQogICAgICBzZXRTaXplOiB7DQogICAgICAgIGltZ0hlaWdodDogMCwNCiAgICAgICAgaW1nV2lkdGg6IDAsDQogICAgICAgIGJhckhlaWdodDogMCwNCiAgICAgICAgYmFyV2lkdGg6IDANCiAgICAgIH0sDQogICAgICB0ZW1wUG9pbnRzOiBbXSwNCiAgICAgIHRleHQ6ICcnLA0KICAgICAgYmFyQXJlYUNvbG9yOiB1bmRlZmluZWQsDQogICAgICBiYXJBcmVhQm9yZGVyQ29sb3I6IHVuZGVmaW5lZCwNCiAgICAgIHNob3dSZWZyZXNoOiB0cnVlLA0KICAgICAgYmluZGluZ0NsaWNrOiB0cnVlDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHJlc2V0U2l6ZSgpIHsNCiAgICAgIHJldHVybiByZXNldFNpemUNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgLy8gdHlwZeWPmOWMluWImeWFqOmdouWIt+aWsA0KICAgIHR5cGU6IHsNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwNCiAgICAgIGhhbmRsZXIoKSB7DQogICAgICAgIHRoaXMuaW5pdCgpDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIC8vIOemgeatouaLluaLvQ0KICAgIHRoaXMuJGVsLm9uc2VsZWN0c3RhcnQgPSBmdW5jdGlvbigpIHsNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGluaXQoKSB7DQogICAgICAvLyDliqDovb3pobXpnaINCiAgICAgIHRoaXMuZm9udFBvcy5zcGxpY2UoMCwgdGhpcy5mb250UG9zLmxlbmd0aCkNCiAgICAgIHRoaXMuY2hlY2tQb3NBcnIuc3BsaWNlKDAsIHRoaXMuY2hlY2tQb3NBcnIubGVuZ3RoKQ0KICAgICAgdGhpcy5udW0gPSAxDQogICAgICB0aGlzLmdldFBpY3RydWUoKQ0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLnNldFNpemUgPSB0aGlzLnJlc2V0U2l6ZSh0aGlzKQkvLyDph43mlrDorr7nva7lrr3luqbpq5jluqYNCiAgICAgICAgdGhpcy4kcGFyZW50LiRlbWl0KCdyZWFkeScsIHRoaXMpDQogICAgICB9KQ0KICAgIH0sDQogICAgY2FudmFzQ2xpY2soZSkgew0KICAgICAgdGhpcy5jaGVja1Bvc0Fyci5wdXNoKHRoaXMuZ2V0TW91c2VQb3ModGhpcy4kcmVmcy5jYW52YXMsIGUpKQ0KICAgICAgaWYgKHRoaXMubnVtID09PSB0aGlzLmNoZWNrTnVtKSB7DQogICAgICAgIHRoaXMubnVtID0gdGhpcy5jcmVhdGVQb2ludCh0aGlzLmdldE1vdXNlUG9zKHRoaXMuJHJlZnMuY2FudmFzLCBlKSkNCiAgICAgICAgLy8g5oyJ5q+U5L6L6L2s5o2i5Z2Q5qCH5YC8DQogICAgICAgIHRoaXMuY2hlY2tQb3NBcnIgPSB0aGlzLnBvaW50VHJhbnNmcm9tKHRoaXMuY2hlY2tQb3NBcnIsIHRoaXMuc2V0U2l6ZSkNCiAgICAgICAgLy8g562J5Yib5bu65Z2Q5qCH5omn6KGM5a6MDQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgIC8vIHZhciBmbGFnID0gdGhpcy5jb21wYXJlUG9zKHRoaXMuZm9udFBvcywgdGhpcy5jaGVja1Bvc0Fycik7DQogICAgICAgICAgLy8g5Y+R6YCB5ZCO56uv6K+35rGCDQogICAgICAgICAgY29uc3QgY2FwdGNoYVZlcmlmaWNhdGlvbiA9IHRoaXMuc2VjcmV0S2V5ID8gYWVzRW5jcnlwdCh0aGlzLmJhY2tUb2tlbiArICctLS0nICsgSlNPTi5zdHJpbmdpZnkodGhpcy5jaGVja1Bvc0FyciksIHRoaXMuc2VjcmV0S2V5KSA6IHRoaXMuYmFja1Rva2VuICsgJy0tLScgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmNoZWNrUG9zQXJyKQ0KICAgICAgICAgIGNvbnN0IGRhdGEgPSB7DQogICAgICAgICAgICBjYXB0Y2hhVHlwZTogdGhpcy5jYXB0Y2hhVHlwZSwNCiAgICAgICAgICAgICdwb2ludEpzb24nOiB0aGlzLnNlY3JldEtleSA/IGFlc0VuY3J5cHQoSlNPTi5zdHJpbmdpZnkodGhpcy5jaGVja1Bvc0FyciksIHRoaXMuc2VjcmV0S2V5KSA6IEpTT04uc3RyaW5naWZ5KHRoaXMuY2hlY2tQb3NBcnIpLA0KICAgICAgICAgICAgJ3Rva2VuJzogdGhpcy5iYWNrVG9rZW4NCiAgICAgICAgICB9DQogICAgICAgICAgcmVxQ2hlY2soZGF0YSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgaWYgKHJlcy5yZXBDb2RlID09PSAnMDAwMCcpIHsNCiAgICAgICAgICAgICAgdGhpcy5iYXJBcmVhQ29sb3IgPSAnIzRjYWU0YycNCiAgICAgICAgICAgICAgdGhpcy5iYXJBcmVhQm9yZGVyQ29sb3IgPSAnIzVjYjg1YycNCiAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gJ+mqjOivgeaIkOWKnycNCiAgICAgICAgICAgICAgdGhpcy5iaW5kaW5nQ2xpY2sgPSBmYWxzZQ0KICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlID09PSAncG9wJykgew0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LmNsaWNrU2hvdyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKQ0KICAgICAgICAgICAgICAgIH0sIDE1MDApDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LiRlbWl0KCdzdWNjZXNzJywgeyBjYXB0Y2hhVmVyaWZpY2F0aW9uIH0pDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLiRwYXJlbnQuJGVtaXQoJ2Vycm9yJywgdGhpcykNCiAgICAgICAgICAgICAgdGhpcy5iYXJBcmVhQ29sb3IgPSAnI2Q5NTM0ZicNCiAgICAgICAgICAgICAgdGhpcy5iYXJBcmVhQm9yZGVyQ29sb3IgPSAnI2Q5NTM0ZicNCiAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gJ+mqjOivgeWksei0pScNCiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCkNCiAgICAgICAgICAgICAgfSwgNzAwKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0sIDQwMCkNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLm51bSA8IHRoaXMuY2hlY2tOdW0pIHsNCiAgICAgICAgdGhpcy5udW0gPSB0aGlzLmNyZWF0ZVBvaW50KHRoaXMuZ2V0TW91c2VQb3ModGhpcy4kcmVmcy5jYW52YXMsIGUpKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDojrflj5blnZDmoIcNCiAgICBnZXRNb3VzZVBvczogZnVuY3Rpb24ob2JqLCBlKSB7DQogICAgICBjb25zdCB4ID0gZS5vZmZzZXRYDQogICAgICBjb25zdCB5ID0gZS5vZmZzZXRZDQogICAgICByZXR1cm4geyB4LCB5IH0NCiAgICB9LA0KICAgIC8vIOWIm+W7uuWdkOagh+eCuQ0KICAgIGNyZWF0ZVBvaW50OiBmdW5jdGlvbihwb3MpIHsNCiAgICAgIHRoaXMudGVtcFBvaW50cy5wdXNoKE9iamVjdC5hc3NpZ24oe30sIHBvcykpDQogICAgICByZXR1cm4gKyt0aGlzLm51bQ0KICAgIH0sDQogICAgcmVmcmVzaDogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLnRlbXBQb2ludHMuc3BsaWNlKDAsIHRoaXMudGVtcFBvaW50cy5sZW5ndGgpDQogICAgICB0aGlzLmJhckFyZWFDb2xvciA9ICcjMDAwJw0KICAgICAgdGhpcy5iYXJBcmVhQm9yZGVyQ29sb3IgPSAnI2RkZCcNCiAgICAgIHRoaXMuYmluZGluZ0NsaWNrID0gdHJ1ZQ0KICAgICAgdGhpcy5mb250UG9zLnNwbGljZSgwLCB0aGlzLmZvbnRQb3MubGVuZ3RoKQ0KICAgICAgdGhpcy5jaGVja1Bvc0Fyci5zcGxpY2UoMCwgdGhpcy5jaGVja1Bvc0Fyci5sZW5ndGgpDQogICAgICB0aGlzLm51bSA9IDENCiAgICAgIHRoaXMuZ2V0UGljdHJ1ZSgpDQogICAgICB0aGlzLnNob3dSZWZyZXNoID0gdHJ1ZQ0KICAgIH0sDQoNCiAgICAvLyDor7fmsYLog4zmma/lm77niYflkozpqozor4Hlm77niYcNCiAgICBnZXRQaWN0cnVlKCkgew0KICAgICAgY29uc3QgZGF0YSA9IHsNCiAgICAgICAgY2FwdGNoYVR5cGU6IHRoaXMuY2FwdGNoYVR5cGUsDQogICAgICAgIGNsaWVudFVpZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BvaW50JyksDQogICAgICAgIHRzOiBEYXRlLm5vdygpLCAvLyDnjrDlnKjnmoTml7bpl7TmiLMNCiAgICAgIH0NCiAgICAgIHJlcUdldChkYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMucmVwQ29kZSA9PT0gJzAwMDAnKSB7DQogICAgICAgICAgdGhpcy5wb2ludEJhY2tJbWdCYXNlID0gcmVzLnJlcERhdGEub3JpZ2luYWxJbWFnZUJhc2U2NA0KICAgICAgICAgIHRoaXMuYmFja1Rva2VuID0gcmVzLnJlcERhdGEudG9rZW4NCiAgICAgICAgICB0aGlzLnNlY3JldEtleSA9IHJlcy5yZXBEYXRhLnNlY3JldEtleQ0KICAgICAgICAgIHRoaXMucG9pblRleHRMaXN0ID0gcmVzLnJlcERhdGEud29yZExpc3QNCiAgICAgICAgICB0aGlzLnRleHQgPSAn6K+35L6d5qyh54K55Ye744CQJyArIHRoaXMucG9pblRleHRMaXN0LmpvaW4oJywnKSArICfjgJEnDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy50ZXh0ID0gcmVzLnJlcE1zZw0KICAgICAgICB9DQoNCiAgICAgICAgLy8g5Yik5pat5o6l5Y+j6K+35rGC5qyh5pWw5piv5ZCm5aSx5pWIDQogICAgICAgIGlmIChyZXMucmVwQ29kZSA9PT0gJzYyMDEnKSB7DQogICAgICAgICAgdGhpcy5wb2ludEJhY2tJbWdCYXNlID0gbnVsbA0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5Z2Q5qCH6L2s5o2i5Ye95pWwDQogICAgcG9pbnRUcmFuc2Zyb20ocG9pbnRBcnIsIGltZ1NpemUpIHsNCiAgICAgIGNvbnN0IG5ld1BvaW50QXJyID0gcG9pbnRBcnIubWFwKHAgPT4gew0KICAgICAgICBjb25zdCB4ID0gTWF0aC5yb3VuZCgzMTAgKiBwLnggLyBwYXJzZUludChpbWdTaXplLmltZ1dpZHRoKSkNCiAgICAgICAgY29uc3QgeSA9IE1hdGgucm91bmQoMTU1ICogcC55IC8gcGFyc2VJbnQoaW1nU2l6ZS5pbWdIZWlnaHQpKQ0KICAgICAgICByZXR1cm4geyB4LCB5IH0NCiAgICAgIH0pDQogICAgICAvLyBjb25zb2xlLmxvZyhuZXdQb2ludEFyciwibmV3UG9pbnRBcnIiKTsNCiAgICAgIHJldHVybiBuZXdQb2ludEFycg0KICAgIH0NCiAgfSwNCn0NCg=="},{"version":3,"sources":["VerifyPoints.vue"],"names":[],"mappings":";AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VerifyPoints.vue","sourceRoot":"src/components/Verifition/Verify","sourcesContent":["<template>\r\n  <div style=\"position: relative\" >\r\n    <div class=\"verify-img-out\">\r\n      <div\r\n        class=\"verify-img-panel\"\r\n        :style=\"{'width': setSize.imgWidth,\r\n                 'height': setSize.imgHeight,\r\n                 'background-size' : setSize.imgWidth + ' '+ setSize.imgHeight,\r\n                 'margin-bottom': vSpace + 'px'}\"\r\n      >\r\n        <div v-show=\"showRefresh\" class=\"verify-refresh\" style=\"z-index:3\" @click=\"refresh\">\r\n          <i class=\"iconfont icon-refresh\" />\r\n        </div>\r\n        <img\r\n          ref=\"canvas\"\r\n          :src=\"pointBackImgBase?('data:image/png;base64,'+pointBackImgBase):defaultImg\"\r\n          alt=\"\"\r\n          style=\"width:100%;height:100%;display:block\"\r\n          @click=\"bindingClick?canvasClick($event):undefined\"\r\n        >\r\n\r\n        <div\r\n          v-for=\"(tempPoint, index) in tempPoints\"\r\n          :key=\"index\"\r\n          class=\"point-area\"\r\n          :style=\"{\r\n            'background-color':'#1abd6c',\r\n            color:'#fff',\r\n            'z-index':9999,\r\n            width:'20px',\r\n            height:'20px',\r\n            'text-align':'center',\r\n            'line-height':'20px',\r\n            'border-radius': '50%',\r\n            position:'absolute',\r\n            top:parseInt(tempPoint.y-10) + 'px',\r\n            left:parseInt(tempPoint.x-10) + 'px'\r\n          }\"\r\n        >\r\n          {{ index + 1 }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 'height': this.barSize.height, -->\r\n    <div\r\n      class=\"verify-bar-area\"\r\n      :style=\"{'width': setSize.imgWidth,\r\n               'color': this.barAreaColor,\r\n               'border-color': this.barAreaBorderColor,\r\n               'line-height':this.barSize.height}\"\r\n    >\r\n      <span class=\"verify-msg\">{{ text }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script type=\"text/babel\">\r\n/**\r\n * VerifyPoints\r\n * @description 点选\r\n * */\r\nimport { resetSize } from './../utils/util'\r\nimport { aesEncrypt } from '@/utils/ase'\r\nimport { reqGet, reqCheck } from '@/api/login'\r\n\r\nexport default {\r\n  name: 'VerifyPoints',\r\n  props: {\r\n    // 弹出式pop，固定fixed\r\n    mode: {\r\n      type: String,\r\n      default: 'fixed'\r\n    },\r\n    captchaType: {\r\n      type: String,\r\n    },\r\n    // 间隔\r\n    vSpace: {\r\n      type: Number,\r\n      default: 5\r\n    },\r\n    imgSize: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          width: '310px',\r\n          height: '155px'\r\n        }\r\n      }\r\n    },\r\n    barSize: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          width: '310px',\r\n          height: '40px'\r\n        }\r\n      }\r\n    },\r\n    defaultImg: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      secretKey: '', // 后端返回的ase加密秘钥\r\n      checkNum: 3, // 默认需要点击的字数\r\n      fontPos: [], // 选中的坐标信息\r\n      checkPosArr: [], // 用户点击的坐标\r\n      num: 1, // 点击的记数\r\n      pointBackImgBase: '', // 后端获取到的背景图片\r\n      poinTextList: [], // 后端返回的点击字体顺序\r\n      backToken: '', // 后端返回的token值\r\n      setSize: {\r\n        imgHeight: 0,\r\n        imgWidth: 0,\r\n        barHeight: 0,\r\n        barWidth: 0\r\n      },\r\n      tempPoints: [],\r\n      text: '',\r\n      barAreaColor: undefined,\r\n      barAreaBorderColor: undefined,\r\n      showRefresh: true,\r\n      bindingClick: true\r\n    }\r\n  },\r\n  computed: {\r\n    resetSize() {\r\n      return resetSize\r\n    }\r\n  },\r\n  watch: {\r\n    // type变化则全面刷新\r\n    type: {\r\n      immediate: true,\r\n      handler() {\r\n        this.init()\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    // 禁止拖拽\r\n    this.$el.onselectstart = function() {\r\n      return false\r\n    }\r\n  },\r\n  methods: {\r\n    init() {\r\n      // 加载页面\r\n      this.fontPos.splice(0, this.fontPos.length)\r\n      this.checkPosArr.splice(0, this.checkPosArr.length)\r\n      this.num = 1\r\n      this.getPictrue()\r\n      this.$nextTick(() => {\r\n        this.setSize = this.resetSize(this)\t// 重新设置宽度高度\r\n        this.$parent.$emit('ready', this)\r\n      })\r\n    },\r\n    canvasClick(e) {\r\n      this.checkPosArr.push(this.getMousePos(this.$refs.canvas, e))\r\n      if (this.num === this.checkNum) {\r\n        this.num = this.createPoint(this.getMousePos(this.$refs.canvas, e))\r\n        // 按比例转换坐标值\r\n        this.checkPosArr = this.pointTransfrom(this.checkPosArr, this.setSize)\r\n        // 等创建坐标执行完\r\n        setTimeout(() => {\r\n          // var flag = this.comparePos(this.fontPos, this.checkPosArr);\r\n          // 发送后端请求\r\n          const captchaVerification = this.secretKey ? aesEncrypt(this.backToken + '---' + JSON.stringify(this.checkPosArr), this.secretKey) : this.backToken + '---' + JSON.stringify(this.checkPosArr)\r\n          const data = {\r\n            captchaType: this.captchaType,\r\n            'pointJson': this.secretKey ? aesEncrypt(JSON.stringify(this.checkPosArr), this.secretKey) : JSON.stringify(this.checkPosArr),\r\n            'token': this.backToken\r\n          }\r\n          reqCheck(data).then(res => {\r\n            if (res.repCode === '0000') {\r\n              this.barAreaColor = '#4cae4c'\r\n              this.barAreaBorderColor = '#5cb85c'\r\n              this.text = '验证成功'\r\n              this.bindingClick = false\r\n              if (this.mode === 'pop') {\r\n                setTimeout(() => {\r\n                  this.$parent.clickShow = false\r\n                  this.refresh()\r\n                }, 1500)\r\n              }\r\n              this.$parent.$emit('success', { captchaVerification })\r\n            } else {\r\n              this.$parent.$emit('error', this)\r\n              this.barAreaColor = '#d9534f'\r\n              this.barAreaBorderColor = '#d9534f'\r\n              this.text = '验证失败'\r\n              setTimeout(() => {\r\n                this.refresh()\r\n              }, 700)\r\n            }\r\n          })\r\n        }, 400)\r\n      }\r\n      if (this.num < this.checkNum) {\r\n        this.num = this.createPoint(this.getMousePos(this.$refs.canvas, e))\r\n      }\r\n    },\r\n\r\n    // 获取坐标\r\n    getMousePos: function(obj, e) {\r\n      const x = e.offsetX\r\n      const y = e.offsetY\r\n      return { x, y }\r\n    },\r\n    // 创建坐标点\r\n    createPoint: function(pos) {\r\n      this.tempPoints.push(Object.assign({}, pos))\r\n      return ++this.num\r\n    },\r\n    refresh: function() {\r\n      this.tempPoints.splice(0, this.tempPoints.length)\r\n      this.barAreaColor = '#000'\r\n      this.barAreaBorderColor = '#ddd'\r\n      this.bindingClick = true\r\n      this.fontPos.splice(0, this.fontPos.length)\r\n      this.checkPosArr.splice(0, this.checkPosArr.length)\r\n      this.num = 1\r\n      this.getPictrue()\r\n      this.showRefresh = true\r\n    },\r\n\r\n    // 请求背景图片和验证图片\r\n    getPictrue() {\r\n      const data = {\r\n        captchaType: this.captchaType,\r\n        clientUid: localStorage.getItem('point'),\r\n        ts: Date.now(), // 现在的时间戳\r\n      }\r\n      reqGet(data).then(res => {\r\n        if (res.repCode === '0000') {\r\n          this.pointBackImgBase = res.repData.originalImageBase64\r\n          this.backToken = res.repData.token\r\n          this.secretKey = res.repData.secretKey\r\n          this.poinTextList = res.repData.wordList\r\n          this.text = '请依次点击【' + this.poinTextList.join(',') + '】'\r\n        } else {\r\n          this.text = res.repMsg\r\n        }\r\n\r\n        // 判断接口请求次数是否失效\r\n        if (res.repCode === '6201') {\r\n          this.pointBackImgBase = null\r\n        }\r\n      })\r\n    },\r\n    // 坐标转换函数\r\n    pointTransfrom(pointArr, imgSize) {\r\n      const newPointArr = pointArr.map(p => {\r\n        const x = Math.round(310 * p.x / parseInt(imgSize.imgWidth))\r\n        const y = Math.round(155 * p.y / parseInt(imgSize.imgHeight))\r\n        return { x, y }\r\n      })\r\n      // console.log(newPointArr,\"newPointArr\");\r\n      return newPointArr\r\n    }\r\n  },\r\n}\r\n</script>\r\n"]}]}