{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\bpm\\form\\formEditor.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\bpm\\form\\formEditor.vue","mtime":1704630437837},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgZHJhZ2dhYmxlIGZyb20gJ3Z1ZWRyYWdnYWJsZScNCmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAndGhyb3R0bGUtZGVib3VuY2UnDQppbXBvcnQgeyBzYXZlQXMgfSBmcm9tICdmaWxlLXNhdmVyJw0KaW1wb3J0IENsaXBib2FyZEpTIGZyb20gJ2NsaXBib2FyZCcNCmltcG9ydCByZW5kZXIgZnJvbSAnQC9jb21wb25lbnRzL3JlbmRlci9yZW5kZXInDQppbXBvcnQgRm9ybURyYXdlciBmcm9tICdAL3ZpZXdzL2luZnJhL2J1aWxkL0Zvcm1EcmF3ZXInDQppbXBvcnQgSnNvbkRyYXdlciBmcm9tICdAL3ZpZXdzL2luZnJhL2J1aWxkL0pzb25EcmF3ZXInDQppbXBvcnQgUmlnaHRQYW5lbCBmcm9tICdAL3ZpZXdzL2luZnJhL2J1aWxkL1JpZ2h0UGFuZWwnDQppbXBvcnQgew0KICBpbnB1dENvbXBvbmVudHMsIHNlbGVjdENvbXBvbmVudHMsIGxheW91dENvbXBvbmVudHMsIGZvcm1Db25mDQp9IGZyb20gJ0AvY29tcG9uZW50cy9nZW5lcmF0b3IvY29uZmlnJw0KaW1wb3J0IHtiZWF1dGlmaWVyQ29uZiwgdGl0bGVDYXNlLCBkZWVwQ2xvbmUsIGlzT2JqZWN0T2JqZWN0fSBmcm9tICdAL3V0aWxzJw0KaW1wb3J0IHsNCiAgbWFrZVVwSHRtbCwgdnVlVGVtcGxhdGUsIHZ1ZVNjcmlwdCwgY3NzU3R5bGUNCn0gZnJvbSAnQC9jb21wb25lbnRzL2dlbmVyYXRvci9odG1sJw0KaW1wb3J0IHsgbWFrZVVwSnMgfSBmcm9tICdAL2NvbXBvbmVudHMvZ2VuZXJhdG9yL2pzJw0KaW1wb3J0IHsgbWFrZVVwQ3NzIH0gZnJvbSAnQC9jb21wb25lbnRzL2dlbmVyYXRvci9jc3MnDQppbXBvcnQgZHJhd2luZ0RlZmFsdXQgZnJvbSAnQC9jb21wb25lbnRzL2dlbmVyYXRvci9kcmF3aW5nRGVmYWx1dCcNCmltcG9ydCBsb2dvIGZyb20gJ0AvYXNzZXRzL2xvZ28vbG9nby5wbmcnDQppbXBvcnQgQ29kZVR5cGVEaWFsb2cgZnJvbSAnQC92aWV3cy9pbmZyYS9idWlsZC9Db2RlVHlwZURpYWxvZycNCmltcG9ydCBEcmFnZ2FibGVJdGVtIGZyb20gJ0Avdmlld3MvaW5mcmEvYnVpbGQvRHJhZ2dhYmxlSXRlbScNCmltcG9ydCB7DQogIGdldERyYXdpbmdMaXN0LCBzYXZlRHJhd2luZ0xpc3QsIGdldElkR2xvYmFsLCBzYXZlSWRHbG9iYWwsIGdldEZvcm1Db25mDQp9IGZyb20gJ0AvdXRpbHMvZGInDQppbXBvcnQgbG9hZEJlYXV0aWZpZXIgZnJvbSAnQC91dGlscy9sb2FkQmVhdXRpZmllcicNCmltcG9ydCB7Q29tbW9uU3RhdHVzRW51bX0gZnJvbSAiQC91dGlscy9jb25zdGFudHMiOw0KaW1wb3J0IHtjcmVhdGVGb3JtLCBnZXRGb3JtLCB1cGRhdGVGb3JtfSBmcm9tICJAL2FwaS9icG0vZm9ybSI7DQppbXBvcnQge2RlY29kZUZpZWxkc30gZnJvbSAiQC91dGlscy9mb3JtR2VuZXJhdG9yIjsNCg0KbGV0IGJlYXV0aWZpZXINCmNvbnN0IGVtcHR5QWN0aXZlRGF0YSA9IHsgc3R5bGU6IHt9LCBhdXRvc2l6ZToge30gfQ0KbGV0IG9sZEFjdGl2ZUlkDQpsZXQgdGVtcEFjdGl2ZURhdGENCmNvbnN0IGRyYXdpbmdMaXN0SW5EQiA9IGdldERyYXdpbmdMaXN0KCkNCmNvbnN0IGZvcm1Db25mSW5EQiA9IGdldEZvcm1Db25mKCkNCmNvbnN0IGlkR2xvYmFsID0gZ2V0SWRHbG9iYWwoKQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBkcmFnZ2FibGUsDQogICAgcmVuZGVyLA0KICAgIEZvcm1EcmF3ZXIsDQogICAgSnNvbkRyYXdlciwNCiAgICBSaWdodFBhbmVsLA0KICAgIENvZGVUeXBlRGlhbG9nLA0KICAgIERyYWdnYWJsZUl0ZW0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbG9nbywNCiAgICAgIGlkR2xvYmFsLA0KICAgICAgZm9ybUNvbmYsDQogICAgICBpbnB1dENvbXBvbmVudHMsDQogICAgICBzZWxlY3RDb21wb25lbnRzLA0KICAgICAgbGF5b3V0Q29tcG9uZW50cywNCiAgICAgIGxhYmVsV2lkdGg6IDEwMCwNCiAgICAgIC8vIGRyYXdpbmdMaXN0OiBkcmF3aW5nRGVmYWx1dCwNCiAgICAgIGRyYXdpbmdEYXRhOiB7fSwgLy8g55Sf5oiQ5ZCO55qE6KGo5Y2V5pWw5o2uDQogICAgICBhY3RpdmVJZDogZHJhd2luZ0RlZmFsdXRbMF0uX19jb25maWdfXy5mb3JtSWQsDQoNCiAgICAgIGRyYXdpbmdMaXN0OiBbXSwgLy8g6KGo5Y2V6aG555qE5pWw57uEDQogICAgICAvLyBhY3RpdmVJZDogdW5kZWZpbmVkLA0KICAgICAgLy8gYWN0aXZlRGF0YToge30sDQoNCiAgICAgIGRyYXdlclZpc2libGU6IGZhbHNlLA0KICAgICAgZm9ybURhdGE6IHt9LA0KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICBqc29uRHJhd2VyVmlzaWJsZTogZmFsc2UsDQogICAgICBnZW5lcmF0ZUNvbmY6IG51bGwsDQogICAgICBzaG93RmlsZU5hbWU6IGZhbHNlLA0KICAgICAgYWN0aXZlRGF0YTogZHJhd2luZ0RlZmFsdXRbMF0sIC8vIOWPs+i+uee8lui+keWZqOa/gOa0u+eahOihqOWNlemhuQ0KICAgICAgc2F2ZURyYXdpbmdMaXN0RGVib3VuY2U6IGRlYm91bmNlKDM0MCwgc2F2ZURyYXdpbmdMaXN0KSwNCiAgICAgIHNhdmVJZEdsb2JhbERlYm91bmNlOiBkZWJvdW5jZSgzNDAsIHNhdmVJZEdsb2JhbCksDQogICAgICBsZWZ0Q29tcG9uZW50czogWw0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICfovpPlhaXlnovnu4Tku7YnLA0KICAgICAgICAgIGxpc3Q6IGlucHV0Q29tcG9uZW50cw0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICfpgInmi6nlnovnu4Tku7YnLA0KICAgICAgICAgIGxpc3Q6IHNlbGVjdENvbXBvbmVudHMNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAn5biD5bGA5Z6L57uE5Lu2JywNCiAgICAgICAgICBsaXN0OiBsYXlvdXRDb21wb25lbnRzDQogICAgICAgIH0NCiAgICAgIF0sDQoNCiAgICAgIC8vIOihqOWNleWPguaVsA0KICAgICAgZm9ybTogew0KICAgICAgICBzdGF0dXM6IENvbW1vblN0YXR1c0VudW0uRU5BQkxFLA0KICAgICAgfSwNCiAgICAgIC8vIOihqOWNleagoemqjA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLooajljZXlkI3kuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICAgIHN0YXR1czogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLlvIDlkK/nirbmgIHkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICB9LA0KICB3YXRjaDogew0KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzDQogICAgJ2FjdGl2ZURhdGEuX19jb25maWdfXy5sYWJlbCc6IGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkgew0KICAgICAgaWYgKA0KICAgICAgICB0aGlzLmFjdGl2ZURhdGEucGxhY2Vob2xkZXIgPT09IHVuZGVmaW5lZA0KICAgICAgICB8fCAhdGhpcy5hY3RpdmVEYXRhLl9fY29uZmlnX18udGFnDQogICAgICAgIHx8IG9sZEFjdGl2ZUlkICE9PSB0aGlzLmFjdGl2ZUlkDQogICAgICApIHsNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLmFjdGl2ZURhdGEucGxhY2Vob2xkZXIgPSB0aGlzLmFjdGl2ZURhdGEucGxhY2Vob2xkZXIucmVwbGFjZShvbGRWYWwsICcnKSArIHZhbA0KICAgIH0sDQogICAgYWN0aXZlSWQ6IHsNCiAgICAgIGhhbmRsZXIodmFsKSB7DQogICAgICAgIG9sZEFjdGl2ZUlkID0gdmFsDQogICAgICB9LA0KICAgICAgaW1tZWRpYXRlOiB0cnVlDQogICAgfSwNCiAgICBkcmF3aW5nTGlzdDogew0KICAgICAgaGFuZGxlcih2YWwpIHsNCiAgICAgICAgdGhpcy5zYXZlRHJhd2luZ0xpc3REZWJvdW5jZSh2YWwpDQogICAgICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB0aGlzLmlkR2xvYmFsID0gMTAwDQogICAgICB9LA0KICAgICAgZGVlcDogdHJ1ZQ0KICAgIH0sDQogICAgaWRHbG9iYWw6IHsNCiAgICAgIGhhbmRsZXIodmFsKSB7DQogICAgICAgIHRoaXMuc2F2ZUlkR2xvYmFsRGVib3VuY2UodmFsKQ0KICAgICAgfSwNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICAvLyDjgJBhZGQgYnkg6IqL6YGT5rqQ56CB44CR5LiN6K+757yT5a2YDQogICAgLy8gaWYgKEFycmF5LmlzQXJyYXkoZHJhd2luZ0xpc3RJbkRCKSAmJiBkcmF3aW5nTGlzdEluREIubGVuZ3RoID4gMCkgew0KICAgIC8vICAgdGhpcy5kcmF3aW5nTGlzdCA9IGRyYXdpbmdMaXN0SW5EQg0KICAgIC8vIH0gZWxzZSB7DQogICAgLy8gICB0aGlzLmRyYXdpbmdMaXN0ID0gZHJhd2luZ0RlZmFsdXQNCiAgICAvLyB9DQogICAgLy8gdGhpcy5hY3RpdmVGb3JtSXRlbSh0aGlzLmRyYXdpbmdMaXN0WzBdKQ0KICAgIC8vIGlmIChmb3JtQ29uZkluREIpIHsNCiAgICAvLyAgIHRoaXMuZm9ybUNvbmYgPSBmb3JtQ29uZkluREINCiAgICAvLyB9DQogICAgbG9hZEJlYXV0aWZpZXIoYnRmID0+IHsNCiAgICAgIGJlYXV0aWZpZXIgPSBidGYNCiAgICB9KQ0KICAgIGNvbnN0IGNsaXBib2FyZCA9IG5ldyBDbGlwYm9hcmRKUygnI2NvcHlOb2RlJywgew0KICAgICAgdGV4dDogdHJpZ2dlciA9PiB7DQogICAgICAgIGNvbnN0IGNvZGVTdHIgPSB0aGlzLmdlbmVyYXRlQ29kZSgpDQogICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgdGl0bGU6ICfmiJDlip8nLA0KICAgICAgICAgIG1lc3NhZ2U6ICfku6PnoIHlt7LlpI3liLbliLDliarliIfmnb/vvIzlj6/nspjotLTjgIInLA0KICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICB9KQ0KICAgICAgICByZXR1cm4gY29kZVN0cg0KICAgICAgfQ0KICAgIH0pDQogICAgY2xpcGJvYXJkLm9uKCdlcnJvcicsIGUgPT4gew0KICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Luj56CB5aSN5Yi25aSx6LSlJykNCiAgICB9KQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8vIOivu+WPluihqOWNlemFjee9rg0KICAgIGNvbnN0IGZvcm1JZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5ICYmIHRoaXMuJHJvdXRlLnF1ZXJ5LmZvcm1JZA0KICAgIGlmIChmb3JtSWQpIHsNCiAgICAgIGdldEZvcm0oZm9ybUlkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICAgIGlkOiBkYXRhLmlkLA0KICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSwNCiAgICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLA0KICAgICAgICAgIHJlbWFyazogZGF0YS5yZW1hcmsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmZvcm1Db25mID0gSlNPTi5wYXJzZShkYXRhLmNvbmYpDQogICAgICAgIHRoaXMuZHJhd2luZ0xpc3QgPSBkZWNvZGVGaWVsZHMoZGF0YS5maWVsZHMpDQogICAgICAgIC8vIOiuvue9rua/gOa0u+eahOihqOWNlemhuQ0KICAgICAgICB0aGlzLmFjdGl2ZURhdGEgPSB0aGlzLmRyYXdpbmdMaXN0WzBdDQogICAgICAgIHRoaXMuYWN0aXZlSWQgPSB0aGlzLmFjdGl2ZURhdGEuX19jb25maWdfXy5mb3JtSWQNCiAgICAgICAgLy8g6K6+572uIGlkR2xvYmFs77yM6YG/5YWN6YeN5aSNDQogICAgICAgIHRoaXMuaWRHbG9iYWwgKz0gdGhpcy5kcmF3aW5nTGlzdC5sZW5ndGgNCiAgICAgIH0pOw0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHNldE9iamVjdFZhbHVlUmVkdWNlKG9iaiwgc3RyS2V5cywgZGF0YSkgew0KICAgICAgY29uc3QgYXJyID0gc3RyS2V5cy5zcGxpdCgnLicpDQogICAgICBhcnIucmVkdWNlKChwcmUsIGl0ZW0sIGkpID0+IHsNCiAgICAgICAgaWYgKGFyci5sZW5ndGggPT09IGkgKyAxKSB7DQogICAgICAgICAgcHJlW2l0ZW1dID0gZGF0YQ0KICAgICAgICB9IGVsc2UgaWYgKCFpc09iamVjdE9iamVjdChwcmVbaXRlbV0pKSB7DQogICAgICAgICAgcHJlW2l0ZW1dID0ge30NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcHJlW2l0ZW1dDQogICAgICB9LCBvYmopDQogICAgfSwNCiAgICBzZXRSZXNwRGF0YShjb21wb25lbnQsIHJlc3ApIHsNCiAgICAgIGNvbnN0IHsgZGF0YVBhdGgsIHJlbmRlcktleSwgZGF0YUNvbnN1bWVyIH0gPSBjb21wb25lbnQuX19jb25maWdfXw0KICAgICAgaWYgKCFkYXRhUGF0aCB8fCAhZGF0YUNvbnN1bWVyKSByZXR1cm4NCiAgICAgIGNvbnN0IHJlc3BEYXRhID0gZGF0YVBhdGguc3BsaXQoJy4nKS5yZWR1Y2UoKHByZSwgaXRlbSkgPT4gcHJlW2l0ZW1dLCByZXNwKQ0KDQogICAgICAvLyDlsIbor7fmsYLlm57mnaXnmoTmlbDmja7vvIzotYvlgLzliLDmjIflrprlsZ7mgKfjgIINCiAgICAgIC8vIOS7pWVsLXRhYmVs5Li65L6L77yM5qC55o2uRWxlbWVudOaWh+aho++8jOW6lOivpeWwhuaVsOaNrui1i+WAvOe7mWVsLXRhYmVs55qEZGF0YeWxnuaAp++8jOaJgOS7pWRhdGFDb25zdW1lcueahOWAvOW6lOS4uidkYXRhJzsNCiAgICAgIC8vIOatpOaXtui1i+WAvOS7o+eggeWPr+WGmeaIkCBjb21wb25lbnRbZGF0YUNvbnN1bWVyXSA9IHJlc3BEYXRh77ybDQogICAgICAvLyDkvYbkuLrmlK/mjIHmm7Tmt7HlsYLnuqfnmoTotYvlgLzvvIjlpoLvvJpkYXRhQ29uc3VtZXLnmoTlgLzkuLonb3B0aW9ucy5kYXRhJ++8iSzkvb/nlKhzZXRPYmplY3RWYWx1ZVJlZHVjZQ0KICAgICAgdGhpcy5zZXRPYmplY3RWYWx1ZVJlZHVjZShjb21wb25lbnQsIGRhdGFDb25zdW1lciwgcmVzcERhdGEpDQogICAgICBjb25zdCBpID0gdGhpcy5kcmF3aW5nTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLl9fY29uZmlnX18ucmVuZGVyS2V5ID09PSByZW5kZXJLZXkpDQogICAgICBpZiAoaSA+IC0xKSB0aGlzLiRzZXQodGhpcy5kcmF3aW5nTGlzdCwgaSwgY29tcG9uZW50KQ0KICAgIH0sDQogICAgZmV0Y2hEYXRhKGNvbXBvbmVudCkgew0KICAgICAgY29uc3QgeyBkYXRhVHlwZSwgbWV0aG9kLCB1cmwgfSA9IGNvbXBvbmVudC5fX2NvbmZpZ19fDQogICAgICBpZiAoZGF0YVR5cGUgPT09ICdkeW5hbWljJyAmJiBtZXRob2QgJiYgdXJsKSB7DQogICAgICAgIHRoaXMuc2V0TG9hZGluZyhjb21wb25lbnQsIHRydWUpDQogICAgICAgIHRoaXMuJGF4aW9zKHsNCiAgICAgICAgICBtZXRob2QsDQogICAgICAgICAgdXJsDQogICAgICAgIH0pLnRoZW4ocmVzcCA9PiB7DQogICAgICAgICAgdGhpcy5zZXRMb2FkaW5nKGNvbXBvbmVudCwgZmFsc2UpDQogICAgICAgICAgdGhpcy5zZXRSZXNwRGF0YShjb21wb25lbnQsIHJlc3AuZGF0YSkNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHNldExvYWRpbmcoY29tcG9uZW50LCB2YWwpIHsNCiAgICAgIGNvbnN0IHsgZGlyZWN0aXZlcyB9ID0gY29tcG9uZW50DQogICAgICBpZiAoQXJyYXkuaXNBcnJheShkaXJlY3RpdmVzKSkgew0KICAgICAgICBjb25zdCB0ID0gZGlyZWN0aXZlcy5maW5kKGQgPT4gZC5uYW1lID09PSAnbG9hZGluZycpDQogICAgICAgIGlmICh0KSB0LnZhbHVlID0gdmFsDQogICAgICB9DQogICAgfSwNCiAgICBhY3RpdmVGb3JtSXRlbShjdXJyZW50SXRlbSkgew0KICAgICAgdGhpcy5hY3RpdmVEYXRhID0gY3VycmVudEl0ZW0NCiAgICAgIHRoaXMuYWN0aXZlSWQgPSBjdXJyZW50SXRlbS5fX2NvbmZpZ19fLmZvcm1JZA0KICAgIH0sDQogICAgb25FbmQob2JqKSB7DQogICAgICBpZiAob2JqLmZyb20gIT09IG9iai50bykgew0KICAgICAgICB0aGlzLmZldGNoRGF0YSh0ZW1wQWN0aXZlRGF0YSkNCiAgICAgICAgdGhpcy5hY3RpdmVEYXRhID0gdGVtcEFjdGl2ZURhdGENCiAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHRoaXMuaWRHbG9iYWwNCiAgICAgIH0NCiAgICB9LA0KICAgIGFkZENvbXBvbmVudChpdGVtKSB7DQogICAgICBjb25zdCBjbG9uZSA9IHRoaXMuY2xvbmVDb21wb25lbnQoaXRlbSkNCiAgICAgIHRoaXMuZmV0Y2hEYXRhKGNsb25lKQ0KICAgICAgdGhpcy5kcmF3aW5nTGlzdC5wdXNoKGNsb25lKQ0KICAgICAgdGhpcy5hY3RpdmVGb3JtSXRlbShjbG9uZSkNCiAgICB9LA0KICAgIGNsb25lQ29tcG9uZW50KG9yaWdpbikgew0KICAgICAgY29uc3QgY2xvbmUgPSBkZWVwQ2xvbmUob3JpZ2luKQ0KICAgICAgY29uc3QgY29uZmlnID0gY2xvbmUuX19jb25maWdfXw0KICAgICAgY29uZmlnLnNwYW4gPSB0aGlzLmZvcm1Db25mLnNwYW4gLy8g55Sf5oiQ5Luj56CB5pe277yM5Lya5qC55o2uc3BhbuWBmueyvueugOWIpOaWrQ0KICAgICAgdGhpcy5jcmVhdGVJZEFuZEtleShjbG9uZSkNCiAgICAgIGNsb25lLnBsYWNlaG9sZGVyICE9PSB1bmRlZmluZWQgJiYgKGNsb25lLnBsYWNlaG9sZGVyICs9IGNvbmZpZy5sYWJlbCkNCiAgICAgIHRlbXBBY3RpdmVEYXRhID0gY2xvbmUNCiAgICAgIHJldHVybiB0ZW1wQWN0aXZlRGF0YQ0KICAgIH0sDQogICAgY3JlYXRlSWRBbmRLZXkoaXRlbSkgew0KICAgICAgY29uc3QgY29uZmlnID0gaXRlbS5fX2NvbmZpZ19fDQogICAgICBjb25maWcuZm9ybUlkID0gKyt0aGlzLmlkR2xvYmFsDQogICAgICBjb25maWcucmVuZGVyS2V5ID0gYCR7Y29uZmlnLmZvcm1JZH0keytuZXcgRGF0ZSgpfWAgLy8g5pS55Y+YcmVuZGVyS2V55ZCO5Y+v5Lul5a6e546w5by65Yi25pu05paw57uE5Lu2DQogICAgICBpZiAoY29uZmlnLmxheW91dCA9PT0gJ2NvbEZvcm1JdGVtJykgew0KICAgICAgICBpdGVtLl9fdk1vZGVsX18gPSBgZmllbGQke3RoaXMuaWRHbG9iYWx9YA0KICAgICAgfSBlbHNlIGlmIChjb25maWcubGF5b3V0ID09PSAncm93Rm9ybUl0ZW0nKSB7DQogICAgICAgIGNvbmZpZy5jb21wb25lbnROYW1lID0gYHJvdyR7dGhpcy5pZEdsb2JhbH1gDQogICAgICAgICFBcnJheS5pc0FycmF5KGNvbmZpZy5jaGlsZHJlbikgJiYgKGNvbmZpZy5jaGlsZHJlbiA9IFtdKQ0KICAgICAgICBkZWxldGUgY29uZmlnLmxhYmVsIC8vIHJvd0Zvcm1JdGVt5peg6ZyA6YWN572ubGFiZWzlsZ7mgKcNCiAgICAgIH0NCiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbmZpZy5jaGlsZHJlbikpIHsNCiAgICAgICAgY29uZmlnLmNoaWxkcmVuID0gY29uZmlnLmNoaWxkcmVuLm1hcChjaGlsZEl0ZW0gPT4gdGhpcy5jcmVhdGVJZEFuZEtleShjaGlsZEl0ZW0pKQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIGl0ZW0NCiAgICB9LA0KICAgIC8vIOiOt+W+l+ihqOWNleaVsOaNrg0KICAgIEFzc2VtYmxlRm9ybURhdGEoKSB7DQogICAgICB0aGlzLmZvcm1EYXRhID0gew0KICAgICAgICBmaWVsZHM6IGRlZXBDbG9uZSh0aGlzLmRyYXdpbmdMaXN0KSwNCiAgICAgICAgLi4udGhpcy5mb3JtQ29uZg0KICAgICAgfQ0KICAgIH0sDQogICAgc2F2ZSgpIHsNCiAgICAgIC8vIHRoaXMuQXNzZW1ibGVGb3JtRGF0YSgpDQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZvcm1EYXRhKQ0KICAgICAgdGhpcy4kcmVmc1siZm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKCF2YWxpZCkgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBjb25zdCBmb3JtID0gew0KICAgICAgICAgIGNvbmY6IEpTT04uc3RyaW5naWZ5KHRoaXMuZm9ybUNvbmYpLCAvLyDooajljZXphY3nva4NCiAgICAgICAgICBmaWVsZHM6IHRoaXMuZW5jb2RlRmllbGRzKCksIC8vIOihqOWNlemhueeahOaVsOe7hA0KICAgICAgICAgIC4uLnRoaXMuZm9ybSAvLyDooajljZXlkI3nrYkNCiAgICAgICAgfQ0KICAgICAgICAvLyDkv67mlLnnmoTmj5DkuqQNCiAgICAgICAgaWYgKHRoaXMuZm9ybS5pZCAhPSBudWxsKSB7DQogICAgICAgICAgdXBkYXRlRm9ybShmb3JtKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOw0KICAgICAgICAgICAgdGhpcy5jbG9zZSgpDQogICAgICAgICAgfSk7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIC8vIOa3u+WKoOeahOaPkOS6pA0KICAgICAgICBjcmVhdGVGb3JtKGZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuaWsOWinuaIkOWKnyIpOw0KICAgICAgICAgIHRoaXMuY2xvc2UoKQ0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqIOWFs+mXreaMiemSriAqLw0KICAgIGNsb3NlKCkgew0KICAgICAgdGhpcy4kdGFiLmNsb3NlT3BlblBhZ2UoeyBwYXRoOiAiL2JwbS9tYW5hZ2VyL2Zvcm0iIH0pOw0KICAgIH0sDQogICAgZW5jb2RlRmllbGRzKCkgew0KICAgICAgY29uc3QgZmllbGRzID0gW10NCiAgICAgIHRoaXMuZHJhd2luZ0xpc3QuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgZmllbGRzLnB1c2goSlNPTi5zdHJpbmdpZnkoaXRlbSkpDQogICAgICB9KQ0KICAgICAgcmV0dXJuIGZpZWxkcw0KICAgIH0sDQogICAgZ2VuZXJhdGUoZGF0YSkgew0KICAgICAgY29uc3QgZnVuYyA9IHRoaXNbYGV4ZWMke3RpdGxlQ2FzZSh0aGlzLm9wZXJhdGlvblR5cGUpfWBdDQogICAgICB0aGlzLmdlbmVyYXRlQ29uZiA9IGRhdGENCiAgICAgIGZ1bmMgJiYgZnVuYyhkYXRhKQ0KICAgIH0sDQogICAgZXhlY1J1bihkYXRhKSB7DQogICAgICB0aGlzLkFzc2VtYmxlRm9ybURhdGEoKQ0KICAgICAgdGhpcy5kcmF3ZXJWaXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgZXhlY0Rvd25sb2FkKGRhdGEpIHsNCiAgICAgIGNvbnN0IGNvZGVTdHIgPSB0aGlzLmdlbmVyYXRlQ29kZSgpDQogICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2NvZGVTdHJdLCB7IHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnIH0pDQogICAgICBzYXZlQXMoYmxvYiwgZGF0YS5maWxlTmFtZSkNCiAgICB9LA0KICAgIGV4ZWNDb3B5KGRhdGEpIHsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb3B5Tm9kZScpLmNsaWNrKCkNCiAgICB9LA0KICAgIGVtcHR5KCkgew0KICAgICAgdGhpcy4kY29uZmlybSgn56Gu5a6a6KaB5riF56m65omA5pyJ57uE5Lu25ZCX77yfJywgJ+aPkOekuicsIHsgdHlwZTogJ3dhcm5pbmcnIH0pLnRoZW4oDQogICAgICAgICgpID0+IHsNCiAgICAgICAgICB0aGlzLmRyYXdpbmdMaXN0ID0gW10NCiAgICAgICAgICB0aGlzLmlkR2xvYmFsID0gMTAwDQogICAgICAgIH0NCiAgICAgICkNCiAgICB9LA0KICAgIGRyYXdpbmdJdGVtQ29weShpdGVtLCBsaXN0KSB7DQogICAgICBsZXQgY2xvbmUgPSBkZWVwQ2xvbmUoaXRlbSkNCiAgICAgIGNsb25lID0gdGhpcy5jcmVhdGVJZEFuZEtleShjbG9uZSkNCiAgICAgIGxpc3QucHVzaChjbG9uZSkNCiAgICAgIHRoaXMuYWN0aXZlRm9ybUl0ZW0oY2xvbmUpDQogICAgfSwNCiAgICBkcmF3aW5nSXRlbURlbGV0ZShpbmRleCwgbGlzdCkgew0KICAgICAgbGlzdC5zcGxpY2UoaW5kZXgsIDEpDQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIGNvbnN0IGxlbiA9IHRoaXMuZHJhd2luZ0xpc3QubGVuZ3RoDQogICAgICAgIGlmIChsZW4pIHsNCiAgICAgICAgICB0aGlzLmFjdGl2ZUZvcm1JdGVtKHRoaXMuZHJhd2luZ0xpc3RbbGVuIC0gMV0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBnZW5lcmF0ZUNvZGUoKSB7DQogICAgICBjb25zdCB7IHR5cGUgfSA9IHRoaXMuZ2VuZXJhdGVDb25mDQogICAgICB0aGlzLkFzc2VtYmxlRm9ybURhdGEoKQ0KICAgICAgY29uc3Qgc2NyaXB0ID0gdnVlU2NyaXB0KG1ha2VVcEpzKHRoaXMuZm9ybURhdGEsIHR5cGUpKQ0KICAgICAgY29uc3QgaHRtbCA9IHZ1ZVRlbXBsYXRlKG1ha2VVcEh0bWwodGhpcy5mb3JtRGF0YSwgdHlwZSkpDQogICAgICBjb25zdCBjc3MgPSBjc3NTdHlsZShtYWtlVXBDc3ModGhpcy5mb3JtRGF0YSkpDQogICAgICByZXR1cm4gYmVhdXRpZmllci5odG1sKGh0bWwgKyBzY3JpcHQgKyBjc3MsIGJlYXV0aWZpZXJDb25mLmh0bWwpDQogICAgfSwNCiAgICBzaG93SnNvbigpIHsNCiAgICAgIHRoaXMuQXNzZW1ibGVGb3JtRGF0YSgpDQogICAgICB0aGlzLmpzb25EcmF3ZXJWaXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgZG93bmxvYWQoKSB7DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgICB0aGlzLnNob3dGaWxlTmFtZSA9IHRydWUNCiAgICAgIHRoaXMub3BlcmF0aW9uVHlwZSA9ICdkb3dubG9hZCcNCiAgICB9LA0KICAgIHJ1bigpIHsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICAgIHRoaXMuc2hvd0ZpbGVOYW1lID0gZmFsc2UNCiAgICAgIHRoaXMub3BlcmF0aW9uVHlwZSA9ICdydW4nDQogICAgfSwNCiAgICBjb3B5KCkgew0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQ0KICAgICAgdGhpcy5zaG93RmlsZU5hbWUgPSBmYWxzZQ0KICAgICAgdGhpcy5vcGVyYXRpb25UeXBlID0gJ2NvcHknDQogICAgfSwNCiAgICB0YWdDaGFuZ2UobmV3VGFnKSB7DQogICAgICBuZXdUYWcgPSB0aGlzLmNsb25lQ29tcG9uZW50KG5ld1RhZykNCiAgICAgIGNvbnN0IGNvbmZpZyA9IG5ld1RhZy5fX2NvbmZpZ19fDQogICAgICBuZXdUYWcuX192TW9kZWxfXyA9IHRoaXMuYWN0aXZlRGF0YS5fX3ZNb2RlbF9fDQogICAgICBjb25maWcuZm9ybUlkID0gdGhpcy5hY3RpdmVJZA0KICAgICAgY29uZmlnLnNwYW4gPSB0aGlzLmFjdGl2ZURhdGEuX19jb25maWdfXy5zcGFuDQogICAgICB0aGlzLmFjdGl2ZURhdGEuX19jb25maWdfXy50YWcgPSBjb25maWcudGFnDQogICAgICB0aGlzLmFjdGl2ZURhdGEuX19jb25maWdfXy50YWdJY29uID0gY29uZmlnLnRhZ0ljb24NCiAgICAgIHRoaXMuYWN0aXZlRGF0YS5fX2NvbmZpZ19fLmRvY3VtZW50ID0gY29uZmlnLmRvY3VtZW50DQogICAgICBpZiAodHlwZW9mIHRoaXMuYWN0aXZlRGF0YS5fX2NvbmZpZ19fLmRlZmF1bHRWYWx1ZSA9PT0gdHlwZW9mIGNvbmZpZy5kZWZhdWx0VmFsdWUpIHsNCiAgICAgICAgY29uZmlnLmRlZmF1bHRWYWx1ZSA9IHRoaXMuYWN0aXZlRGF0YS5fX2NvbmZpZ19fLmRlZmF1bHRWYWx1ZQ0KICAgICAgfQ0KICAgICAgT2JqZWN0LmtleXMobmV3VGFnKS5mb3JFYWNoKGtleSA9PiB7DQogICAgICAgIGlmICh0aGlzLmFjdGl2ZURhdGFba2V5XSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgbmV3VGFnW2tleV0gPSB0aGlzLmFjdGl2ZURhdGFba2V5XQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgdGhpcy5hY3RpdmVEYXRhID0gbmV3VGFnDQogICAgICB0aGlzLnVwZGF0ZURyYXdpbmdMaXN0KG5ld1RhZywgdGhpcy5kcmF3aW5nTGlzdCkNCiAgICB9LA0KICAgIHVwZGF0ZURyYXdpbmdMaXN0KG5ld1RhZywgbGlzdCkgew0KICAgICAgY29uc3QgaW5kZXggPSBsaXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0uX19jb25maWdfXy5mb3JtSWQgPT09IHRoaXMuYWN0aXZlSWQpDQogICAgICBpZiAoaW5kZXggPiAtMSkgew0KICAgICAgICBsaXN0LnNwbGljZShpbmRleCwgMSwgbmV3VGFnKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0uX19jb25maWdfXy5jaGlsZHJlbikpIHRoaXMudXBkYXRlRHJhd2luZ0xpc3QobmV3VGFnLCBpdGVtLl9fY29uZmlnX18uY2hpbGRyZW4pDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICByZWZyZXNoSnNvbihkYXRhKSB7DQogICAgICB0aGlzLmRyYXdpbmdMaXN0ID0gZGVlcENsb25lKGRhdGEuZmllbGRzKQ0KICAgICAgZGVsZXRlIGRhdGEuZmllbGRzDQogICAgICB0aGlzLmZvcm1Db25mID0gZGF0YQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["formEditor.vue"],"names":[],"mappings":";AA8IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"formEditor.vue","sourceRoot":"src/views/bpm/form","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"left-board\">\r\n      <div class=\"logo-wrapper\">\r\n        <div class=\"logo\">流程表单</div>\r\n      </div>\r\n      <el-scrollbar class=\"left-scrollbar\">\r\n        <!-- 左边：表单项 -->\r\n        <div class=\"components-list\">\r\n          <div v-for=\"(item, listIndex) in leftComponents\" :key=\"listIndex\">\r\n            <div class=\"components-title\">\r\n              <svg-icon icon-class=\"component\" />\r\n              {{ item.title }}\r\n            </div>\r\n            <draggable\r\n              class=\"components-draggable\"\r\n              :list=\"item.list\"\r\n              :group=\"{ name: 'componentsGroup', pull: 'clone', put: false }\"\r\n              :clone=\"cloneComponent\"\r\n              draggable=\".components-item\"\r\n              :sort=\"false\"\r\n              @end=\"onEnd\"\r\n            >\r\n              <div\r\n                v-for=\"(element, index) in item.list\"\r\n                :key=\"index\"\r\n                class=\"components-item\"\r\n                @click=\"addComponent(element)\"\r\n              >\r\n                <div class=\"components-body\">\r\n                  <svg-icon :icon-class=\"element.__config__.tagIcon\" />\r\n                  {{ element.__config__.label }}\r\n                </div>\r\n              </div>\r\n            </draggable>\r\n          </div>\r\n\r\n          <!-- 左边：动态表单 -->\r\n          <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n            <el-form-item label=\"表单名\" prop=\"name\">\r\n              <el-input v-model=\"form.name\" placeholder=\"请输入表单名\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"开启状态\" prop=\"status\">\r\n              <el-radio-group v-model=\"form.status\">\r\n                <el-radio v-for=\"dict in this.getDictDatas(DICT_TYPE.COMMON_STATUS)\"\r\n                          :key=\"dict.value\" :label=\"parseInt(dict.value)\">{{dict.label}}</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"备注\" prop=\"remark\">\r\n              <el-input type=\"textarea\" v-model=\"form.remark\" placeholder=\"请输入备注\" />\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-scrollbar>\r\n    </div>\r\n\r\n    <div class=\"center-board\">\r\n      <div class=\"action-bar\">\r\n        <el-button icon=\"el-icon-check\" type=\"text\" @click=\"save\">保存</el-button>\r\n        <!--        <el-button icon=\"el-icon-video-play\" type=\"text\" @click=\"run\">-->\r\n<!--          运行-->\r\n<!--        </el-button>-->\r\n        <el-button icon=\"el-icon-view\" type=\"text\" @click=\"showJson\">\r\n          查看json\r\n        </el-button>\r\n<!--        <el-button icon=\"el-icon-download\" type=\"text\" @click=\"download\">-->\r\n<!--          导出vue文件-->\r\n<!--        </el-button>-->\r\n<!--        <el-button class=\"copy-btn-main\" icon=\"el-icon-document-copy\" type=\"text\" @click=\"copy\">-->\r\n<!--          复制代码-->\r\n<!--        </el-button>-->\r\n        <el-button class=\"delete-btn\" icon=\"el-icon-delete\" type=\"text\" @click=\"empty\">\r\n          清空\r\n        </el-button>\r\n      </div>\r\n\r\n      <!-- 中间，表单项 -->\r\n      <el-scrollbar class=\"center-scrollbar\">\r\n        <el-row class=\"center-board-row\" :gutter=\"formConf.gutter\">\r\n          <el-form\r\n            :size=\"formConf.size\"\r\n            :label-position=\"formConf.labelPosition\"\r\n            :disabled=\"formConf.disabled\"\r\n            :label-width=\"formConf.labelWidth + 'px'\"\r\n          >\r\n            <draggable class=\"drawing-board\" :list=\"drawingList\" :animation=\"340\" group=\"componentsGroup\">\r\n              <draggable-item\r\n                v-for=\"(item, index) in drawingList\"\r\n                :key=\"item.renderKey\"\r\n                :drawing-list=\"drawingList\"\r\n                :current-item=\"item\"\r\n                :index=\"index\"\r\n                :active-id=\"activeId\"\r\n                :form-conf=\"formConf\"\r\n                @activeItem=\"activeFormItem\"\r\n                @copyItem=\"drawingItemCopy\"\r\n                @deleteItem=\"drawingItemDelete\"\r\n              />\r\n            </draggable>\r\n            <div v-show=\"!drawingList.length\" class=\"empty-info\">\r\n              从左侧拖入或点选组件进行表单设计\r\n            </div>\r\n          </el-form>\r\n        </el-row>\r\n      </el-scrollbar>\r\n    </div>\r\n\r\n    <!-- 右边：组件属性/表单属性 -->\r\n    <right-panel\r\n      :active-data=\"activeData\"\r\n      :form-conf=\"formConf\"\r\n      :show-field=\"!!drawingList.length\"\r\n      @tag-change=\"tagChange\"\r\n      @fetch-data=\"fetchData\"\r\n    />\r\n\r\n<!--    <form-drawer-->\r\n<!--      :visible.sync=\"drawerVisible\"-->\r\n<!--      :form-data=\"formData\"-->\r\n<!--      size=\"100%\"-->\r\n<!--      :generate-conf=\"generateConf\"-->\r\n<!--    />-->\r\n\r\n    <json-drawer\r\n      size=\"60%\"\r\n      :visible.sync=\"jsonDrawerVisible\"\r\n      :json-str=\"JSON.stringify(formData)\"\r\n      @refresh=\"refreshJson\"\r\n    />\r\n\r\n<!--    <code-type-dialog-->\r\n<!--      :visible.sync=\"dialogVisible\"-->\r\n<!--      title=\"选择生成类型\"-->\r\n<!--      :show-file-name=\"showFileName\"-->\r\n<!--      @confirm=\"generate\"-->\r\n<!--    />-->\r\n\r\n<!--    <input id=\"copyNode\" type=\"hidden\">-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport draggable from 'vuedraggable'\r\nimport { debounce } from 'throttle-debounce'\r\nimport { saveAs } from 'file-saver'\r\nimport ClipboardJS from 'clipboard'\r\nimport render from '@/components/render/render'\r\nimport FormDrawer from '@/views/infra/build/FormDrawer'\r\nimport JsonDrawer from '@/views/infra/build/JsonDrawer'\r\nimport RightPanel from '@/views/infra/build/RightPanel'\r\nimport {\r\n  inputComponents, selectComponents, layoutComponents, formConf\r\n} from '@/components/generator/config'\r\nimport {beautifierConf, titleCase, deepClone, isObjectObject} from '@/utils'\r\nimport {\r\n  makeUpHtml, vueTemplate, vueScript, cssStyle\r\n} from '@/components/generator/html'\r\nimport { makeUpJs } from '@/components/generator/js'\r\nimport { makeUpCss } from '@/components/generator/css'\r\nimport drawingDefalut from '@/components/generator/drawingDefalut'\r\nimport logo from '@/assets/logo/logo.png'\r\nimport CodeTypeDialog from '@/views/infra/build/CodeTypeDialog'\r\nimport DraggableItem from '@/views/infra/build/DraggableItem'\r\nimport {\r\n  getDrawingList, saveDrawingList, getIdGlobal, saveIdGlobal, getFormConf\r\n} from '@/utils/db'\r\nimport loadBeautifier from '@/utils/loadBeautifier'\r\nimport {CommonStatusEnum} from \"@/utils/constants\";\r\nimport {createForm, getForm, updateForm} from \"@/api/bpm/form\";\r\nimport {decodeFields} from \"@/utils/formGenerator\";\r\n\r\nlet beautifier\r\nconst emptyActiveData = { style: {}, autosize: {} }\r\nlet oldActiveId\r\nlet tempActiveData\r\nconst drawingListInDB = getDrawingList()\r\nconst formConfInDB = getFormConf()\r\nconst idGlobal = getIdGlobal()\r\n\r\nexport default {\r\n  components: {\r\n    draggable,\r\n    render,\r\n    FormDrawer,\r\n    JsonDrawer,\r\n    RightPanel,\r\n    CodeTypeDialog,\r\n    DraggableItem\r\n  },\r\n  data() {\r\n    return {\r\n      logo,\r\n      idGlobal,\r\n      formConf,\r\n      inputComponents,\r\n      selectComponents,\r\n      layoutComponents,\r\n      labelWidth: 100,\r\n      // drawingList: drawingDefalut,\r\n      drawingData: {}, // 生成后的表单数据\r\n      activeId: drawingDefalut[0].__config__.formId,\r\n\r\n      drawingList: [], // 表单项的数组\r\n      // activeId: undefined,\r\n      // activeData: {},\r\n\r\n      drawerVisible: false,\r\n      formData: {},\r\n      dialogVisible: false,\r\n      jsonDrawerVisible: false,\r\n      generateConf: null,\r\n      showFileName: false,\r\n      activeData: drawingDefalut[0], // 右边编辑器激活的表单项\r\n      saveDrawingListDebounce: debounce(340, saveDrawingList),\r\n      saveIdGlobalDebounce: debounce(340, saveIdGlobal),\r\n      leftComponents: [\r\n        {\r\n          title: '输入型组件',\r\n          list: inputComponents\r\n        },\r\n        {\r\n          title: '选择型组件',\r\n          list: selectComponents\r\n        },\r\n        {\r\n          title: '布局型组件',\r\n          list: layoutComponents\r\n        }\r\n      ],\r\n\r\n      // 表单参数\r\n      form: {\r\n        status: CommonStatusEnum.ENABLE,\r\n      },\r\n      // 表单校验\r\n      rules: {\r\n        name: [{ required: true, message: \"表单名不能为空\", trigger: \"blur\" }],\r\n        status: [{ required: true, message: \"开启状态不能为空\", trigger: \"blur\" }],\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  watch: {\r\n    // eslint-disable-next-line func-names\r\n    'activeData.__config__.label': function (val, oldVal) {\r\n      if (\r\n        this.activeData.placeholder === undefined\r\n        || !this.activeData.__config__.tag\r\n        || oldActiveId !== this.activeId\r\n      ) {\r\n        return\r\n      }\r\n      this.activeData.placeholder = this.activeData.placeholder.replace(oldVal, '') + val\r\n    },\r\n    activeId: {\r\n      handler(val) {\r\n        oldActiveId = val\r\n      },\r\n      immediate: true\r\n    },\r\n    drawingList: {\r\n      handler(val) {\r\n        this.saveDrawingListDebounce(val)\r\n        if (val.length === 0) this.idGlobal = 100\r\n      },\r\n      deep: true\r\n    },\r\n    idGlobal: {\r\n      handler(val) {\r\n        this.saveIdGlobalDebounce(val)\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  mounted() {\r\n    // 【add by 芋道源码】不读缓存\r\n    // if (Array.isArray(drawingListInDB) && drawingListInDB.length > 0) {\r\n    //   this.drawingList = drawingListInDB\r\n    // } else {\r\n    //   this.drawingList = drawingDefalut\r\n    // }\r\n    // this.activeFormItem(this.drawingList[0])\r\n    // if (formConfInDB) {\r\n    //   this.formConf = formConfInDB\r\n    // }\r\n    loadBeautifier(btf => {\r\n      beautifier = btf\r\n    })\r\n    const clipboard = new ClipboardJS('#copyNode', {\r\n      text: trigger => {\r\n        const codeStr = this.generateCode()\r\n        this.$notify({\r\n          title: '成功',\r\n          message: '代码已复制到剪切板，可粘贴。',\r\n          type: 'success'\r\n        })\r\n        return codeStr\r\n      }\r\n    })\r\n    clipboard.on('error', e => {\r\n      this.$message.error('代码复制失败')\r\n    })\r\n  },\r\n  created() {\r\n    // 读取表单配置\r\n    const formId = this.$route.query && this.$route.query.formId\r\n    if (formId) {\r\n      getForm(formId).then(response => {\r\n        const data = response.data\r\n        this.form = {\r\n          id: data.id,\r\n          name: data.name,\r\n          status: data.status,\r\n          remark: data.remark\r\n        }\r\n        this.formConf = JSON.parse(data.conf)\r\n        this.drawingList = decodeFields(data.fields)\r\n        // 设置激活的表单项\r\n        this.activeData = this.drawingList[0]\r\n        this.activeId = this.activeData.__config__.formId\r\n        // 设置 idGlobal，避免重复\r\n        this.idGlobal += this.drawingList.length\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    setObjectValueReduce(obj, strKeys, data) {\r\n      const arr = strKeys.split('.')\r\n      arr.reduce((pre, item, i) => {\r\n        if (arr.length === i + 1) {\r\n          pre[item] = data\r\n        } else if (!isObjectObject(pre[item])) {\r\n          pre[item] = {}\r\n        }\r\n        return pre[item]\r\n      }, obj)\r\n    },\r\n    setRespData(component, resp) {\r\n      const { dataPath, renderKey, dataConsumer } = component.__config__\r\n      if (!dataPath || !dataConsumer) return\r\n      const respData = dataPath.split('.').reduce((pre, item) => pre[item], resp)\r\n\r\n      // 将请求回来的数据，赋值到指定属性。\r\n      // 以el-tabel为例，根据Element文档，应该将数据赋值给el-tabel的data属性，所以dataConsumer的值应为'data';\r\n      // 此时赋值代码可写成 component[dataConsumer] = respData；\r\n      // 但为支持更深层级的赋值（如：dataConsumer的值为'options.data'）,使用setObjectValueReduce\r\n      this.setObjectValueReduce(component, dataConsumer, respData)\r\n      const i = this.drawingList.findIndex(item => item.__config__.renderKey === renderKey)\r\n      if (i > -1) this.$set(this.drawingList, i, component)\r\n    },\r\n    fetchData(component) {\r\n      const { dataType, method, url } = component.__config__\r\n      if (dataType === 'dynamic' && method && url) {\r\n        this.setLoading(component, true)\r\n        this.$axios({\r\n          method,\r\n          url\r\n        }).then(resp => {\r\n          this.setLoading(component, false)\r\n          this.setRespData(component, resp.data)\r\n        })\r\n      }\r\n    },\r\n    setLoading(component, val) {\r\n      const { directives } = component\r\n      if (Array.isArray(directives)) {\r\n        const t = directives.find(d => d.name === 'loading')\r\n        if (t) t.value = val\r\n      }\r\n    },\r\n    activeFormItem(currentItem) {\r\n      this.activeData = currentItem\r\n      this.activeId = currentItem.__config__.formId\r\n    },\r\n    onEnd(obj) {\r\n      if (obj.from !== obj.to) {\r\n        this.fetchData(tempActiveData)\r\n        this.activeData = tempActiveData\r\n        this.activeId = this.idGlobal\r\n      }\r\n    },\r\n    addComponent(item) {\r\n      const clone = this.cloneComponent(item)\r\n      this.fetchData(clone)\r\n      this.drawingList.push(clone)\r\n      this.activeFormItem(clone)\r\n    },\r\n    cloneComponent(origin) {\r\n      const clone = deepClone(origin)\r\n      const config = clone.__config__\r\n      config.span = this.formConf.span // 生成代码时，会根据span做精简判断\r\n      this.createIdAndKey(clone)\r\n      clone.placeholder !== undefined && (clone.placeholder += config.label)\r\n      tempActiveData = clone\r\n      return tempActiveData\r\n    },\r\n    createIdAndKey(item) {\r\n      const config = item.__config__\r\n      config.formId = ++this.idGlobal\r\n      config.renderKey = `${config.formId}${+new Date()}` // 改变renderKey后可以实现强制更新组件\r\n      if (config.layout === 'colFormItem') {\r\n        item.__vModel__ = `field${this.idGlobal}`\r\n      } else if (config.layout === 'rowFormItem') {\r\n        config.componentName = `row${this.idGlobal}`\r\n        !Array.isArray(config.children) && (config.children = [])\r\n        delete config.label // rowFormItem无需配置label属性\r\n      }\r\n      if (Array.isArray(config.children)) {\r\n        config.children = config.children.map(childItem => this.createIdAndKey(childItem))\r\n      }\r\n      return item\r\n    },\r\n    // 获得表单数据\r\n    AssembleFormData() {\r\n      this.formData = {\r\n        fields: deepClone(this.drawingList),\r\n        ...this.formConf\r\n      }\r\n    },\r\n    save() {\r\n      // this.AssembleFormData()\r\n      // console.log(this.formData)\r\n      this.$refs[\"form\"].validate(valid => {\r\n        if (!valid) {\r\n          return;\r\n        }\r\n        const form = {\r\n          conf: JSON.stringify(this.formConf), // 表单配置\r\n          fields: this.encodeFields(), // 表单项的数组\r\n          ...this.form // 表单名等\r\n        }\r\n        // 修改的提交\r\n        if (this.form.id != null) {\r\n          updateForm(form).then(response => {\r\n            this.$modal.msgSuccess(\"修改成功\");\r\n            this.close()\r\n          });\r\n          return;\r\n        }\r\n        // 添加的提交\r\n        createForm(form).then(response => {\r\n          this.$modal.msgSuccess(\"新增成功\");\r\n          this.close()\r\n        });\r\n      });\r\n    },\r\n    /** 关闭按钮 */\r\n    close() {\r\n      this.$tab.closeOpenPage({ path: \"/bpm/manager/form\" });\r\n    },\r\n    encodeFields() {\r\n      const fields = []\r\n      this.drawingList.forEach(item => {\r\n        fields.push(JSON.stringify(item))\r\n      })\r\n      return fields\r\n    },\r\n    generate(data) {\r\n      const func = this[`exec${titleCase(this.operationType)}`]\r\n      this.generateConf = data\r\n      func && func(data)\r\n    },\r\n    execRun(data) {\r\n      this.AssembleFormData()\r\n      this.drawerVisible = true\r\n    },\r\n    execDownload(data) {\r\n      const codeStr = this.generateCode()\r\n      const blob = new Blob([codeStr], { type: 'text/plain;charset=utf-8' })\r\n      saveAs(blob, data.fileName)\r\n    },\r\n    execCopy(data) {\r\n      document.getElementById('copyNode').click()\r\n    },\r\n    empty() {\r\n      this.$confirm('确定要清空所有组件吗？', '提示', { type: 'warning' }).then(\r\n        () => {\r\n          this.drawingList = []\r\n          this.idGlobal = 100\r\n        }\r\n      )\r\n    },\r\n    drawingItemCopy(item, list) {\r\n      let clone = deepClone(item)\r\n      clone = this.createIdAndKey(clone)\r\n      list.push(clone)\r\n      this.activeFormItem(clone)\r\n    },\r\n    drawingItemDelete(index, list) {\r\n      list.splice(index, 1)\r\n      this.$nextTick(() => {\r\n        const len = this.drawingList.length\r\n        if (len) {\r\n          this.activeFormItem(this.drawingList[len - 1])\r\n        }\r\n      })\r\n    },\r\n    generateCode() {\r\n      const { type } = this.generateConf\r\n      this.AssembleFormData()\r\n      const script = vueScript(makeUpJs(this.formData, type))\r\n      const html = vueTemplate(makeUpHtml(this.formData, type))\r\n      const css = cssStyle(makeUpCss(this.formData))\r\n      return beautifier.html(html + script + css, beautifierConf.html)\r\n    },\r\n    showJson() {\r\n      this.AssembleFormData()\r\n      this.jsonDrawerVisible = true\r\n    },\r\n    download() {\r\n      this.dialogVisible = true\r\n      this.showFileName = true\r\n      this.operationType = 'download'\r\n    },\r\n    run() {\r\n      this.dialogVisible = true\r\n      this.showFileName = false\r\n      this.operationType = 'run'\r\n    },\r\n    copy() {\r\n      this.dialogVisible = true\r\n      this.showFileName = false\r\n      this.operationType = 'copy'\r\n    },\r\n    tagChange(newTag) {\r\n      newTag = this.cloneComponent(newTag)\r\n      const config = newTag.__config__\r\n      newTag.__vModel__ = this.activeData.__vModel__\r\n      config.formId = this.activeId\r\n      config.span = this.activeData.__config__.span\r\n      this.activeData.__config__.tag = config.tag\r\n      this.activeData.__config__.tagIcon = config.tagIcon\r\n      this.activeData.__config__.document = config.document\r\n      if (typeof this.activeData.__config__.defaultValue === typeof config.defaultValue) {\r\n        config.defaultValue = this.activeData.__config__.defaultValue\r\n      }\r\n      Object.keys(newTag).forEach(key => {\r\n        if (this.activeData[key] !== undefined) {\r\n          newTag[key] = this.activeData[key]\r\n        }\r\n      })\r\n      this.activeData = newTag\r\n      this.updateDrawingList(newTag, this.drawingList)\r\n    },\r\n    updateDrawingList(newTag, list) {\r\n      const index = list.findIndex(item => item.__config__.formId === this.activeId)\r\n      if (index > -1) {\r\n        list.splice(index, 1, newTag)\r\n      } else {\r\n        list.forEach(item => {\r\n          if (Array.isArray(item.__config__.children)) this.updateDrawingList(newTag, item.__config__.children)\r\n        })\r\n      }\r\n    },\r\n    refreshJson(data) {\r\n      this.drawingList = deepClone(data.fields)\r\n      delete data.fields\r\n      this.formConf = data\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss'>\r\n@import '@/styles/home';\r\n</style>\r\n"]}]}