{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\designer\\ProcessDesigner.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\designer\\ProcessDesigner.vue","mtime":1704630437686},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgQnBtbk1vZGVsZXIgZnJvbSAiYnBtbi1qcy9saWIvTW9kZWxlciI7DQppbXBvcnQgRGVmYXVsdEVtcHR5WE1MIGZyb20gIi4vcGx1Z2lucy9kZWZhdWx0RW1wdHkiOw0KLy8g57+76K+R5pa55rOVDQppbXBvcnQgY3VzdG9tVHJhbnNsYXRlIGZyb20gIi4vcGx1Z2lucy90cmFuc2xhdGUvY3VzdG9tVHJhbnNsYXRlIjsNCmltcG9ydCB0cmFuc2xhdGlvbnNDTiBmcm9tICIuL3BsdWdpbnMvdHJhbnNsYXRlL3poIjsNCi8vIOaooeaLn+a1gei9rOa1geeoiw0KaW1wb3J0IHRva2VuU2ltdWxhdGlvbiBmcm9tICJicG1uLWpzLXRva2VuLXNpbXVsYXRpb24iOw0KLy8g5qCH562+6Kej5p6Q5p6E5bu65ZmoDQovLyBpbXBvcnQgYnBtblByb3BlcnRpZXNQcm92aWRlciBmcm9tICJicG1uLWpzLXByb3BlcnRpZXMtcGFuZWwvbGliL3Byb3ZpZGVyL2JwbW4iOw0KLy8g5qCH562+6Kej5p6QIE1vZGRsZQ0KaW1wb3J0IGNhbXVuZGFNb2RkbGVEZXNjcmlwdG9yIGZyb20gIi4vcGx1Z2lucy9kZXNjcmlwdG9yL2NhbXVuZGFEZXNjcmlwdG9yLmpzb24iOw0KaW1wb3J0IGFjdGl2aXRpTW9kZGxlRGVzY3JpcHRvciBmcm9tICIuL3BsdWdpbnMvZGVzY3JpcHRvci9hY3Rpdml0aURlc2NyaXB0b3IuanNvbiI7DQppbXBvcnQgZmxvd2FibGVNb2RkbGVEZXNjcmlwdG9yIGZyb20gIi4vcGx1Z2lucy9kZXNjcmlwdG9yL2Zsb3dhYmxlRGVzY3JpcHRvci5qc29uIjsNCi8vIOagh+etvuino+aekCBFeHRlbnNpb24NCmltcG9ydCBjYW11bmRhTW9kZGxlRXh0ZW5zaW9uIGZyb20gIi4vcGx1Z2lucy9leHRlbnNpb24tbW9kZGxlL2NhbXVuZGEiOw0KaW1wb3J0IGFjdGl2aXRpTW9kZGxlRXh0ZW5zaW9uIGZyb20gIi4vcGx1Z2lucy9leHRlbnNpb24tbW9kZGxlL2FjdGl2aXRpIjsNCmltcG9ydCBmbG93YWJsZU1vZGRsZUV4dGVuc2lvbiBmcm9tICIuL3BsdWdpbnMvZXh0ZW5zaW9uLW1vZGRsZS9mbG93YWJsZSI7DQovLyDlvJXlhaVqc29u6L2s5o2i5LiO6auY5LquDQppbXBvcnQgY29udmVydCBmcm9tICJ4bWwtanMiOw0KDQovLyDku6PnoIHpq5jkuq7mj5Lku7YNCmltcG9ydCBobGpzIGZyb20gImhpZ2hsaWdodC5qcy9saWIvaGlnaGxpZ2h0IjsNCmltcG9ydCAiaGlnaGxpZ2h0LmpzL3N0eWxlcy9naXRodWItZ2lzdC5jc3MiOw0KaGxqcy5yZWdpc3Rlckxhbmd1YWdlKCJ4bWwiLCByZXF1aXJlKCJoaWdobGlnaHQuanMvbGliL2xhbmd1YWdlcy94bWwiKSk7DQpobGpzLnJlZ2lzdGVyTGFuZ3VhZ2UoImpzb24iLCByZXF1aXJlKCJoaWdobGlnaHQuanMvbGliL2xhbmd1YWdlcy9qc29uIikpOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJNeVByb2Nlc3NEZXNpZ25lciIsDQogIGNvbXBvbmVudE5hbWU6ICJNeVByb2Nlc3NEZXNpZ25lciIsDQogIHByb3BzOiB7DQogICAgdmFsdWU6IFN0cmluZywgLy8geG1sIOWtl+espuS4sg0KICAgIHZhbHVlV2F0Y2g6IHRydWUsIC8vIHhtbCDlrZfnrKbkuLLnmoQgd2F0Y2gg54q25oCBDQogICAgcHJvY2Vzc0lkOiBTdHJpbmcsIC8vIOa1geeoiyBrZXkg5qCH6K+GDQogICAgcHJvY2Vzc05hbWU6IFN0cmluZywgLy8g5rWB56iLIG5hbWUg5ZCN5a2XDQogICAgZm9ybUlkOiBOdW1iZXIsIC8vIOa1geeoiyBmb3JtIOihqOWNlee8luWPtw0KICAgIHRyYW5zbGF0aW9uczogT2JqZWN0LCAvLyDoh6rlrprkuYnnmoTnv7vor5Hmlofku7YNCiAgICBhZGRpdGlvbmFsTW9kZWw6IFtPYmplY3QsIEFycmF5XSwgLy8g6Ieq5a6a5LmJbW9kZWwNCiAgICBtb2RkbGVFeHRlbnNpb246IE9iamVjdCwgLy8g6Ieq5a6a5LmJbW9kZGxlDQogICAgb25seUN1c3RvbWl6ZUFkZGk6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgIH0sDQogICAgb25seUN1c3RvbWl6ZU1vZGRsZTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfSwNCiAgICBzaW11bGF0aW9uOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogdHJ1ZQ0KICAgIH0sDQogICAga2V5Ym9hcmQ6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlDQogICAgfSwNCiAgICBwcmVmaXg6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICJjYW11bmRhIg0KICAgIH0sDQogICAgZXZlbnRzOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IFsiZWxlbWVudC5jbGljayJdDQogICAgfSwNCiAgICBoZWFkZXJCdXR0b25TaXplOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAic21hbGwiLA0KICAgICAgdmFsaWRhdG9yOiB2YWx1ZSA9PiBbImRlZmF1bHQiLCAibWVkaXVtIiwgInNtYWxsIiwgIm1pbmkiXS5pbmRleE9mKHZhbHVlKSAhPT0gLTENCiAgICB9LA0KICAgIGhlYWRlckJ1dHRvblR5cGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICJwcmltYXJ5IiwNCiAgICAgIHZhbGlkYXRvcjogdmFsdWUgPT4gWyJkZWZhdWx0IiwgInByaW1hcnkiLCAic3VjY2VzcyIsICJ3YXJuaW5nIiwgImRhbmdlciIsICJpbmZvIl0uaW5kZXhPZih2YWx1ZSkgIT09IC0xDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkZWZhdWx0Wm9vbTogMSwNCiAgICAgIHByZXZpZXdNb2RlbFZpc2libGU6IGZhbHNlLA0KICAgICAgc2ltdWxhdGlvblN0YXR1czogZmFsc2UsDQogICAgICBwcmV2aWV3UmVzdWx0OiAiIiwNCiAgICAgIHByZXZpZXdUeXBlOiAieG1sIiwNCiAgICAgIHJlY292ZXJhYmxlOiBmYWxzZSwNCiAgICAgIHJldm9jYWJsZTogZmFsc2UNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGFkZGl0aW9uYWxNb2R1bGVzKCkgew0KICAgICAgY29uc3QgTW9kdWxlcyA9IFtdOw0KICAgICAgLy8g5LuF5L+d55WZ55So5oi36Ieq5a6a5LmJ5omp5bGV5qih5Z2XDQogICAgICBpZiAodGhpcy5vbmx5Q3VzdG9taXplQWRkaSkgew0KICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMuYWRkaXRpb25hbE1vZGVsKSA9PT0gIltvYmplY3QgQXJyYXldIikgew0KICAgICAgICAgIHJldHVybiB0aGlzLmFkZGl0aW9uYWxNb2RlbCB8fCBbXTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gW3RoaXMuYWRkaXRpb25hbE1vZGVsXTsNCiAgICAgIH0NCg0KICAgICAgLy8g5o+S5YWl55So5oi36Ieq5a6a5LmJ5omp5bGV5qih5Z2XDQogICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMuYWRkaXRpb25hbE1vZGVsKSA9PT0gIltvYmplY3QgQXJyYXldIikgew0KICAgICAgICBNb2R1bGVzLnB1c2goLi4udGhpcy5hZGRpdGlvbmFsTW9kZWwpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5hZGRpdGlvbmFsTW9kZWwgJiYgTW9kdWxlcy5wdXNoKHRoaXMuYWRkaXRpb25hbE1vZGVsKTsNCiAgICAgIH0NCg0KICAgICAgLy8g57+76K+R5qih5Z2XDQogICAgICBjb25zdCBUcmFuc2xhdGVNb2R1bGUgPSB7DQogICAgICAgIHRyYW5zbGF0ZTogWyJ2YWx1ZSIsIGN1c3RvbVRyYW5zbGF0ZSh0aGlzLnRyYW5zbGF0aW9ucyB8fCB0cmFuc2xhdGlvbnNDTildDQogICAgICB9Ow0KICAgICAgTW9kdWxlcy5wdXNoKFRyYW5zbGF0ZU1vZHVsZSk7DQoNCiAgICAgIC8vIOaooeaLn+a1gei9rOaooeWdlw0KICAgICAgaWYgKHRoaXMuc2ltdWxhdGlvbikgew0KICAgICAgICBNb2R1bGVzLnB1c2godG9rZW5TaW11bGF0aW9uKTsNCiAgICAgIH0NCg0KICAgICAgLy8g5qC55o2u6ZyA6KaB55qE5rWB56iL57G75Z6L6K6+572u5omp5bGV5YWD57Sg5p6E5bu65qih5Z2XDQogICAgICAvLyBpZiAodGhpcy5wcmVmaXggPT09ICJicG1uIikgew0KICAgICAgLy8gICBNb2R1bGVzLnB1c2goYnBtbk1vZGRsZUV4dGVuc2lvbik7DQogICAgICAvLyB9DQogICAgICBpZiAodGhpcy5wcmVmaXggPT09ICJjYW11bmRhIikgew0KICAgICAgICBNb2R1bGVzLnB1c2goY2FtdW5kYU1vZGRsZUV4dGVuc2lvbik7DQogICAgICB9DQogICAgICBpZiAodGhpcy5wcmVmaXggPT09ICJmbG93YWJsZSIpIHsNCiAgICAgICAgTW9kdWxlcy5wdXNoKGZsb3dhYmxlTW9kZGxlRXh0ZW5zaW9uKTsNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLnByZWZpeCA9PT0gImFjdGl2aXRpIikgew0KICAgICAgICBNb2R1bGVzLnB1c2goYWN0aXZpdGlNb2RkbGVFeHRlbnNpb24pOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gTW9kdWxlczsNCiAgICB9LA0KICAgIG1vZGRsZUV4dGVuc2lvbnMoKSB7DQogICAgICBjb25zdCBFeHRlbnNpb25zID0ge307DQogICAgICAvLyDku4Xkvb/nlKjnlKjmiLfoh6rlrprkuYnmqKHlnZcNCiAgICAgIGlmICh0aGlzLm9ubHlDdXN0b21pemVNb2RkbGUpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMubW9kZGxlRXh0ZW5zaW9uIHx8IG51bGw7DQogICAgICB9DQoNCiAgICAgIC8vIOaPkuWFpeeUqOaIt+iHquWumuS5ieaooeWdlw0KICAgICAgaWYgKHRoaXMubW9kZGxlRXh0ZW5zaW9uKSB7DQogICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLm1vZGRsZUV4dGVuc2lvbikgew0KICAgICAgICAgIEV4dGVuc2lvbnNba2V5XSA9IHRoaXMubW9kZGxlRXh0ZW5zaW9uW2tleV07DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLy8g5qC55o2u6ZyA6KaB55qEICLmtYHnqIvnsbvlnosiIOiuvue9riDlr7nlupTnmoTop6PmnpDmlofku7YNCiAgICAgIGlmICh0aGlzLnByZWZpeCA9PT0gImFjdGl2aXRpIikgew0KICAgICAgICBFeHRlbnNpb25zLmFjdGl2aXRpID0gYWN0aXZpdGlNb2RkbGVEZXNjcmlwdG9yOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMucHJlZml4ID09PSAiZmxvd2FibGUiKSB7DQogICAgICAgIEV4dGVuc2lvbnMuZmxvd2FibGUgPSBmbG93YWJsZU1vZGRsZURlc2NyaXB0b3I7DQogICAgICB9DQogICAgICBpZiAodGhpcy5wcmVmaXggPT09ICJjYW11bmRhIikgew0KICAgICAgICBFeHRlbnNpb25zLmNhbXVuZGEgPSBjYW11bmRhTW9kZGxlRGVzY3JpcHRvcjsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIEV4dGVuc2lvbnM7DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuaW5pdEJwbW5Nb2RlbGVyKCk7DQogICAgdGhpcy5jcmVhdGVOZXdEaWFncmFtKHRoaXMudmFsdWUpOw0KICAgIHRoaXMuJG9uY2UoImhvb2s6YmVmb3JlRGVzdHJveSIsICgpID0+IHsNCiAgICAgIGlmICh0aGlzLmJwbW5Nb2RlbGVyKSB0aGlzLmJwbW5Nb2RlbGVyLmRlc3Ryb3koKTsNCiAgICAgIHRoaXMuJGVtaXQoImRlc3Ryb3kiLCB0aGlzLmJwbW5Nb2RlbGVyKTsNCiAgICAgIHRoaXMuYnBtbk1vZGVsZXIgPSBudWxsOw0KICAgIH0pOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW5pdEJwbW5Nb2RlbGVyKCkgew0KICAgICAgaWYgKHRoaXMuYnBtbk1vZGVsZXIpIHJldHVybjsNCiAgICAgIHRoaXMuYnBtbk1vZGVsZXIgPSBuZXcgQnBtbk1vZGVsZXIoew0KICAgICAgICBjb250YWluZXI6IHRoaXMuJHJlZnNbImJwbW4tY2FudmFzIl0sDQogICAgICAgIGtleWJvYXJkOiB0aGlzLmtleWJvYXJkID8geyBiaW5kVG86IGRvY3VtZW50IH0gOiBudWxsLA0KICAgICAgICBhZGRpdGlvbmFsTW9kdWxlczogdGhpcy5hZGRpdGlvbmFsTW9kdWxlcywNCiAgICAgICAgbW9kZGxlRXh0ZW5zaW9uczogdGhpcy5tb2RkbGVFeHRlbnNpb25zDQogICAgICB9KTsNCiAgICAgIHRoaXMuJGVtaXQoImluaXQtZmluaXNoZWQiLCB0aGlzLmJwbW5Nb2RlbGVyKTsNCiAgICAgIHRoaXMuaW5pdE1vZGVsTGlzdGVuZXJzKCk7DQogICAgfSwNCiAgICBpbml0TW9kZWxMaXN0ZW5lcnMoKSB7DQogICAgICBjb25zdCBFdmVudEJ1cyA9IHRoaXMuYnBtbk1vZGVsZXIuZ2V0KCJldmVudEJ1cyIpOw0KICAgICAgY29uc3QgdGhhdCA9IHRoaXM7DQogICAgICAvLyDms6jlhozpnIDopoHnmoTnm5HlkKzkuovku7YsIOWwhi4g5pu/5o2i5Li6IC0gLCDpgb/lhY3op6PmnpDlvILluLgNCiAgICAgIHRoaXMuZXZlbnRzLmZvckVhY2goZXZlbnQgPT4gew0KICAgICAgICBFdmVudEJ1cy5vbihldmVudCwgZnVuY3Rpb24oZXZlbnRPYmopIHsNCiAgICAgICAgICBsZXQgZXZlbnROYW1lID0gZXZlbnQucmVwbGFjZSgvXC4vZywgIi0iKTsNCiAgICAgICAgICBsZXQgZWxlbWVudCA9IGV2ZW50T2JqID8gZXZlbnRPYmouZWxlbWVudCA6IG51bGw7DQogICAgICAgICAgdGhhdC4kZW1pdChldmVudE5hbWUsIGVsZW1lbnQsIGV2ZW50T2JqKTsNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICAgIC8vIOebkeWQrOWbvuW9ouaUueWPmOi/lOWbnnhtbA0KICAgICAgRXZlbnRCdXMub24oImNvbW1hbmRTdGFjay5jaGFuZ2VkIiwgYXN5bmMgZXZlbnQgPT4gew0KICAgICAgICB0cnkgew0KICAgICAgICAgIHRoaXMucmVjb3ZlcmFibGUgPSB0aGlzLmJwbW5Nb2RlbGVyLmdldCgiY29tbWFuZFN0YWNrIikuY2FuUmVkbygpOw0KICAgICAgICAgIHRoaXMucmV2b2NhYmxlID0gdGhpcy5icG1uTW9kZWxlci5nZXQoImNvbW1hbmRTdGFjayIpLmNhblVuZG8oKTsNCiAgICAgICAgICBsZXQgeyB4bWwgfSA9IGF3YWl0IHRoaXMuYnBtbk1vZGVsZXIuc2F2ZVhNTCh7IGZvcm1hdDogdHJ1ZSB9KTsNCiAgICAgICAgICB0aGlzLiRlbWl0KCJjb21tYW5kU3RhY2stY2hhbmdlZCIsIGV2ZW50KTsNCiAgICAgICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHhtbCk7DQogICAgICAgICAgdGhpcy4kZW1pdCgiY2hhbmdlIiwgeG1sKTsNCiAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtQcm9jZXNzIERlc2lnbmVyIFdhcm5dOiAke2UubWVzc2FnZSB8fCBlfWApOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIC8vIOebkeWQrOinhuWbvue8qeaUvuWPmOWMlg0KICAgICAgdGhpcy5icG1uTW9kZWxlci5vbigiY2FudmFzLnZpZXdib3guY2hhbmdlZCIsICh7IHZpZXdib3ggfSkgPT4gew0KICAgICAgICB0aGlzLiRlbWl0KCJjYW52YXMtdmlld2JveC1jaGFuZ2VkIiwgeyB2aWV3Ym94IH0pOw0KICAgICAgICBjb25zdCB7IHNjYWxlIH0gPSB2aWV3Ym94Ow0KICAgICAgICB0aGlzLmRlZmF1bHRab29tID0gTWF0aC5mbG9vcihzY2FsZSAqIDEwMCkgLyAxMDA7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qIOWIm+W7uuaWsOeahOa1geeoi+WbviAqLw0KICAgIGFzeW5jIGNyZWF0ZU5ld0RpYWdyYW0oeG1sKSB7DQogICAgICAvLyDlsIblrZfnrKbkuLLovazmjaLmiJDlm77mmL7npLrlh7rmnaUNCiAgICAgIGxldCBuZXdJZCA9IHRoaXMucHJvY2Vzc0lkIHx8IGBQcm9jZXNzXyR7bmV3IERhdGUoKS5nZXRUaW1lKCl9YDsNCiAgICAgIGxldCBuZXdOYW1lID0gdGhpcy5wcm9jZXNzTmFtZSB8fCBg5Lia5Yqh5rWB56iLXyR7bmV3IERhdGUoKS5nZXRUaW1lKCl9YDsNCiAgICAgIGxldCB4bWxTdHJpbmcgPSB4bWwgfHwgRGVmYXVsdEVtcHR5WE1MKG5ld0lkLCBuZXdOYW1lLCB0aGlzLnByZWZpeCk7DQogICAgICB0cnkgew0KICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmJwbW5Nb2RlbGVyLmltcG9ydFhNTCk7DQogICAgICAgIGxldCB7IHdhcm5pbmdzIH0gPSBhd2FpdCB0aGlzLmJwbW5Nb2RlbGVyLmltcG9ydFhNTCh4bWxTdHJpbmcpOw0KICAgICAgICBpZiAod2FybmluZ3MgJiYgd2FybmluZ3MubGVuZ3RoKSB7DQogICAgICAgICAgd2FybmluZ3MuZm9yRWFjaCh3YXJuID0+IGNvbnNvbGUud2Fybih3YXJuKSk7DQogICAgICAgIH0NCiAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcihgW1Byb2Nlc3MgRGVzaWduZXIgV2Fybl06ICR7ZT8ubWVzc2FnZSB8fCBlfWApOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDkuIvovb3mtYHnqIvlm77liLDmnKzlnLANCiAgICBhc3luYyBkb3dubG9hZFByb2Nlc3ModHlwZSwgbmFtZSkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzOw0KICAgICAgICAvLyDmjInpnIDopoHnsbvlnovliJvlu7rmlofku7blubbkuIvovb0NCiAgICAgICAgaWYgKHR5cGUgPT09ICJ4bWwiIHx8IHR5cGUgPT09ICJicG1uIikgew0KICAgICAgICAgIGNvbnN0IHsgZXJyLCB4bWwgfSA9IGF3YWl0IHRoaXMuYnBtbk1vZGVsZXIuc2F2ZVhNTCgpOw0KICAgICAgICAgIC8vIOivu+WPluW8guW4uOaXtuaKm+WHuuW8guW4uA0KICAgICAgICAgIGlmIChlcnIpIHsNCiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtQcm9jZXNzIERlc2lnbmVyIFdhcm4gXTogJHtlcnIubWVzc2FnZSB8fCBlcnJ9YCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGxldCB7IGhyZWYsIGZpbGVuYW1lIH0gPSBfdGhpcy5zZXRFbmNvZGVkKHR5cGUudG9VcHBlckNhc2UoKSwgbmFtZSwgeG1sKTsNCiAgICAgICAgICBkb3dubG9hZEZ1bmMoaHJlZiwgZmlsZW5hbWUpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnN0IHsgZXJyLCBzdmcgfSA9IGF3YWl0IHRoaXMuYnBtbk1vZGVsZXIuc2F2ZVNWRygpOw0KICAgICAgICAgIC8vIOivu+WPluW8guW4uOaXtuaKm+WHuuW8guW4uA0KICAgICAgICAgIGlmIChlcnIpIHsNCiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGVycik7DQogICAgICAgICAgfQ0KICAgICAgICAgIGxldCB7IGhyZWYsIGZpbGVuYW1lIH0gPSBfdGhpcy5zZXRFbmNvZGVkKCJTVkciLCBuYW1lLCBzdmcpOw0KICAgICAgICAgIGRvd25sb2FkRnVuYyhocmVmLCBmaWxlbmFtZSk7DQogICAgICAgIH0NCiAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcihgW1Byb2Nlc3MgRGVzaWduZXIgV2FybiBdOiAke2UubWVzc2FnZSB8fCBlfWApOw0KICAgICAgfQ0KICAgICAgLy8g5paH5Lu25LiL6L295pa55rOVDQogICAgICBmdW5jdGlvbiBkb3dubG9hZEZ1bmMoaHJlZiwgZmlsZW5hbWUpIHsNCiAgICAgICAgaWYgKGhyZWYgJiYgZmlsZW5hbWUpIHsNCiAgICAgICAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsNCiAgICAgICAgICBhLmRvd25sb2FkID0gZmlsZW5hbWU7IC8v5oyH5a6a5LiL6L2955qE5paH5Lu25ZCNDQogICAgICAgICAgYS5ocmVmID0gaHJlZjsgLy8gIFVSTOWvueixoQ0KICAgICAgICAgIGEuY2xpY2soKTsgLy8g5qih5ouf54K55Ye7DQogICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhLmhyZWYpOyAvLyDph4rmlL5VUkwg5a+56LGhDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy8g5qC55o2u5omA6ZyA57G75Z6L6L+b6KGM6L2s56CB5bm26L+U5Zue5LiL6L295Zyw5Z2ADQogICAgc2V0RW5jb2RlZCh0eXBlLCBmaWxlbmFtZSA9ICJkaWFncmFtIiwgZGF0YSkgew0KICAgICAgY29uc3QgZW5jb2RlZERhdGEgPSBlbmNvZGVVUklDb21wb25lbnQoZGF0YSk7DQogICAgICByZXR1cm4gew0KICAgICAgICBmaWxlbmFtZTogYCR7ZmlsZW5hbWV9LiR7dHlwZX1gLA0KICAgICAgICBocmVmOiBgZGF0YTphcHBsaWNhdGlvbi8ke3R5cGUgPT09ICJzdmciID8gInRleHQveG1sIiA6ICJicG1uMjAteG1sIn07Y2hhcnNldD1VVEYtOCwke2VuY29kZWREYXRhfWAsDQogICAgICAgIGRhdGE6IGRhdGENCiAgICAgIH07DQogICAgfSwNCg0KICAgIC8vIOWKoOi9veacrOWcsOaWh+S7tg0KICAgIGltcG9ydExvY2FsRmlsZSgpIHsNCiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOw0KICAgICAgY29uc3QgZmlsZSA9IHRoaXMuJHJlZnMucmVmRmlsZS5maWxlc1swXTsNCiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsNCiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgbGV0IHhtbFN0ciA9IHRoaXMucmVzdWx0Ow0KICAgICAgICB0aGF0LmNyZWF0ZU5ld0RpYWdyYW0oeG1sU3RyKTsNCiAgICAgIH07DQogICAgfSwNCiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gcmVmcyBtZXRob2RzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLw0KICAgIGRvd25sb2FkUHJvY2Vzc0FzWG1sKCkgew0KICAgICAgdGhpcy5kb3dubG9hZFByb2Nlc3MoInhtbCIpOw0KICAgIH0sDQogICAgZG93bmxvYWRQcm9jZXNzQXNCcG1uKCkgew0KICAgICAgdGhpcy5kb3dubG9hZFByb2Nlc3MoImJwbW4iKTsNCiAgICB9LA0KICAgIGRvd25sb2FkUHJvY2Vzc0FzU3ZnKCkgew0KICAgICAgdGhpcy5kb3dubG9hZFByb2Nlc3MoInN2ZyIpOw0KICAgIH0sDQogICAgcHJvY2Vzc1NpbXVsYXRpb24oKSB7DQogICAgICB0aGlzLnNpbXVsYXRpb25TdGF0dXMgPSAhdGhpcy5zaW11bGF0aW9uU3RhdHVzOw0KICAgICAgdGhpcy5zaW11bGF0aW9uICYmIHRoaXMuYnBtbk1vZGVsZXIuZ2V0KCJ0b2dnbGVNb2RlIikudG9nZ2xlTW9kZSgpOw0KICAgIH0sDQogICAgcHJvY2Vzc1JlZG8oKSB7DQogICAgICB0aGlzLmJwbW5Nb2RlbGVyLmdldCgiY29tbWFuZFN0YWNrIikucmVkbygpOw0KICAgIH0sDQogICAgcHJvY2Vzc1VuZG8oKSB7DQogICAgICB0aGlzLmJwbW5Nb2RlbGVyLmdldCgiY29tbWFuZFN0YWNrIikudW5kbygpOw0KICAgIH0sDQogICAgcHJvY2Vzc1pvb21Jbih6b29tU3RlcCA9IDAuMSkgew0KICAgICAgbGV0IG5ld1pvb20gPSBNYXRoLmZsb29yKHRoaXMuZGVmYXVsdFpvb20gKiAxMDAgKyB6b29tU3RlcCAqIDEwMCkgLyAxMDA7DQogICAgICBpZiAobmV3Wm9vbSA+IDQpIHsNCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJbUHJvY2VzcyBEZXNpZ25lciBXYXJuIF06IFRoZSB6b29tIHJhdGlvIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gNCIpOw0KICAgICAgfQ0KICAgICAgdGhpcy5kZWZhdWx0Wm9vbSA9IG5ld1pvb207DQogICAgICB0aGlzLmJwbW5Nb2RlbGVyLmdldCgiY2FudmFzIikuem9vbSh0aGlzLmRlZmF1bHRab29tKTsNCiAgICB9LA0KICAgIHByb2Nlc3Nab29tT3V0KHpvb21TdGVwID0gMC4xKSB7DQogICAgICBsZXQgbmV3Wm9vbSA9IE1hdGguZmxvb3IodGhpcy5kZWZhdWx0Wm9vbSAqIDEwMCAtIHpvb21TdGVwICogMTAwKSAvIDEwMDsNCiAgICAgIGlmIChuZXdab29tIDwgMC4yKSB7DQogICAgICAgIHRocm93IG5ldyBFcnJvcigiW1Byb2Nlc3MgRGVzaWduZXIgV2FybiBdOiBUaGUgem9vbSByYXRpbyBjYW5ub3QgYmUgbGVzcyB0aGFuIDAuMiIpOw0KICAgICAgfQ0KICAgICAgdGhpcy5kZWZhdWx0Wm9vbSA9IG5ld1pvb207DQogICAgICB0aGlzLmJwbW5Nb2RlbGVyLmdldCgiY2FudmFzIikuem9vbSh0aGlzLmRlZmF1bHRab29tKTsNCiAgICB9LA0KICAgIHByb2Nlc3Nab29tVG8obmV3Wm9vbSA9IDEpIHsNCiAgICAgIGlmIChuZXdab29tIDwgMC4yKSB7DQogICAgICAgIHRocm93IG5ldyBFcnJvcigiW1Byb2Nlc3MgRGVzaWduZXIgV2FybiBdOiBUaGUgem9vbSByYXRpbyBjYW5ub3QgYmUgbGVzcyB0aGFuIDAuMiIpOw0KICAgICAgfQ0KICAgICAgaWYgKG5ld1pvb20gPiA0KSB7DQogICAgICAgIHRocm93IG5ldyBFcnJvcigiW1Byb2Nlc3MgRGVzaWduZXIgV2FybiBdOiBUaGUgem9vbSByYXRpbyBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIDQiKTsNCiAgICAgIH0NCiAgICAgIHRoaXMuZGVmYXVsdFpvb20gPSBuZXdab29tOw0KICAgICAgdGhpcy5icG1uTW9kZWxlci5nZXQoImNhbnZhcyIpLnpvb20obmV3Wm9vbSk7DQogICAgfSwNCiAgICBwcm9jZXNzUmVab29tKCkgew0KICAgICAgdGhpcy5kZWZhdWx0Wm9vbSA9IDE7DQogICAgICB0aGlzLmJwbW5Nb2RlbGVyLmdldCgiY2FudmFzIikuem9vbSgiZml0LXZpZXdwb3J0IiwgImF1dG8iKTsNCiAgICB9LA0KICAgIHByb2Nlc3NSZXN0YXJ0KCkgew0KICAgICAgdGhpcy5yZWNvdmVyYWJsZSA9IGZhbHNlOw0KICAgICAgdGhpcy5yZXZvY2FibGUgPSBmYWxzZTsNCiAgICAgIHRoaXMuY3JlYXRlTmV3RGlhZ3JhbShudWxsKTsNCiAgICB9LA0KICAgIGVsZW1lbnRzQWxpZ24oYWxpZ24pIHsNCiAgICAgIGNvbnN0IEFsaWduID0gdGhpcy5icG1uTW9kZWxlci5nZXQoImFsaWduRWxlbWVudHMiKTsNCiAgICAgIGNvbnN0IFNlbGVjdGlvbiA9IHRoaXMuYnBtbk1vZGVsZXIuZ2V0KCJzZWxlY3Rpb24iKTsNCiAgICAgIGNvbnN0IFNlbGVjdGVkRWxlbWVudHMgPSBTZWxlY3Rpb24uZ2V0KCk7DQogICAgICBpZiAoIVNlbGVjdGVkRWxlbWVudHMgfHwgU2VsZWN0ZWRFbGVtZW50cy5sZW5ndGggPD0gMSkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIuivt+aMieS9jyBDdHJsIOmUrumAieaLqeWkmuS4quWFg+e0oOWvuem9kCIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLiRjb25maXJtKCLoh6rliqjlr7npvZDlj6/og73pgKDmiJDlm77lvaLlj5jlvaLvvIzmmK/lkKbnu6fnu63vvJ8iLCAi6K2m5ZGKIiwgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLA0KICAgICAgICB0eXBlOiAid2FybmluZyINCiAgICAgIH0pLnRoZW4oKCkgPT4gQWxpZ24udHJpZ2dlcihTZWxlY3RlZEVsZW1lbnRzLCBhbGlnbikpOw0KICAgIH0sDQogICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgICDmlrnms5Xnu5PmnZ8gICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQogICAgcHJldmlld1Byb2Nlc3NYTUwoKSB7DQogICAgICB0aGlzLmJwbW5Nb2RlbGVyLnNhdmVYTUwoeyBmb3JtYXQ6IHRydWUgfSkudGhlbigoeyB4bWwgfSkgPT4gew0KICAgICAgICB0aGlzLnByZXZpZXdSZXN1bHQgPSB4bWw7DQogICAgICAgIHRoaXMucHJldmlld1R5cGUgPSAieG1sIjsNCiAgICAgICAgdGhpcy5wcmV2aWV3TW9kZWxWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgcHJldmlld1Byb2Nlc3NKc29uKCkgew0KICAgICAgdGhpcy5icG1uTW9kZWxlci5zYXZlWE1MKHsgZm9ybWF0OiB0cnVlIH0pLnRoZW4oKHsgeG1sIH0pID0+IHsNCiAgICAgICAgdGhpcy5wcmV2aWV3UmVzdWx0ID0gY29udmVydC54bWwyanNvbih4bWwsIHsgc3BhY2VzOiAyIH0pOw0KICAgICAgICB0aGlzLnByZXZpZXdUeXBlID0gImpzb24iOw0KICAgICAgICB0aGlzLnByZXZpZXdNb2RlbFZpc2libGUgPSB0cnVlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0g6IqL6YGT5rqQ56CBIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovDQogICAgYXN5bmMgcHJvY2Vzc1NhdmUoKSB7DQogICAgICBjb25zdCB7IGVyciwgeG1sIH0gPSBhd2FpdCB0aGlzLmJwbW5Nb2RlbGVyLnNhdmVYTUwoKTsNCiAgICAgIC8vIOivu+WPluW8guW4uOaXtuaKm+WHuuW8guW4uA0KICAgICAgaWYgKGVycikgew0KICAgICAgICB0aGlzLiRtb2RhbC5tc2dFcnJvcign5L+d5a2Y5qih5Z6L5aSx6LSl77yM6K+36YeN6K+V77yBJykNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICAvLyDop6blj5Egc2F2ZSDkuovku7YNCiAgICAgIHRoaXMuJGVtaXQoJ3NhdmUnLCB4bWwpDQogICAgfSwNCiAgICAvKiog6auY5Lqu5pi+56S6ICovDQogICAgaGlnaGxpZ2h0ZWRDb2RlKHByZXZpZXdUeXBlLCBwcmV2aWV3UmVzdWx0KSB7DQogICAgICBjb25zdCByZXN1bHQgPSBobGpzLmhpZ2hsaWdodChwcmV2aWV3VHlwZSwgcHJldmlld1Jlc3VsdCB8fCAiIiwgdHJ1ZSk7DQogICAgICByZXR1cm4gcmVzdWx0LnZhbHVlIHx8ICcmbmJzcDsnOw0KICAgIH0sDQogIH0NCn07DQo="},{"version":3,"sources":["ProcessDesigner.vue"],"names":[],"mappings":";AAyFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProcessDesigner.vue","sourceRoot":"src/components/bpmnProcessDesigner/package/designer","sourcesContent":["<template>\r\n  <div class=\"my-process-designer\">\r\n    <div class=\"my-process-designer__header\">\r\n      <slot name=\"control-header\"></slot>\r\n      <template v-if=\"!$slots['control-header']\">\r\n        <el-button-group key=\"file-control\">\r\n          <el-button :size=\"headerButtonSize\" icon=\"el-icon-folder-opened\" @click=\"$refs.refFile.click()\">打开文件</el-button>\r\n          <el-tooltip effect=\"light\">\r\n            <div slot=\"content\">\r\n              <el-button :size=\"headerButtonSize\" type=\"text\" @click=\"downloadProcessAsXml()\">下载为XML文件</el-button>\r\n              <br />\r\n              <el-button :size=\"headerButtonSize\" type=\"text\" @click=\"downloadProcessAsSvg()\">下载为SVG文件</el-button>\r\n              <br />\r\n              <el-button :size=\"headerButtonSize\" type=\"text\" @click=\"downloadProcessAsBpmn()\">下载为BPMN文件</el-button>\r\n            </div>\r\n            <el-button :size=\"headerButtonSize\" icon=\"el-icon-download\">下载文件</el-button>\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"light\">\r\n            <div slot=\"content\">\r\n              <el-button :size=\"headerButtonSize\" type=\"text\" @click=\"previewProcessXML\">预览XML</el-button>\r\n              <br />\r\n              <el-button :size=\"headerButtonSize\" type=\"text\" @click=\"previewProcessJson\">预览JSON</el-button>\r\n            </div>\r\n            <el-button :size=\"headerButtonSize\" icon=\"el-icon-view\">预览</el-button>\r\n          </el-tooltip>\r\n          <el-tooltip v-if=\"simulation\" effect=\"light\" :content=\"this.simulationStatus ? '退出模拟' : '开启模拟'\">\r\n            <el-button :size=\"headerButtonSize\" icon=\"el-icon-cpu\" @click=\"processSimulation\">\r\n              模拟\r\n            </el-button>\r\n          </el-tooltip>\r\n        </el-button-group>\r\n        <el-button-group key=\"align-control\">\r\n          <el-tooltip effect=\"light\" content=\"向左对齐\">\r\n            <el-button :size=\"headerButtonSize\" class=\"align align-left\" icon=\"el-icon-s-data\" @click=\"elementsAlign('left')\" />\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"light\" content=\"向右对齐\">\r\n            <el-button :size=\"headerButtonSize\" class=\"align align-right\" icon=\"el-icon-s-data\" @click=\"elementsAlign('right')\" />\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"light\" content=\"向上对齐\">\r\n            <el-button :size=\"headerButtonSize\" class=\"align align-top\" icon=\"el-icon-s-data\" @click=\"elementsAlign('top')\" />\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"light\" content=\"向下对齐\">\r\n            <el-button :size=\"headerButtonSize\" class=\"align align-bottom\" icon=\"el-icon-s-data\" @click=\"elementsAlign('bottom')\" />\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"light\" content=\"水平居中\">\r\n            <el-button :size=\"headerButtonSize\" class=\"align align-center\" icon=\"el-icon-s-data\" @click=\"elementsAlign('center')\" />\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"light\" content=\"垂直居中\">\r\n            <el-button :size=\"headerButtonSize\" class=\"align align-middle\" icon=\"el-icon-s-data\" @click=\"elementsAlign('middle')\" />\r\n          </el-tooltip>\r\n        </el-button-group>\r\n        <el-button-group key=\"scale-control\">\r\n          <el-tooltip effect=\"light\" content=\"缩小视图\">\r\n            <el-button :size=\"headerButtonSize\" :disabled=\"defaultZoom < 0.2\" icon=\"el-icon-zoom-out\" @click=\"processZoomOut()\" />\r\n          </el-tooltip>\r\n          <el-button :size=\"headerButtonSize\">{{ Math.floor(this.defaultZoom * 10 * 10) + \"%\" }}</el-button>\r\n          <el-tooltip effect=\"light\" content=\"放大视图\">\r\n            <el-button :size=\"headerButtonSize\" :disabled=\"defaultZoom > 4\" icon=\"el-icon-zoom-in\" @click=\"processZoomIn()\" />\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"light\" content=\"重置视图并居中\">\r\n            <el-button :size=\"headerButtonSize\" icon=\"el-icon-c-scale-to-original\" @click=\"processReZoom()\" />\r\n          </el-tooltip>\r\n        </el-button-group>\r\n        <el-button-group key=\"stack-control\">\r\n          <el-tooltip effect=\"light\" content=\"撤销\">\r\n            <el-button :size=\"headerButtonSize\" :disabled=\"!revocable\" icon=\"el-icon-refresh-left\" @click=\"processUndo()\" />\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"light\" content=\"恢复\">\r\n            <el-button :size=\"headerButtonSize\" :disabled=\"!recoverable\" icon=\"el-icon-refresh-right\" @click=\"processRedo()\" />\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"light\" content=\"重新绘制\">\r\n            <el-button :size=\"headerButtonSize\" icon=\"el-icon-refresh\" @click=\"processRestart\" />\r\n          </el-tooltip>\r\n        </el-button-group>\r\n        <el-button :size=\"headerButtonSize\" :type=\"headerButtonType\" icon=\"el-icon-plus\" @click=\"processSave\" :disabled = \"simulationStatus\">保存模型</el-button>\r\n      </template>\r\n      <!-- 用于打开本地文件-->\r\n      <input type=\"file\" id=\"files\" ref=\"refFile\" style=\"display: none\" accept=\".xml, .bpmn\" @change=\"importLocalFile\" />\r\n    </div>\r\n    <div class=\"my-process-designer__container\">\r\n      <div class=\"my-process-designer__canvas\" ref=\"bpmn-canvas\"></div>\r\n    </div>\r\n    <el-dialog title=\"预览\" width=\"80%\" :visible.sync=\"previewModelVisible\" append-to-body destroy-on-close>\r\n      <pre><code class=\"hljs\" v-html=\"highlightedCode(previewType, previewResult)\"></code></pre>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BpmnModeler from \"bpmn-js/lib/Modeler\";\r\nimport DefaultEmptyXML from \"./plugins/defaultEmpty\";\r\n// 翻译方法\r\nimport customTranslate from \"./plugins/translate/customTranslate\";\r\nimport translationsCN from \"./plugins/translate/zh\";\r\n// 模拟流转流程\r\nimport tokenSimulation from \"bpmn-js-token-simulation\";\r\n// 标签解析构建器\r\n// import bpmnPropertiesProvider from \"bpmn-js-properties-panel/lib/provider/bpmn\";\r\n// 标签解析 Moddle\r\nimport camundaModdleDescriptor from \"./plugins/descriptor/camundaDescriptor.json\";\r\nimport activitiModdleDescriptor from \"./plugins/descriptor/activitiDescriptor.json\";\r\nimport flowableModdleDescriptor from \"./plugins/descriptor/flowableDescriptor.json\";\r\n// 标签解析 Extension\r\nimport camundaModdleExtension from \"./plugins/extension-moddle/camunda\";\r\nimport activitiModdleExtension from \"./plugins/extension-moddle/activiti\";\r\nimport flowableModdleExtension from \"./plugins/extension-moddle/flowable\";\r\n// 引入json转换与高亮\r\nimport convert from \"xml-js\";\r\n\r\n// 代码高亮插件\r\nimport hljs from \"highlight.js/lib/highlight\";\r\nimport \"highlight.js/styles/github-gist.css\";\r\nhljs.registerLanguage(\"xml\", require(\"highlight.js/lib/languages/xml\"));\r\nhljs.registerLanguage(\"json\", require(\"highlight.js/lib/languages/json\"));\r\n\r\nexport default {\r\n  name: \"MyProcessDesigner\",\r\n  componentName: \"MyProcessDesigner\",\r\n  props: {\r\n    value: String, // xml 字符串\r\n    valueWatch: true, // xml 字符串的 watch 状态\r\n    processId: String, // 流程 key 标识\r\n    processName: String, // 流程 name 名字\r\n    formId: Number, // 流程 form 表单编号\r\n    translations: Object, // 自定义的翻译文件\r\n    additionalModel: [Object, Array], // 自定义model\r\n    moddleExtension: Object, // 自定义moddle\r\n    onlyCustomizeAddi: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    onlyCustomizeModdle: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    simulation: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    keyboard: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    prefix: {\r\n      type: String,\r\n      default: \"camunda\"\r\n    },\r\n    events: {\r\n      type: Array,\r\n      default: () => [\"element.click\"]\r\n    },\r\n    headerButtonSize: {\r\n      type: String,\r\n      default: \"small\",\r\n      validator: value => [\"default\", \"medium\", \"small\", \"mini\"].indexOf(value) !== -1\r\n    },\r\n    headerButtonType: {\r\n      type: String,\r\n      default: \"primary\",\r\n      validator: value => [\"default\", \"primary\", \"success\", \"warning\", \"danger\", \"info\"].indexOf(value) !== -1\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      defaultZoom: 1,\r\n      previewModelVisible: false,\r\n      simulationStatus: false,\r\n      previewResult: \"\",\r\n      previewType: \"xml\",\r\n      recoverable: false,\r\n      revocable: false\r\n    };\r\n  },\r\n  computed: {\r\n    additionalModules() {\r\n      const Modules = [];\r\n      // 仅保留用户自定义扩展模块\r\n      if (this.onlyCustomizeAddi) {\r\n        if (Object.prototype.toString.call(this.additionalModel) === \"[object Array]\") {\r\n          return this.additionalModel || [];\r\n        }\r\n        return [this.additionalModel];\r\n      }\r\n\r\n      // 插入用户自定义扩展模块\r\n      if (Object.prototype.toString.call(this.additionalModel) === \"[object Array]\") {\r\n        Modules.push(...this.additionalModel);\r\n      } else {\r\n        this.additionalModel && Modules.push(this.additionalModel);\r\n      }\r\n\r\n      // 翻译模块\r\n      const TranslateModule = {\r\n        translate: [\"value\", customTranslate(this.translations || translationsCN)]\r\n      };\r\n      Modules.push(TranslateModule);\r\n\r\n      // 模拟流转模块\r\n      if (this.simulation) {\r\n        Modules.push(tokenSimulation);\r\n      }\r\n\r\n      // 根据需要的流程类型设置扩展元素构建模块\r\n      // if (this.prefix === \"bpmn\") {\r\n      //   Modules.push(bpmnModdleExtension);\r\n      // }\r\n      if (this.prefix === \"camunda\") {\r\n        Modules.push(camundaModdleExtension);\r\n      }\r\n      if (this.prefix === \"flowable\") {\r\n        Modules.push(flowableModdleExtension);\r\n      }\r\n      if (this.prefix === \"activiti\") {\r\n        Modules.push(activitiModdleExtension);\r\n      }\r\n\r\n      return Modules;\r\n    },\r\n    moddleExtensions() {\r\n      const Extensions = {};\r\n      // 仅使用用户自定义模块\r\n      if (this.onlyCustomizeModdle) {\r\n        return this.moddleExtension || null;\r\n      }\r\n\r\n      // 插入用户自定义模块\r\n      if (this.moddleExtension) {\r\n        for (let key in this.moddleExtension) {\r\n          Extensions[key] = this.moddleExtension[key];\r\n        }\r\n      }\r\n\r\n      // 根据需要的 \"流程类型\" 设置 对应的解析文件\r\n      if (this.prefix === \"activiti\") {\r\n        Extensions.activiti = activitiModdleDescriptor;\r\n      }\r\n      if (this.prefix === \"flowable\") {\r\n        Extensions.flowable = flowableModdleDescriptor;\r\n      }\r\n      if (this.prefix === \"camunda\") {\r\n        Extensions.camunda = camundaModdleDescriptor;\r\n      }\r\n\r\n      return Extensions;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initBpmnModeler();\r\n    this.createNewDiagram(this.value);\r\n    this.$once(\"hook:beforeDestroy\", () => {\r\n      if (this.bpmnModeler) this.bpmnModeler.destroy();\r\n      this.$emit(\"destroy\", this.bpmnModeler);\r\n      this.bpmnModeler = null;\r\n    });\r\n  },\r\n  methods: {\r\n    initBpmnModeler() {\r\n      if (this.bpmnModeler) return;\r\n      this.bpmnModeler = new BpmnModeler({\r\n        container: this.$refs[\"bpmn-canvas\"],\r\n        keyboard: this.keyboard ? { bindTo: document } : null,\r\n        additionalModules: this.additionalModules,\r\n        moddleExtensions: this.moddleExtensions\r\n      });\r\n      this.$emit(\"init-finished\", this.bpmnModeler);\r\n      this.initModelListeners();\r\n    },\r\n    initModelListeners() {\r\n      const EventBus = this.bpmnModeler.get(\"eventBus\");\r\n      const that = this;\r\n      // 注册需要的监听事件, 将. 替换为 - , 避免解析异常\r\n      this.events.forEach(event => {\r\n        EventBus.on(event, function(eventObj) {\r\n          let eventName = event.replace(/\\./g, \"-\");\r\n          let element = eventObj ? eventObj.element : null;\r\n          that.$emit(eventName, element, eventObj);\r\n        });\r\n      });\r\n      // 监听图形改变返回xml\r\n      EventBus.on(\"commandStack.changed\", async event => {\r\n        try {\r\n          this.recoverable = this.bpmnModeler.get(\"commandStack\").canRedo();\r\n          this.revocable = this.bpmnModeler.get(\"commandStack\").canUndo();\r\n          let { xml } = await this.bpmnModeler.saveXML({ format: true });\r\n          this.$emit(\"commandStack-changed\", event);\r\n          this.$emit(\"input\", xml);\r\n          this.$emit(\"change\", xml);\r\n        } catch (e) {\r\n          console.error(`[Process Designer Warn]: ${e.message || e}`);\r\n        }\r\n      });\r\n      // 监听视图缩放变化\r\n      this.bpmnModeler.on(\"canvas.viewbox.changed\", ({ viewbox }) => {\r\n        this.$emit(\"canvas-viewbox-changed\", { viewbox });\r\n        const { scale } = viewbox;\r\n        this.defaultZoom = Math.floor(scale * 100) / 100;\r\n      });\r\n    },\r\n    /* 创建新的流程图 */\r\n    async createNewDiagram(xml) {\r\n      // 将字符串转换成图显示出来\r\n      let newId = this.processId || `Process_${new Date().getTime()}`;\r\n      let newName = this.processName || `业务流程_${new Date().getTime()}`;\r\n      let xmlString = xml || DefaultEmptyXML(newId, newName, this.prefix);\r\n      try {\r\n        // console.log(this.bpmnModeler.importXML);\r\n        let { warnings } = await this.bpmnModeler.importXML(xmlString);\r\n        if (warnings && warnings.length) {\r\n          warnings.forEach(warn => console.warn(warn));\r\n        }\r\n      } catch (e) {\r\n        console.error(`[Process Designer Warn]: ${e?.message || e}`);\r\n      }\r\n    },\r\n\r\n    // 下载流程图到本地\r\n    async downloadProcess(type, name) {\r\n      try {\r\n        const _this = this;\r\n        // 按需要类型创建文件并下载\r\n        if (type === \"xml\" || type === \"bpmn\") {\r\n          const { err, xml } = await this.bpmnModeler.saveXML();\r\n          // 读取异常时抛出异常\r\n          if (err) {\r\n            console.error(`[Process Designer Warn ]: ${err.message || err}`);\r\n          }\r\n          let { href, filename } = _this.setEncoded(type.toUpperCase(), name, xml);\r\n          downloadFunc(href, filename);\r\n        } else {\r\n          const { err, svg } = await this.bpmnModeler.saveSVG();\r\n          // 读取异常时抛出异常\r\n          if (err) {\r\n            return console.error(err);\r\n          }\r\n          let { href, filename } = _this.setEncoded(\"SVG\", name, svg);\r\n          downloadFunc(href, filename);\r\n        }\r\n      } catch (e) {\r\n        console.error(`[Process Designer Warn ]: ${e.message || e}`);\r\n      }\r\n      // 文件下载方法\r\n      function downloadFunc(href, filename) {\r\n        if (href && filename) {\r\n          let a = document.createElement(\"a\");\r\n          a.download = filename; //指定下载的文件名\r\n          a.href = href; //  URL对象\r\n          a.click(); // 模拟点击\r\n          URL.revokeObjectURL(a.href); // 释放URL 对象\r\n        }\r\n      }\r\n    },\r\n\r\n    // 根据所需类型进行转码并返回下载地址\r\n    setEncoded(type, filename = \"diagram\", data) {\r\n      const encodedData = encodeURIComponent(data);\r\n      return {\r\n        filename: `${filename}.${type}`,\r\n        href: `data:application/${type === \"svg\" ? \"text/xml\" : \"bpmn20-xml\"};charset=UTF-8,${encodedData}`,\r\n        data: data\r\n      };\r\n    },\r\n\r\n    // 加载本地文件\r\n    importLocalFile() {\r\n      const that = this;\r\n      const file = this.$refs.refFile.files[0];\r\n      const reader = new FileReader();\r\n      reader.readAsText(file);\r\n      reader.onload = function() {\r\n        let xmlStr = this.result;\r\n        that.createNewDiagram(xmlStr);\r\n      };\r\n    },\r\n    /* ------------------------------------------------ refs methods ------------------------------------------------------ */\r\n    downloadProcessAsXml() {\r\n      this.downloadProcess(\"xml\");\r\n    },\r\n    downloadProcessAsBpmn() {\r\n      this.downloadProcess(\"bpmn\");\r\n    },\r\n    downloadProcessAsSvg() {\r\n      this.downloadProcess(\"svg\");\r\n    },\r\n    processSimulation() {\r\n      this.simulationStatus = !this.simulationStatus;\r\n      this.simulation && this.bpmnModeler.get(\"toggleMode\").toggleMode();\r\n    },\r\n    processRedo() {\r\n      this.bpmnModeler.get(\"commandStack\").redo();\r\n    },\r\n    processUndo() {\r\n      this.bpmnModeler.get(\"commandStack\").undo();\r\n    },\r\n    processZoomIn(zoomStep = 0.1) {\r\n      let newZoom = Math.floor(this.defaultZoom * 100 + zoomStep * 100) / 100;\r\n      if (newZoom > 4) {\r\n        throw new Error(\"[Process Designer Warn ]: The zoom ratio cannot be greater than 4\");\r\n      }\r\n      this.defaultZoom = newZoom;\r\n      this.bpmnModeler.get(\"canvas\").zoom(this.defaultZoom);\r\n    },\r\n    processZoomOut(zoomStep = 0.1) {\r\n      let newZoom = Math.floor(this.defaultZoom * 100 - zoomStep * 100) / 100;\r\n      if (newZoom < 0.2) {\r\n        throw new Error(\"[Process Designer Warn ]: The zoom ratio cannot be less than 0.2\");\r\n      }\r\n      this.defaultZoom = newZoom;\r\n      this.bpmnModeler.get(\"canvas\").zoom(this.defaultZoom);\r\n    },\r\n    processZoomTo(newZoom = 1) {\r\n      if (newZoom < 0.2) {\r\n        throw new Error(\"[Process Designer Warn ]: The zoom ratio cannot be less than 0.2\");\r\n      }\r\n      if (newZoom > 4) {\r\n        throw new Error(\"[Process Designer Warn ]: The zoom ratio cannot be greater than 4\");\r\n      }\r\n      this.defaultZoom = newZoom;\r\n      this.bpmnModeler.get(\"canvas\").zoom(newZoom);\r\n    },\r\n    processReZoom() {\r\n      this.defaultZoom = 1;\r\n      this.bpmnModeler.get(\"canvas\").zoom(\"fit-viewport\", \"auto\");\r\n    },\r\n    processRestart() {\r\n      this.recoverable = false;\r\n      this.revocable = false;\r\n      this.createNewDiagram(null);\r\n    },\r\n    elementsAlign(align) {\r\n      const Align = this.bpmnModeler.get(\"alignElements\");\r\n      const Selection = this.bpmnModeler.get(\"selection\");\r\n      const SelectedElements = Selection.get();\r\n      if (!SelectedElements || SelectedElements.length <= 1) {\r\n        this.$message.warning(\"请按住 Ctrl 键选择多个元素对齐\");\r\n        return;\r\n      }\r\n      this.$confirm(\"自动对齐可能造成图形变形，是否继续？\", \"警告\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      }).then(() => Align.trigger(SelectedElements, align));\r\n    },\r\n    /*-----------------------------    方法结束     ---------------------------------*/\r\n    previewProcessXML() {\r\n      this.bpmnModeler.saveXML({ format: true }).then(({ xml }) => {\r\n        this.previewResult = xml;\r\n        this.previewType = \"xml\";\r\n        this.previewModelVisible = true;\r\n      });\r\n    },\r\n    previewProcessJson() {\r\n      this.bpmnModeler.saveXML({ format: true }).then(({ xml }) => {\r\n        this.previewResult = convert.xml2json(xml, { spaces: 2 });\r\n        this.previewType = \"json\";\r\n        this.previewModelVisible = true;\r\n      });\r\n    },\r\n    /* ------------------------------------------------ 芋道源码 methods ------------------------------------------------------ */\r\n    async processSave() {\r\n      const { err, xml } = await this.bpmnModeler.saveXML();\r\n      // 读取异常时抛出异常\r\n      if (err) {\r\n        this.$modal.msgError('保存模型失败，请重试！')\r\n        return\r\n      }\r\n      // 触发 save 事件\r\n      this.$emit('save', xml)\r\n    },\r\n    /** 高亮显示 */\r\n    highlightedCode(previewType, previewResult) {\r\n      const result = hljs.highlight(previewType, previewResult || \"\", true);\r\n      return result.value || '&nbsp;';\r\n    },\r\n  }\r\n};\r\n</script>\r\n"]}]}