{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\multi-instance\\ElementMultiInstance.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\multi-instance\\ElementMultiInstance.vue","mtime":1704630437721},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJFbGVtZW50TXVsdGlJbnN0YW5jZSIsDQogIHByb3BzOiB7DQogICAgYnVzaW5lc3NPYmplY3Q6IE9iamVjdCwNCiAgICB0eXBlOiBTdHJpbmcNCiAgfSwNCiAgaW5qZWN0OiB7DQogICAgcHJlZml4OiAicHJlZml4Ig0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBsb29wQ2hhcmFjdGVyaXN0aWNzOiAiIiwNCiAgICAgIC8v6buY6K6k6YWN572u77yM55So5p2l6KaG55uW5Y6f5aeL5LiN5a2Y5Zyo55qE6YCJ6aG577yM6YG/5YWN5oql6ZSZDQogICAgICBkZWZhdWx0TG9vcEluc3RhbmNlRm9ybTogew0KICAgICAgICBjb21wbGV0aW9uQ29uZGl0aW9uOiAiIiwNCiAgICAgICAgbG9vcENhcmRpbmFsaXR5OiAiIiwNCiAgICAgICAgZXh0ZW5zaW9uRWxlbWVudHM6IFtdLA0KICAgICAgICBhc3luY0FmdGVyOiBmYWxzZSwNCiAgICAgICAgYXN5bmNCZWZvcmU6IGZhbHNlLA0KICAgICAgICBleGNsdXNpdmU6IGZhbHNlDQogICAgICB9LA0KICAgICAgbG9vcEluc3RhbmNlRm9ybToge30NCiAgICB9Ow0KICB9LA0KICB3YXRjaDogew0KICAgIGJ1c2luZXNzT2JqZWN0OiB7DQogICAgICBpbW1lZGlhdGU6IHRydWUsDQogICAgICBoYW5kbGVyKHZhbCkgew0KICAgICAgICB0aGlzLmJwbW5FbGVtZW50ID0gd2luZG93LmJwbW5JbnN0YW5jZXMuYnBtbkVsZW1lbnQ7DQogICAgICAgIHRoaXMuZ2V0RWxlbWVudExvb3AodmFsKTsNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRFbGVtZW50TG9vcChidXNpbmVzc09iamVjdCkgew0KICAgICAgaWYgKCFidXNpbmVzc09iamVjdC5sb29wQ2hhcmFjdGVyaXN0aWNzKSB7DQogICAgICAgIHRoaXMubG9vcENoYXJhY3RlcmlzdGljcyA9ICJOdWxsIjsNCiAgICAgICAgdGhpcy5sb29wSW5zdGFuY2VGb3JtID0ge307DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGlmIChidXNpbmVzc09iamVjdC5sb29wQ2hhcmFjdGVyaXN0aWNzLiR0eXBlID09PSAiYnBtbjpTdGFuZGFyZExvb3BDaGFyYWN0ZXJpc3RpY3MiKSB7DQogICAgICAgIHRoaXMubG9vcENoYXJhY3RlcmlzdGljcyA9ICJTdGFuZGFyZExvb3AiOw0KICAgICAgICB0aGlzLmxvb3BJbnN0YW5jZUZvcm0gPSB7fTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgaWYgKGJ1c2luZXNzT2JqZWN0Lmxvb3BDaGFyYWN0ZXJpc3RpY3MuaXNTZXF1ZW50aWFsKSB7DQogICAgICAgIHRoaXMubG9vcENoYXJhY3RlcmlzdGljcyA9ICJTZXF1ZW50aWFsTXVsdGlJbnN0YW5jZSI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MgPSAiUGFyYWxsZWxNdWx0aUluc3RhbmNlIjsNCiAgICAgIH0NCiAgICAgIC8vIOWQiOW5tumFjee9rg0KICAgICAgdGhpcy5sb29wSW5zdGFuY2VGb3JtID0gew0KICAgICAgICAuLi50aGlzLmRlZmF1bHRMb29wSW5zdGFuY2VGb3JtLA0KICAgICAgICAuLi5idXNpbmVzc09iamVjdC5sb29wQ2hhcmFjdGVyaXN0aWNzLA0KICAgICAgICBjb21wbGV0aW9uQ29uZGl0aW9uOiBidXNpbmVzc09iamVjdC5sb29wQ2hhcmFjdGVyaXN0aWNzPy5jb21wbGV0aW9uQ29uZGl0aW9uPy5ib2R5ID8/ICIiLA0KICAgICAgICBsb29wQ2FyZGluYWxpdHk6IGJ1c2luZXNzT2JqZWN0Lmxvb3BDaGFyYWN0ZXJpc3RpY3M/Lmxvb3BDYXJkaW5hbGl0eT8uYm9keSA/PyAiIg0KICAgICAgfTsNCiAgICAgIC8vIOS/neeVmeW9k+WJjeWFg+e0oCBidXNpbmVzc09iamVjdCDkuIrnmoQgbG9vcENoYXJhY3RlcmlzdGljcyDlrp7kvosNCiAgICAgIHRoaXMubXVsdGlMb29wSW5zdGFuY2UgPSB3aW5kb3cuYnBtbkluc3RhbmNlcy5icG1uRWxlbWVudC5idXNpbmVzc09iamVjdC5sb29wQ2hhcmFjdGVyaXN0aWNzOw0KICAgICAgLy8g5pu05paw6KGo5Y2VDQogICAgICBpZiAoDQogICAgICAgIGJ1c2luZXNzT2JqZWN0Lmxvb3BDaGFyYWN0ZXJpc3RpY3MuZXh0ZW5zaW9uRWxlbWVudHMgJiYNCiAgICAgICAgYnVzaW5lc3NPYmplY3QubG9vcENoYXJhY3RlcmlzdGljcy5leHRlbnNpb25FbGVtZW50cy52YWx1ZXMgJiYNCiAgICAgICAgYnVzaW5lc3NPYmplY3QubG9vcENoYXJhY3RlcmlzdGljcy5leHRlbnNpb25FbGVtZW50cy52YWx1ZXMubGVuZ3RoDQogICAgICApIHsNCiAgICAgICAgdGhpcy4kc2V0KHRoaXMubG9vcEluc3RhbmNlRm9ybSwgInRpbWVDeWNsZSIsIGJ1c2luZXNzT2JqZWN0Lmxvb3BDaGFyYWN0ZXJpc3RpY3MuZXh0ZW5zaW9uRWxlbWVudHMudmFsdWVzWzBdLmJvZHkpOw0KICAgICAgfQ0KICAgIH0sDQogICAgY2hhbmdlTG9vcENoYXJhY3RlcmlzdGljc1R5cGUodHlwZSkgew0KICAgICAgLy8gdGhpcy5sb29wSW5zdGFuY2VGb3JtID0geyAuLi50aGlzLmRlZmF1bHRMb29wSW5zdGFuY2VGb3JtIH07IC8vIOWIh+aNouexu+Wei+WPlua2iOWOn+ihqOWNlemFjee9rg0KICAgICAgLy8g5Y+W5raI5aSa5a6e5L6L6YWN572uDQogICAgICBpZiAodHlwZSA9PT0gIk51bGwiKSB7DQogICAgICAgIHdpbmRvdy5icG1uSW5zdGFuY2VzLm1vZGVsaW5nLnVwZGF0ZVByb3BlcnRpZXModGhpcy5icG1uRWxlbWVudCwgeyBsb29wQ2hhcmFjdGVyaXN0aWNzOiBudWxsIH0pOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICAvLyDphY3nva7lvqrnjq8NCiAgICAgIGlmICh0eXBlID09PSAiU3RhbmRhcmRMb29wIikgew0KICAgICAgICBjb25zdCBsb29wQ2hhcmFjdGVyaXN0aWNzT2JqZWN0ID0gd2luZG93LmJwbW5JbnN0YW5jZXMubW9kZGxlLmNyZWF0ZSgiYnBtbjpTdGFuZGFyZExvb3BDaGFyYWN0ZXJpc3RpY3MiKTsNCiAgICAgICAgd2luZG93LmJwbW5JbnN0YW5jZXMubW9kZWxpbmcudXBkYXRlUHJvcGVydGllcyh0aGlzLmJwbW5FbGVtZW50LCB7DQogICAgICAgICAgbG9vcENoYXJhY3RlcmlzdGljczogbG9vcENoYXJhY3RlcmlzdGljc09iamVjdA0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5tdWx0aUxvb3BJbnN0YW5jZSA9IG51bGw7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIC8vIOaXtuW6jw0KICAgICAgaWYgKHR5cGUgPT09ICJTZXF1ZW50aWFsTXVsdGlJbnN0YW5jZSIpIHsNCiAgICAgICAgdGhpcy5tdWx0aUxvb3BJbnN0YW5jZSA9IHdpbmRvdy5icG1uSW5zdGFuY2VzLm1vZGRsZS5jcmVhdGUoImJwbW46TXVsdGlJbnN0YW5jZUxvb3BDaGFyYWN0ZXJpc3RpY3MiLCB7IGlzU2VxdWVudGlhbDogdHJ1ZSB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMubXVsdGlMb29wSW5zdGFuY2UgPSB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RkbGUuY3JlYXRlKCJicG1uOk11bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzIiwgeyBjb2xsZWN0aW9uOiAiJHtjb2xsX3VzZXJMaXN0fSIgfSk7DQogICAgICB9DQogICAgICB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RlbGluZy51cGRhdGVQcm9wZXJ0aWVzKHRoaXMuYnBtbkVsZW1lbnQsIHsNCiAgICAgICAgbG9vcENoYXJhY3RlcmlzdGljczogdGhpcy5tdWx0aUxvb3BJbnN0YW5jZQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDlvqrnjq/ln7rmlbANCiAgICB1cGRhdGVMb29wQ2FyZGluYWxpdHkoY2FyZGluYWxpdHkpIHsNCiAgICAgIGxldCBsb29wQ2FyZGluYWxpdHkgPSBudWxsOw0KICAgICAgaWYgKGNhcmRpbmFsaXR5ICYmIGNhcmRpbmFsaXR5Lmxlbmd0aCkgew0KICAgICAgICBsb29wQ2FyZGluYWxpdHkgPSB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RkbGUuY3JlYXRlKCJicG1uOkZvcm1hbEV4cHJlc3Npb24iLCB7IGJvZHk6IGNhcmRpbmFsaXR5IH0pOw0KICAgICAgfQ0KICAgICAgd2luZG93LmJwbW5JbnN0YW5jZXMubW9kZWxpbmcudXBkYXRlTW9kZGxlUHJvcGVydGllcyh0aGlzLmJwbW5FbGVtZW50LCB0aGlzLm11bHRpTG9vcEluc3RhbmNlLCB7IGxvb3BDYXJkaW5hbGl0eSB9KTsNCiAgICB9LA0KICAgIC8vIOWujOaIkOadoeS7tg0KICAgIHVwZGF0ZUxvb3BDb25kaXRpb24oY29uZGl0aW9uKSB7DQogICAgICBsZXQgY29tcGxldGlvbkNvbmRpdGlvbiA9IG51bGw7DQogICAgICBpZiAoY29uZGl0aW9uICYmIGNvbmRpdGlvbi5sZW5ndGgpIHsNCiAgICAgICAgY29tcGxldGlvbkNvbmRpdGlvbiA9IHdpbmRvdy5icG1uSW5zdGFuY2VzLm1vZGRsZS5jcmVhdGUoImJwbW46Rm9ybWFsRXhwcmVzc2lvbiIsIHsgYm9keTogY29uZGl0aW9uIH0pOw0KICAgICAgfQ0KICAgICAgd2luZG93LmJwbW5JbnN0YW5jZXMubW9kZWxpbmcudXBkYXRlTW9kZGxlUHJvcGVydGllcyh0aGlzLmJwbW5FbGVtZW50LCB0aGlzLm11bHRpTG9vcEluc3RhbmNlLCB7IGNvbXBsZXRpb25Db25kaXRpb24gfSk7DQogICAgfSwNCiAgICAvLyDph43or5XlkajmnJ8NCiAgICB1cGRhdGVMb29wVGltZUN5Y2xlKHRpbWVDeWNsZSkgew0KICAgICAgY29uc3QgZXh0ZW5zaW9uRWxlbWVudHMgPSB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RkbGUuY3JlYXRlKCJicG1uOkV4dGVuc2lvbkVsZW1lbnRzIiwgew0KICAgICAgICB2YWx1ZXM6IFsNCiAgICAgICAgICB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RkbGUuY3JlYXRlKGAke3RoaXMucHJlZml4fTpGYWlsZWRKb2JSZXRyeVRpbWVDeWNsZWAsIHsNCiAgICAgICAgICAgIGJvZHk6IHRpbWVDeWNsZQ0KICAgICAgICAgIH0pDQogICAgICAgIF0NCiAgICAgIH0pOw0KICAgICAgd2luZG93LmJwbW5JbnN0YW5jZXMubW9kZWxpbmcudXBkYXRlTW9kZGxlUHJvcGVydGllcyh0aGlzLmJwbW5FbGVtZW50LCB0aGlzLm11bHRpTG9vcEluc3RhbmNlLCB7IGV4dGVuc2lvbkVsZW1lbnRzIH0pOw0KICAgIH0sDQogICAgLy8g55u05o6l5pu05paw55qE5Z+656GA5L+h5oGvDQogICAgdXBkYXRlTG9vcEJhc2UoKSB7DQogICAgICB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RlbGluZy51cGRhdGVNb2RkbGVQcm9wZXJ0aWVzKHRoaXMuYnBtbkVsZW1lbnQsIHRoaXMubXVsdGlMb29wSW5zdGFuY2UsIHsNCiAgICAgICAgY29sbGVjdGlvbjogdGhpcy5sb29wSW5zdGFuY2VGb3JtLmNvbGxlY3Rpb24gfHwgbnVsbCwNCiAgICAgICAgZWxlbWVudFZhcmlhYmxlOiB0aGlzLmxvb3BJbnN0YW5jZUZvcm0uZWxlbWVudFZhcmlhYmxlIHx8IG51bGwNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g5ZCE5byC5q2l54q25oCBDQogICAgdXBkYXRlTG9vcEFzeW5jKGtleSkgew0KICAgICAgY29uc3QgeyBhc3luY0JlZm9yZSwgYXN5bmNBZnRlciB9ID0gdGhpcy5sb29wSW5zdGFuY2VGb3JtOw0KICAgICAgbGV0IGFzeW5jQXR0ciA9IE9iamVjdC5jcmVhdGUobnVsbCk7DQogICAgICBpZiAoIWFzeW5jQmVmb3JlICYmICFhc3luY0FmdGVyKSB7DQogICAgICAgIHRoaXMuJHNldCh0aGlzLmxvb3BJbnN0YW5jZUZvcm0sICJleGNsdXNpdmUiLCBmYWxzZSk7DQogICAgICAgIGFzeW5jQXR0ciA9IHsgYXN5bmNCZWZvcmU6IGZhbHNlLCBhc3luY0FmdGVyOiBmYWxzZSwgZXhjbHVzaXZlOiBmYWxzZSwgZXh0ZW5zaW9uRWxlbWVudHM6IG51bGwgfTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGFzeW5jQXR0cltrZXldID0gdGhpcy5sb29wSW5zdGFuY2VGb3JtW2tleV07DQogICAgICB9DQogICAgICB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RlbGluZy51cGRhdGVNb2RkbGVQcm9wZXJ0aWVzKHRoaXMuYnBtbkVsZW1lbnQsIHRoaXMubXVsdGlMb29wSW5zdGFuY2UsIGFzeW5jQXR0cik7DQogICAgfQ0KICB9LA0KICBiZWZvcmVEZXN0cm95KCkgew0KICAgIHRoaXMubXVsdGlMb29wSW5zdGFuY2UgPSBudWxsOw0KICAgIHRoaXMuYnBtbkVsZW1lbnQgPSBudWxsOw0KICB9DQp9Ow0K"},{"version":3,"sources":["ElementMultiInstance.vue"],"names":[],"mappings":";AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ElementMultiInstance.vue","sourceRoot":"src/components/bpmnProcessDesigner/package/penal/multi-instance","sourcesContent":["<template>\r\n  <div class=\"panel-tab__content\">\r\n    <el-form size=\"mini\" label-width=\"90px\" @submit.native.prevent>\r\n      <el-form-item label=\"回路特性\">\r\n        <el-select v-model=\"loopCharacteristics\" @change=\"changeLoopCharacteristicsType\">\r\n          <!--bpmn:MultiInstanceLoopCharacteristics-->\r\n          <el-option label=\"并行多重事件\" value=\"ParallelMultiInstance\" />\r\n          <el-option label=\"时序多重事件\" value=\"SequentialMultiInstance\" />\r\n          <!--bpmn:StandardLoopCharacteristics-->\r\n          <el-option label=\"循环事件\" value=\"StandardLoop\" />\r\n          <el-option label=\"无\" value=\"Null\" />\r\n        </el-select>\r\n      </el-form-item>\r\n      <template v-if=\"loopCharacteristics === 'ParallelMultiInstance' || loopCharacteristics === 'SequentialMultiInstance'\">\r\n        <el-form-item label=\"循环基数\" key=\"loopCardinality\">\r\n          <el-input v-model=\"loopInstanceForm.loopCardinality\" clearable @change=\"updateLoopCardinality\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"集合\" key=\"collection\" v-show=\"false\">\r\n          <el-input v-model=\"loopInstanceForm.collection\" clearable @change=\"updateLoopBase\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"元素变量\" key=\"elementVariable\">\r\n          <el-input v-model=\"loopInstanceForm.elementVariable\" clearable @change=\"updateLoopBase\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"完成条件\" key=\"completionCondition\">\r\n          <el-input v-model=\"loopInstanceForm.completionCondition\" clearable @change=\"updateLoopCondition\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"异步状态\" key=\"async\">\r\n          <el-checkbox v-model=\"loopInstanceForm.asyncBefore\" label=\"异步前\" @change=\"updateLoopAsync('asyncBefore')\" />\r\n          <el-checkbox v-model=\"loopInstanceForm.asyncAfter\" label=\"异步后\" @change=\"updateLoopAsync('asyncAfter')\" />\r\n          <el-checkbox\r\n            v-model=\"loopInstanceForm.exclusive\"\r\n            v-if=\"loopInstanceForm.asyncAfter || loopInstanceForm.asyncBefore\"\r\n            label=\"排除\"\r\n            @change=\"updateLoopAsync('exclusive')\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"重试周期\" prop=\"timeCycle\" v-if=\"loopInstanceForm.asyncAfter || loopInstanceForm.asyncBefore\" key=\"timeCycle\">\r\n          <el-input v-model=\"loopInstanceForm.timeCycle\" clearable @change=\"updateLoopTimeCycle\" />\r\n        </el-form-item>\r\n      </template>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ElementMultiInstance\",\r\n  props: {\r\n    businessObject: Object,\r\n    type: String\r\n  },\r\n  inject: {\r\n    prefix: \"prefix\"\r\n  },\r\n  data() {\r\n    return {\r\n      loopCharacteristics: \"\",\r\n      //默认配置，用来覆盖原始不存在的选项，避免报错\r\n      defaultLoopInstanceForm: {\r\n        completionCondition: \"\",\r\n        loopCardinality: \"\",\r\n        extensionElements: [],\r\n        asyncAfter: false,\r\n        asyncBefore: false,\r\n        exclusive: false\r\n      },\r\n      loopInstanceForm: {}\r\n    };\r\n  },\r\n  watch: {\r\n    businessObject: {\r\n      immediate: true,\r\n      handler(val) {\r\n        this.bpmnElement = window.bpmnInstances.bpmnElement;\r\n        this.getElementLoop(val);\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getElementLoop(businessObject) {\r\n      if (!businessObject.loopCharacteristics) {\r\n        this.loopCharacteristics = \"Null\";\r\n        this.loopInstanceForm = {};\r\n        return;\r\n      }\r\n      if (businessObject.loopCharacteristics.$type === \"bpmn:StandardLoopCharacteristics\") {\r\n        this.loopCharacteristics = \"StandardLoop\";\r\n        this.loopInstanceForm = {};\r\n        return;\r\n      }\r\n      if (businessObject.loopCharacteristics.isSequential) {\r\n        this.loopCharacteristics = \"SequentialMultiInstance\";\r\n      } else {\r\n        this.loopCharacteristics = \"ParallelMultiInstance\";\r\n      }\r\n      // 合并配置\r\n      this.loopInstanceForm = {\r\n        ...this.defaultLoopInstanceForm,\r\n        ...businessObject.loopCharacteristics,\r\n        completionCondition: businessObject.loopCharacteristics?.completionCondition?.body ?? \"\",\r\n        loopCardinality: businessObject.loopCharacteristics?.loopCardinality?.body ?? \"\"\r\n      };\r\n      // 保留当前元素 businessObject 上的 loopCharacteristics 实例\r\n      this.multiLoopInstance = window.bpmnInstances.bpmnElement.businessObject.loopCharacteristics;\r\n      // 更新表单\r\n      if (\r\n        businessObject.loopCharacteristics.extensionElements &&\r\n        businessObject.loopCharacteristics.extensionElements.values &&\r\n        businessObject.loopCharacteristics.extensionElements.values.length\r\n      ) {\r\n        this.$set(this.loopInstanceForm, \"timeCycle\", businessObject.loopCharacteristics.extensionElements.values[0].body);\r\n      }\r\n    },\r\n    changeLoopCharacteristicsType(type) {\r\n      // this.loopInstanceForm = { ...this.defaultLoopInstanceForm }; // 切换类型取消原表单配置\r\n      // 取消多实例配置\r\n      if (type === \"Null\") {\r\n        window.bpmnInstances.modeling.updateProperties(this.bpmnElement, { loopCharacteristics: null });\r\n        return;\r\n      }\r\n      // 配置循环\r\n      if (type === \"StandardLoop\") {\r\n        const loopCharacteristicsObject = window.bpmnInstances.moddle.create(\"bpmn:StandardLoopCharacteristics\");\r\n        window.bpmnInstances.modeling.updateProperties(this.bpmnElement, {\r\n          loopCharacteristics: loopCharacteristicsObject\r\n        });\r\n        this.multiLoopInstance = null;\r\n        return;\r\n      }\r\n      // 时序\r\n      if (type === \"SequentialMultiInstance\") {\r\n        this.multiLoopInstance = window.bpmnInstances.moddle.create(\"bpmn:MultiInstanceLoopCharacteristics\", { isSequential: true });\r\n      } else {\r\n        this.multiLoopInstance = window.bpmnInstances.moddle.create(\"bpmn:MultiInstanceLoopCharacteristics\", { collection: \"${coll_userList}\" });\r\n      }\r\n      window.bpmnInstances.modeling.updateProperties(this.bpmnElement, {\r\n        loopCharacteristics: this.multiLoopInstance\r\n      });\r\n    },\r\n    // 循环基数\r\n    updateLoopCardinality(cardinality) {\r\n      let loopCardinality = null;\r\n      if (cardinality && cardinality.length) {\r\n        loopCardinality = window.bpmnInstances.moddle.create(\"bpmn:FormalExpression\", { body: cardinality });\r\n      }\r\n      window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement, this.multiLoopInstance, { loopCardinality });\r\n    },\r\n    // 完成条件\r\n    updateLoopCondition(condition) {\r\n      let completionCondition = null;\r\n      if (condition && condition.length) {\r\n        completionCondition = window.bpmnInstances.moddle.create(\"bpmn:FormalExpression\", { body: condition });\r\n      }\r\n      window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement, this.multiLoopInstance, { completionCondition });\r\n    },\r\n    // 重试周期\r\n    updateLoopTimeCycle(timeCycle) {\r\n      const extensionElements = window.bpmnInstances.moddle.create(\"bpmn:ExtensionElements\", {\r\n        values: [\r\n          window.bpmnInstances.moddle.create(`${this.prefix}:FailedJobRetryTimeCycle`, {\r\n            body: timeCycle\r\n          })\r\n        ]\r\n      });\r\n      window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement, this.multiLoopInstance, { extensionElements });\r\n    },\r\n    // 直接更新的基础信息\r\n    updateLoopBase() {\r\n      window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement, this.multiLoopInstance, {\r\n        collection: this.loopInstanceForm.collection || null,\r\n        elementVariable: this.loopInstanceForm.elementVariable || null\r\n      });\r\n    },\r\n    // 各异步状态\r\n    updateLoopAsync(key) {\r\n      const { asyncBefore, asyncAfter } = this.loopInstanceForm;\r\n      let asyncAttr = Object.create(null);\r\n      if (!asyncBefore && !asyncAfter) {\r\n        this.$set(this.loopInstanceForm, \"exclusive\", false);\r\n        asyncAttr = { asyncBefore: false, asyncAfter: false, exclusive: false, extensionElements: null };\r\n      } else {\r\n        asyncAttr[key] = this.loopInstanceForm[key];\r\n      }\r\n      window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement, this.multiLoopInstance, asyncAttr);\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.multiLoopInstance = null;\r\n    this.bpmnElement = null;\r\n  }\r\n};\r\n</script>\r\n"]}]}