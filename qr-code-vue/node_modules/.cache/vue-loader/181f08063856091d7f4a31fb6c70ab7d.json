{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\pay\\app\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\pay\\app\\index.vue","mtime":1704630438042},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBjcmVhdGVBcHAsIHVwZGF0ZUFwcCwgY2hhbmdlQXBwU3RhdHVzLCBkZWxldGVBcHAsIGdldEFwcCwgZ2V0QXBwUGFnZSB9IGZyb20gIkAvYXBpL3BheS9hcHAiOw0KaW1wb3J0IHsgUGF5Q2hhbm5lbEVudW0sIENvbW1vblN0YXR1c0VudW0gfSBmcm9tICJAL3V0aWxzL2NvbnN0YW50cyI7DQppbXBvcnQgd2VpeGluQ2hhbm5lbEZvcm0gZnJvbSAiQC92aWV3cy9wYXkvYXBwL2NvbXBvbmVudHMvd2VpeGluQ2hhbm5lbEZvcm0iOw0KaW1wb3J0IGFsaXBheUNoYW5uZWxGb3JtIGZyb20gIkAvdmlld3MvcGF5L2FwcC9jb21wb25lbnRzL2FsaXBheUNoYW5uZWxGb3JtIjsNCmltcG9ydCBub25lQ29uZmlnQ2hhbm5lbEZvcm0gZnJvbSAnQC92aWV3cy9wYXkvYXBwL2NvbXBvbmVudHMvbm9uZUNvbmZpZ0NoYW5uZWxGb3JtJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiUGF5QXBwIiwNCiAgY29tcG9uZW50czogew0KICAgIHdlaXhpbkNoYW5uZWxGb3JtLA0KICAgIGFsaXBheUNoYW5uZWxGb3JtLA0KICAgIG5vbmVDb25maWdDaGFubmVsRm9ybQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICAvLyDpga7nvanlsYINCiAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAvLyDmmL7npLrmkJzntKLmnaHku7YNCiAgICAgIHNob3dTZWFyY2g6IHRydWUsDQogICAgICAvLyDmgLvmnaHmlbANCiAgICAgIHRvdGFsOiAwLA0KICAgICAgLy8g5pSv5LuY5bqU55So5L+h5oGv5YiX6KGoDQogICAgICBsaXN0OiBbXSwNCiAgICAgIC8vIOW8ueWHuuWxguagh+mimA0KICAgICAgdGl0bGU6ICIiLA0KICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGCDQogICAgICBvcGVuOiBmYWxzZSwNCiAgICAgIC8vIOafpeivouWPguaVsA0KICAgICAgcXVlcnlQYXJhbXM6IHsNCiAgICAgICAgcGFnZU5vOiAxLA0KICAgICAgICBwYWdlU2l6ZTogMTAsDQogICAgICAgIG5hbWU6IG51bGwsDQogICAgICAgIHN0YXR1czogbnVsbCwNCiAgICAgICAgY3JlYXRlVGltZTogW10NCiAgICAgIH0sDQogICAgICAvLyDooajljZXlj4LmlbANCiAgICAgIGZvcm06IHt9LA0KICAgICAgLy8g6KGo5Y2V5qCh6aqMDQogICAgICBydWxlczogew0KICAgICAgICBuYW1lOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5bqU55So5ZCN5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIifV0sDQogICAgICAgIHN0YXR1czogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuW8gOWQr+eKtuaAgeS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIn1dLA0KICAgICAgICBvcmRlck5vdGlmeVVybDogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuaUr+S7mOe7k+aenOeahOWbnuiwg+WcsOWdgOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIn1dLA0KICAgICAgICByZWZ1bmROb3RpZnlVcmw6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLpgIDmrL7nu5PmnpznmoTlm57osIPlnLDlnYDkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciJ9XSwNCiAgICAgIH0sDQogICAgICAvLyDmlK/ku5jmuKDpgZPmnprkuL4NCiAgICAgIHBheUNoYW5uZWxFbnVtOiBQYXlDaGFubmVsRW51bSwNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0TGlzdCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLyoqIOafpeivouWIl+ihqCAqLw0KICAgIGdldExpc3QoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgLy8g5omn6KGM5p+l6K+iDQogICAgICBnZXRBcHBQYWdlKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7DQogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsOw0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqIOWPlua2iOaMiemSriAqLw0KICAgIGNhbmNlbCgpIHsNCiAgICAgIHRoaXMub3BlbiA9IGZhbHNlOw0KICAgICAgdGhpcy5yZXNldCgpOw0KICAgIH0sDQogICAgLyoqIOihqOWNlemHjee9riAqLw0KICAgIHJlc2V0KCkgew0KICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBuYW1lOiB1bmRlZmluZWQsDQogICAgICAgIHN0YXR1czogQ29tbW9uU3RhdHVzRW51bS5FTkFCTEUsDQogICAgICAgIHJlbWFyazogdW5kZWZpbmVkLA0KICAgICAgICBvcmRlck5vdGlmeVVybDogdW5kZWZpbmVkLA0KICAgICAgICByZWZ1bmROb3RpZnlVcmw6IHVuZGVmaW5lZCwNCiAgICAgIH07DQogICAgICB0aGlzLnJlc2V0Rm9ybSgiZm9ybSIpOw0KICAgIH0sDQogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZVF1ZXJ5KCkgew0KICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTm8gPSAxOw0KICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgfSwNCiAgICAvKiog6YeN572u5oyJ6ZKu5pON5L2cICovDQogICAgcmVzZXRRdWVyeSgpIHsNCiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsNCiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsNCiAgICB9LA0KICAgIC8qKiDmlrDlop7mjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVBZGQoKSB7DQogICAgICB0aGlzLnJlc2V0KCk7DQogICAgICB0aGlzLm9wZW4gPSB0cnVlOw0KICAgICAgdGhpcy50aXRsZSA9ICLmt7vliqDmlK/ku5jlupTnlKjkv6Hmga8iOw0KICAgIH0sDQogICAgLyoqIOS/ruaUueaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZVVwZGF0ZShyb3cpIHsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgIGNvbnN0IGlkID0gcm93LmlkOw0KICAgICAgZ2V0QXBwKGlkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5mb3JtID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsNCiAgICAgICAgdGhpcy50aXRsZSA9ICLkv67mlLnmlK/ku5jlupTnlKjkv6Hmga8iOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDnlKjmiLfnirbmgIHkv67mlLkNCiAgICBoYW5kbGVTdGF0dXNDaGFuZ2Uocm93KSB7DQogICAgICBsZXQgdGV4dCA9IHJvdy5zdGF0dXMgPT09IENvbW1vblN0YXR1c0VudW0uRU5BQkxFID8gIuWQr+eUqCIgOiAi5YGc55SoIjsNCiAgICAgIHRoaXMuJG1vZGFsLmNvbmZpcm0oJ+ehruiupOimgSInICsgdGV4dCArICciIicgKyByb3cubmFtZSArICci5bqU55So5ZCXPycpLnRoZW4oZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gY2hhbmdlQXBwU3RhdHVzKHJvdy5pZCwgcm93LnN0YXR1cyk7DQogICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcyh0ZXh0ICsgIuaIkOWKnyIpOw0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgew0KICAgICAgICByb3cuc3RhdHVzID0gcm93LnN0YXR1cyA9PT0gQ29tbW9uU3RhdHVzRW51bS5FTkFCTEUgPyBDb21tb25TdGF0dXNFbnVtLkRJU0FCTEUNCiAgICAgICAgICA6IENvbW1vblN0YXR1c0VudW0uRU5BQkxFOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovDQogICAgc3VibWl0Rm9ybSgpIHsNCiAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIGlmICghdmFsaWQpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgLy8g5L+u5pS555qE5o+Q5LqkDQogICAgICAgIGlmICh0aGlzLmZvcm0uaWQgIT0gbnVsbCkgew0KICAgICAgICAgIHVwZGF0ZUFwcCh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi5L+u5pS55oiQ5YqfIik7DQogICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsNCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICAvLyDmt7vliqDnmoTmj5DkuqQNCiAgICAgICAgY3JlYXRlQXBwKHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi5paw5aKe5oiQ5YqfIik7DQogICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlRGVsZXRlKHJvdykgew0KICAgICAgdGhpcy4kbW9kYWwuY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk5pSv5LuY5bqU55So5L+h5oGv57yW5Y+35Li6IicgKyByb3cuaWQgKyAnIueahOaVsOaNrumhuT8nKS50aGVuKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIGRlbGV0ZUFwcChyb3cuaWQpOw0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLliKDpmaTmiJDlip8iKTsNCiAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnDQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDkv67mlLnmlK/ku5jmuKDpgZPkv6Hmga8NCiAgICAgKi8NCiAgICBoYW5kbGVDaGFubmVsKHJvdywgY29kZSkgew0KICAgICAgaWYgKGNvZGUuaW5kZXhPZignYWxpcGF5XycpID09PSAwKSB7DQogICAgICAgIHRoaXMuJHJlZnNbJ2FsaXBheUNoYW5uZWxGb3JtUmVmJ10ub3Blbihyb3cuaWQsIGNvZGUpOw0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmIChjb2RlLmluZGV4T2YoJ3d4XycpID09PSAwKSB7DQogICAgICAgIHRoaXMuJHJlZnNbJ3dlaXhpbkNoYW5uZWxGb3JtUmVmJ10ub3Blbihyb3cuaWQsIGNvZGUpOw0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmIChjb2RlID09PSAnbW9jaycpIHsNCiAgICAgICAgdGhpcy4kcmVmc1snbm9uZUNvbmZpZ0NoYW5uZWxGb3JtUmVmJ10ub3Blbihyb3cuaWQsIGNvZGUpOw0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmIChjb2RlID09PSAnd2FsbGV0Jykgew0KICAgICAgICB0aGlzLiRyZWZzWydub25lQ29uZmlnQ2hhbm5lbEZvcm1SZWYnXS5vcGVuKHJvdy5pZCwgY29kZSk7DQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0sDQogICAgLyoqDQogICAgICog5qC55o2u5rig6YGT57yW56CB5Yik5pat5rig6YGT5YiX6KGo5Lit5piv5ZCm5a2Y5ZyoDQogICAgICoNCiAgICAgKiBAcGFyYW0gY2hhbm5lbHMg5rig6YGT5YiX6KGoDQogICAgICogQHBhcmFtIGNoYW5uZWxDb2RlIOa4oOmBk+e8lueggQ0KICAgICAqLw0KICAgIGlzQ2hhbm5lbEV4aXN0cyhjaGFubmVscywgY2hhbm5lbENvZGUpIHsNCiAgICAgIHJldHVybiBjaGFubmVscyAmJiBjaGFubmVscy5pbmRleE9mKGNoYW5uZWxDb2RlKSAhPT0gLTE7DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA+OA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/pay/app","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <doc-alert title=\"支付功能开启\" url=\"https://doc.iocoder.cn/pay/build/\" />\r\n    <!-- 搜索工作栏 -->\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\r\n      <el-form-item label=\"应用名\" prop=\"name\">\r\n        <el-input v-model=\"queryParams.name\" placeholder=\"请输入应用名\" clearable\r\n                  @keyup.enter.native=\"handleQuery\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"开启状态\" prop=\"status\">\r\n        <el-select v-model=\"queryParams.status\" placeholder=\"请选择开启状态\" clearable>\r\n          <el-option v-for=\"dict in this.getDictDatas(DICT_TYPE.COMMON_STATUS)\" :key=\"parseInt(dict.value)\" :label=\"dict.label\"\r\n                     :value=\"parseInt(dict.value)\"/>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"创建时间\" prop=\"createTime\">\r\n        <el-date-picker v-model=\"queryParams.createTime\" style=\"width: 240px\" value-format=\"yyyy-MM-dd HH:mm:ss\" type=\"daterange\"\r\n                        range-separator=\"-\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" :default-time=\"['00:00:00', '23:59:59']\" />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <!-- 操作工具栏 -->\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"primary\" plain icon=\"el-icon-plus\" size=\"mini\" @click=\"handleAdd\"\r\n                   v-hasPermi=\"['pay:app:create']\">新增\r\n        </el-button>\r\n      </el-col>\r\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n    </el-row>\r\n\r\n    <!-- 列表 -->\r\n    <el-table v-loading=\"loading\" :data=\"list\">\r\n      <el-table-column label=\"应用编号\" align=\"center\" prop=\"id\"/>\r\n      <el-table-column label=\"应用名\" align=\"center\" prop=\"name\"/>\r\n      <el-table-column label=\"开启状态\" align=\"center\" prop=\"status\">\r\n        <template v-slot=\"scope\">\r\n          <el-switch v-model=\"scope.row.status\" :active-value=\"0\" :inactive-value=\"1\"\r\n                     @change=\"handleStatusChange(scope.row)\"/>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"支付宝配置\" align=\"center\">\r\n        <el-table-column :label=\"payChannelEnum.ALIPAY_APP.name\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"success\" icon=\"el-icon-check\" circle\r\n                       v-if=\"isChannelExists(scope.row.channelCodes, payChannelEnum.ALIPAY_APP.code)\"\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.ALIPAY_APP.code)\">\r\n            </el-button>\r\n            <el-button v-else type=\"danger\" icon=\"el-icon-close\" circle\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.ALIPAY_APP.code)\">\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"payChannelEnum.ALIPAY_PC.name\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"success\" icon=\"el-icon-check\" circle\r\n                       v-if=\"isChannelExists(scope.row.channelCodes, payChannelEnum.ALIPAY_PC.code)\"\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.ALIPAY_PC.code)\">\r\n            </el-button>\r\n            <el-button v-else type=\"danger\" icon=\"el-icon-close\" circle\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.ALIPAY_PC.code)\">\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"payChannelEnum.ALIPAY_WAP.name\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"success\" icon=\"el-icon-check\" circle\r\n                       v-if=\"isChannelExists(scope.row.channelCodes, payChannelEnum.ALIPAY_WAP.code)\"\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.ALIPAY_WAP.code)\">\r\n            </el-button>\r\n            <el-button v-else type=\"danger\" icon=\"el-icon-close\" circle\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.ALIPAY_WAP.code)\">\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"payChannelEnum.ALIPAY_QR.name\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"success\" icon=\"el-icon-check\" circle\r\n                       v-if=\"isChannelExists(scope.row.channelCodes, payChannelEnum.ALIPAY_QR.code)\"\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.ALIPAY_QR.code)\">\r\n            </el-button>\r\n            <el-button v-else type=\"danger\" icon=\"el-icon-close\" circle\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.ALIPAY_QR.code)\">\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"payChannelEnum.ALIPAY_BAR.name\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"success\" icon=\"el-icon-check\" circle\r\n                       v-if=\"isChannelExists(scope.row.channelCodes, payChannelEnum.ALIPAY_BAR.code)\"\r\n                       @click=\"handleChannel(scope.row,payChannelEnum.ALIPAY_BAR.code)\">\r\n            </el-button>\r\n            <el-button v-else type=\"danger\" icon=\"el-icon-close\" circle\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.ALIPAY_BAR.code)\">\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table-column>\r\n      <el-table-column label=\"微信配置\" align=\"center\">\r\n        <el-table-column :label=\"payChannelEnum.WX_LITE.name\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"success\" icon=\"el-icon-check\" circle\r\n                       v-if=\"isChannelExists(scope.row.channelCodes, payChannelEnum.WX_LITE.code)\"\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.WX_LITE.code)\">\r\n            </el-button>\r\n            <el-button v-else type=\"danger\" icon=\"el-icon-close\" circle\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.WX_LITE.code)\">\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"payChannelEnum.WX_PUB.name\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"success\" icon=\"el-icon-check\" circle\r\n                       v-if=\"isChannelExists(scope.row.channelCodes, payChannelEnum.WX_PUB.code)\"\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.WX_PUB.code)\">\r\n            </el-button>\r\n            <el-button v-else type=\"danger\" icon=\"el-icon-close\" circle\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.WX_PUB.code)\">\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"payChannelEnum.WX_APP.name\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"success\" icon=\"el-icon-check\" circle\r\n                       v-if=\"isChannelExists(scope.row.channelCodes, payChannelEnum.WX_APP.code)\"\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.WX_APP.code)\">\r\n            </el-button>\r\n            <el-button v-else type=\"danger\" icon=\"el-icon-close\" circle\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.WX_APP.code)\">\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"payChannelEnum.WX_NATIVE.name\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"success\" icon=\"el-icon-check\" circle\r\n                       v-if=\"isChannelExists(scope.row.channelCodes, payChannelEnum.WX_NATIVE.code)\"\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.WX_NATIVE.code)\">\r\n            </el-button>\r\n            <el-button v-else type=\"danger\" icon=\"el-icon-close\" circle\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.WX_NATIVE.code)\">\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"payChannelEnum.WX_BAR.name\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"success\" icon=\"el-icon-check\" circle\r\n                       v-if=\"isChannelExists(scope.row.channelCodes, payChannelEnum.WX_BAR.code)\"\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.WX_BAR.code)\">\r\n            </el-button>\r\n            <el-button v-else type=\"danger\" icon=\"el-icon-close\" circle\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.WX_BAR.code)\">\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table-column>\r\n      <el-table-column label=\"模拟支付配置\" align=\"center\">\r\n        <el-table-column :label=\"payChannelEnum.MOCK.name\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"success\" icon=\"el-icon-check\" circle\r\n                       v-if=\"isChannelExists(scope.row.channelCodes, payChannelEnum.MOCK.code)\"\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.MOCK.code)\">\r\n            </el-button>\r\n            <el-button v-else type=\"danger\" icon=\"el-icon-close\" circle\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.MOCK.code)\">\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table-column>\r\n      <el-table-column label=\"钱包支付配置\" align=\"center\">\r\n        <el-table-column :label=\"payChannelEnum.WALLET.name\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"success\" icon=\"el-icon-check\" circle\r\n                       v-if=\"isChannelExists(scope.row.channelCodes, payChannelEnum.WALLET.code)\"\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.WALLET.code)\">\r\n            </el-button>\r\n            <el-button v-else type=\"danger\" icon=\"el-icon-close\" circle\r\n                       @click=\"handleChannel(scope.row, payChannelEnum.WALLET.code)\">\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n        <template v-slot=\"scope\">\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(scope.row)\"\r\n                     v-hasPermi=\"['pay:app:update']\">修改\r\n          </el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row)\"\r\n                     v-hasPermi=\"['pay:app:delete']\">删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页组件 -->\r\n    <pagination v-show=\"total > 0\" :total=\"total\" :page.sync=\"queryParams.pageNo\" :limit.sync=\"queryParams.pageSize\"\r\n                @pagination=\"getList\"/>\r\n\r\n    <!-- 对话框(添加 / 修改) -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"800px\" append-to-body>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"160px\">\r\n        <el-form-item label=\"应用名\" prop=\"name\">\r\n          <el-input v-model=\"form.name\" placeholder=\"请输入应用名\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"开启状态\" prop=\"status\">\r\n          <el-radio-group v-model=\"form.status\">\r\n            <el-radio v-for=\"dict in this.getDictDatas(DICT_TYPE.COMMON_STATUS)\" :key=\"parseInt(dict.value)\" :label=\"parseInt(dict.value)\">\r\n              {{ dict.label }}\r\n            </el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"支付结果的回调地址\" prop=\"orderNotifyUrl\">\r\n          <el-input v-model=\"form.orderNotifyUrl\" placeholder=\"请输入支付结果的回调地址\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"退款结果的回调地址\" prop=\"refundNotifyUrl\">\r\n          <el-input v-model=\"form.refundNotifyUrl\" placeholder=\"请输入退款结果的回调地址\"/>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"备注\" prop=\"remark\">\r\n          <el-input v-model=\"form.remark\" placeholder=\"请输入备注\"/>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 对话框（支付应用的配置） -->\r\n    <weixin-channel-form ref=\"weixinChannelFormRef\" @success=\"getList\" />\r\n    <alipay-channel-form ref=\"alipayChannelFormRef\" @success=\"getList\" />\r\n    <none-config-channel-form ref=\"noneConfigChannelFormRef\" @success=\"getList\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createApp, updateApp, changeAppStatus, deleteApp, getApp, getAppPage } from \"@/api/pay/app\";\r\nimport { PayChannelEnum, CommonStatusEnum } from \"@/utils/constants\";\r\nimport weixinChannelForm from \"@/views/pay/app/components/weixinChannelForm\";\r\nimport alipayChannelForm from \"@/views/pay/app/components/alipayChannelForm\";\r\nimport noneConfigChannelForm from '@/views/pay/app/components/noneConfigChannelForm';\r\n\r\nexport default {\r\n  name: \"PayApp\",\r\n  components: {\r\n    weixinChannelForm,\r\n    alipayChannelForm,\r\n    noneConfigChannelForm\r\n  },\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 支付应用信息列表\r\n      list: [],\r\n      // 弹出层标题\r\n      title: \"\",\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n        name: null,\r\n        status: null,\r\n        createTime: []\r\n      },\r\n      // 表单参数\r\n      form: {},\r\n      // 表单校验\r\n      rules: {\r\n        name: [{required: true, message: \"应用名不能为空\", trigger: \"blur\"}],\r\n        status: [{required: true, message: \"开启状态不能为空\", trigger: \"blur\"}],\r\n        orderNotifyUrl: [{required: true, message: \"支付结果的回调地址不能为空\", trigger: \"blur\"}],\r\n        refundNotifyUrl: [{required: true, message: \"退款结果的回调地址不能为空\", trigger: \"blur\"}],\r\n      },\r\n      // 支付渠道枚举\r\n      payChannelEnum: PayChannelEnum,\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    /** 查询列表 */\r\n    getList() {\r\n      this.loading = true;\r\n      // 执行查询\r\n      getAppPage(this.queryParams).then(response => {\r\n        this.list = response.data.list;\r\n        this.total = response.data.total;\r\n        this.loading = false;\r\n      });\r\n    },\r\n    /** 取消按钮 */\r\n    cancel() {\r\n      this.open = false;\r\n      this.reset();\r\n    },\r\n    /** 表单重置 */\r\n    reset() {\r\n      this.form = {\r\n        id: undefined,\r\n        name: undefined,\r\n        status: CommonStatusEnum.ENABLE,\r\n        remark: undefined,\r\n        orderNotifyUrl: undefined,\r\n        refundNotifyUrl: undefined,\r\n      };\r\n      this.resetForm(\"form\");\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageNo = 1;\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd() {\r\n      this.reset();\r\n      this.open = true;\r\n      this.title = \"添加支付应用信息\";\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.reset();\r\n      const id = row.id;\r\n      getApp(id).then(response => {\r\n        this.form = response.data;\r\n        this.open = true;\r\n        this.title = \"修改支付应用信息\";\r\n      });\r\n    },\r\n    // 用户状态修改\r\n    handleStatusChange(row) {\r\n      let text = row.status === CommonStatusEnum.ENABLE ? \"启用\" : \"停用\";\r\n      this.$modal.confirm('确认要\"' + text + '\"\"' + row.name + '\"应用吗?').then(function () {\r\n        return changeAppStatus(row.id, row.status);\r\n      }).then(() => {\r\n        this.$modal.msgSuccess(text + \"成功\");\r\n      }).catch(function () {\r\n        row.status = row.status === CommonStatusEnum.ENABLE ? CommonStatusEnum.DISABLE\r\n          : CommonStatusEnum.ENABLE;\r\n      });\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm() {\r\n      this.$refs[\"form\"].validate(valid => {\r\n        if (!valid) {\r\n          return;\r\n        }\r\n        // 修改的提交\r\n        if (this.form.id != null) {\r\n          updateApp(this.form).then(response => {\r\n            this.$modal.msgSuccess(\"修改成功\");\r\n            this.open = false;\r\n            this.getList();\r\n          });\r\n          return;\r\n        }\r\n        // 添加的提交\r\n        createApp(this.form).then(response => {\r\n          this.$modal.msgSuccess(\"新增成功\");\r\n          this.open = false;\r\n          this.getList();\r\n        });\r\n      });\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      this.$modal.confirm('是否确认删除支付应用信息编号为\"' + row.id + '\"的数据项?').then(function () {\r\n        return deleteApp(row.id);\r\n      }).then(() => {\r\n        this.getList();\r\n        this.$modal.msgSuccess(\"删除成功\");\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });\r\n      });\r\n    },\r\n    /**\r\n     * 修改支付渠道信息\r\n     */\r\n    handleChannel(row, code) {\r\n      if (code.indexOf('alipay_') === 0) {\r\n        this.$refs['alipayChannelFormRef'].open(row.id, code);\r\n        return\r\n      }\r\n      if (code.indexOf('wx_') === 0) {\r\n        this.$refs['weixinChannelFormRef'].open(row.id, code);\r\n        return\r\n      }\r\n      if (code === 'mock') {\r\n        this.$refs['noneConfigChannelFormRef'].open(row.id, code);\r\n        return\r\n      }\r\n      if (code === 'wallet') {\r\n        this.$refs['noneConfigChannelFormRef'].open(row.id, code);\r\n        return\r\n      }\r\n    },\r\n    /**\r\n     * 根据渠道编码判断渠道列表中是否存在\r\n     *\r\n     * @param channels 渠道列表\r\n     * @param channelCode 渠道编码\r\n     */\r\n    isChannelExists(channels, channelCode) {\r\n      return channels && channels.indexOf(channelCode) !== -1;\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}