{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\mall\\product\\spu\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\mall\\product\\spu\\index.vue","mtime":1704630437937},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\babel.config.js","mtime":1704630437199},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy84OTQyNS9JZGVhUHJvamVjdHMvcXItY29kZS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7CnZhciBfb2JqZWN0U3ByZWFkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQzovVXNlcnMvODk0MjUvSWRlYVByb2plY3RzL3FyLWNvZGUtdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDIuanMiKSk7CnZhciBfc3B1ID0gcmVxdWlyZSgiQC9hcGkvbWFsbC9wcm9kdWN0L3NwdSIpOwp2YXIgX2NhdGVnb3J5ID0gcmVxdWlyZSgiQC9hcGkvbWFsbC9wcm9kdWN0L2NhdGVnb3J5Iik7CnZhciBfYnJhbmQgPSByZXF1aXJlKCJAL2FwaS9tYWxsL3Byb2R1Y3QvYnJhbmQiKTsKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCJAL3V0aWxzL2NvbnN0YW50cyIpOwp2YXIgX2RlZmF1bHQgPSBleHBvcnRzLmRlZmF1bHQgPSB7CiAgbmFtZTogIlByb2R1Y3RTcHUiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RpdmVUYWJzOiAiYWxsIiwKICAgICAgcHJvcE5hbWU6IHsKICAgICAgICBjaGVja1N0cmljdGx5OiB0cnVlLAogICAgICAgIGxhYmVsOiAibmFtZSIsCiAgICAgICAgdmFsdWU6ICJpZCIKICAgICAgfSwKICAgICAgYnJhbmRMaXN0OiBbXSwKICAgICAgY2F0ZWdvcnlMaXN0OiBbXSwKICAgICAgLy8g6YGu572p5bGCCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIC8vIOWvvOWHuumBrue9qeWxggogICAgICBleHBvcnRMb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g5pi+56S65pCc57Si5p2h5Lu2CiAgICAgIHNob3dTZWFyY2g6IHRydWUsCiAgICAgIC8vIOaAu+adoeaVsAogICAgICB0b3RhbDogMCwKICAgICAgLy8g5ZWG5ZOBc3B15YiX6KGoCiAgICAgIGxpc3Q6IFtdLAogICAgICBkYXRlUmFuZ2VDcmVhdGVUaW1lOiBbXSwKICAgICAgLy8g5p+l6K+i5Y+C5pWwCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgcGFnZU5vOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICBuYW1lOiBudWxsLAogICAgICAgIGNvZGU6IG51bGwsCiAgICAgICAgY2F0ZWdvcnlJZHM6IFtdLAogICAgICAgIGNhdGVnb3J5SWQ6IG51bGwsCiAgICAgICAgYnJhbmRJZDogbnVsbCwKICAgICAgICBzdGF0dXM6IG51bGwsCiAgICAgICAgc2FsZXNDb3VudE1pbjogbnVsbCwKICAgICAgICBzYWxlc0NvdW50TWF4OiBudWxsLAogICAgICAgIG1hcmtldFByaWNlTWluOiBudWxsLAogICAgICAgIG1hcmtldFByaWNlTWF4OiBudWxsCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgICB0aGlzLmdldExpc3RDYXRlZ29yeSgpOwogICAgdGhpcy5nZXRMaXN0QnJhbmQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKiDmn6Xor6LliIbnsbvliJfooaggKi9nZXRMaXN0Q2F0ZWdvcnk6IGZ1bmN0aW9uIGdldExpc3RDYXRlZ29yeSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgLy8g5omn6KGM5p+l6K+iCiAgICAgICgwLCBfY2F0ZWdvcnkuZ2V0UHJvZHVjdENhdGVnb3J5TGlzdCkoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmNhdGVnb3J5TGlzdCA9IF90aGlzLmhhbmRsZVRyZWUocmVzcG9uc2UuZGF0YSwgImlkIiwgInBhcmVudElkIik7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDmn6Xor6Llk4HniYzliJfooaggKi9nZXRMaXN0QnJhbmQ6IGZ1bmN0aW9uIGdldExpc3RCcmFuZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIC8vIOaJp+ihjOafpeivogogICAgICAoMCwgX2JyYW5kLmdldEJyYW5kTGlzdCkoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5icmFuZExpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog5p+l6K+i5YiX6KGoICovZ2V0TGlzdDogZnVuY3Rpb24gZ2V0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIC8vIOWkhOeQhuafpeivouWPguaVsAogICAgICB2YXIgcGFyYW1zID0gKDAsIF9vYmplY3RTcHJlYWQyLmRlZmF1bHQpKHt9LCB0aGlzLnF1ZXJ5UGFyYW1zKTsKICAgICAgcGFyYW1zLm1hcmtldFByaWNlTWluID0gdGhpcy5xdWVyeVBhcmFtcy5tYXJrZXRQcmljZU1pbiA9PT0gbnVsbCA/IG51bGwgOiBwYXJhbXMubWFya2V0UHJpY2VNaW4gKiAxMDA7CiAgICAgIHBhcmFtcy5tYXJrZXRQcmljZU1heCA9IHRoaXMucXVlcnlQYXJhbXMubWFya2V0UHJpY2VNYXggPT09IG51bGwgPyBudWxsIDogcGFyYW1zLm1hcmtldFByaWNlTWF4ICogMTAwOwogICAgICBwYXJhbXMuY2F0ZWdvcnlJZCA9IHRoaXMucXVlcnlQYXJhbXMuY2F0ZWdvcnlJZHNbdGhpcy5xdWVyeVBhcmFtcy5jYXRlZ29yeUlkcy5sZW5ndGggLSAxXTsKICAgICAgdGhpcy5hZGRCZWdpbkFuZEVuZFRpbWUocGFyYW1zLCB0aGlzLmRhdGVSYW5nZUNyZWF0ZVRpbWUsICJjcmVhdGVUaW1lIik7CiAgICAgIC8vIOaJp+ihjOafpeivogogICAgICAoMCwgX3NwdS5nZXRTcHVQYWdlKShwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7CiAgICAgICAgX3RoaXMzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDsKICAgICAgICBfdGhpczMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovaGFuZGxlUXVlcnk6IGZ1bmN0aW9uIGhhbmRsZVF1ZXJ5KCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhZ2VObyA9IDE7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi9yZXNldFF1ZXJ5OiBmdW5jdGlvbiByZXNldFF1ZXJ5KCkgewogICAgICB0aGlzLmRhdGVSYW5nZUNyZWF0ZVRpbWUgPSBbXTsKICAgICAgdGhpcy4kcmVmcy5jYXRlZ29yeS4kcmVmcy5wYW5lbC5jaGVja2VkVmFsdWUgPSBbXTsgLy/kuZ/lj6/ku6XmmK/mjIflrprnmoTlgLzvvIzpu5jorqTov5Tlm57lgLzmmK/mlbDnu4TvvIzkuZ/lj6/ku6Xov5Tlm57ljZXkuKrlgLwKICAgICAgdGhpcy4kcmVmcy5jYXRlZ29yeS4kcmVmcy5wYW5lbC5hY3RpdmVQYXRoID0gW107CiAgICAgIHRoaXMuJHJlZnMuY2F0ZWdvcnkuJHJlZnMucGFuZWwuc3luY0FjdGl2ZVBhdGgoKTsKICAgICAgdGhpcy5yZXNldEZvcm0oInF1ZXJ5Rm9ybSIpOwogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7CiAgICB9LAogICAgLyoqIOaWsOWinuaMiemSruaTjeS9nCAqL2hhbmRsZUFkZDogZnVuY3Rpb24gaGFuZGxlQWRkKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ1Byb2R1Y3RTcHVDcmVhdGUnCiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDkv67mlLnmjInpkq7mk43kvZwgKi9oYW5kbGVVcGRhdGU6IGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZShyb3cpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdQcm9kdWN0U3B1VXBkYXRlJywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHNwdUlkOiByb3cuaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi9oYW5kbGVEZWxldGU6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZShyb3cpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHZhciBpZCA9IHJvdy5pZDsKICAgICAgdGhpcy4kbW9kYWwuY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk5ZWG5ZOBc3B157yW5Y+35Li6IicgKyBpZCArICci55qE5pWw5o2u6aG5PycpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAoMCwgX3NwdS5kZWxldGVTcHUpKGlkKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LmdldExpc3QoKTsKICAgICAgICBfdGhpczQuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9LAogICAgZm9ybWF0UHJpY2U6IGZ1bmN0aW9uIGZvcm1hdFByaWNlKHJvdywgY29sdW1uLCBjZWxsVmFsdWUpIHsKICAgICAgcmV0dXJuICfvv6UnICsgdGhpcy5kaXZpZGUoY2VsbFZhbHVlLCAxMDApOwogICAgfSwKICAgIC8vIOmAieS4rSB0YWIKICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayh2YWwpIHsKICAgICAgaWYgKHZhbC5uYW1lID09PSAiYWxsIikgewogICAgICAgIHRoaXMucXVlcnlQYXJhbXMuc3RhdHVzID0gdW5kZWZpbmVkOwogICAgICAgIHRoaXMucXVlcnlQYXJhbXMuYWxhcm1TdG9jayA9IHVuZGVmaW5lZDsKICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSA9PT0gIm9uIikgewogICAgICAgIHRoaXMucXVlcnlQYXJhbXMuc3RhdHVzID0gX2NvbnN0YW50cy5Qcm9kdWN0U3B1U3RhdHVzRW51bS5FTkFCTEUuc3RhdHVzOwogICAgICAgIHRoaXMucXVlcnlQYXJhbXMuYWxhcm1TdG9jayA9IHVuZGVmaW5lZDsKICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSA9PT0gIm9mZiIpIHsKICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnN0YXR1cyA9IF9jb25zdGFudHMuUHJvZHVjdFNwdVN0YXR1c0VudW0uRElTQUJMRS5zdGF0dXM7CiAgICAgICAgdGhpcy5xdWVyeVBhcmFtcy5hbGFybVN0b2NrID0gdW5kZWZpbmVkOwogICAgICB9IGVsc2UgaWYgKHZhbC5uYW1lID09PSAicmVtaW5kIikgewogICAgICAgIHRoaXMucXVlcnlQYXJhbXMuc3RhdHVzID0gdW5kZWZpbmVkOwogICAgICAgIHRoaXMucXVlcnlQYXJhbXMuYWxhcm1TdG9jayA9IHRydWU7CiAgICAgIH0KICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["_spu","require","_category","_brand","_constants","_default","exports","default","name","data","activeTabs","propName","checkStrictly","label","value","brandList","categoryList","loading","exportLoading","showSearch","total","list","dateRangeCreateTime","queryParams","pageNo","pageSize","code","categoryIds","categoryId","brandId","status","salesCountMin","salesCountMax","marketPriceMin","marketPriceMax","created","getList","getListCategory","getListBrand","methods","_this","getProductCategoryList","then","response","handleTree","_this2","getBrandList","_this3","params","_objectSpread2","length","addBeginAndEndTime","getSpuPage","handleQuery","resetQuery","$refs","category","panel","checkedValue","activePath","syncActivePath","resetForm","handleAdd","$router","push","handleUpdate","row","spuId","id","handleDelete","_this4","$modal","confirm","deleteSpu","msgSuccess","catch","formatPrice","column","cellValue","divide","handleClick","val","undefined","alarmStock","ProductSpuStatusEnum","ENABLE","DISABLE"],"sources":["src/views/mall/product/spu/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <doc-alert title=\"功能开启\" url=\"https://doc.iocoder.cn/mall/build/\" />\r\n\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\r\n      <el-form-item label=\"商品名称\" prop=\"name\">\r\n        <el-input v-model=\"queryParams.name\" placeholder=\"请输入商品名称\" clearable @keyup.enter.native=\"handleQuery\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品编码\" prop=\"code\">\r\n        <el-input v-model=\"queryParams.code\" placeholder=\"请输入商品编码\" clearable @keyup.enter.native=\"handleQuery\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品分类\" prop=\"categoryIds\">\r\n        <el-cascader v-model=\"queryParams.categoryIds\" placeholder=\"请输入商品分类\"\r\n                     :options=\"categoryList\" :props=\"propName\" clearable ref=\"category\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品品牌\" prop=\"brandId\">\r\n        <el-select v-model=\"queryParams.brandId\" placeholder=\"请输入商品品牌\" clearable @keyup.enter.native=\"handleQuery\">\r\n          <el-option v-for=\"item in brandList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"/>\r\n        </el-select>\r\n      </el-form-item>\r\n      <!-- TODO 待实现：商品类型 -->\r\n      <!-- TODO 待实现：商品标签 -->\r\n      <!-- TODO 待实现：营销活动 -->\r\n      <!-- TODO 前端优化：商品销量、商品价格，排的整齐一点 -->\r\n      <el-form-item label=\"商品销量\">\r\n        <el-col :span=\"7\" style=\"padding-left:0\">\r\n          <el-form-item prop=\"salesCountMin\">\r\n            <el-input v-model=\"queryParams.salesCountMin\" placeholder=\"最低销量\" clearable @keyup.enter.native=\"handleQuery\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"1\">-</el-col>\r\n        <el-col :span=\"7\" style=\"padding-left:0\">\r\n          <el-form-item prop=\"salesCountMax\">\r\n            <el-input v-model=\"queryParams.salesCountMax\" placeholder=\"最高销量\" clearable @keyup.enter.native=\"handleQuery\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品价格\" prop=\"code\">\r\n        <el-col :span=\"7\" style=\"padding-left:0\">\r\n          <el-form-item prop=\"marketPriceMin\">\r\n            <el-input v-model=\"queryParams.marketPriceMin\" placeholder=\"最低价格\" clearable @keyup.enter.native=\"handleQuery\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"1\">-</el-col>\r\n        <el-col :span=\"7\" style=\"padding-left:0\">\r\n          <el-form-item prop=\"marketPriceMax\">\r\n            <el-input v-model=\"queryParams.marketPriceMax\" placeholder=\"最高价格\" clearable @keyup.enter.native=\"handleQuery\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <!-- 操作工具栏 -->\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"primary\" plain icon=\"el-icon-plus\" size=\"mini\" @click=\"handleAdd\"\r\n                   v-hasPermi=\"['product:spu:create']\">添加商品</el-button>\r\n      </el-col>\r\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"/>\r\n    </el-row>\r\n\r\n    <el-tabs v-model=\"activeTabs\" type=\"card\" @tab-click=\"handleClick\">\r\n      <!-- 全部 -->\r\n      <el-tab-pane label=\"全部\" name=\"all\">\r\n        <!-- 列表 -->\r\n        <el-table v-loading=\"loading\" :data=\"list\">\r\n          <el-table-column label=\"商品信息\" align=\"center\" width=\"260\">\r\n            <template v-slot=\"scope\">\r\n              <div class=\"product-info\">\r\n                <img v-if=\"scope.row.picUrls\" :src=\"scope.row.picUrls[0]\" alt=\"分类图片\" class=\"img-height\" />\r\n                <div class=\"message\">{{ scope.row.name }}</div>\r\n              </div>\r\n            </template>\r\n            <!-- TODO 前端优化：可以有个 + 号，点击后，展示每个 sku -->\r\n          </el-table-column>\r\n          <el-table-column label=\"价格\" align=\"center\" prop=\"marketPrice\" :formatter=\"formatPrice\"/>\r\n          <el-table-column label=\"库存\" align=\"center\" prop=\"totalStock\"/>\r\n          <el-table-column label=\"销量\" align=\"center\" prop=\"salesCount\"/>\r\n          <el-table-column label=\"排序\" align=\"center\" prop=\"sort\"/>\r\n          <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n            <template v-slot=\"scope\">\r\n              <span>{{ parseTime(scope.row.createTime) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"状态\" align=\"center\" prop=\"status\">\r\n            <template v-slot=\"scope\">\r\n              <dict-tag :type=\"DICT_TYPE.PRODUCT_SPU_STATUS\" :value=\"scope.row.status\"/>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n            <template v-slot=\"scope\">\r\n              <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(scope.row)\"\r\n                         v-hasPermi=\"['product:spu:update']\">修改</el-button>\r\n              <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row)\"\r\n                         v-hasPermi=\"['product:spu:delete']\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-tab-pane>\r\n\r\n      <!-- 销售中 -->\r\n      <el-tab-pane label=\"销售中\" name=\"on\">\r\n        <!-- 列表 -->\r\n        <el-table v-loading=\"loading\" :data=\"list\">\r\n          <el-table-column label=\"商品信息\" align=\"center\" width=\"260\">\r\n            <template v-slot=\"scope\">\r\n              <div class=\"product-info\">\r\n                <img v-if=\"scope.row.picUrls\" :src=\"scope.row.picUrls[0]\" alt=\"分类图片\" class=\"img-height\"/>\r\n                <div class=\"message\">{{ scope.row.name }}</div>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"价格\" align=\"center\" prop=\"marketPrice\" :formatter=\"formatPrice\"/>\r\n          <el-table-column label=\"库存\" align=\"center\" prop=\"totalStock\"/>\r\n          <el-table-column label=\"销量\" align=\"center\" prop=\"salesCount\"/>\r\n          <el-table-column label=\"排序\" align=\"center\" prop=\"sort\"/>\r\n          <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n            <template v-slot=\"scope\">\r\n              <span>{{ parseTime(scope.row.createTime) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"状态\" align=\"center\" prop=\"status\">\r\n            <template v-slot=\"scope\">\r\n              <dict-tag :type=\"DICT_TYPE.PRODUCT_SPU_STATUS\" :value=\"scope.row.status\"/>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n            <template v-slot=\"scope\">\r\n              <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(scope.row)\"\r\n                         v-hasPermi=\"['product:spu:update']\">修改</el-button>\r\n              <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row)\"\r\n                         v-hasPermi=\"['product:spu:delete']\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-tab-pane>\r\n\r\n      <!-- 仓库中 -->\r\n      <el-tab-pane label=\"仓库中\" name=\"off\">\r\n        <!-- 列表 -->\r\n        <el-table v-loading=\"loading\" :data=\"list\">\r\n          <el-table-column label=\"商品信息\" align=\"center\" width=\"260\">\r\n            <template v-slot=\"scope\">\r\n              <div class=\"product-info\">\r\n                <img v-if=\"scope.row.picUrls\" :src=\"scope.row.picUrls[0]\" alt=\"分类图片\" class=\"img-height\"/>\r\n                <div class=\"message\">{{ scope.row.name }}</div>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"价格\" align=\"center\" prop=\"marketPrice\" :formatter=\"formatPrice\"/>\r\n          <el-table-column label=\"库存\" align=\"center\" prop=\"totalStock\"/>\r\n          <el-table-column label=\"销量\" align=\"center\" prop=\"salesCount\"/>\r\n          <el-table-column label=\"排序\" align=\"center\" prop=\"sort\"/>\r\n          <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n            <template v-slot=\"scope\">\r\n              <span>{{ parseTime(scope.row.createTime) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"状态\" align=\"center\" prop=\"status\">\r\n            <template v-slot=\"scope\">\r\n              <dict-tag :type=\"DICT_TYPE.PRODUCT_SPU_STATUS\" :value=\"scope.row.status\"/>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n            <template v-slot=\"scope\">\r\n              <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(scope.row)\"\r\n                         v-hasPermi=\"['product:spu:update']\">修改</el-button>\r\n              <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row)\"\r\n                         v-hasPermi=\"['product:spu:delete']\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-tab-pane>\r\n\r\n      <!-- 预警中 -->\r\n      <el-tab-pane label=\"预警中\" name=\"remind\">\r\n        <!-- 列表 -->\r\n        <el-table v-loading=\"loading\" :data=\"list\">\r\n          <el-table-column label=\"商品信息\" align=\"center\" width=\"260\">\r\n            <template v-slot=\"scope\">\r\n              <div class=\"product-info\">\r\n                <img v-if=\"scope.row.picUrls\" :src=\"scope.row.picUrls[0]\" alt=\"分类图片\" class=\"img-height\"/>\r\n                <div class=\"message\">{{ scope.row.name }}</div>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"价格\" align=\"center\" prop=\"marketPrice\" :formatter=\"formatPrice\"/>\r\n          <el-table-column label=\"库存\" align=\"center\" prop=\"totalStock\"/>\r\n          <el-table-column label=\"销量\" align=\"center\" prop=\"salesCount\"/>\r\n          <el-table-column label=\"排序\" align=\"center\" prop=\"sort\"/>\r\n          <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n            <template v-slot=\"scope\">\r\n              <span>{{ parseTime(scope.row.createTime) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"状态\" align=\"center\" prop=\"status\">\r\n            <template v-slot=\"scope\">\r\n              <dict-tag :type=\"DICT_TYPE.PRODUCT_SPU_STATUS\" :value=\"scope.row.status\"/>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n            <template v-slot=\"scope\">\r\n              <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(scope.row)\"\r\n                         v-hasPermi=\"['product:spu:update']\">修改</el-button>\r\n              <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row)\"\r\n                         v-hasPermi=\"['product:spu:delete']\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n\r\n    <!-- 分页组件 -->\r\n    <pagination v-show=\"total > 0\" :total=\"total\" :page.sync=\"queryParams.pageNo\" :limit.sync=\"queryParams.pageSize\"\r\n                @pagination=\"getList\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {deleteSpu, getSpuPage,} from \"@/api/mall/product/spu\";\r\nimport {getProductCategoryList} from \"@/api/mall/product/category\";\r\nimport {getBrandList} from \"@/api/mall/product/brand\";\r\nimport {ProductSpuStatusEnum} from \"@/utils/constants\";\r\n\r\nexport default {\r\n  name: \"ProductSpu\",\r\n  data() {\r\n    return {\r\n      activeTabs: \"all\",\r\n      propName: {\r\n        checkStrictly: true,\r\n        label: \"name\",\r\n        value: \"id\",\r\n      },\r\n      brandList: [],\r\n      categoryList: [],\r\n      // 遮罩层\r\n      loading: true,\r\n      // 导出遮罩层\r\n      exportLoading: false,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 商品spu列表\r\n      list: [],\r\n      dateRangeCreateTime: [],\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n        name: null,\r\n        code: null,\r\n        categoryIds: [],\r\n        categoryId: null,\r\n        brandId: null,\r\n        status: null,\r\n        salesCountMin: null,\r\n        salesCountMax: null,\r\n        marketPriceMin: null,\r\n        marketPriceMax: null,\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n    this.getListCategory()\r\n    this.getListBrand()\r\n  },\r\n  methods: {\r\n    /** 查询分类列表 */\r\n    getListCategory() {\r\n      // 执行查询\r\n      getProductCategoryList().then((response) => {\r\n        this.categoryList = this.handleTree(response.data, \"id\", \"parentId\");\r\n      });\r\n    },\r\n    /** 查询品牌列表 */\r\n    getListBrand() {\r\n      // 执行查询\r\n      getBrandList().then((response) => {\r\n        this.brandList = response.data;\r\n      });\r\n    },\r\n    /** 查询列表 */\r\n    getList() {\r\n      this.loading = true;\r\n      // 处理查询参数\r\n      let params = {...this.queryParams};\r\n      params.marketPriceMin = this.queryParams.marketPriceMin === null ? null : params.marketPriceMin * 100;\r\n      params.marketPriceMax = this.queryParams.marketPriceMax === null ? null : params.marketPriceMax * 100;\r\n      params.categoryId = this.queryParams.categoryIds[this.queryParams.categoryIds.length - 1];\r\n      this.addBeginAndEndTime(params, this.dateRangeCreateTime, \"createTime\");\r\n      // 执行查询\r\n      getSpuPage(params).then((response) => {\r\n        this.list = response.data.list;\r\n        this.total = response.data.total;\r\n        this.loading = false;\r\n      });\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageNo = 1;\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.dateRangeCreateTime = [];\r\n      this.$refs.category.$refs.panel.checkedValue = [];//也可以是指定的值，默认返回值是数组，也可以返回单个值\r\n      this.$refs.category.$refs.panel.activePath = [];\r\n      this.$refs.category.$refs.panel.syncActivePath();\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd() {\r\n      this.$router.push({ name: 'ProductSpuCreate'})\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.$router.push({ name: 'ProductSpuUpdate', params: { spuId: row.id }})\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      const id = row.id;\r\n      this.$modal\r\n        .confirm('是否确认删除商品spu编号为\"' + id + '\"的数据项?')\r\n        .then(function () {\r\n          return deleteSpu(id);\r\n        }).then(() => {\r\n          this.getList();\r\n          this.$modal.msgSuccess(\"删除成功\");\r\n        }).catch(() => {\r\n        });\r\n    },\r\n    formatPrice(row, column, cellValue) {\r\n      return '￥' + this.divide(cellValue, 100);\r\n    },\r\n    // 选中 tab\r\n    handleClick(val) {\r\n      if (val.name === \"all\") {\r\n        this.queryParams.status = undefined;\r\n        this.queryParams.alarmStock = undefined;\r\n      } else if (val.name === \"on\") {\r\n        this.queryParams.status = ProductSpuStatusEnum.ENABLE.status;\r\n        this.queryParams.alarmStock = undefined;\r\n      } else if (val.name === \"off\") {\r\n        this.queryParams.status = ProductSpuStatusEnum.DISABLE.status;\r\n        this.queryParams.alarmStock = undefined;\r\n      } else if (val.name === \"remind\") {\r\n        this.queryParams.status = undefined;\r\n        this.queryParams.alarmStock = true;\r\n      }\r\n      this.getList();\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n.app-container {\r\n  .el-tag + .el-tag {\r\n    margin-left: 10px;\r\n  }\r\n\r\n  .product-info {\r\n    display: flex;\r\n\r\n    .img-height {\r\n      height: 50px;\r\n      width: 50px;\r\n    }\r\n\r\n    .message {\r\n      margin-left: 10px;\r\n      text-overflow: ellipsis;\r\n      display: -webkit-box;\r\n      -webkit-line-clamp: 2;\r\n      word-break: break-all;\r\n      -webkit-box-orient: vertical;\r\n      white-space: normal;\r\n      overflow: hidden;\r\n      height: 50px;\r\n      line-height: 25px;\r\n    }\r\n  }\r\n\r\n}\r\n</style>\r\n"],"mappings":"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"}]}