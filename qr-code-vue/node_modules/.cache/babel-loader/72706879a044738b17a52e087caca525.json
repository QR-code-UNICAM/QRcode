{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\infra\\codegen\\editTable.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\infra\\codegen\\editTable.vue","mtime":1704630437877},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\babel.config.js","mtime":1704630437199},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy84OTQyNS9JZGVhUHJvamVjdHMvcXItY29kZS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIik7CnZhciBfdG9Db25zdW1hYmxlQXJyYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJDOi9Vc2Vycy84OTQyNS9JZGVhUHJvamVjdHMvcXItY29kZS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXkuanMiKSk7CnZhciBfY29kZWdlbiA9IHJlcXVpcmUoIkAvYXBpL2luZnJhL2NvZGVnZW4iKTsKdmFyIF90eXBlID0gcmVxdWlyZSgiQC9hcGkvc3lzdGVtL2RpY3QvdHlwZSIpOwp2YXIgX21lbnUgPSByZXF1aXJlKCJAL2FwaS9zeXN0ZW0vbWVudSIpOwp2YXIgX2Jhc2ljSW5mb0Zvcm0gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vYmFzaWNJbmZvRm9ybSIpKTsKdmFyIF9nZW5JbmZvRm9ybSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9nZW5JbmZvRm9ybSIpKTsKdmFyIF9zb3J0YWJsZWpzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJzb3J0YWJsZWpzIikpOwp2YXIgX2RlZmF1bHQgPSBleHBvcnRzLmRlZmF1bHQgPSB7CiAgbmFtZTogIkdlbkVkaXQiLAogIGNvbXBvbmVudHM6IHsKICAgIGJhc2ljSW5mb0Zvcm06IF9iYXNpY0luZm9Gb3JtLmRlZmF1bHQsCiAgICBnZW5JbmZvRm9ybTogX2dlbkluZm9Gb3JtLmRlZmF1bHQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDpgInkuK3pgInpobnljaHnmoQgbmFtZQogICAgICBhY3RpdmVOYW1lOiAiY2xvdW0iLAogICAgICAvLyDooajmoLznmoTpq5jluqYKICAgICAgdGFibGVIZWlnaHQ6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgLSAyNDUgKyAicHgiLAogICAgICAvLyDlrZflhbjkv6Hmga8KICAgICAgZGljdE9wdGlvbnM6IFtdLAogICAgICBmb3JtRGF0YToge30sCiAgICAgIC8vIOiPnOWNleS/oeaBrwogICAgICBtZW51czogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHZhciB0YWJsZUlkID0gdGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy50YWJsZUlkOwogICAgaWYgKHRhYmxlSWQpIHsKICAgICAgLy8g6I635Y+W6KGo6K+m57uG5L+h5oGvCiAgICAgICgwLCBfY29kZWdlbi5nZXRDb2RlZ2VuRGV0YWlsKSh0YWJsZUlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5mb3JtRGF0YSA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgICAgLyoqIOafpeivouWtl+WFuOS4i+aLieWIl+ihqCAqLwogICAgICAoMCwgX3R5cGUubGlzdEFsbFNpbXBsZSkoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmRpY3RPcHRpb25zID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICAgIC8qKiDmn6Xor6Loj5zljZXkuIvmi4nliJfooaggKi8KICAgICAgKDAsIF9tZW51Lmxpc3RTaW1wbGVNZW51cykoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBfdGhpcyRtZW51czsKICAgICAgICBfdGhpcy5tZW51cyA9IFtdOwogICAgICAgIChfdGhpcyRtZW51cyA9IF90aGlzLm1lbnVzKS5wdXNoLmFwcGx5KF90aGlzJG1lbnVzLCAoMCwgX3RvQ29uc3VtYWJsZUFycmF5Mi5kZWZhdWx0KShfdGhpcy5oYW5kbGVUcmVlKHJlc3BvbnNlLmRhdGEsICJpZCIpKSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLyoqIOaPkOS6pOaMiemSriAqL3N1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgYmFzaWNGb3JtID0gdGhpcy4kcmVmcy5iYXNpY0luZm8uJHJlZnMuYmFzaWNJbmZvRm9ybTsKICAgICAgdmFyIGdlbkZvcm0gPSB0aGlzLiRyZWZzLmdlbkluZm8uJHJlZnMuZ2VuSW5mb0Zvcm07CiAgICAgIFByb21pc2UuYWxsKFtiYXNpY0Zvcm0sIGdlbkZvcm1dLm1hcCh0aGlzLmdldEZvcm1Qcm9taXNlKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIHZhbGlkYXRlUmVzdWx0ID0gcmVzLmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gISFpdGVtOwogICAgICAgIH0pOwogICAgICAgIGlmICh2YWxpZGF0ZVJlc3VsdCkgewogICAgICAgICAgdmFyIGdlblRhYmxlID0ge307CiAgICAgICAgICBnZW5UYWJsZS50YWJsZSA9IE9iamVjdC5hc3NpZ24oe30sIGJhc2ljRm9ybS5tb2RlbCwgZ2VuRm9ybS5tb2RlbCk7CiAgICAgICAgICBnZW5UYWJsZS5jb2x1bW5zID0gX3RoaXMyLmZvcm1EYXRhLmNvbHVtbnM7CiAgICAgICAgICBnZW5UYWJsZS5wYXJhbXMgPSB7CiAgICAgICAgICAgIHRyZWVDb2RlOiBnZW5UYWJsZS50cmVlQ29kZSwKICAgICAgICAgICAgdHJlZU5hbWU6IGdlblRhYmxlLnRyZWVOYW1lLAogICAgICAgICAgICB0cmVlUGFyZW50Q29kZTogZ2VuVGFibGUudHJlZVBhcmVudENvZGUsCiAgICAgICAgICAgIHBhcmVudE1lbnVJZDogZ2VuVGFibGUucGFyZW50TWVudUlkCiAgICAgICAgICB9OwogICAgICAgICAgKDAsIF9jb2RlZ2VuLnVwZGF0ZUNvZGVnZW4pKGdlblRhYmxlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXMyLiRtb2RhbC5tc2dTdWNjZXNzKCLkv67mlLnmiJDlip/vvIEiKTsKICAgICAgICAgICAgX3RoaXMyLmNsb3NlKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLiRtb2RhbC5tc2dFcnJvcigi6KGo5Y2V5qCh6aqM5pyq6YCa6L+H77yM6K+36YeN5paw5qOA5p+l5o+Q5Lqk5YaF5a65Iik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRGb3JtUHJvbWlzZTogZnVuY3Rpb24gZ2V0Rm9ybVByb21pc2UoZm9ybSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBmb3JtLnZhbGlkYXRlKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHJlc29sdmUocmVzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqIOWFs+mXreaMiemSriAqL2Nsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy4kdGFiLmNsb3NlT3BlblBhZ2UoewogICAgICAgIHBhdGg6ICIvaW5mcmEvY29kZWdlbiIsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHQ6IERhdGUubm93KCksCiAgICAgICAgICBwYWdlTnVtOiB0aGlzLiRyb3V0ZS5xdWVyeS5wYWdlTnVtCiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgIHZhciBlbCA9IHRoaXMuJHJlZnMuZHJhZ1RhYmxlLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCIuZWwtdGFibGVfX2JvZHktd3JhcHBlciA+IHRhYmxlID4gdGJvZHkiKVswXTsKICAgIHZhciBzb3J0YWJsZSA9IF9zb3J0YWJsZWpzLmRlZmF1bHQuY3JlYXRlKGVsLCB7CiAgICAgIGhhbmRsZTogIi5hbGxvd0RyYWciLAogICAgICBvbkVuZDogZnVuY3Rpb24gb25FbmQoZXZ0KSB7CiAgICAgICAgdmFyIHRhcmdldFJvdyA9IF90aGlzMy5jb2x1bW5zLnNwbGljZShldnQub2xkSW5kZXgsIDEpWzBdOwogICAgICAgIF90aGlzMy5jb2x1bW5zLnNwbGljZShldnQubmV3SW5kZXgsIDAsIHRhcmdldFJvdyk7CiAgICAgICAgZm9yICh2YXIgaW5kZXggaW4gX3RoaXMzLmNvbHVtbnMpIHsKICAgICAgICAgIF90aGlzMy5jb2x1bW5zW2luZGV4XS5zb3J0ID0gcGFyc2VJbnQoaW5kZXgpICsgMTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0KfTs="},{"version":3,"names":["_codegen","require","_type","_menu","_basicInfoForm","_interopRequireDefault","_genInfoForm","_sortablejs","_default","exports","default","name","components","basicInfoForm","genInfoForm","data","activeName","tableHeight","document","documentElement","scrollHeight","dictOptions","formData","menus","created","_this","tableId","$route","params","getCodegenDetail","then","res","listAllSimpleDictType","response","listSimpleMenus","_this$menus","push","apply","_toConsumableArray2","handleTree","methods","submitForm","_this2","basicForm","$refs","basicInfo","genForm","genInfo","Promise","all","map","getFormPromise","validateResult","every","item","genTable","table","Object","assign","model","columns","treeCode","treeName","treeParentCode","parentMenuId","updateCodegen","$modal","msgSuccess","close","msgError","form","resolve","validate","$tab","closeOpenPage","path","query","t","Date","now","pageNum","mounted","_this3","el","dragTable","$el","querySelectorAll","sortable","Sortable","create","handle","onEnd","evt","targetRow","splice","oldIndex","newIndex","index","sort","parseInt"],"sources":["src/views/infra/codegen/editTable.vue"],"sourcesContent":["<template>\r\n  <el-card>\r\n    <el-tabs v-model=\"activeName\">\r\n      <el-tab-pane label=\"基本信息\" name=\"basic\">\r\n        <basic-info-form ref=\"basicInfo\" :info=\"formData.table\"/>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"字段信息\" name=\"cloum\">\r\n        <el-table ref=\"dragTable\" :data=\"formData.columns\" row-key=\"columnId\"\r\n                  :max-height=\"tableHeight\">\r\n          <el-table-column\r\n            label=\"字段列名\"\r\n            prop=\"columnName\"\r\n            min-width=\"10%\"\r\n            :show-overflow-tooltip=\"true\"\r\n          />\r\n          <el-table-column label=\"字段描述\" min-width=\"10%\">\r\n            <template v-slot=\"scope\">\r\n              <el-input v-model=\"scope.row.columnComment\"></el-input>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            label=\"物理类型\"\r\n            prop=\"dataType\"\r\n            min-width=\"10%\"\r\n            :show-overflow-tooltip=\"true\"\r\n          />\r\n          <el-table-column label=\"Java类型\" min-width=\"11%\">\r\n            <template v-slot=\"scope\">\r\n              <el-select v-model=\"scope.row.javaType\">\r\n                <el-option label=\"Long\" value=\"Long\"/>\r\n                <el-option label=\"String\" value=\"String\"/>\r\n                <el-option label=\"Integer\" value=\"Integer\"/>\r\n                <el-option label=\"Double\" value=\"Double\"/>\r\n                <el-option label=\"BigDecimal\" value=\"BigDecimal\"/>\r\n                <el-option label=\"LocalDateTime\" value=\"LocalDateTime\"/>\r\n                <el-option label=\"Boolean\" value=\"Boolean\"/>\r\n              </el-select>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"java属性\" min-width=\"10%\">\r\n            <template v-slot=\"scope\">\r\n              <el-input v-model=\"scope.row.javaField\"></el-input>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"插入\" min-width=\"4%\">\r\n            <template v-slot=\"scope\">\r\n              <el-checkbox true-label=\"true\" false-label=\"false\" v-model=\"scope.row.createOperation\"></el-checkbox>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"编辑\" min-width=\"4%\">\r\n            <template v-slot=\"scope\">\r\n              <el-checkbox true-label=\"true\" false-label=\"false\" v-model=\"scope.row.updateOperation\"></el-checkbox>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"列表\" min-width=\"4%\">\r\n            <template v-slot=\"scope\">\r\n              <el-checkbox true-label=\"true\" false-label=\"false\" v-model=\"scope.row.listOperationResult\"></el-checkbox>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"查询\" min-width=\"4%\">\r\n            <template v-slot=\"scope\">\r\n              <el-checkbox true-label=\"true\" false-label=\"false\" v-model=\"scope.row.listOperation\"></el-checkbox>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"查询方式\" min-width=\"10%\">\r\n            <template v-slot=\"scope\">\r\n              <el-select v-model=\"scope.row.listOperationCondition\">\r\n                <el-option label=\"=\" value=\"=\"/>\r\n                <el-option label=\"!=\" value=\"!=\"/>\r\n                <el-option label=\">\" value=\">\"/>\r\n                <el-option label=\">=\" value=\">=\"/>\r\n                <el-option label=\"<\" value=\"<>\"/>\r\n                <el-option label=\"<=\" value=\"<=\"/>\r\n                <el-option label=\"LIKE\" value=\"LIKE\"/>\r\n                <el-option label=\"BETWEEN\" value=\"BETWEEN\"/>\r\n              </el-select>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"允许空\" min-width=\"5%\">\r\n            <template v-slot=\"scope\">\r\n              <el-checkbox true-label=\"true\" false-label=\"false\" v-model=\"scope.row.nullable\"></el-checkbox>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"显示类型\" min-width=\"12%\">\r\n            <template v-slot=\"scope\">\r\n              <el-select v-model=\"scope.row.htmlType\">\r\n                <el-option label=\"文本框\" value=\"input\"/>\r\n                <el-option label=\"文本域\" value=\"textarea\"/>\r\n                <el-option label=\"下拉框\" value=\"select\"/>\r\n                <el-option label=\"单选框\" value=\"radio\"/>\r\n                <el-option label=\"复选框\" value=\"checkbox\"/>\r\n                <el-option label=\"日期控件\" value=\"datetime\"/>\r\n                <el-option label=\"图片上传\" value=\"imageUpload\"/>\r\n                <el-option label=\"文件上传\" value=\"fileUpload\"/>\r\n                <el-option label=\"富文本控件\" value=\"editor\"/>\r\n              </el-select>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"字典类型\" min-width=\"12%\">\r\n            <template v-slot=\"scope\">\r\n              <el-select v-model=\"scope.row.dictType\" clearable filterable placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"dict in dictOptions\"\r\n                  :key=\"dict.id\"\r\n                  :label=\"dict.name\"\r\n                  :value=\"dict.type\"\r\n                />\r\n              </el-select>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"示例\" min-width=\"10%\">\r\n            <template v-slot=\"scope\">\r\n              <el-input v-model=\"scope.row.example\"></el-input>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"生成信息\" name=\"genInfo\">\r\n        <gen-info-form ref=\"genInfo\" :form-data=\"formData.table\" :columns=\"formData.columns\" :menus=\"menus\"/>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n    <el-form label-width=\"100px\">\r\n      <el-form-item style=\"text-align: center;margin-left:-100px;margin-top:10px;\">\r\n        <el-button type=\"primary\" @click=\"submitForm()\">提交</el-button>\r\n        <el-button @click=\"close()\">返回</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-card>\r\n</template>\r\n<script>\r\nimport {getCodegenDetail, updateCodegen} from \"@/api/infra/codegen\";\r\nimport {listAllSimple as listAllSimpleDictType} from \"@/api/system/dict/type\";\r\nimport {listSimpleMenus} from \"@/api/system/menu\";\r\nimport basicInfoForm from \"./basicInfoForm\";\r\nimport genInfoForm from \"./genInfoForm\";\r\nimport Sortable from 'sortablejs'\r\n\r\nexport default {\r\n  name: \"GenEdit\",\r\n  components: {\r\n    basicInfoForm,\r\n    genInfoForm\r\n  },\r\n  data() {\r\n    return {\r\n      // 选中选项卡的 name\r\n      activeName: \"cloum\",\r\n      // 表格的高度\r\n      tableHeight: document.documentElement.scrollHeight - 245 + \"px\",\r\n      // 字典信息\r\n      dictOptions: [],\r\n      formData: {},\r\n      // 菜单信息\r\n      menus: []\r\n    };\r\n  },\r\n  created() {\r\n    const tableId = this.$route.params && this.$route.params.tableId;\r\n    if (tableId) {\r\n      // 获取表详细信息\r\n      getCodegenDetail(tableId).then(res => {\r\n        this.formData = res.data;\r\n      });\r\n      /** 查询字典下拉列表 */\r\n      listAllSimpleDictType().then(response => {\r\n        this.dictOptions = response.data;\r\n      });\r\n      /** 查询菜单下拉列表 */\r\n      listSimpleMenus().then(response => {\r\n        this.menus = [];\r\n        this.menus.push(...this.handleTree(response.data, \"id\"));\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    /** 提交按钮 */\r\n    submitForm() {\r\n      const basicForm = this.$refs.basicInfo.$refs.basicInfoForm;\r\n      const genForm = this.$refs.genInfo.$refs.genInfoForm;\r\n      Promise.all([basicForm, genForm].map(this.getFormPromise)).then(res => {\r\n        const validateResult = res.every(item => !!item);\r\n        if (validateResult) {\r\n          const genTable = {};\r\n          genTable.table = Object.assign({}, basicForm.model, genForm.model);\r\n          genTable.columns = this.formData.columns;\r\n          genTable.params = {\r\n            treeCode: genTable.treeCode,\r\n            treeName: genTable.treeName,\r\n            treeParentCode: genTable.treeParentCode,\r\n            parentMenuId: genTable.parentMenuId\r\n          };\r\n          updateCodegen(genTable).then(res => {\r\n            this.$modal.msgSuccess(\"修改成功！\");\r\n            this.close();\r\n          });\r\n        } else {\r\n          this.$modal.msgError(\"表单校验未通过，请重新检查提交内容\");\r\n        }\r\n      });\r\n    },\r\n    getFormPromise(form) {\r\n      return new Promise(resolve => {\r\n        form.validate(res => {\r\n          resolve(res);\r\n        });\r\n      });\r\n    },\r\n    /** 关闭按钮 */\r\n    close() {\r\n      this.$tab.closeOpenPage({\r\n          path: \"/infra/codegen\",\r\n          query: {t: Date.now(), pageNum: this.$route.query.pageNum}\r\n        }\r\n      );\r\n    }\r\n  },\r\n  mounted() {\r\n    const el = this.$refs.dragTable.$el.querySelectorAll(\".el-table__body-wrapper > table > tbody\")[0];\r\n    const sortable = Sortable.create(el, {\r\n      handle: \".allowDrag\",\r\n      onEnd: evt => {\r\n        const targetRow = this.columns.splice(evt.oldIndex, 1)[0];\r\n        this.columns.splice(evt.newIndex, 0, targetRow);\r\n        for (let index in this.columns) {\r\n          this.columns[index].sort = parseInt(index) + 1;\r\n        }\r\n      }\r\n    });\r\n  }\r\n};\r\n</script>\r\n"],"mappings":"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"}]}