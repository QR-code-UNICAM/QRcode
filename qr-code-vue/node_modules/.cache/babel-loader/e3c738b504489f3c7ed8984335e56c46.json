{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\signal-message\\SignalAndMessage.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\signal-message\\SignalAndMessage.vue","mtime":1704630437726},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\babel.config.js","mtime":1704630437199},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy84OTQyNS9JZGVhUHJvamVjdHMvcXItY29kZS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfb2JqZWN0U3ByZWFkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQzovVXNlcnMvODk0MjUvSWRlYVByb2plY3RzL3FyLWNvZGUtdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDIuanMiKSk7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IHsKICBuYW1lOiAiU2lnbmFsQW5kTWFzc2FnZSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNpZ25hbExpc3Q6IFtdLAogICAgICBtZXNzYWdlTGlzdDogW10sCiAgICAgIG1vZGVsVmlzaWJsZTogZmFsc2UsCiAgICAgIG1vZGVsVHlwZTogIiIsCiAgICAgIG1vZGVsT2JqZWN0Rm9ybToge30KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgbW9kZWxDb25maWc6IGZ1bmN0aW9uIG1vZGVsQ29uZmlnKCkgewogICAgICBpZiAodGhpcy5tb2RlbFR5cGUgPT09ICJtZXNzYWdlIikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0aXRsZTogIuWIm+W7uua2iOaBryIsCiAgICAgICAgICBpZExhYmVsOiAi5raI5oGvSUQiLAogICAgICAgICAgbmFtZUxhYmVsOiAi5raI5oGv5ZCN56ewIgogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHRpdGxlOiAi5Yib5bu65L+h5Y+3IiwKICAgICAgICAgIGlkTGFiZWw6ICLkv6Hlj7dJRCIsCiAgICAgICAgICBuYW1lTGFiZWw6ICLkv6Hlj7flkI3np7AiCiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdERhdGFMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0RGF0YUxpc3Q6IGZ1bmN0aW9uIGluaXREYXRhTGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy5yb290RWxlbWVudHMgPSB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RlbGVyLmdldERlZmluaXRpb25zKCkucm9vdEVsZW1lbnRzOwogICAgICB0aGlzLm1lc3NhZ2VJZE1hcCA9IHt9OwogICAgICB0aGlzLnNpZ25hbElkTWFwID0ge307CiAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSBbXTsKICAgICAgdGhpcy5zaWduYWxMaXN0ID0gW107CiAgICAgIHRoaXMucm9vdEVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgaWYgKGVsLiR0eXBlID09PSAiYnBtbjpNZXNzYWdlIikgewogICAgICAgICAgX3RoaXMubWVzc2FnZUlkTWFwW2VsLmlkXSA9IHRydWU7CiAgICAgICAgICBfdGhpcy5tZXNzYWdlTGlzdC5wdXNoKCgwLCBfb2JqZWN0U3ByZWFkMi5kZWZhdWx0KSh7fSwgZWwpKTsKICAgICAgICB9CiAgICAgICAgaWYgKGVsLiR0eXBlID09PSAiYnBtbjpTaWduYWwiKSB7CiAgICAgICAgICBfdGhpcy5zaWduYWxJZE1hcFtlbC5pZF0gPSB0cnVlOwogICAgICAgICAgX3RoaXMuc2lnbmFsTGlzdC5wdXNoKCgwLCBfb2JqZWN0U3ByZWFkMi5kZWZhdWx0KSh7fSwgZWwpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9wZW5Nb2RlbDogZnVuY3Rpb24gb3Blbk1vZGVsKHR5cGUpIHsKICAgICAgdGhpcy5tb2RlbFR5cGUgPSB0eXBlOwogICAgICB0aGlzLm1vZGVsT2JqZWN0Rm9ybSA9IHt9OwogICAgICB0aGlzLm1vZGVsVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgYWRkTmV3T2JqZWN0OiBmdW5jdGlvbiBhZGROZXdPYmplY3QoKSB7CiAgICAgIGlmICh0aGlzLm1vZGVsVHlwZSA9PT0gIm1lc3NhZ2UiKSB7CiAgICAgICAgaWYgKHRoaXMubWVzc2FnZUlkTWFwW3RoaXMubW9kZWxPYmplY3RGb3JtLmlkXSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivpea2iOaBr+W3suWtmOWcqO+8jOivt+S/ruaUuWlk5ZCO6YeN5paw5L+d5a2YIik7CiAgICAgICAgfQogICAgICAgIHZhciBtZXNzYWdlUmVmID0gd2luZG93LmJwbW5JbnN0YW5jZXMubW9kZGxlLmNyZWF0ZSgiYnBtbjpNZXNzYWdlIiwgdGhpcy5tb2RlbE9iamVjdEZvcm0pOwogICAgICAgIHRoaXMucm9vdEVsZW1lbnRzLnB1c2gobWVzc2FnZVJlZik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuc2lnbmFsSWRNYXBbdGhpcy5tb2RlbE9iamVjdEZvcm0uaWRdKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+l5L+h5Y+35bey5a2Y5Zyo77yM6K+35L+u5pS5aWTlkI7ph43mlrDkv53lrZgiKTsKICAgICAgICB9CiAgICAgICAgdmFyIHNpZ25hbFJlZiA9IHdpbmRvdy5icG1uSW5zdGFuY2VzLm1vZGRsZS5jcmVhdGUoImJwbW46U2lnbmFsIiwgdGhpcy5tb2RlbE9iamVjdEZvcm0pOwogICAgICAgIHRoaXMucm9vdEVsZW1lbnRzLnB1c2goc2lnbmFsUmVmKTsKICAgICAgfQogICAgICB0aGlzLm1vZGVsVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmluaXREYXRhTGlzdCgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["name","data","signalList","messageList","modelVisible","modelType","modelObjectForm","computed","modelConfig","title","idLabel","nameLabel","mounted","initDataList","methods","_this","rootElements","window","bpmnInstances","modeler","getDefinitions","messageIdMap","signalIdMap","forEach","el","$type","id","push","_objectSpread2","default","openModel","type","addNewObject","$message","error","messageRef","moddle","create","signalRef"],"sources":["src/components/bpmnProcessDesigner/package/penal/signal-message/SignalAndMessage.vue"],"sourcesContent":["<template>\r\n  <div class=\"panel-tab__content\">\r\n    <div class=\"panel-tab__content--title\">\r\n      <span><i class=\"el-icon-menu\" style=\"margin-right: 8px; color: #555555\"></i>消息列表</span>\r\n      <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-plus\" @click=\"openModel('message')\">创建新消息</el-button>\r\n    </div>\r\n    <el-table :data=\"messageList\" size=\"mini\" border>\r\n      <el-table-column type=\"index\" label=\"序号\" width=\"60px\" />\r\n      <el-table-column label=\"消息ID\" prop=\"id\" max-width=\"300px\" show-overflow-tooltip />\r\n      <el-table-column label=\"消息名称\" prop=\"name\" max-width=\"300px\" show-overflow-tooltip />\r\n    </el-table>\r\n    <div class=\"panel-tab__content--title\" style=\"padding-top: 8px; margin-top: 8px; border-top: 1px solid #eeeeee\">\r\n      <span><i class=\"el-icon-menu\" style=\"margin-right: 8px; color: #555555\"></i>信号列表</span>\r\n      <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-plus\" @click=\"openModel('signal')\">创建新信号</el-button>\r\n    </div>\r\n    <el-table :data=\"signalList\" size=\"mini\" border>\r\n      <el-table-column type=\"index\" label=\"序号\" width=\"60px\" />\r\n      <el-table-column label=\"信号ID\" prop=\"id\" max-width=\"300px\" show-overflow-tooltip />\r\n      <el-table-column label=\"信号名称\" prop=\"name\" max-width=\"300px\" show-overflow-tooltip />\r\n    </el-table>\r\n\r\n    <el-dialog :visible.sync=\"modelVisible\" :title=\"modelConfig.title\" :close-on-click-modal=\"false\" width=\"400px\" append-to-body destroy-on-close>\r\n      <el-form :model=\"modelObjectForm\" size=\"mini\" label-width=\"90px\" @submit.native.prevent>\r\n        <el-form-item :label=\"modelConfig.idLabel\">\r\n          <el-input v-model=\"modelObjectForm.id\" clearable />\r\n        </el-form-item>\r\n        <el-form-item :label=\"modelConfig.nameLabel\">\r\n          <el-input v-model=\"modelObjectForm.name\" clearable />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template slot=\"footer\">\r\n        <el-button size=\"mini\" @click=\"modelVisible = false\">取 消</el-button>\r\n        <el-button size=\"mini\" type=\"primary\" @click=\"addNewObject\">保 存</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"SignalAndMassage\",\r\n  data() {\r\n    return {\r\n      signalList: [],\r\n      messageList: [],\r\n      modelVisible: false,\r\n      modelType: \"\",\r\n      modelObjectForm: {}\r\n    };\r\n  },\r\n  computed: {\r\n    modelConfig() {\r\n      if (this.modelType === \"message\") {\r\n        return { title: \"创建消息\", idLabel: \"消息ID\", nameLabel: \"消息名称\" };\r\n      } else {\r\n        return { title: \"创建信号\", idLabel: \"信号ID\", nameLabel: \"信号名称\" };\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initDataList();\r\n  },\r\n  methods: {\r\n    initDataList() {\r\n      this.rootElements = window.bpmnInstances.modeler.getDefinitions().rootElements;\r\n      this.messageIdMap = {};\r\n      this.signalIdMap = {};\r\n      this.messageList = [];\r\n      this.signalList = [];\r\n      this.rootElements.forEach(el => {\r\n        if (el.$type === \"bpmn:Message\") {\r\n          this.messageIdMap[el.id] = true;\r\n          this.messageList.push({ ...el });\r\n        }\r\n        if (el.$type === \"bpmn:Signal\") {\r\n          this.signalIdMap[el.id] = true;\r\n          this.signalList.push({ ...el });\r\n        }\r\n      });\r\n    },\r\n    openModel(type) {\r\n      this.modelType = type;\r\n      this.modelObjectForm = {};\r\n      this.modelVisible = true;\r\n    },\r\n    addNewObject() {\r\n      if (this.modelType === \"message\") {\r\n        if (this.messageIdMap[this.modelObjectForm.id]) {\r\n          return this.$message.error(\"该消息已存在，请修改id后重新保存\");\r\n        }\r\n        const messageRef = window.bpmnInstances.moddle.create(\"bpmn:Message\", this.modelObjectForm);\r\n        this.rootElements.push(messageRef);\r\n      } else {\r\n        if (this.signalIdMap[this.modelObjectForm.id]) {\r\n          return this.$message.error(\"该信号已存在，请修改id后重新保存\");\r\n        }\r\n        const signalRef = window.bpmnInstances.moddle.create(\"bpmn:Signal\", this.modelObjectForm);\r\n        this.rootElements.push(signalRef);\r\n      }\r\n      this.modelVisible = false;\r\n      this.initDataList();\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"mappings":";;;;;;;;;;;iCAsCA;EACAA,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA;MACAC,WAAA;MACAC,YAAA;MACAC,SAAA;MACAC,eAAA;IACA;EACA;EACAC,QAAA;IACAC,WAAA,WAAAA,YAAA;MACA,SAAAH,SAAA;QACA;UAAAI,KAAA;UAAAC,OAAA;UAAAC,SAAA;QAAA;MACA;QACA;UAAAF,KAAA;UAAAC,OAAA;UAAAC,SAAA;QAAA;MACA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAD,YAAA,WAAAA,aAAA;MAAA,IAAAE,KAAA;MACA,KAAAC,YAAA,GAAAC,MAAA,CAAAC,aAAA,CAAAC,OAAA,CAAAC,cAAA,GAAAJ,YAAA;MACA,KAAAK,YAAA;MACA,KAAAC,WAAA;MACA,KAAAnB,WAAA;MACA,KAAAD,UAAA;MACA,KAAAc,YAAA,CAAAO,OAAA,WAAAC,EAAA;QACA,IAAAA,EAAA,CAAAC,KAAA;UACAV,KAAA,CAAAM,YAAA,CAAAG,EAAA,CAAAE,EAAA;UACAX,KAAA,CAAAZ,WAAA,CAAAwB,IAAA,KAAAC,cAAA,CAAAC,OAAA,MAAAL,EAAA;QACA;QACA,IAAAA,EAAA,CAAAC,KAAA;UACAV,KAAA,CAAAO,WAAA,CAAAE,EAAA,CAAAE,EAAA;UACAX,KAAA,CAAAb,UAAA,CAAAyB,IAAA,KAAAC,cAAA,CAAAC,OAAA,MAAAL,EAAA;QACA;MACA;IACA;IACAM,SAAA,WAAAA,UAAAC,IAAA;MACA,KAAA1B,SAAA,GAAA0B,IAAA;MACA,KAAAzB,eAAA;MACA,KAAAF,YAAA;IACA;IACA4B,YAAA,WAAAA,aAAA;MACA,SAAA3B,SAAA;QACA,SAAAgB,YAAA,MAAAf,eAAA,CAAAoB,EAAA;UACA,YAAAO,QAAA,CAAAC,KAAA;QACA;QACA,IAAAC,UAAA,GAAAlB,MAAA,CAAAC,aAAA,CAAAkB,MAAA,CAAAC,MAAA,sBAAA/B,eAAA;QACA,KAAAU,YAAA,CAAAW,IAAA,CAAAQ,UAAA;MACA;QACA,SAAAb,WAAA,MAAAhB,eAAA,CAAAoB,EAAA;UACA,YAAAO,QAAA,CAAAC,KAAA;QACA;QACA,IAAAI,SAAA,GAAArB,MAAA,CAAAC,aAAA,CAAAkB,MAAA,CAAAC,MAAA,qBAAA/B,eAAA;QACA,KAAAU,YAAA,CAAAW,IAAA,CAAAW,SAAA;MACA;MACA,KAAAlC,YAAA;MACA,KAAAS,YAAA;IACA;EACA;AACA"}]}