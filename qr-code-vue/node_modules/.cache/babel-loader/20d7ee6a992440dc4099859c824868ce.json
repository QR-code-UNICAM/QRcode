{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\Verifition\\Verify\\VerifyPoints.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\Verifition\\Verify\\VerifyPoints.vue","mtime":1704630437680},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\babel.config.js","mtime":1704630437199},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwp2YXIgX3V0aWwgPSByZXF1aXJlKCIuLy4uL3V0aWxzL3V0aWwiKTsKdmFyIF9hc2UgPSByZXF1aXJlKCJAL3V0aWxzL2FzZSIpOwp2YXIgX2xvZ2luID0gcmVxdWlyZSgiQC9hcGkvbG9naW4iKTsKLyoqDQogKiBWZXJpZnlQb2ludHMNCiAqIEBkZXNjcmlwdGlvbiDngrnpgIkNCiAqICovCnZhciBfZGVmYXVsdDIgPSBleHBvcnRzLmRlZmF1bHQgPSB7CiAgbmFtZTogJ1ZlcmlmeVBvaW50cycsCiAgcHJvcHM6IHsKICAgIC8vIOW8ueWHuuW8j3BvcO+8jOWbuuWummZpeGVkCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2ZpeGVkJwogICAgfSwKICAgIGNhcHRjaGFUeXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIC8vIOmXtOmalAogICAgdlNwYWNlOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogNQogICAgfSwKICAgIGltZ1NpemU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgd2lkdGg6ICczMTBweCcsCiAgICAgICAgICBoZWlnaHQ6ICcxNTVweCcKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgYmFyU2l6ZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB3aWR0aDogJzMxMHB4JywKICAgICAgICAgIGhlaWdodDogJzQwcHgnCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIGRlZmF1bHRJbWc6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlY3JldEtleTogJycsCiAgICAgIC8vIOWQjuerr+i/lOWbnueahGFzZeWKoOWvhuenmOmSpQogICAgICBjaGVja051bTogMywKICAgICAgLy8g6buY6K6k6ZyA6KaB54K55Ye755qE5a2X5pWwCiAgICAgIGZvbnRQb3M6IFtdLAogICAgICAvLyDpgInkuK3nmoTlnZDmoIfkv6Hmga8KICAgICAgY2hlY2tQb3NBcnI6IFtdLAogICAgICAvLyDnlKjmiLfngrnlh7vnmoTlnZDmoIcKICAgICAgbnVtOiAxLAogICAgICAvLyDngrnlh7vnmoTorrDmlbAKICAgICAgcG9pbnRCYWNrSW1nQmFzZTogJycsCiAgICAgIC8vIOWQjuerr+iOt+WPluWIsOeahOiDjOaZr+WbvueJhwogICAgICBwb2luVGV4dExpc3Q6IFtdLAogICAgICAvLyDlkI7nq6/ov5Tlm57nmoTngrnlh7vlrZfkvZPpobrluo8KICAgICAgYmFja1Rva2VuOiAnJywKICAgICAgLy8g5ZCO56uv6L+U5Zue55qEdG9rZW7lgLwKICAgICAgc2V0U2l6ZTogewogICAgICAgIGltZ0hlaWdodDogMCwKICAgICAgICBpbWdXaWR0aDogMCwKICAgICAgICBiYXJIZWlnaHQ6IDAsCiAgICAgICAgYmFyV2lkdGg6IDAKICAgICAgfSwKICAgICAgdGVtcFBvaW50czogW10sCiAgICAgIHRleHQ6ICcnLAogICAgICBiYXJBcmVhQ29sb3I6IHVuZGVmaW5lZCwKICAgICAgYmFyQXJlYUJvcmRlckNvbG9yOiB1bmRlZmluZWQsCiAgICAgIHNob3dSZWZyZXNoOiB0cnVlLAogICAgICBiaW5kaW5nQ2xpY2s6IHRydWUKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgcmVzZXRTaXplOiBmdW5jdGlvbiByZXNldFNpemUoKSB7CiAgICAgIHJldHVybiBfdXRpbC5yZXNldFNpemU7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgLy8gdHlwZeWPmOWMluWImeWFqOmdouWIt+aWsAogICAgdHlwZTogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy5pbml0KCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyDnpoHmraLmi5bmi70KICAgIHRoaXMuJGVsLm9uc2VsZWN0c3RhcnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAvLyDliqDovb3pobXpnaIKICAgICAgdGhpcy5mb250UG9zLnNwbGljZSgwLCB0aGlzLmZvbnRQb3MubGVuZ3RoKTsKICAgICAgdGhpcy5jaGVja1Bvc0Fyci5zcGxpY2UoMCwgdGhpcy5jaGVja1Bvc0Fyci5sZW5ndGgpOwogICAgICB0aGlzLm51bSA9IDE7CiAgICAgIHRoaXMuZ2V0UGljdHJ1ZSgpOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuc2V0U2l6ZSA9IF90aGlzLnJlc2V0U2l6ZShfdGhpcyk7IC8vIOmHjeaWsOiuvue9ruWuveW6pumrmOW6pgogICAgICAgIF90aGlzLiRwYXJlbnQuJGVtaXQoJ3JlYWR5JywgX3RoaXMpOwogICAgICB9KTsKICAgIH0sCiAgICBjYW52YXNDbGljazogZnVuY3Rpb24gY2FudmFzQ2xpY2soZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5jaGVja1Bvc0Fyci5wdXNoKHRoaXMuZ2V0TW91c2VQb3ModGhpcy4kcmVmcy5jYW52YXMsIGUpKTsKICAgICAgaWYgKHRoaXMubnVtID09PSB0aGlzLmNoZWNrTnVtKSB7CiAgICAgICAgdGhpcy5udW0gPSB0aGlzLmNyZWF0ZVBvaW50KHRoaXMuZ2V0TW91c2VQb3ModGhpcy4kcmVmcy5jYW52YXMsIGUpKTsKICAgICAgICAvLyDmjInmr5TkvovovazmjaLlnZDmoIflgLwKICAgICAgICB0aGlzLmNoZWNrUG9zQXJyID0gdGhpcy5wb2ludFRyYW5zZnJvbSh0aGlzLmNoZWNrUG9zQXJyLCB0aGlzLnNldFNpemUpOwogICAgICAgIC8vIOetieWIm+W7uuWdkOagh+aJp+ihjOWujAogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gdmFyIGZsYWcgPSB0aGlzLmNvbXBhcmVQb3ModGhpcy5mb250UG9zLCB0aGlzLmNoZWNrUG9zQXJyKTsKICAgICAgICAgIC8vIOWPkemAgeWQjuerr+ivt+axggogICAgICAgICAgdmFyIGNhcHRjaGFWZXJpZmljYXRpb24gPSBfdGhpczIuc2VjcmV0S2V5ID8gKDAsIF9hc2UuYWVzRW5jcnlwdCkoX3RoaXMyLmJhY2tUb2tlbiArICctLS0nICsgSlNPTi5zdHJpbmdpZnkoX3RoaXMyLmNoZWNrUG9zQXJyKSwgX3RoaXMyLnNlY3JldEtleSkgOiBfdGhpczIuYmFja1Rva2VuICsgJy0tLScgKyBKU09OLnN0cmluZ2lmeShfdGhpczIuY2hlY2tQb3NBcnIpOwogICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgIGNhcHRjaGFUeXBlOiBfdGhpczIuY2FwdGNoYVR5cGUsCiAgICAgICAgICAgICdwb2ludEpzb24nOiBfdGhpczIuc2VjcmV0S2V5ID8gKDAsIF9hc2UuYWVzRW5jcnlwdCkoSlNPTi5zdHJpbmdpZnkoX3RoaXMyLmNoZWNrUG9zQXJyKSwgX3RoaXMyLnNlY3JldEtleSkgOiBKU09OLnN0cmluZ2lmeShfdGhpczIuY2hlY2tQb3NBcnIpLAogICAgICAgICAgICAndG9rZW4nOiBfdGhpczIuYmFja1Rva2VuCiAgICAgICAgICB9OwogICAgICAgICAgKDAsIF9sb2dpbi5yZXFDaGVjaykoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIGlmIChyZXMucmVwQ29kZSA9PT0gJzAwMDAnKSB7CiAgICAgICAgICAgICAgX3RoaXMyLmJhckFyZWFDb2xvciA9ICcjNGNhZTRjJzsKICAgICAgICAgICAgICBfdGhpczIuYmFyQXJlYUJvcmRlckNvbG9yID0gJyM1Y2I4NWMnOwogICAgICAgICAgICAgIF90aGlzMi50ZXh0ID0gJ+mqjOivgeaIkOWKnyc7CiAgICAgICAgICAgICAgX3RoaXMyLmJpbmRpbmdDbGljayA9IGZhbHNlOwogICAgICAgICAgICAgIGlmIChfdGhpczIubW9kZSA9PT0gJ3BvcCcpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpczIuJHBhcmVudC5jbGlja1Nob3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgX3RoaXMyLnJlZnJlc2goKTsKICAgICAgICAgICAgICAgIH0sIDE1MDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfdGhpczIuJHBhcmVudC4kZW1pdCgnc3VjY2VzcycsIHsKICAgICAgICAgICAgICAgIGNhcHRjaGFWZXJpZmljYXRpb246IGNhcHRjaGFWZXJpZmljYXRpb24KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczIuJHBhcmVudC4kZW1pdCgnZXJyb3InLCBfdGhpczIpOwogICAgICAgICAgICAgIF90aGlzMi5iYXJBcmVhQ29sb3IgPSAnI2Q5NTM0Zic7CiAgICAgICAgICAgICAgX3RoaXMyLmJhckFyZWFCb3JkZXJDb2xvciA9ICcjZDk1MzRmJzsKICAgICAgICAgICAgICBfdGhpczIudGV4dCA9ICfpqozor4HlpLHotKUnOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXMyLnJlZnJlc2goKTsKICAgICAgICAgICAgICB9LCA3MDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9LCA0MDApOwogICAgICB9CiAgICAgIGlmICh0aGlzLm51bSA8IHRoaXMuY2hlY2tOdW0pIHsKICAgICAgICB0aGlzLm51bSA9IHRoaXMuY3JlYXRlUG9pbnQodGhpcy5nZXRNb3VzZVBvcyh0aGlzLiRyZWZzLmNhbnZhcywgZSkpOwogICAgICB9CiAgICB9LAogICAgLy8g6I635Y+W5Z2Q5qCHCiAgICBnZXRNb3VzZVBvczogZnVuY3Rpb24gZ2V0TW91c2VQb3Mob2JqLCBlKSB7CiAgICAgIHZhciB4ID0gZS5vZmZzZXRYOwogICAgICB2YXIgeSA9IGUub2Zmc2V0WTsKICAgICAgcmV0dXJuIHsKICAgICAgICB4OiB4LAogICAgICAgIHk6IHkKICAgICAgfTsKICAgIH0sCiAgICAvLyDliJvlu7rlnZDmoIfngrkKICAgIGNyZWF0ZVBvaW50OiBmdW5jdGlvbiBjcmVhdGVQb2ludChwb3MpIHsKICAgICAgdGhpcy50ZW1wUG9pbnRzLnB1c2goT2JqZWN0LmFzc2lnbih7fSwgcG9zKSk7CiAgICAgIHJldHVybiArK3RoaXMubnVtOwogICAgfSwKICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goKSB7CiAgICAgIHRoaXMudGVtcFBvaW50cy5zcGxpY2UoMCwgdGhpcy50ZW1wUG9pbnRzLmxlbmd0aCk7CiAgICAgIHRoaXMuYmFyQXJlYUNvbG9yID0gJyMwMDAnOwogICAgICB0aGlzLmJhckFyZWFCb3JkZXJDb2xvciA9ICcjZGRkJzsKICAgICAgdGhpcy5iaW5kaW5nQ2xpY2sgPSB0cnVlOwogICAgICB0aGlzLmZvbnRQb3Muc3BsaWNlKDAsIHRoaXMuZm9udFBvcy5sZW5ndGgpOwogICAgICB0aGlzLmNoZWNrUG9zQXJyLnNwbGljZSgwLCB0aGlzLmNoZWNrUG9zQXJyLmxlbmd0aCk7CiAgICAgIHRoaXMubnVtID0gMTsKICAgICAgdGhpcy5nZXRQaWN0cnVlKCk7CiAgICAgIHRoaXMuc2hvd1JlZnJlc2ggPSB0cnVlOwogICAgfSwKICAgIC8vIOivt+axguiDjOaZr+WbvueJh+WSjOmqjOivgeWbvueJhwogICAgZ2V0UGljdHJ1ZTogZnVuY3Rpb24gZ2V0UGljdHJ1ZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGNhcHRjaGFUeXBlOiB0aGlzLmNhcHRjaGFUeXBlLAogICAgICAgIGNsaWVudFVpZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BvaW50JyksCiAgICAgICAgdHM6IERhdGUubm93KCkgLy8g546w5Zyo55qE5pe26Ze05oizCiAgICAgIH07CiAgICAgICgwLCBfbG9naW4ucmVxR2V0KShkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnJlcENvZGUgPT09ICcwMDAwJykgewogICAgICAgICAgX3RoaXMzLnBvaW50QmFja0ltZ0Jhc2UgPSByZXMucmVwRGF0YS5vcmlnaW5hbEltYWdlQmFzZTY0OwogICAgICAgICAgX3RoaXMzLmJhY2tUb2tlbiA9IHJlcy5yZXBEYXRhLnRva2VuOwogICAgICAgICAgX3RoaXMzLnNlY3JldEtleSA9IHJlcy5yZXBEYXRhLnNlY3JldEtleTsKICAgICAgICAgIF90aGlzMy5wb2luVGV4dExpc3QgPSByZXMucmVwRGF0YS53b3JkTGlzdDsKICAgICAgICAgIF90aGlzMy50ZXh0ID0gJ+ivt+S+neasoeeCueWHu+OAkCcgKyBfdGhpczMucG9pblRleHRMaXN0LmpvaW4oJywnKSArICfjgJEnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczMudGV4dCA9IHJlcy5yZXBNc2c7CiAgICAgICAgfQoKICAgICAgICAvLyDliKTmlq3mjqXlj6Por7fmsYLmrKHmlbDmmK/lkKblpLHmlYgKICAgICAgICBpZiAocmVzLnJlcENvZGUgPT09ICc2MjAxJykgewogICAgICAgICAgX3RoaXMzLnBvaW50QmFja0ltZ0Jhc2UgPSBudWxsOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5Z2Q5qCH6L2s5o2i5Ye95pWwCiAgICBwb2ludFRyYW5zZnJvbTogZnVuY3Rpb24gcG9pbnRUcmFuc2Zyb20ocG9pbnRBcnIsIGltZ1NpemUpIHsKICAgICAgdmFyIG5ld1BvaW50QXJyID0gcG9pbnRBcnIubWFwKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgdmFyIHggPSBNYXRoLnJvdW5kKDMxMCAqIHAueCAvIHBhcnNlSW50KGltZ1NpemUuaW1nV2lkdGgpKTsKICAgICAgICB2YXIgeSA9IE1hdGgucm91bmQoMTU1ICogcC55IC8gcGFyc2VJbnQoaW1nU2l6ZS5pbWdIZWlnaHQpKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgeDogeCwKICAgICAgICAgIHk6IHkKICAgICAgICB9OwogICAgICB9KTsKICAgICAgLy8gY29uc29sZS5sb2cobmV3UG9pbnRBcnIsIm5ld1BvaW50QXJyIik7CiAgICAgIHJldHVybiBuZXdQb2ludEFycjsKICAgIH0KICB9Cn07"},{"version":3,"names":["_util","require","_ase","_login","_default2","exports","default","name","props","mode","type","String","captchaType","vSpace","Number","imgSize","Object","_default","width","height","barSize","defaultImg","data","secretKey","checkNum","fontPos","checkPosArr","num","pointBackImgBase","poinTextList","backToken","setSize","imgHeight","imgWidth","barHeight","barWidth","tempPoints","text","barAreaColor","undefined","barAreaBorderColor","showRefresh","bindingClick","computed","resetSize","watch","immediate","handler","init","mounted","$el","onselectstart","methods","_this","splice","length","getPictrue","$nextTick","$parent","$emit","canvasClick","e","_this2","push","getMousePos","$refs","canvas","createPoint","pointTransfrom","setTimeout","captchaVerification","aesEncrypt","JSON","stringify","reqCheck","then","res","repCode","clickShow","refresh","obj","x","offsetX","y","offsetY","pos","assign","_this3","clientUid","localStorage","getItem","ts","Date","now","reqGet","repData","originalImageBase64","token","wordList","join","repMsg","pointArr","newPointArr","map","p","Math","round","parseInt"],"sources":["src/components/Verifition/Verify/VerifyPoints.vue"],"sourcesContent":["<template>\r\n  <div style=\"position: relative\" >\r\n    <div class=\"verify-img-out\">\r\n      <div\r\n        class=\"verify-img-panel\"\r\n        :style=\"{'width': setSize.imgWidth,\r\n                 'height': setSize.imgHeight,\r\n                 'background-size' : setSize.imgWidth + ' '+ setSize.imgHeight,\r\n                 'margin-bottom': vSpace + 'px'}\"\r\n      >\r\n        <div v-show=\"showRefresh\" class=\"verify-refresh\" style=\"z-index:3\" @click=\"refresh\">\r\n          <i class=\"iconfont icon-refresh\" />\r\n        </div>\r\n        <img\r\n          ref=\"canvas\"\r\n          :src=\"pointBackImgBase?('data:image/png;base64,'+pointBackImgBase):defaultImg\"\r\n          alt=\"\"\r\n          style=\"width:100%;height:100%;display:block\"\r\n          @click=\"bindingClick?canvasClick($event):undefined\"\r\n        >\r\n\r\n        <div\r\n          v-for=\"(tempPoint, index) in tempPoints\"\r\n          :key=\"index\"\r\n          class=\"point-area\"\r\n          :style=\"{\r\n            'background-color':'#1abd6c',\r\n            color:'#fff',\r\n            'z-index':9999,\r\n            width:'20px',\r\n            height:'20px',\r\n            'text-align':'center',\r\n            'line-height':'20px',\r\n            'border-radius': '50%',\r\n            position:'absolute',\r\n            top:parseInt(tempPoint.y-10) + 'px',\r\n            left:parseInt(tempPoint.x-10) + 'px'\r\n          }\"\r\n        >\r\n          {{ index + 1 }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 'height': this.barSize.height, -->\r\n    <div\r\n      class=\"verify-bar-area\"\r\n      :style=\"{'width': setSize.imgWidth,\r\n               'color': this.barAreaColor,\r\n               'border-color': this.barAreaBorderColor,\r\n               'line-height':this.barSize.height}\"\r\n    >\r\n      <span class=\"verify-msg\">{{ text }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script type=\"text/babel\">\r\n/**\r\n * VerifyPoints\r\n * @description 点选\r\n * */\r\nimport { resetSize } from './../utils/util'\r\nimport { aesEncrypt } from '@/utils/ase'\r\nimport { reqGet, reqCheck } from '@/api/login'\r\n\r\nexport default {\r\n  name: 'VerifyPoints',\r\n  props: {\r\n    // 弹出式pop，固定fixed\r\n    mode: {\r\n      type: String,\r\n      default: 'fixed'\r\n    },\r\n    captchaType: {\r\n      type: String,\r\n    },\r\n    // 间隔\r\n    vSpace: {\r\n      type: Number,\r\n      default: 5\r\n    },\r\n    imgSize: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          width: '310px',\r\n          height: '155px'\r\n        }\r\n      }\r\n    },\r\n    barSize: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          width: '310px',\r\n          height: '40px'\r\n        }\r\n      }\r\n    },\r\n    defaultImg: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      secretKey: '', // 后端返回的ase加密秘钥\r\n      checkNum: 3, // 默认需要点击的字数\r\n      fontPos: [], // 选中的坐标信息\r\n      checkPosArr: [], // 用户点击的坐标\r\n      num: 1, // 点击的记数\r\n      pointBackImgBase: '', // 后端获取到的背景图片\r\n      poinTextList: [], // 后端返回的点击字体顺序\r\n      backToken: '', // 后端返回的token值\r\n      setSize: {\r\n        imgHeight: 0,\r\n        imgWidth: 0,\r\n        barHeight: 0,\r\n        barWidth: 0\r\n      },\r\n      tempPoints: [],\r\n      text: '',\r\n      barAreaColor: undefined,\r\n      barAreaBorderColor: undefined,\r\n      showRefresh: true,\r\n      bindingClick: true\r\n    }\r\n  },\r\n  computed: {\r\n    resetSize() {\r\n      return resetSize\r\n    }\r\n  },\r\n  watch: {\r\n    // type变化则全面刷新\r\n    type: {\r\n      immediate: true,\r\n      handler() {\r\n        this.init()\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    // 禁止拖拽\r\n    this.$el.onselectstart = function() {\r\n      return false\r\n    }\r\n  },\r\n  methods: {\r\n    init() {\r\n      // 加载页面\r\n      this.fontPos.splice(0, this.fontPos.length)\r\n      this.checkPosArr.splice(0, this.checkPosArr.length)\r\n      this.num = 1\r\n      this.getPictrue()\r\n      this.$nextTick(() => {\r\n        this.setSize = this.resetSize(this)\t// 重新设置宽度高度\r\n        this.$parent.$emit('ready', this)\r\n      })\r\n    },\r\n    canvasClick(e) {\r\n      this.checkPosArr.push(this.getMousePos(this.$refs.canvas, e))\r\n      if (this.num === this.checkNum) {\r\n        this.num = this.createPoint(this.getMousePos(this.$refs.canvas, e))\r\n        // 按比例转换坐标值\r\n        this.checkPosArr = this.pointTransfrom(this.checkPosArr, this.setSize)\r\n        // 等创建坐标执行完\r\n        setTimeout(() => {\r\n          // var flag = this.comparePos(this.fontPos, this.checkPosArr);\r\n          // 发送后端请求\r\n          const captchaVerification = this.secretKey ? aesEncrypt(this.backToken + '---' + JSON.stringify(this.checkPosArr), this.secretKey) : this.backToken + '---' + JSON.stringify(this.checkPosArr)\r\n          const data = {\r\n            captchaType: this.captchaType,\r\n            'pointJson': this.secretKey ? aesEncrypt(JSON.stringify(this.checkPosArr), this.secretKey) : JSON.stringify(this.checkPosArr),\r\n            'token': this.backToken\r\n          }\r\n          reqCheck(data).then(res => {\r\n            if (res.repCode === '0000') {\r\n              this.barAreaColor = '#4cae4c'\r\n              this.barAreaBorderColor = '#5cb85c'\r\n              this.text = '验证成功'\r\n              this.bindingClick = false\r\n              if (this.mode === 'pop') {\r\n                setTimeout(() => {\r\n                  this.$parent.clickShow = false\r\n                  this.refresh()\r\n                }, 1500)\r\n              }\r\n              this.$parent.$emit('success', { captchaVerification })\r\n            } else {\r\n              this.$parent.$emit('error', this)\r\n              this.barAreaColor = '#d9534f'\r\n              this.barAreaBorderColor = '#d9534f'\r\n              this.text = '验证失败'\r\n              setTimeout(() => {\r\n                this.refresh()\r\n              }, 700)\r\n            }\r\n          })\r\n        }, 400)\r\n      }\r\n      if (this.num < this.checkNum) {\r\n        this.num = this.createPoint(this.getMousePos(this.$refs.canvas, e))\r\n      }\r\n    },\r\n\r\n    // 获取坐标\r\n    getMousePos: function(obj, e) {\r\n      const x = e.offsetX\r\n      const y = e.offsetY\r\n      return { x, y }\r\n    },\r\n    // 创建坐标点\r\n    createPoint: function(pos) {\r\n      this.tempPoints.push(Object.assign({}, pos))\r\n      return ++this.num\r\n    },\r\n    refresh: function() {\r\n      this.tempPoints.splice(0, this.tempPoints.length)\r\n      this.barAreaColor = '#000'\r\n      this.barAreaBorderColor = '#ddd'\r\n      this.bindingClick = true\r\n      this.fontPos.splice(0, this.fontPos.length)\r\n      this.checkPosArr.splice(0, this.checkPosArr.length)\r\n      this.num = 1\r\n      this.getPictrue()\r\n      this.showRefresh = true\r\n    },\r\n\r\n    // 请求背景图片和验证图片\r\n    getPictrue() {\r\n      const data = {\r\n        captchaType: this.captchaType,\r\n        clientUid: localStorage.getItem('point'),\r\n        ts: Date.now(), // 现在的时间戳\r\n      }\r\n      reqGet(data).then(res => {\r\n        if (res.repCode === '0000') {\r\n          this.pointBackImgBase = res.repData.originalImageBase64\r\n          this.backToken = res.repData.token\r\n          this.secretKey = res.repData.secretKey\r\n          this.poinTextList = res.repData.wordList\r\n          this.text = '请依次点击【' + this.poinTextList.join(',') + '】'\r\n        } else {\r\n          this.text = res.repMsg\r\n        }\r\n\r\n        // 判断接口请求次数是否失效\r\n        if (res.repCode === '6201') {\r\n          this.pointBackImgBase = null\r\n        }\r\n      })\r\n    },\r\n    // 坐标转换函数\r\n    pointTransfrom(pointArr, imgSize) {\r\n      const newPointArr = pointArr.map(p => {\r\n        const x = Math.round(310 * p.x / parseInt(imgSize.imgWidth))\r\n        const y = Math.round(155 * p.y / parseInt(imgSize.imgHeight))\r\n        return { x, y }\r\n      })\r\n      // console.log(newPointArr,\"newPointArr\");\r\n      return newPointArr\r\n    }\r\n  },\r\n}\r\n</script>\r\n"],"mappings":"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"}]}