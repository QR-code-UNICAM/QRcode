{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\pay\\app\\components\\weixinChannelForm.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\pay\\app\\components\\weixinChannelForm.vue","mtime":1704630438041},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\babel.config.js","mtime":1704630437199},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy84OTQyNS9JZGVhUHJvamVjdHMvcXItY29kZS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfb2JqZWN0U3ByZWFkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQzovVXNlcnMvODk0MjUvSWRlYVByb2plY3RzL3FyLWNvZGUtdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDIuanMiKSk7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKdmFyIF9jaGFubmVsID0gcmVxdWlyZSgiQC9hcGkvcGF5L2NoYW5uZWwiKTsKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCJAL3V0aWxzL2NvbnN0YW50cyIpOwp2YXIgX2RlZmF1bHQgPSBleHBvcnRzLmRlZmF1bHQgPSB7CiAgbmFtZTogIndlaXhpbkNoYW5uZWxGb3JtIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGZvcm1Mb2FkaW5nOiBmYWxzZSwKICAgICAgdGl0bGU6ICcnLAogICAgICBmb3JtRGF0YTogewogICAgICAgIGFwcElkOiAnJywKICAgICAgICBjb2RlOiAnJywKICAgICAgICBzdGF0dXM6IHVuZGVmaW5lZCwKICAgICAgICBmZWVSYXRlOiB1bmRlZmluZWQsCiAgICAgICAgcmVtYXJrOiAnJywKICAgICAgICBjb25maWc6IHsKICAgICAgICAgIGFwcElkOiAnJywKICAgICAgICAgIG1jaElkOiAnJywKICAgICAgICAgIGFwaVZlcnNpb246ICcnLAogICAgICAgICAgbWNoS2V5OiAnJywKICAgICAgICAgIGtleUNvbnRlbnQ6ICcnLAogICAgICAgICAgcHJpdmF0ZUtleUNvbnRlbnQ6ICcnLAogICAgICAgICAgcHJpdmF0ZUNlcnRDb250ZW50OiAnJywKICAgICAgICAgIGFwaVYzS2V5OiAnJwogICAgICAgIH0KICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBmZWVSYXRlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5rig6YGT6LS5546HJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHN0YXR1czogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+a4oOmBk+eKtuaAgeS4jeiDveS4uuepuicsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICAnY29uZmlnLm1jaElkJzogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+S8oOWFpeWVhuaIt+WPtycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICAnY29uZmlnLmFwcElkJzogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWFrOS8l+WPt0FQUElEJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgICdjb25maWcuYXBpVmVyc2lvbic6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICdBUEnniYjmnKzkuI3og73kuLrnqbonLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgJ2NvbmZpZy5tY2hLZXknOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5ZWG5oi35a+G6ZKlJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgICdjb25maWcua2V5Q29udGVudCc6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fkuIrkvKAgYXBpY2xpZW50X2NlcnQucDEyIOivgeS5picsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICAnY29uZmlnLnByaXZhdGVLZXlDb250ZW50JzogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+S4iuS8oCBhcGljbGllbnRfa2V5LnBlbSDor4HkuaYnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgJ2NvbmZpZy5wcml2YXRlQ2VydENvbnRlbnQnOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+35LiK5LygIGFwaWNsaWVudF9jZXJ0LnBlcm3or4Eg5LmmJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgICdjb25maWcuYXBpVjNLZXknOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+35LiK5LygIGFwaSBWMyDlr4bpkqXlgLwnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oYXBwSWQsIGNvZGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5mb3JtTG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMucmVzZXQoYXBwSWQsIGNvZGUpOwogICAgICAoMCwgX2NoYW5uZWwuZ2V0Q2hhbm5lbCkoYXBwSWQsIGNvZGUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5pZCkgewogICAgICAgICAgX3RoaXMuZm9ybURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgX3RoaXMuZm9ybURhdGEuY29uZmlnID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhLmNvbmZpZyk7CiAgICAgICAgfQogICAgICAgIF90aGlzLnRpdGxlID0gIV90aGlzLmZvcm1EYXRhLmlkID8gJ+WIm+W7uuaUr+S7mOa4oOmBkycgOiAn57yW6L6R5pSv5LuY5rig6YGTJzsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuZm9ybUxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5yZXNldCh1bmRlZmluZWQsIHVuZGVmaW5lZCk7CiAgICB9LAogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnNbJ2Zvcm0nXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBkYXRhID0gKDAsIF9vYmplY3RTcHJlYWQyLmRlZmF1bHQpKHt9LCBfdGhpczIuZm9ybURhdGEpOwogICAgICAgIGRhdGEuY29uZmlnID0gSlNPTi5zdHJpbmdpZnkoX3RoaXMyLmZvcm1EYXRhLmNvbmZpZyk7CiAgICAgICAgaWYgKCFkYXRhLmlkKSB7CiAgICAgICAgICAoMCwgX2NoYW5uZWwuY3JlYXRlQ2hhbm5lbCkoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgX3RoaXMyLiRtb2RhbC5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8iKTsKICAgICAgICAgICAgX3RoaXMyLiRlbWl0KCdzdWNjZXNzJyk7CiAgICAgICAgICAgIF90aGlzMi5jbG9zZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICgwLCBfY2hhbm5lbC51cGRhdGVDaGFubmVsKShkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBfdGhpczIuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwogICAgICAgICAgICBfdGhpczIuJGVtaXQoJ3N1Y2Nlc3MnKTsKICAgICAgICAgICAgX3RoaXMyLmNsb3NlKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDph43nva7ooajljZUgKi9yZXNldDogZnVuY3Rpb24gcmVzZXQoYXBwSWQsIGNvZGUpIHsKICAgICAgdGhpcy5mb3JtRGF0YSA9IHsKICAgICAgICBhcHBJZDogYXBwSWQsCiAgICAgICAgY29kZTogY29kZSwKICAgICAgICBzdGF0dXM6IF9jb25zdGFudHMuQ29tbW9uU3RhdHVzRW51bS5FTkFCTEUsCiAgICAgICAgZmVlUmF0ZTogdW5kZWZpbmVkLAogICAgICAgIHJlbWFyazogJycsCiAgICAgICAgY29uZmlnOiB7CiAgICAgICAgICBhcHBJZDogJycsCiAgICAgICAgICBtY2hJZDogJycsCiAgICAgICAgICBhcGlWZXJzaW9uOiAnJywKICAgICAgICAgIG1jaEtleTogJycsCiAgICAgICAgICBrZXlDb250ZW50OiAnJywKICAgICAgICAgIHByaXZhdGVLZXlDb250ZW50OiAnJywKICAgICAgICAgIHByaXZhdGVDZXJ0Q29udGVudDogJycsCiAgICAgICAgICBhcGlWM0tleTogJycKICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMucmVzZXRGb3JtKCdmb3JtJyk7CiAgICB9LAogICAgLyoqDQogICAgICogYXBpY2xpZW50X2NlcnQucDEy44CBYXBpY2xpZW50X2NlcnQucGVt44CBYXBpY2xpZW50X2tleS5wZW0g5LiK5Lyg5YmN55qE5qCh6aqMDQogICAgICovCiAgICBmaWxlQmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBmaWxlQmVmb3JlVXBsb2FkKGZpbGUsIGZpbGVBY2NlcHQpIHsKICAgICAgdmFyIGZvcm1hdCA9ICcuJyArIGZpbGUubmFtZS5zcGxpdCgiLiIpWzFdOwogICAgICBpZiAoZm9ybWF0ICE9PSBmaWxlQWNjZXB0KSB7CiAgICAgICAgZGVidWdnZXI7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35LiK5Lyg5oyH5a6a5qC85byPIicgKyBmaWxlQWNjZXB0ICsgJyLmlofku7YnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGlzUmlnaHRTaXplID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwogICAgICBpZiAoIWlzUmlnaHRTaXplKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5paH5Lu25aSn5bCP6LaF6L+HIDJNQicpOwogICAgICB9CiAgICAgIHJldHVybiBpc1JpZ2h0U2l6ZTsKICAgIH0sCiAgICBwMTJGaWxlQmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBwMTJGaWxlQmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdGhpcy5maWxlQmVmb3JlVXBsb2FkKGZpbGUsICcucDEyJyk7CiAgICB9LAogICAgcGVtRmlsZUJlZm9yZVVwbG9hZDogZnVuY3Rpb24gcGVtRmlsZUJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIHRoaXMuZmlsZUJlZm9yZVVwbG9hZChmaWxlLCAnLnBlbScpOwogICAgfSwKICAgIC8qKg0KICAgICAqIOivu+WPliBhcGljbGllbnRfa2V5LnBlbSDliLAgcHJpdmF0ZUtleUNvbnRlbnQg5a2X5q61DQogICAgICovCiAgICBwcml2YXRlS2V5Q29udGVudFVwbG9hZDogZnVuY3Rpb24gcHJpdmF0ZUtleUNvbnRlbnRVcGxvYWQoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHZhciByZWFkRmlsZSA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRGaWxlLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXMzLmZvcm1EYXRhLmNvbmZpZy5wcml2YXRlS2V5Q29udGVudCA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgfTsKICAgICAgcmVhZEZpbGUucmVhZEFzVGV4dChldmVudC5maWxlKTsKICAgIH0sCiAgICAvKioNCiAgICAgKiDor7vlj5YgYXBpY2xpZW50X2NlcnQucGVtIOWIsCBwcml2YXRlQ2VydENvbnRlbnQg5a2X5q61DQogICAgICovCiAgICBwcml2YXRlQ2VydENvbnRlbnRVcGxvYWQ6IGZ1bmN0aW9uIHByaXZhdGVDZXJ0Q29udGVudFVwbG9hZChldmVudCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdmFyIHJlYWRGaWxlID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgcmVhZEZpbGUub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczQuZm9ybURhdGEuY29uZmlnLnByaXZhdGVDZXJ0Q29udGVudCA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgfTsKICAgICAgcmVhZEZpbGUucmVhZEFzVGV4dChldmVudC5maWxlKTsKICAgIH0sCiAgICAvKioNCiAgICAgKiDor7vlj5YgYXBpY2xpZW50X2NlcnQucDEyIOWIsCBrZXlDb250ZW50IOWtl+autQ0KICAgICAqLwogICAga2V5Q29udGVudFVwbG9hZDogZnVuY3Rpb24ga2V5Q29udGVudFVwbG9hZChldmVudCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdmFyIHJlYWRGaWxlID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgcmVhZEZpbGUub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczUuZm9ybURhdGEuY29uZmlnLmtleUNvbnRlbnQgPSBlLnRhcmdldC5yZXN1bHQuc3BsaXQoJywnKVsxXTsKICAgICAgfTsKICAgICAgcmVhZEZpbGUucmVhZEFzRGF0YVVSTChldmVudC5maWxlKTsgLy8g6K+75oiQIGJhc2U2NAogICAgfQogIH0KfTs="},{"version":3,"names":["_channel","require","_constants","_default","exports","default","name","data","dialogVisible","formLoading","title","formData","appId","code","status","undefined","feeRate","remark","config","mchId","apiVersion","mchKey","keyContent","privateKeyContent","privateCertContent","apiV3Key","rules","required","message","trigger","methods","open","_this","reset","getChannel","then","response","id","JSON","parse","finally","close","submitForm","_this2","$refs","validate","valid","_objectSpread2","stringify","createChannel","$modal","msgSuccess","$emit","updateChannel","CommonStatusEnum","ENABLE","resetForm","fileBeforeUpload","file","fileAccept","format","split","$message","error","isRightSize","size","p12FileBeforeUpload","pemFileBeforeUpload","privateKeyContentUpload","event","_this3","readFile","FileReader","onload","e","target","result","readAsText","privateCertContentUpload","_this4","keyContentUpload","_this5","readAsDataURL"],"sources":["src/views/pay/app/components/weixinChannelForm.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-dialog :visible.sync=\"dialogVisible\" :title=\"title\" @close=\"close\" append-to-body width=\"800px\">\r\n      <el-form ref=\"form\" :model=\"formData\" :rules=\"rules\" size=\"medium\" label-width=\"120px\"\r\n               v-loading=\"formLoading\">\r\n        <el-form-item label-width=\"180px\" label=\"渠道费率\" prop=\"feeRate\">\r\n          <el-input v-model=\"formData.feeRate\" placeholder=\"请输入渠道费率\" clearable :style=\"{width: '100%'}\">\r\n            <template slot=\"append\">%</template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"180px\" label=\"公众号 APPID\" prop=\"config.appId\">\r\n          <el-input v-model=\"formData.config.appId\" placeholder=\"请输入公众号 APPID\" clearable :style=\"{width: '100%'}\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"180px\" label=\"商户号\" prop=\"config.mchId\">\r\n          <el-input v-model=\"formData.config.mchId\" :style=\"{width: '100%'}\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"180px\" label=\"渠道状态\" prop=\"status\">\r\n          <el-radio-group v-model=\"formData.status\" size=\"medium\">\r\n            <el-radio v-for=\"dict in this.getDictDatas(DICT_TYPE.COMMON_STATUS)\" :key=\"parseInt(dict.value)\"\r\n                      :label=\"parseInt(dict.value)\">\r\n              {{ dict.label }}\r\n            </el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"180px\" label=\"API 版本\" prop=\"config.apiVersion\">\r\n          <el-radio-group v-model=\"formData.config.apiVersion\" size=\"medium\">\r\n            <el-radio label=\"v2\">v2</el-radio>\r\n            <el-radio label=\"v3\">v3</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <div v-if=\"formData.config.apiVersion === 'v2'\">\r\n          <el-form-item label-width=\"180px\" label=\"商户密钥\" prop=\"config.mchKey\">\r\n            <el-input v-model=\"formData.config.mchKey\" placeholder=\"请输入商户密钥\" clearable\r\n                      :style=\"{width: '100%'}\" type=\"textarea\" :autosize=\"{minRows: 8, maxRows: 8}\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"180px\" label=\"apiclient_cert.p12 证书\" prop=\"config.keyContent\">\r\n            <el-input v-model=\"formData.config.keyContent\" type=\"textarea\"\r\n                      placeholder=\"请上传 apiclient_cert.p12 证书\"\r\n                      readonly :autosize=\"{minRows: 8, maxRows: 8}\" :style=\"{width: '100%'}\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"180px\" label=\"\">\r\n            <el-upload :limit=\"1\" accept=\".p12\" action=\"\"\r\n                       :before-upload=\"p12FileBeforeUpload\"\r\n                       :http-request=\"keyContentUpload\">\r\n              <el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\">点击上传</el-button>\r\n            </el-upload>\r\n          </el-form-item>\r\n        </div>\r\n        <div v-if=\"formData.config.apiVersion === 'v3'\">\r\n          <el-form-item label-width=\"180px\" label=\"API V3 密钥\" prop=\"config.apiV3Key\">\r\n            <el-input v-model=\"formData.config.apiV3Key\" placeholder=\"请输入 API V3 密钥\" clearable\r\n                      :style=\"{width: '100%'}\" type=\"textarea\" :autosize=\"{minRows: 8, maxRows: 8}\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"180px\" label=\"apiclient_key.pem 证书\" prop=\"config.privateKeyContent\">\r\n            <el-input v-model=\"formData.config.privateKeyContent\" type=\"textarea\"\r\n                      placeholder=\"请上传 apiclient_key.pem 证书\"\r\n                      readonly :autosize=\"{minRows: 8, maxRows: 8}\" :style=\"{width: '100%'}\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"180px\" label=\"\" prop=\"privateKeyContentFile\">\r\n            <el-upload ref=\"privateKeyContentFile\"\r\n                       :limit=\"1\"\r\n                       accept=\".pem\"\r\n                       action=\"\"\r\n                       :before-upload=\"pemFileBeforeUpload\"\r\n                       :http-request=\"privateKeyContentUpload\"\r\n            >\r\n              <el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\">点击上传</el-button>\r\n            </el-upload>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"180px\" label=\"apiclient_cert.perm证书\" prop=\"config.privateCertContent\">\r\n            <el-input v-model=\"formData.config.privateCertContent\" type=\"textarea\"\r\n                      placeholder=\"请上传apiclient_cert.perm证书\"\r\n                      readonly :autosize=\"{minRows: 8, maxRows: 8}\" :style=\"{width: '100%'}\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"180px\" label=\"\" prop=\"privateCertContentFile\">\r\n            <el-upload ref=\"privateCertContentFile\"\r\n                       :limit=\"1\"\r\n                       accept=\".pem\"\r\n                       action=\"\"\r\n                       :before-upload=\"pemFileBeforeUpload\"\r\n                       :http-request=\"privateCertContentUpload\"\r\n            >\r\n              <el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\">点击上传</el-button>\r\n            </el-upload>\r\n          </el-form-item>\r\n        </div>\r\n        <el-form-item label-width=\"180px\" label=\"备注\" prop=\"remark\">\r\n          <el-input v-model=\"formData.remark\" :style=\"{width: '100%'}\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"close\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitForm\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { createChannel, getChannel, updateChannel } from \"@/api/pay/channel\";\r\nimport { CommonStatusEnum } from \"@/utils/constants\";\r\n\r\nexport default {\r\n  name: \"weixinChannelForm\",\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      formLoading: false,\r\n      title:'',\r\n      formData: {\r\n        appId: '',\r\n        code: '',\r\n        status: undefined,\r\n        feeRate: undefined,\r\n        remark: '',\r\n        config: {\r\n          appId: '',\r\n          mchId: '',\r\n          apiVersion: '',\r\n          mchKey: '',\r\n          keyContent: '',\r\n          privateKeyContent: '',\r\n          privateCertContent: '',\r\n          apiV3Key:'',\r\n        }\r\n      },\r\n      rules: {\r\n        feeRate: [{ required: true, message: '请输入渠道费率', trigger: 'blur' }],\r\n        status: [{ required: true, message: '渠道状态不能为空', trigger: 'blur'}],\r\n        'config.mchId': [{ required: true, message: '请传入商户号', trigger: 'blur'}],\r\n        'config.appId': [{ required: true, message: '请输入公众号APPID', trigger: 'blur'}],\r\n        'config.apiVersion': [{ required: true, message: 'API版本不能为空', trigger: 'blur'}],\r\n        'config.mchKey': [{ required: true, message: '请输入商户密钥', trigger: 'blur' }],\r\n        'config.keyContent': [{ required: true, message: '请上传 apiclient_cert.p12 证书', trigger: 'blur' }],\r\n        'config.privateKeyContent': [{ required: true, message: '请上传 apiclient_key.pem 证书', trigger: 'blur' }],\r\n        'config.privateCertContent': [{ required: true, message: '请上传 apiclient_cert.perm证 书', trigger: 'blur' }],\r\n        'config.apiV3Key': [{ required: true, message: '请上传 api V3 密钥值', trigger: 'blur' }],\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    open(appId, code) {\r\n      this.dialogVisible = true;\r\n      this.formLoading = true;\r\n      this.reset(appId, code);\r\n      getChannel(appId, code).then(response => {\r\n        if (response.data && response.data.id) {\r\n          this.formData = response.data;\r\n          this.formData.config = JSON.parse(response.data.config);\r\n        }\r\n        this.title = !this.formData.id ? '创建支付渠道' : '编辑支付渠道'\r\n      }).finally(() => {\r\n        this.formLoading = false;\r\n      });\r\n    },\r\n    close() {\r\n      this.dialogVisible = false;\r\n      this.reset(undefined, undefined);\r\n    },\r\n    submitForm() {\r\n      this.$refs['form'].validate(valid => {\r\n        if (!valid) {\r\n          return\r\n        }\r\n        const data = { ...this.formData };\r\n        data.config = JSON.stringify(this.formData.config);\r\n        if (!data.id) {\r\n          createChannel(data).then(response => {\r\n            this.$modal.msgSuccess(\"新增成功\");\r\n            this.$emit('success')\r\n            this.close();\r\n          });\r\n        } else {\r\n          updateChannel(data).then(response => {\r\n            this.$modal.msgSuccess(\"修改成功\");\r\n            this.$emit('success')\r\n            this.close();\r\n          })\r\n        }\r\n      });\r\n    },\r\n    /** 重置表单 */\r\n    reset(appId, code) {\r\n      this.formData = {\r\n        appId: appId,\r\n        code: code,\r\n        status: CommonStatusEnum.ENABLE,\r\n        feeRate: undefined,\r\n        remark: '',\r\n        config: {\r\n          appId: '',\r\n          mchId: '',\r\n          apiVersion: '',\r\n          mchKey: '',\r\n          keyContent: '',\r\n          privateKeyContent: '',\r\n          privateCertContent: '',\r\n          apiV3Key:'',\r\n        }\r\n      }\r\n      this.resetForm('form')\r\n    },\r\n    /**\r\n     * apiclient_cert.p12、apiclient_cert.pem、apiclient_key.pem 上传前的校验\r\n     */\r\n    fileBeforeUpload(file, fileAccept) {\r\n      let format = '.' + file.name.split(\".\")[1];\r\n      if (format !== fileAccept) {\r\n        debugger\r\n        this.$message.error('请上传指定格式\"' + fileAccept + '\"文件');\r\n        return false;\r\n      }\r\n      let isRightSize = file.size / 1024 / 1024 < 2\r\n      if (!isRightSize) {\r\n        this.$message.error('文件大小超过 2MB')\r\n      }\r\n      return isRightSize\r\n    },\r\n    p12FileBeforeUpload(file) {\r\n      this.fileBeforeUpload(file, '.p12')\r\n    },\r\n    pemFileBeforeUpload(file) {\r\n      this.fileBeforeUpload(file, '.pem')\r\n    },\r\n    /**\r\n     * 读取 apiclient_key.pem 到 privateKeyContent 字段\r\n     */\r\n    privateKeyContentUpload(event) {\r\n      const readFile = new FileReader()\r\n      readFile.onload = (e) => {\r\n        this.formData.config.privateKeyContent = e.target.result\r\n      }\r\n      readFile.readAsText(event.file);\r\n    },\r\n    /**\r\n     * 读取 apiclient_cert.pem 到 privateCertContent 字段\r\n     */\r\n    privateCertContentUpload(event) {\r\n      const readFile = new FileReader()\r\n      readFile.onload = (e) => {\r\n        this.formData.config.privateCertContent = e.target.result\r\n      }\r\n      readFile.readAsText(event.file);\r\n    },\r\n    /**\r\n     * 读取 apiclient_cert.p12 到 keyContent 字段\r\n     */\r\n    keyContentUpload(event) {\r\n      const readFile = new FileReader()\r\n      readFile.onload = (e) => {\r\n        this.formData.config.keyContent = e.target.result.split(',')[1]\r\n      }\r\n      readFile.readAsDataURL(event.file); // 读成 base64\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"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"}]}