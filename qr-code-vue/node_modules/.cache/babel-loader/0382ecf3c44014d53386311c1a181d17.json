{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\form\\ElementForm.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\form\\ElementForm.vue","mtime":1704630437715},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\babel.config.js","mtime":1704630437199},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyIpOwp2YXIgX2RlZmF1bHQgPSBleHBvcnRzLmRlZmF1bHQgPSB7CiAgbmFtZTogIkVsZW1lbnRGb3JtIiwKICBwcm9wczogewogICAgaWQ6IFN0cmluZywKICAgIHR5cGU6IFN0cmluZwogIH0sCiAgaW5qZWN0OiB7CiAgICBwcmVmaXg6ICJwcmVmaXgiLAogICAgd2lkdGg6ICJ3aWR0aCIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtS2V5OiAiIiwKICAgICAgYnVzaW5lc3NLZXk6ICIiLAogICAgICBvcHRpb25Nb2RlbFRpdGxlOiAiIiwKICAgICAgZmllbGRMaXN0OiBbXSwKICAgICAgZm9ybUZpZWxkRm9ybToge30sCiAgICAgIGZpZWxkVHlwZTogewogICAgICAgIGxvbmc6ICLplb/mlbTlnosiLAogICAgICAgIHN0cmluZzogIuWtl+espuS4siIsCiAgICAgICAgYm9vbGVhbjogIuW4g+WwlOexuyIsCiAgICAgICAgZGF0ZTogIuaXpeacn+exuyIsCiAgICAgICAgZW51bTogIuaemuS4vuexuyIsCiAgICAgICAgY3VzdG9tOiAi6Ieq5a6a5LmJ57G75Z6LIgogICAgICB9LAogICAgICBmb3JtRmllbGRJbmRleDogLTEsCiAgICAgIC8vIOe8lui+keS4reeahOWtl+aute+8jCAtMSDkuLrmlrDlop4KICAgICAgZm9ybUZpZWxkT3B0aW9uSW5kZXg6IC0xLAogICAgICAvLyDnvJbovpHkuK3nmoTlrZfmrrXphY3nva7pobnvvIwgLTEg5Li65paw5aKeCiAgICAgIGZpZWxkTW9kZWxWaXNpYmxlOiBmYWxzZSwKICAgICAgZmllbGRPcHRpb25Nb2RlbFZpc2libGU6IGZhbHNlLAogICAgICBmaWVsZE9wdGlvbkZvcm06IHt9LAogICAgICAvLyDlvZPliY3mv4DmtLvnmoTlrZfmrrXphY3nva7pobnmlbDmja4KICAgICAgZmllbGRPcHRpb25UeXBlOiAiIiwKICAgICAgLy8g5b2T5YmN5r+A5rS755qE5a2X5q616YWN572u6aG55by556qXIOexu+WeiwogICAgICBmaWVsZEVudW1MaXN0OiBbXSwKICAgICAgLy8g5p6a5Li+5YC85YiX6KGoCiAgICAgIGZpZWxkQ29uc3RyYWludHNMaXN0OiBbXSwKICAgICAgLy8g57qm5p2f5p2h5Lu25YiX6KGoCiAgICAgIGZpZWxkUHJvcGVydGllc0xpc3Q6IFtdIC8vIOe7keWumuWxnuaAp+WIl+ihqAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBpZDogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICB2YWwgJiYgdmFsLmxlbmd0aCAmJiB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMucmVzZXRGb3JtTGlzdCgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNldEZvcm1MaXN0OiBmdW5jdGlvbiByZXNldEZvcm1MaXN0KCkgewogICAgICB2YXIgX3RoaXMkZWxFeHRlbnNpb25FbGVtLAogICAgICAgIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMuYnBtbkVMZW1lbnQgPSB3aW5kb3cuYnBtbkluc3RhbmNlcy5icG1uRWxlbWVudDsKICAgICAgdGhpcy5mb3JtS2V5ID0gdGhpcy5icG1uRUxlbWVudC5idXNpbmVzc09iamVjdC5mb3JtS2V5OwogICAgICAvLyDojrflj5blhYPntKDmianlsZXlsZ7mgKcg5oiW6ICFIOWIm+W7uuaJqeWxleWxnuaApwogICAgICB0aGlzLmVsRXh0ZW5zaW9uRWxlbWVudHMgPSB0aGlzLmJwbW5FTGVtZW50LmJ1c2luZXNzT2JqZWN0LmdldCgiZXh0ZW5zaW9uRWxlbWVudHMiKSB8fCB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RkbGUuY3JlYXRlKCJicG1uOkV4dGVuc2lvbkVsZW1lbnRzIiwgewogICAgICAgIHZhbHVlczogW10KICAgICAgfSk7CiAgICAgIC8vIOiOt+WPluWFg+e0oOihqOWNlemFjee9riDmiJbogIUg5Yib5bu65paw55qE6KGo5Y2V6YWN572uCiAgICAgIHRoaXMuZm9ybURhdGEgPSAoKF90aGlzJGVsRXh0ZW5zaW9uRWxlbSA9IHRoaXMuZWxFeHRlbnNpb25FbGVtZW50cy52YWx1ZXMuZmlsdGVyKGZ1bmN0aW9uIChleCkgewogICAgICAgIHJldHVybiBleC4kdHlwZSA9PT0gIiIuY29uY2F0KF90aGlzMi5wcmVmaXgsICI6Rm9ybURhdGEiKTsKICAgICAgfSkpID09PSBudWxsIHx8IF90aGlzJGVsRXh0ZW5zaW9uRWxlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkZWxFeHRlbnNpb25FbGVtWzBdKSB8fCB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RkbGUuY3JlYXRlKCIiLmNvbmNhdCh0aGlzLnByZWZpeCwgIjpGb3JtRGF0YSIpLCB7CiAgICAgICAgZmllbGRzOiBbXQogICAgICB9KTsKCiAgICAgIC8vIOS4muWKoeagh+ivhiBidXNpbmVzc0tlee+8jCDnu5HlrprlnKggZm9ybURhdGEg5LitCiAgICAgIHRoaXMuYnVzaW5lc3NLZXkgPSB0aGlzLmZvcm1EYXRhLmJ1c2luZXNzS2V5OwoKICAgICAgLy8g5L+d55WZ5Ymp5L2Z5omp5bGV5YWD57Sg77yM5L6/5LqO5ZCO6Z2i5pu05paw6K+l5YWD57Sg5a+55bqU5bGe5oCnCiAgICAgIHRoaXMub3RoZXJFeHRlbnNpb25zID0gdGhpcy5lbEV4dGVuc2lvbkVsZW1lbnRzLnZhbHVlcy5maWx0ZXIoZnVuY3Rpb24gKGV4KSB7CiAgICAgICAgcmV0dXJuIGV4LiR0eXBlICE9PSAiIi5jb25jYXQoX3RoaXMyLnByZWZpeCwgIjpGb3JtRGF0YSIpOwogICAgICB9KTsKCiAgICAgIC8vIOWkjeWItuWOn+Wni+WAvO+8jOWhq+WFheihqOagvAogICAgICB0aGlzLmZpZWxkTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5mb3JtRGF0YS5maWVsZHMgfHwgW10pKTsKCiAgICAgIC8vIOabtOaWsOWFg+e0oOaJqeWxleWxnuaAp++8jOmBv+WFjeWQjue7reaKpemUmQogICAgICB0aGlzLnVwZGF0ZUVsZW1lbnRFeHRlbnNpb25zKCk7CiAgICB9LAogICAgdXBkYXRlRWxlbWVudEZvcm1LZXk6IGZ1bmN0aW9uIHVwZGF0ZUVsZW1lbnRGb3JtS2V5KCkgewogICAgICB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RlbGluZy51cGRhdGVQcm9wZXJ0aWVzKHRoaXMuYnBtbkVMZW1lbnQsIHsKICAgICAgICBmb3JtS2V5OiB0aGlzLmZvcm1LZXkKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlRWxlbWVudEJ1c2luZXNzS2V5OiBmdW5jdGlvbiB1cGRhdGVFbGVtZW50QnVzaW5lc3NLZXkoKSB7CiAgICAgIHdpbmRvdy5icG1uSW5zdGFuY2VzLm1vZGVsaW5nLnVwZGF0ZU1vZGRsZVByb3BlcnRpZXModGhpcy5icG1uRUxlbWVudCwgdGhpcy5mb3JtRGF0YSwgewogICAgICAgIGJ1c2luZXNzS2V5OiB0aGlzLmJ1c2luZXNzS2V5CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOagueaNruexu+Wei+iwg+aVtOWtl+autXR5cGUKICAgIGNoYW5nZUZpZWxkVHlwZVR5cGU6IGZ1bmN0aW9uIGNoYW5nZUZpZWxkVHlwZVR5cGUodHlwZSkgewogICAgICB0aGlzLiRzZXQodGhpcy5mb3JtRmllbGRGb3JtLCAidHlwZSIsIHR5cGUgPT09ICJjdXN0b20iID8gIiIgOiB0eXBlKTsKICAgIH0sCiAgICAvLyDmiZPlvIDlrZfmrrXor6bmg4XkvqfovrnmoI8KICAgIG9wZW5GaWVsZEZvcm06IGZ1bmN0aW9uIG9wZW5GaWVsZEZvcm0oZmllbGQsIGluZGV4KSB7CiAgICAgIHRoaXMuZm9ybUZpZWxkSW5kZXggPSBpbmRleDsKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIHZhciBfRmllbGRPYmplY3QkdmFsaWRhdGksIF9GaWVsZE9iamVjdCRwcm9wZXJ0aTsKICAgICAgICB2YXIgRmllbGRPYmplY3QgPSB0aGlzLmZvcm1EYXRhLmZpZWxkc1tpbmRleF07CiAgICAgICAgdGhpcy5mb3JtRmllbGRGb3JtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmaWVsZCkpOwogICAgICAgIC8vIOiuvue9ruiHquWumuS5ieexu+WeiwogICAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm1GaWVsZEZvcm0sICJ0eXBlVHlwZSIsICF0aGlzLmZpZWxkVHlwZVtmaWVsZC50eXBlXSA/ICJjdXN0b20iIDogZmllbGQudHlwZSk7CiAgICAgICAgLy8g5Yid5aeL5YyW5p6a5Li+5YC85YiX6KGoCiAgICAgICAgZmllbGQudHlwZSA9PT0gImVudW0iICYmICh0aGlzLmZpZWxkRW51bUxpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KChGaWVsZE9iamVjdCA9PT0gbnVsbCB8fCBGaWVsZE9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogRmllbGRPYmplY3QudmFsdWVzKSB8fCBbXSkpKTsKICAgICAgICAvLyDliJ3lp4vljJbnuqbmnZ/mnaHku7bliJfooagKICAgICAgICB0aGlzLmZpZWxkQ29uc3RyYWludHNMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSgoRmllbGRPYmplY3QgPT09IG51bGwgfHwgRmllbGRPYmplY3QgPT09IHZvaWQgMCB8fCAoX0ZpZWxkT2JqZWN0JHZhbGlkYXRpID0gRmllbGRPYmplY3QudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX0ZpZWxkT2JqZWN0JHZhbGlkYXRpID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfRmllbGRPYmplY3QkdmFsaWRhdGkuY29uc3RyYWludHMpIHx8IFtdKSk7CiAgICAgICAgLy8g5Yid5aeL5YyW6Ieq5a6a5LmJ5bGe5oCn5YiX6KGoCiAgICAgICAgdGhpcy5maWVsZFByb3BlcnRpZXNMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSgoRmllbGRPYmplY3QgPT09IG51bGwgfHwgRmllbGRPYmplY3QgPT09IHZvaWQgMCB8fCAoX0ZpZWxkT2JqZWN0JHByb3BlcnRpID0gRmllbGRPYmplY3QucHJvcGVydGllcykgPT09IG51bGwgfHwgX0ZpZWxkT2JqZWN0JHByb3BlcnRpID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfRmllbGRPYmplY3QkcHJvcGVydGkudmFsdWVzKSB8fCBbXSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZm9ybUZpZWxkRm9ybSA9IHt9OwogICAgICAgIC8vIOWIneWni+WMluaemuS4vuWAvOWIl+ihqAogICAgICAgIHRoaXMuZmllbGRFbnVtTGlzdCA9IFtdOwogICAgICAgIC8vIOWIneWni+WMlue6puadn+adoeS7tuWIl+ihqAogICAgICAgIHRoaXMuZmllbGRDb25zdHJhaW50c0xpc3QgPSBbXTsKICAgICAgICAvLyDliJ3lp4vljJboh6rlrprkuYnlsZ7mgKfliJfooagKICAgICAgICB0aGlzLmZpZWxkUHJvcGVydGllc0xpc3QgPSBbXTsKICAgICAgfQogICAgICB0aGlzLmZpZWxkTW9kZWxWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDmiZPlvIDlrZfmrrUg5p+Q5LiqIOmFjee9rumhuSDlvLnnqpcKICAgIG9wZW5GaWVsZE9wdGlvbkZvcm06IGZ1bmN0aW9uIG9wZW5GaWVsZE9wdGlvbkZvcm0ob3B0aW9uLCBpbmRleCwgdHlwZSkgewogICAgICB0aGlzLmZpZWxkT3B0aW9uTW9kZWxWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5maWVsZE9wdGlvblR5cGUgPSB0eXBlOwogICAgICB0aGlzLmZvcm1GaWVsZE9wdGlvbkluZGV4ID0gaW5kZXg7CiAgICAgIGlmICh0eXBlID09PSAicHJvcGVydHkiKSB7CiAgICAgICAgdGhpcy5maWVsZE9wdGlvbkZvcm0gPSBvcHRpb24gPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9wdGlvbikpIDoge307CiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uTW9kZWxUaXRsZSA9ICLlsZ7mgKfphY3nva4iOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAiZW51bSIpIHsKICAgICAgICB0aGlzLmZpZWxkT3B0aW9uRm9ybSA9IG9wdGlvbiA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob3B0aW9uKSkgOiB7fTsKICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25Nb2RlbFRpdGxlID0gIuaemuS4vuWAvOmFjee9riI7CiAgICAgIH0KICAgICAgdGhpcy5maWVsZE9wdGlvbkZvcm0gPSBvcHRpb24gPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9wdGlvbikpIDoge307CiAgICAgIHJldHVybiB0aGlzLm9wdGlvbk1vZGVsVGl0bGUgPSAi57qm5p2f5p2h5Lu26YWN572uIjsKICAgIH0sCiAgICAvLyDkv53lrZjlrZfmrrUg5p+Q5LiqIOmFjee9rumhuQogICAgc2F2ZUZpZWxkT3B0aW9uOiBmdW5jdGlvbiBzYXZlRmllbGRPcHRpb24oKSB7CiAgICAgIGlmICh0aGlzLmZvcm1GaWVsZE9wdGlvbkluZGV4ID09PSAtMSkgewogICAgICAgIGlmICh0aGlzLmZpZWxkT3B0aW9uVHlwZSA9PT0gInByb3BlcnR5IikgewogICAgICAgICAgdGhpcy5maWVsZFByb3BlcnRpZXNMaXN0LnB1c2godGhpcy5maWVsZE9wdGlvbkZvcm0pOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5maWVsZE9wdGlvblR5cGUgPT09ICJjb25zdHJhaW50IikgewogICAgICAgICAgdGhpcy5maWVsZENvbnN0cmFpbnRzTGlzdC5wdXNoKHRoaXMuZmllbGRPcHRpb25Gb3JtKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuZmllbGRPcHRpb25UeXBlID09PSAiZW51bSIpIHsKICAgICAgICAgIHRoaXMuZmllbGRFbnVtTGlzdC5wdXNoKHRoaXMuZmllbGRPcHRpb25Gb3JtKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5maWVsZE9wdGlvblR5cGUgPT09ICJwcm9wZXJ0eSIgJiYgdGhpcy5maWVsZFByb3BlcnRpZXNMaXN0LnNwbGljZSh0aGlzLmZvcm1GaWVsZE9wdGlvbkluZGV4LCAxLCB0aGlzLmZpZWxkT3B0aW9uRm9ybSk7CiAgICAgICAgdGhpcy5maWVsZE9wdGlvblR5cGUgPT09ICJjb25zdHJhaW50IiAmJiB0aGlzLmZpZWxkQ29uc3RyYWludHNMaXN0LnNwbGljZSh0aGlzLmZvcm1GaWVsZE9wdGlvbkluZGV4LCAxLCB0aGlzLmZpZWxkT3B0aW9uRm9ybSk7CiAgICAgICAgdGhpcy5maWVsZE9wdGlvblR5cGUgPT09ICJlbnVtIiAmJiB0aGlzLmZpZWxkRW51bUxpc3Quc3BsaWNlKHRoaXMuZm9ybUZpZWxkT3B0aW9uSW5kZXgsIDEsIHRoaXMuZmllbGRPcHRpb25Gb3JtKTsKICAgICAgfQogICAgICB0aGlzLmZpZWxkT3B0aW9uTW9kZWxWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuZmllbGRPcHRpb25Gb3JtID0ge307CiAgICB9LAogICAgLy8g5L+d5a2Y5a2X5q616YWN572uCiAgICBzYXZlRmllbGQ6IGZ1bmN0aW9uIHNhdmVGaWVsZCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHZhciBfdGhpcyRmb3JtRmllbGRGb3JtID0gdGhpcy5mb3JtRmllbGRGb3JtLAogICAgICAgIGlkID0gX3RoaXMkZm9ybUZpZWxkRm9ybS5pZCwKICAgICAgICB0eXBlID0gX3RoaXMkZm9ybUZpZWxkRm9ybS50eXBlLAogICAgICAgIGxhYmVsID0gX3RoaXMkZm9ybUZpZWxkRm9ybS5sYWJlbCwKICAgICAgICBkZWZhdWx0VmFsdWUgPSBfdGhpcyRmb3JtRmllbGRGb3JtLmRlZmF1bHRWYWx1ZSwKICAgICAgICBkYXRlUGF0dGVybiA9IF90aGlzJGZvcm1GaWVsZEZvcm0uZGF0ZVBhdHRlcm47CiAgICAgIHZhciBGaWVsZCA9IHdpbmRvdy5icG1uSW5zdGFuY2VzLm1vZGRsZS5jcmVhdGUoIiIuY29uY2F0KHRoaXMucHJlZml4LCAiOkZvcm1GaWVsZCIpLCB7CiAgICAgICAgaWQ6IGlkLAogICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgbGFiZWw6IGxhYmVsCiAgICAgIH0pOwogICAgICBkZWZhdWx0VmFsdWUgJiYgKEZpZWxkLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZSk7CiAgICAgIGRhdGVQYXR0ZXJuICYmIChGaWVsZC5kYXRlUGF0dGVybiA9IGRhdGVQYXR0ZXJuKTsKICAgICAgLy8g5p6E5bu65bGe5oCnCiAgICAgIGlmICh0aGlzLmZpZWxkUHJvcGVydGllc0xpc3QgJiYgdGhpcy5maWVsZFByb3BlcnRpZXNMaXN0Lmxlbmd0aCkgewogICAgICAgIHZhciBmaWVsZFByb3BlcnR5TGlzdCA9IHRoaXMuZmllbGRQcm9wZXJ0aWVzTGlzdC5tYXAoZnVuY3Rpb24gKGZwKSB7CiAgICAgICAgICByZXR1cm4gd2luZG93LmJwbW5JbnN0YW5jZXMubW9kZGxlLmNyZWF0ZSgiIi5jb25jYXQoX3RoaXMzLnByZWZpeCwgIjpQcm9wZXJ0eSIpLCB7CiAgICAgICAgICAgIGlkOiBmcC5pZCwKICAgICAgICAgICAgdmFsdWU6IGZwLnZhbHVlCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBGaWVsZC5wcm9wZXJ0aWVzID0gd2luZG93LmJwbW5JbnN0YW5jZXMubW9kZGxlLmNyZWF0ZSgiIi5jb25jYXQodGhpcy5wcmVmaXgsICI6UHJvcGVydGllcyIpLCB7CiAgICAgICAgICB2YWx1ZXM6IGZpZWxkUHJvcGVydHlMaXN0CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLy8g5p6E5bu65qCh6aqM6KeE5YiZCiAgICAgIGlmICh0aGlzLmZpZWxkQ29uc3RyYWludHNMaXN0ICYmIHRoaXMuZmllbGRDb25zdHJhaW50c0xpc3QubGVuZ3RoKSB7CiAgICAgICAgdmFyIGZpZWxkQ29uc3RyYWludExpc3QgPSB0aGlzLmZpZWxkQ29uc3RyYWludHNMaXN0Lm1hcChmdW5jdGlvbiAoZmMpIHsKICAgICAgICAgIHJldHVybiB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RkbGUuY3JlYXRlKCIiLmNvbmNhdChfdGhpczMucHJlZml4LCAiOkNvbnN0cmFpbnQiKSwgewogICAgICAgICAgICBuYW1lOiBmYy5uYW1lLAogICAgICAgICAgICBjb25maWc6IGZjLmNvbmZpZwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgRmllbGQudmFsaWRhdGlvbiA9IHdpbmRvdy5icG1uSW5zdGFuY2VzLm1vZGRsZS5jcmVhdGUoIiIuY29uY2F0KHRoaXMucHJlZml4LCAiOlZhbGlkYXRpb24iKSwgewogICAgICAgICAgY29uc3RyYWludHM6IGZpZWxkQ29uc3RyYWludExpc3QKICAgICAgICB9KTsKICAgICAgfQogICAgICAvLyDmnoTlu7rmnprkuL7lgLwKICAgICAgaWYgKHRoaXMuZmllbGRFbnVtTGlzdCAmJiB0aGlzLmZpZWxkRW51bUxpc3QubGVuZ3RoKSB7CiAgICAgICAgRmllbGQudmFsdWVzID0gdGhpcy5maWVsZEVudW1MaXN0Lm1hcChmdW5jdGlvbiAoZmUpIHsKICAgICAgICAgIHJldHVybiB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RkbGUuY3JlYXRlKCIiLmNvbmNhdChfdGhpczMucHJlZml4LCAiOlZhbHVlIiksIHsKICAgICAgICAgICAgbmFtZTogZmUubmFtZSwKICAgICAgICAgICAgaWQ6IGZlLmlkCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgICAvLyDmm7TmlrDmlbDnu4Qg5LiOIOihqOWNlemFjee9ruWunuS+iwogICAgICBpZiAodGhpcy5mb3JtRmllbGRJbmRleCA9PT0gLTEpIHsKICAgICAgICB0aGlzLmZpZWxkTGlzdC5wdXNoKHRoaXMuZm9ybUZpZWxkRm9ybSk7CiAgICAgICAgdGhpcy5mb3JtRGF0YS5maWVsZHMucHVzaChGaWVsZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5maWVsZExpc3Quc3BsaWNlKHRoaXMuZm9ybUZpZWxkSW5kZXgsIDEsIHRoaXMuZm9ybUZpZWxkRm9ybSk7CiAgICAgICAgdGhpcy5mb3JtRGF0YS5maWVsZHMuc3BsaWNlKHRoaXMuZm9ybUZpZWxkSW5kZXgsIDEsIEZpZWxkKTsKICAgICAgfQogICAgICB0aGlzLnVwZGF0ZUVsZW1lbnRFeHRlbnNpb25zKCk7CiAgICAgIHRoaXMuZmllbGRNb2RlbFZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDnp7vpmaTmn5DkuKog5a2X5q6155qEIOmFjee9rumhuQogICAgcmVtb3ZlRmllbGRPcHRpb25JdGVtOiBmdW5jdGlvbiByZW1vdmVGaWVsZE9wdGlvbkl0ZW0ob3B0aW9uLCBpbmRleCwgdHlwZSkgewogICAgICBpZiAodHlwZSA9PT0gInByb3BlcnR5IikgewogICAgICAgIHRoaXMuZmllbGRQcm9wZXJ0aWVzTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodHlwZSA9PT0gImVudW0iKSB7CiAgICAgICAgdGhpcy5maWVsZEVudW1MaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuZmllbGRDb25zdHJhaW50c0xpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDnp7vpmaQg5a2X5q61CiAgICByZW1vdmVGaWVsZDogZnVuY3Rpb24gcmVtb3ZlRmllbGQoZmllbGQsIGluZGV4KSB7CiAgICAgIHRoaXMuZmllbGRMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuZm9ybURhdGEuZmllbGRzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMudXBkYXRlRWxlbWVudEV4dGVuc2lvbnMoKTsKICAgIH0sCiAgICB1cGRhdGVFbGVtZW50RXh0ZW5zaW9uczogZnVuY3Rpb24gdXBkYXRlRWxlbWVudEV4dGVuc2lvbnMoKSB7CiAgICAgIC8vIOabtOaWsOWbnuaJqeWxleWFg+e0oAogICAgICB2YXIgbmV3RWxFeHRlbnNpb25FbGVtZW50cyA9IHdpbmRvdy5icG1uSW5zdGFuY2VzLm1vZGRsZS5jcmVhdGUoImJwbW46RXh0ZW5zaW9uRWxlbWVudHMiLCB7CiAgICAgICAgdmFsdWVzOiB0aGlzLm90aGVyRXh0ZW5zaW9ucy5jb25jYXQodGhpcy5mb3JtRGF0YSkKICAgICAgfSk7CiAgICAgIC8vIOabtOaWsOWIsOWFg+e0oOS4igogICAgICB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RlbGluZy51cGRhdGVQcm9wZXJ0aWVzKHRoaXMuYnBtbkVMZW1lbnQsIHsKICAgICAgICBleHRlbnNpb25FbGVtZW50czogbmV3RWxFeHRlbnNpb25FbGVtZW50cwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["name","props","id","String","type","inject","prefix","width","data","formKey","businessKey","optionModelTitle","fieldList","formFieldForm","fieldType","long","string","boolean","date","enum","custom","formFieldIndex","formFieldOptionIndex","fieldModelVisible","fieldOptionModelVisible","fieldOptionForm","fieldOptionType","fieldEnumList","fieldConstraintsList","fieldPropertiesList","watch","immediate","handler","val","_this","length","$nextTick","resetFormList","methods","_this$elExtensionElem","_this2","bpmnELement","window","bpmnInstances","bpmnElement","businessObject","elExtensionElements","get","moddle","create","values","formData","filter","ex","$type","concat","fields","otherExtensions","JSON","parse","stringify","updateElementExtensions","updateElementFormKey","modeling","updateProperties","updateElementBusinessKey","updateModdleProperties","changeFieldTypeType","$set","openFieldForm","field","index","_FieldObject$validati","_FieldObject$properti","FieldObject","validation","constraints","properties","openFieldOptionForm","option","saveFieldOption","push","splice","saveField","_this3","_this$formFieldForm","label","defaultValue","datePattern","Field","fieldPropertyList","map","fp","value","fieldConstraintList","fc","config","fe","removeFieldOptionItem","removeField","newElExtensionElements","extensionElements"],"sources":["src/components/bpmnProcessDesigner/package/penal/form/ElementForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"panel-tab__content\">\r\n    <el-form size=\"mini\" label-width=\"80px\" @submit.native.prevent>\r\n      <el-form-item label=\"表单标识\">\r\n        <el-input v-model=\"formKey\" clearable @change=\"updateElementFormKey\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"业务标识\">\r\n        <el-select v-model=\"businessKey\" @change=\"updateElementBusinessKey\">\r\n          <el-option v-for=\"i in fieldList\" :key=\"i.id\" :value=\"i.id\" :label=\"i.label\" />\r\n          <el-option label=\"无\" value=\"\" />\r\n        </el-select>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <!--字段列表-->\r\n    <div class=\"element-property list-property\">\r\n      <el-divider><i class=\"el-icon-coin\"></i> 表单字段</el-divider>\r\n      <el-table :data=\"fieldList\" size=\"mini\" max-height=\"240\" border fit>\r\n        <el-table-column label=\"序号\" type=\"index\" width=\"50px\" />\r\n        <el-table-column label=\"字段名称\" prop=\"label\" min-width=\"80px\" show-overflow-tooltip />\r\n        <el-table-column label=\"字段类型\" prop=\"type\" min-width=\"80px\" :formatter=\"row => fieldType[row.type] || row.type\" show-overflow-tooltip />\r\n        <el-table-column label=\"默认值\" prop=\"defaultValue\" min-width=\"80px\" show-overflow-tooltip />\r\n        <el-table-column label=\"操作\" width=\"90px\">\r\n          <template v-slot=\"{ row, $index }\">\r\n            <el-button size=\"mini\" type=\"text\" @click=\"openFieldForm(row, $index)\">编辑</el-button>\r\n            <el-divider direction=\"vertical\" />\r\n            <el-button size=\"mini\" type=\"text\" style=\"color: #ff4d4f\" @click=\"removeField(row, $index)\">移除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <div class=\"element-drawer__button\">\r\n      <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-plus\" @click=\"openFieldForm(null, -1)\">添加字段</el-button>\r\n    </div>\r\n\r\n    <!--字段配置侧边栏-->\r\n    <el-drawer :visible.sync=\"fieldModelVisible\" title=\"字段配置\" :size=\"`${width}px`\" append-to-body destroy-on-close>\r\n      <el-form :model=\"formFieldForm\" label-width=\"90px\" size=\"mini\" @submit.native.prevent>\r\n        <el-form-item label=\"字段ID\">\r\n          <el-input v-model=\"formFieldForm.id\" clearable />\r\n        </el-form-item>\r\n        <el-form-item label=\"类型\">\r\n          <el-select v-model=\"formFieldForm.typeType\" placeholder=\"请选择字段类型\" clearable @change=\"changeFieldTypeType\">\r\n            <el-option v-for=\"(value, key) of fieldType\" :label=\"value\" :value=\"key\" :key=\"key\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"类型名称\" v-if=\"formFieldForm.typeType === 'custom'\">\r\n          <el-input v-model=\"formFieldForm.type\" clearable />\r\n        </el-form-item>\r\n        <el-form-item label=\"名称\">\r\n          <el-input v-model=\"formFieldForm.label\" clearable />\r\n        </el-form-item>\r\n        <el-form-item label=\"时间格式\" v-if=\"formFieldForm.typeType === 'date'\">\r\n          <el-input v-model=\"formFieldForm.datePattern\" clearable />\r\n        </el-form-item>\r\n        <el-form-item label=\"默认值\">\r\n          <el-input v-model=\"formFieldForm.defaultValue\" clearable />\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <!-- 枚举值设置 -->\r\n      <template v-if=\"formFieldForm.type === 'enum'\">\r\n        <el-divider key=\"enum-divider\" />\r\n        <p class=\"listener-filed__title\" key=\"enum-title\">\r\n          <span><i class=\"el-icon-menu\"></i>枚举值列表：</span>\r\n          <el-button size=\"mini\" type=\"primary\" @click=\"openFieldOptionForm(null, -1, 'enum')\">添加枚举值</el-button>\r\n        </p>\r\n        <el-table :data=\"fieldEnumList\" size=\"mini\" key=\"enum-table\" max-height=\"240\" border fit>\r\n          <el-table-column label=\"序号\" width=\"50px\" type=\"index\" />\r\n          <el-table-column label=\"枚举值编号\" prop=\"id\" min-width=\"100px\" show-overflow-tooltip />\r\n          <el-table-column label=\"枚举值名称\" prop=\"name\" min-width=\"100px\" show-overflow-tooltip />\r\n          <el-table-column label=\"操作\" width=\"90px\">\r\n            <template v-slot=\"{ row, $index }\">\r\n              <el-button size=\"mini\" type=\"text\" @click=\"openFieldOptionForm(row, $index, 'enum')\">编辑</el-button>\r\n              <el-divider direction=\"vertical\" />\r\n              <el-button size=\"mini\" type=\"text\" style=\"color: #ff4d4f\" @click=\"removeFieldOptionItem(row, $index, 'enum')\">移除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </template>\r\n\r\n      <!-- 校验规则 -->\r\n      <el-divider key=\"validation-divider\" />\r\n      <p class=\"listener-filed__title\" key=\"validation-title\">\r\n        <span><i class=\"el-icon-menu\"></i>约束条件列表：</span>\r\n        <el-button size=\"mini\" type=\"primary\" @click=\"openFieldOptionForm(null, -1, 'constraint')\">添加约束</el-button>\r\n      </p>\r\n      <el-table :data=\"fieldConstraintsList\" size=\"mini\" key=\"validation-table\" max-height=\"240\" border fit>\r\n        <el-table-column label=\"序号\" width=\"50px\" type=\"index\" />\r\n        <el-table-column label=\"约束名称\" prop=\"name\" min-width=\"100px\" show-overflow-tooltip />\r\n        <el-table-column label=\"约束配置\" prop=\"config\" min-width=\"100px\" show-overflow-tooltip />\r\n        <el-table-column label=\"操作\" width=\"90px\">\r\n          <template v-slot=\"{ row, $index }\">\r\n            <el-button size=\"mini\" type=\"text\" @click=\"openFieldOptionForm(row, $index, 'constraint')\">编辑</el-button>\r\n            <el-divider direction=\"vertical\" />\r\n            <el-button size=\"mini\" type=\"text\" style=\"color: #ff4d4f\" @click=\"removeFieldOptionItem(row, $index, 'constraint')\">移除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 表单属性 -->\r\n      <el-divider key=\"property-divider\" />\r\n      <p class=\"listener-filed__title\" key=\"property-title\">\r\n        <span><i class=\"el-icon-menu\"></i>字段属性列表：</span>\r\n        <el-button size=\"mini\" type=\"primary\" @click=\"openFieldOptionForm(null, -1, 'property')\">添加属性</el-button>\r\n      </p>\r\n      <el-table :data=\"fieldPropertiesList\" size=\"mini\" key=\"property-table\" max-height=\"240\" border fit>\r\n        <el-table-column label=\"序号\" width=\"50px\" type=\"index\" />\r\n        <el-table-column label=\"属性编号\" prop=\"id\" min-width=\"100px\" show-overflow-tooltip />\r\n        <el-table-column label=\"属性值\" prop=\"value\" min-width=\"100px\" show-overflow-tooltip />\r\n        <el-table-column label=\"操作\" width=\"90px\">\r\n          <template v-slot=\"{ row, $index }\">\r\n            <el-button size=\"mini\" type=\"text\" @click=\"openFieldOptionForm(row, $index, 'property')\">编辑</el-button>\r\n            <el-divider direction=\"vertical\" />\r\n            <el-button size=\"mini\" type=\"text\" style=\"color: #ff4d4f\" @click=\"removeFieldOptionItem(row, $index, 'property')\">移除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 底部按钮 -->\r\n      <div class=\"element-drawer__button\">\r\n        <el-button size=\"mini\">取 消</el-button>\r\n        <el-button size=\"mini\" type=\"primary\" @click=\"saveField\">保 存</el-button>\r\n      </div>\r\n    </el-drawer>\r\n\r\n    <el-dialog :visible.sync=\"fieldOptionModelVisible\" :title=\"optionModelTitle\" width=\"600px\" append-to-body destroy-on-close>\r\n      <el-form :model=\"fieldOptionForm\" size=\"mini\" label-width=\"96px\" @submit.native.prevent>\r\n        <el-form-item label=\"编号/ID\" v-if=\"fieldOptionType !== 'constraint'\" key=\"option-id\">\r\n          <el-input v-model=\"fieldOptionForm.id\" clearable />\r\n        </el-form-item>\r\n        <el-form-item label=\"名称\" v-if=\"fieldOptionType !== 'property'\" key=\"option-name\">\r\n          <el-input v-model=\"fieldOptionForm.name\" clearable />\r\n        </el-form-item>\r\n        <el-form-item label=\"配置\" v-if=\"fieldOptionType === 'constraint'\" key=\"option-config\">\r\n          <el-input v-model=\"fieldOptionForm.config\" clearable />\r\n        </el-form-item>\r\n        <el-form-item label=\"值\" v-if=\"fieldOptionType === 'property'\" key=\"option-value\">\r\n          <el-input v-model=\"fieldOptionForm.value\" clearable />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template slot=\"footer\">\r\n        <el-button size=\"mini\" @click=\"fieldOptionModelVisible = false\">取 消</el-button>\r\n        <el-button size=\"mini\" type=\"primary\" @click=\"saveFieldOption\">确 定</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ElementForm\",\r\n  props: {\r\n    id: String,\r\n    type: String\r\n  },\r\n  inject: {\r\n    prefix: \"prefix\",\r\n    width: \"width\"\r\n  },\r\n  data() {\r\n    return {\r\n      formKey: \"\",\r\n      businessKey: \"\",\r\n      optionModelTitle: \"\",\r\n      fieldList: [],\r\n      formFieldForm: {},\r\n      fieldType: {\r\n        long: \"长整型\",\r\n        string: \"字符串\",\r\n        boolean: \"布尔类\",\r\n        date: \"日期类\",\r\n        enum: \"枚举类\",\r\n        custom: \"自定义类型\"\r\n      },\r\n      formFieldIndex: -1, // 编辑中的字段， -1 为新增\r\n      formFieldOptionIndex: -1, // 编辑中的字段配置项， -1 为新增\r\n      fieldModelVisible: false,\r\n      fieldOptionModelVisible: false,\r\n      fieldOptionForm: {}, // 当前激活的字段配置项数据\r\n      fieldOptionType: \"\", // 当前激活的字段配置项弹窗 类型\r\n      fieldEnumList: [], // 枚举值列表\r\n      fieldConstraintsList: [], // 约束条件列表\r\n      fieldPropertiesList: [] // 绑定属性列表\r\n    };\r\n  },\r\n  watch: {\r\n    id: {\r\n      immediate: true,\r\n      handler(val) {\r\n        val && val.length && this.$nextTick(() => this.resetFormList());\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    resetFormList() {\r\n      this.bpmnELement = window.bpmnInstances.bpmnElement;\r\n      this.formKey = this.bpmnELement.businessObject.formKey;\r\n      // 获取元素扩展属性 或者 创建扩展属性\r\n      this.elExtensionElements =\r\n        this.bpmnELement.businessObject.get(\"extensionElements\") || window.bpmnInstances.moddle.create(\"bpmn:ExtensionElements\", { values: [] });\r\n      // 获取元素表单配置 或者 创建新的表单配置\r\n      this.formData =\r\n        this.elExtensionElements.values.filter(ex => ex.$type === `${this.prefix}:FormData`)?.[0] ||\r\n        window.bpmnInstances.moddle.create(`${this.prefix}:FormData`, { fields: [] });\r\n\r\n      // 业务标识 businessKey， 绑定在 formData 中\r\n      this.businessKey = this.formData.businessKey;\r\n\r\n      // 保留剩余扩展元素，便于后面更新该元素对应属性\r\n      this.otherExtensions = this.elExtensionElements.values.filter(ex => ex.$type !== `${this.prefix}:FormData`);\r\n\r\n      // 复制原始值，填充表格\r\n      this.fieldList = JSON.parse(JSON.stringify(this.formData.fields || []));\r\n\r\n      // 更新元素扩展属性，避免后续报错\r\n      this.updateElementExtensions();\r\n    },\r\n    updateElementFormKey() {\r\n      window.bpmnInstances.modeling.updateProperties(this.bpmnELement, { formKey: this.formKey });\r\n    },\r\n    updateElementBusinessKey() {\r\n      window.bpmnInstances.modeling.updateModdleProperties(this.bpmnELement, this.formData, { businessKey: this.businessKey });\r\n    },\r\n    // 根据类型调整字段type\r\n    changeFieldTypeType(type) {\r\n      this.$set(this.formFieldForm, \"type\", type === \"custom\" ? \"\" : type);\r\n    },\r\n\r\n    // 打开字段详情侧边栏\r\n    openFieldForm(field, index) {\r\n      this.formFieldIndex = index;\r\n      if (index !== -1) {\r\n        const FieldObject = this.formData.fields[index];\r\n        this.formFieldForm = JSON.parse(JSON.stringify(field));\r\n        // 设置自定义类型\r\n        this.$set(this.formFieldForm, \"typeType\", !this.fieldType[field.type] ? \"custom\" : field.type);\r\n        // 初始化枚举值列表\r\n        field.type === \"enum\" && (this.fieldEnumList = JSON.parse(JSON.stringify(FieldObject?.values || [])));\r\n        // 初始化约束条件列表\r\n        this.fieldConstraintsList = JSON.parse(JSON.stringify(FieldObject?.validation?.constraints || []));\r\n        // 初始化自定义属性列表\r\n        this.fieldPropertiesList = JSON.parse(JSON.stringify(FieldObject?.properties?.values || []));\r\n      } else {\r\n        this.formFieldForm = {};\r\n        // 初始化枚举值列表\r\n        this.fieldEnumList = [];\r\n        // 初始化约束条件列表\r\n        this.fieldConstraintsList = [];\r\n        // 初始化自定义属性列表\r\n        this.fieldPropertiesList = [];\r\n      }\r\n      this.fieldModelVisible = true;\r\n    },\r\n    // 打开字段 某个 配置项 弹窗\r\n    openFieldOptionForm(option, index, type) {\r\n      this.fieldOptionModelVisible = true;\r\n      this.fieldOptionType = type;\r\n      this.formFieldOptionIndex = index;\r\n      if (type === \"property\") {\r\n        this.fieldOptionForm = option ? JSON.parse(JSON.stringify(option)) : {};\r\n        return (this.optionModelTitle = \"属性配置\");\r\n      }\r\n      if (type === \"enum\") {\r\n        this.fieldOptionForm = option ? JSON.parse(JSON.stringify(option)) : {};\r\n        return (this.optionModelTitle = \"枚举值配置\");\r\n      }\r\n      this.fieldOptionForm = option ? JSON.parse(JSON.stringify(option)) : {};\r\n      return (this.optionModelTitle = \"约束条件配置\");\r\n    },\r\n\r\n    // 保存字段 某个 配置项\r\n    saveFieldOption() {\r\n      if (this.formFieldOptionIndex === -1) {\r\n        if (this.fieldOptionType === \"property\") {\r\n          this.fieldPropertiesList.push(this.fieldOptionForm);\r\n        }\r\n        if (this.fieldOptionType === \"constraint\") {\r\n          this.fieldConstraintsList.push(this.fieldOptionForm);\r\n        }\r\n        if (this.fieldOptionType === \"enum\") {\r\n          this.fieldEnumList.push(this.fieldOptionForm);\r\n        }\r\n      } else {\r\n        this.fieldOptionType === \"property\" && this.fieldPropertiesList.splice(this.formFieldOptionIndex, 1, this.fieldOptionForm);\r\n        this.fieldOptionType === \"constraint\" && this.fieldConstraintsList.splice(this.formFieldOptionIndex, 1, this.fieldOptionForm);\r\n        this.fieldOptionType === \"enum\" && this.fieldEnumList.splice(this.formFieldOptionIndex, 1, this.fieldOptionForm);\r\n      }\r\n      this.fieldOptionModelVisible = false;\r\n      this.fieldOptionForm = {};\r\n    },\r\n    // 保存字段配置\r\n    saveField() {\r\n      const { id, type, label, defaultValue, datePattern } = this.formFieldForm;\r\n      const Field = window.bpmnInstances.moddle.create(`${this.prefix}:FormField`, { id, type, label });\r\n      defaultValue && (Field.defaultValue = defaultValue);\r\n      datePattern && (Field.datePattern = datePattern);\r\n      // 构建属性\r\n      if (this.fieldPropertiesList && this.fieldPropertiesList.length) {\r\n        const fieldPropertyList = this.fieldPropertiesList.map(fp => {\r\n          return window.bpmnInstances.moddle.create(`${this.prefix}:Property`, { id: fp.id, value: fp.value });\r\n        });\r\n        Field.properties = window.bpmnInstances.moddle.create(`${this.prefix}:Properties`, { values: fieldPropertyList });\r\n      }\r\n      // 构建校验规则\r\n      if (this.fieldConstraintsList && this.fieldConstraintsList.length) {\r\n        const fieldConstraintList = this.fieldConstraintsList.map(fc => {\r\n          return window.bpmnInstances.moddle.create(`${this.prefix}:Constraint`, { name: fc.name, config: fc.config });\r\n        });\r\n        Field.validation = window.bpmnInstances.moddle.create(`${this.prefix}:Validation`, { constraints: fieldConstraintList });\r\n      }\r\n      // 构建枚举值\r\n      if (this.fieldEnumList && this.fieldEnumList.length) {\r\n        Field.values = this.fieldEnumList.map(fe => {\r\n          return window.bpmnInstances.moddle.create(`${this.prefix}:Value`, { name: fe.name, id: fe.id });\r\n        });\r\n      }\r\n      // 更新数组 与 表单配置实例\r\n      if (this.formFieldIndex === -1) {\r\n        this.fieldList.push(this.formFieldForm);\r\n        this.formData.fields.push(Field);\r\n      } else {\r\n        this.fieldList.splice(this.formFieldIndex, 1, this.formFieldForm);\r\n        this.formData.fields.splice(this.formFieldIndex, 1, Field);\r\n      }\r\n      this.updateElementExtensions();\r\n      this.fieldModelVisible = false;\r\n    },\r\n\r\n    // 移除某个 字段的 配置项\r\n    removeFieldOptionItem(option, index, type) {\r\n      if (type === \"property\") {\r\n        this.fieldPropertiesList.splice(index, 1);\r\n        return;\r\n      }\r\n      if (type === \"enum\") {\r\n        this.fieldEnumList.splice(index, 1);\r\n        return;\r\n      }\r\n      this.fieldConstraintsList.splice(index, 1);\r\n    },\r\n    // 移除 字段\r\n    removeField(field, index) {\r\n      this.fieldList.splice(index, 1);\r\n      this.formData.fields.splice(index, 1);\r\n      this.updateElementExtensions();\r\n    },\r\n\r\n    updateElementExtensions() {\r\n      // 更新回扩展元素\r\n      const newElExtensionElements = window.bpmnInstances.moddle.create(`bpmn:ExtensionElements`, {\r\n        values: this.otherExtensions.concat(this.formData)\r\n      });\r\n      // 更新到元素上\r\n      window.bpmnInstances.modeling.updateProperties(this.bpmnELement, {\r\n        extensionElements: newElExtensionElements\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"mappings":"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"}]}