{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\PropertiesPanel.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\PropertiesPanel.vue","mtime":1704630437711},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\babel.config.js","mtime":1704630437199},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy84OTQyNS9JZGVhUHJvamVjdHMvcXItY29kZS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIik7CnZhciBfRWxlbWVudEJhc2VJbmZvID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2Jhc2UvRWxlbWVudEJhc2VJbmZvIikpOwp2YXIgX0VsZW1lbnRPdGhlckNvbmZpZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9vdGhlci9FbGVtZW50T3RoZXJDb25maWciKSk7CnZhciBfRWxlbWVudFRhc2sgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vdGFzay9FbGVtZW50VGFzayIpKTsKdmFyIF9FbGVtZW50TXVsdGlJbnN0YW5jZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9tdWx0aS1pbnN0YW5jZS9FbGVtZW50TXVsdGlJbnN0YW5jZSIpKTsKdmFyIF9GbG93Q29uZGl0aW9uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2Zsb3ctY29uZGl0aW9uL0Zsb3dDb25kaXRpb24iKSk7CnZhciBfU2lnbmFsQW5kTWVzc2FnZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9zaWduYWwtbWVzc2FnZS9TaWduYWxBbmRNZXNzYWdlIikpOwp2YXIgX0VsZW1lbnRMaXN0ZW5lcnMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vbGlzdGVuZXJzL0VsZW1lbnRMaXN0ZW5lcnMiKSk7CnZhciBfRWxlbWVudFByb3BlcnRpZXMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vcHJvcGVydGllcy9FbGVtZW50UHJvcGVydGllcyIpKTsKdmFyIF9FbGVtZW50Rm9ybSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9mb3JtL0VsZW1lbnRGb3JtIikpOwp2YXIgX1VzZXJUYXNrTGlzdGVuZXJzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2xpc3RlbmVycy9Vc2VyVGFza0xpc3RlbmVycyIpKTsKLyoqDQogKiDkvqfovrnmoI8NCiAqIEBBdXRob3IgTWl5dWVGRQ0KICogQEhvbWUgaHR0cHM6Ly9naXRodWIuY29tL21peXVlc2MNCiAqIEBEYXRlIDIwMjHlubQz5pyIMzHml6UxODo1Nzo1MQ0KICovCnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IHsKICBuYW1lOiAiTXlQcm9wZXJ0aWVzUGFuZWwiLAogIGNvbXBvbmVudHM6IHsKICAgIFVzZXJUYXNrTGlzdGVuZXJzOiBfVXNlclRhc2tMaXN0ZW5lcnMuZGVmYXVsdCwKICAgIEVsZW1lbnRGb3JtOiBfRWxlbWVudEZvcm0uZGVmYXVsdCwKICAgIEVsZW1lbnRQcm9wZXJ0aWVzOiBfRWxlbWVudFByb3BlcnRpZXMuZGVmYXVsdCwKICAgIEVsZW1lbnRMaXN0ZW5lcnM6IF9FbGVtZW50TGlzdGVuZXJzLmRlZmF1bHQsCiAgICBTaWduYWxBbmRNYXNzYWdlOiBfU2lnbmFsQW5kTWVzc2FnZS5kZWZhdWx0LAogICAgRmxvd0NvbmRpdGlvbjogX0Zsb3dDb25kaXRpb24uZGVmYXVsdCwKICAgIEVsZW1lbnRNdWx0aUluc3RhbmNlOiBfRWxlbWVudE11bHRpSW5zdGFuY2UuZGVmYXVsdCwKICAgIEVsZW1lbnRUYXNrOiBfRWxlbWVudFRhc2suZGVmYXVsdCwKICAgIEVsZW1lbnRPdGhlckNvbmZpZzogX0VsZW1lbnRPdGhlckNvbmZpZy5kZWZhdWx0LAogICAgRWxlbWVudEJhc2VJbmZvOiBfRWxlbWVudEJhc2VJbmZvLmRlZmF1bHQKICB9LAogIGNvbXBvbmVudE5hbWU6ICJNeVByb3BlcnRpZXNQYW5lbCIsCiAgcHJvcHM6IHsKICAgIGJwbW5Nb2RlbGVyOiBPYmplY3QsCiAgICBwcmVmaXg6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiY2FtdW5kYSIKICAgIH0sCiAgICB3aWR0aDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDQ4MAogICAgfSwKICAgIGlkRWRpdERpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgbW9kZWw6IE9iamVjdCAvLyDmtYHnqIvmqKHlnovnmoTmlbDmja4KICB9LAogIHByb3ZpZGU6IGZ1bmN0aW9uIHByb3ZpZGUoKSB7CiAgICByZXR1cm4gewogICAgICBwcmVmaXg6IHRoaXMucHJlZml4LAogICAgICB3aWR0aDogdGhpcy53aWR0aAogICAgfTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RpdmVUYWI6ICJiYXNlIiwKICAgICAgZWxlbWVudElkOiAiIiwKICAgICAgZWxlbWVudFR5cGU6ICIiLAogICAgICBlbGVtZW50QnVzaW5lc3NPYmplY3Q6IHt9LAogICAgICAvLyDlhYPntKAgYnVzaW5lc3NPYmplY3Qg6ZWc5YOP77yM5o+Q5L6b57uZ6ZyA6KaB5YGa5Yik5pat55qE57uE5Lu25L2/55SoCiAgICAgIGNvbmRpdGlvbkZvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgLy8g5rWB6L2s5p2h5Lu26K6+572uCiAgICAgIGZvcm1WaXNpYmxlOiBmYWxzZSAvLyDooajljZXphY3nva4KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgZWxlbWVudElkOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy5hY3RpdmVUYWIgPSAiYmFzZSI7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXRNb2RlbHMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRNb2RlbHM6IGZ1bmN0aW9uIGluaXRNb2RlbHMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIC8vIOWIneWni+WMliBtb2RlbGVyIOS7peWPiuWFtuS7liBtb2RkbGUKICAgICAgaWYgKCF0aGlzLmJwbW5Nb2RlbGVyKSB7CiAgICAgICAgLy8g6YG/5YWN5Yqg6L295pe2IOa1geeoi+WbviDlubbmnKrliqDovb3lrozmiJAKICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMuaW5pdE1vZGVscygpOwogICAgICAgIH0sIDEwKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMudGltZXIpIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICAgICAgd2luZG93LmJwbW5JbnN0YW5jZXMgPSB7CiAgICAgICAgbW9kZWxlcjogdGhpcy5icG1uTW9kZWxlciwKICAgICAgICBtb2RlbGluZzogdGhpcy5icG1uTW9kZWxlci5nZXQoIm1vZGVsaW5nIiksCiAgICAgICAgbW9kZGxlOiB0aGlzLmJwbW5Nb2RlbGVyLmdldCgibW9kZGxlIiksCiAgICAgICAgZXZlbnRCdXM6IHRoaXMuYnBtbk1vZGVsZXIuZ2V0KCJldmVudEJ1cyIpLAogICAgICAgIGJwbW5GYWN0b3J5OiB0aGlzLmJwbW5Nb2RlbGVyLmdldCgiYnBtbkZhY3RvcnkiKSwKICAgICAgICBlbGVtZW50RmFjdG9yeTogdGhpcy5icG1uTW9kZWxlci5nZXQoImVsZW1lbnRGYWN0b3J5IiksCiAgICAgICAgZWxlbWVudFJlZ2lzdHJ5OiB0aGlzLmJwbW5Nb2RlbGVyLmdldCgiZWxlbWVudFJlZ2lzdHJ5IiksCiAgICAgICAgcmVwbGFjZTogdGhpcy5icG1uTW9kZWxlci5nZXQoInJlcGxhY2UiKSwKICAgICAgICBzZWxlY3Rpb246IHRoaXMuYnBtbk1vZGVsZXIuZ2V0KCJzZWxlY3Rpb24iKQogICAgICB9OwogICAgICB0aGlzLmdldEFjdGl2ZUVsZW1lbnQoKTsKICAgIH0sCiAgICBnZXRBY3RpdmVFbGVtZW50OiBmdW5jdGlvbiBnZXRBY3RpdmVFbGVtZW50KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgLy8g5Yid5aeL56ys5LiA5Liq6YCJ5Lit5YWD57SgIGJwbW46UHJvY2VzcwogICAgICB0aGlzLmluaXRGb3JtT25DaGFuZ2VkKG51bGwpOwogICAgICB0aGlzLmJwbW5Nb2RlbGVyLm9uKCJpbXBvcnQuZG9uZSIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXMyLmluaXRGb3JtT25DaGFuZ2VkKG51bGwpOwogICAgICB9KTsKICAgICAgLy8g55uR5ZCs6YCJ5oup5LqL5Lu277yM5L+u5pS55b2T5YmN5r+A5rS755qE5YWD57Sg5Lul5Y+K6KGo5Y2VCiAgICAgIHRoaXMuYnBtbk1vZGVsZXIub24oInNlbGVjdGlvbi5jaGFuZ2VkIiwgZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgbmV3U2VsZWN0aW9uID0gX3JlZi5uZXdTZWxlY3Rpb247CiAgICAgICAgX3RoaXMyLmluaXRGb3JtT25DaGFuZ2VkKG5ld1NlbGVjdGlvblswXSB8fCBudWxsKTsKICAgICAgfSk7CiAgICAgIHRoaXMuYnBtbk1vZGVsZXIub24oImVsZW1lbnQuY2hhbmdlZCIsIGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgIHZhciBlbGVtZW50ID0gX3JlZjIuZWxlbWVudDsKICAgICAgICAvLyDkv53or4Eg5L+u5pS5ICLpu5jorqTmtYHovazot6/lvoQiIOexu+S8vOmcgOimgeS/ruaUueWkmuS4quWFg+e0oOeahOS6i+S7tuWPkeeUn+eahOaXtuWAme+8jOabtOaWsOihqOWNleeahOWFg+e0oOS4juWOn+mAieS4reWFg+e0oOS4jeS4gOiHtOOAggogICAgICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuaWQgPT09IF90aGlzMi5lbGVtZW50SWQpIHsKICAgICAgICAgIF90aGlzMi5pbml0Rm9ybU9uQ2hhbmdlZChlbGVtZW50KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIneWni+WMluaVsOaNrgogICAgaW5pdEZvcm1PbkNoYW5nZWQ6IGZ1bmN0aW9uIGluaXRGb3JtT25DaGFuZ2VkKGVsZW1lbnQpIHsKICAgICAgdmFyIGFjdGl2YXRlZEVsZW1lbnQgPSBlbGVtZW50OwogICAgICBpZiAoIWFjdGl2YXRlZEVsZW1lbnQpIHsKICAgICAgICB2YXIgX3dpbmRvdyRicG1uSW5zdGFuY2VzOwogICAgICAgIGFjdGl2YXRlZEVsZW1lbnQgPSAoX3dpbmRvdyRicG1uSW5zdGFuY2VzID0gd2luZG93LmJwbW5JbnN0YW5jZXMuZWxlbWVudFJlZ2lzdHJ5LmZpbmQoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICByZXR1cm4gZWwudHlwZSA9PT0gImJwbW46UHJvY2VzcyI7CiAgICAgICAgfSkpICE9PSBudWxsICYmIF93aW5kb3ckYnBtbkluc3RhbmNlcyAhPT0gdm9pZCAwID8gX3dpbmRvdyRicG1uSW5zdGFuY2VzIDogd2luZG93LmJwbW5JbnN0YW5jZXMuZWxlbWVudFJlZ2lzdHJ5LmZpbmQoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICByZXR1cm4gZWwudHlwZSA9PT0gImJwbW46Q29sbGFib3JhdGlvbiI7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKCFhY3RpdmF0ZWRFbGVtZW50KSByZXR1cm47CiAgICAgIGNvbnNvbGUubG9nKCJcbiAgICAgICAgICAgICAgLS0tLS0tLS0tLVxuICAgICAgc2VsZWN0IGVsZW1lbnQgY2hhbmdlZDpcbiAgICAgICAgICAgICAgICBpZDogICIuY29uY2F0KGFjdGl2YXRlZEVsZW1lbnQuaWQsICJcbiAgICAgICAgICAgICAgdHlwZTogICIpLmNvbmNhdChhY3RpdmF0ZWRFbGVtZW50LmJ1c2luZXNzT2JqZWN0LiR0eXBlLCAiXG4gICAgICAgICAgICAgIC0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgIikpOwogICAgICBjb25zb2xlLmxvZygiYnVzaW5lc3NPYmplY3Q6ICIsIGFjdGl2YXRlZEVsZW1lbnQuYnVzaW5lc3NPYmplY3QpOwogICAgICB3aW5kb3cuYnBtbkluc3RhbmNlcy5icG1uRWxlbWVudCA9IGFjdGl2YXRlZEVsZW1lbnQ7CiAgICAgIHRoaXMuYnBtbkVsZW1lbnQgPSBhY3RpdmF0ZWRFbGVtZW50OwogICAgICB0aGlzLmVsZW1lbnRJZCA9IGFjdGl2YXRlZEVsZW1lbnQuaWQ7CiAgICAgIHRoaXMuZWxlbWVudFR5cGUgPSBhY3RpdmF0ZWRFbGVtZW50LnR5cGUuc3BsaXQoIjoiKVsxXSB8fCAiIjsKICAgICAgdGhpcy5lbGVtZW50QnVzaW5lc3NPYmplY3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGFjdGl2YXRlZEVsZW1lbnQuYnVzaW5lc3NPYmplY3QpKTsKICAgICAgdGhpcy5jb25kaXRpb25Gb3JtVmlzaWJsZSA9ICEhKHRoaXMuZWxlbWVudFR5cGUgPT09ICJTZXF1ZW5jZUZsb3ciICYmIGFjdGl2YXRlZEVsZW1lbnQuc291cmNlICYmIGFjdGl2YXRlZEVsZW1lbnQuc291cmNlLnR5cGUuaW5kZXhPZigiU3RhcnRFdmVudCIpID09PSAtMSk7CiAgICAgIHRoaXMuZm9ybVZpc2libGUgPSB0aGlzLmVsZW1lbnRUeXBlID09PSAiVXNlclRhc2siIHx8IHRoaXMuZWxlbWVudFR5cGUgPT09ICJTdGFydEV2ZW50IjsKICAgIH0sCiAgICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgICB3aW5kb3cuYnBtbkluc3RhbmNlcyA9IG51bGw7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["_ElementBaseInfo","_interopRequireDefault","require","_ElementOtherConfig","_ElementTask","_ElementMultiInstance","_FlowCondition","_SignalAndMessage","_ElementListeners","_ElementProperties","_ElementForm","_UserTaskListeners","_default","exports","default","name","components","UserTaskListeners","ElementForm","ElementProperties","ElementListeners","SignalAndMassage","FlowCondition","ElementMultiInstance","ElementTask","ElementOtherConfig","ElementBaseInfo","componentName","props","bpmnModeler","Object","prefix","type","String","width","Number","idEditDisabled","Boolean","model","provide","data","activeTab","elementId","elementType","elementBusinessObject","conditionFormVisible","formVisible","watch","handler","created","initModels","methods","_this","timer","setTimeout","clearTimeout","window","bpmnInstances","modeler","modeling","get","moddle","eventBus","bpmnFactory","elementFactory","elementRegistry","replace","selection","getActiveElement","_this2","initFormOnChanged","on","e","_ref","newSelection","_ref2","element","id","activatedElement","_window$bpmnInstances","find","el","console","log","concat","businessObject","$type","bpmnElement","split","JSON","parse","stringify","source","indexOf","beforeDestroy"],"sources":["src/components/bpmnProcessDesigner/package/penal/PropertiesPanel.vue"],"sourcesContent":["<template>\r\n  <div class=\"process-panel__container\" :style=\"{ width: `${this.width}px` }\">\r\n    <el-collapse v-model=\"activeTab\">\r\n      <el-collapse-item name=\"base\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-info\"></i>常规</div>\r\n        <element-base-info :id-edit-disabled=\"idEditDisabled\" :business-object=\"elementBusinessObject\" :type=\"elementType\"\r\n                           :model=\"model\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"condition\" v-if=\"elementType === 'Process'\" key=\"message\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-s-comment\"></i>消息与信号</div>\r\n        <signal-and-massage />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"condition\" v-if=\"conditionFormVisible\" key=\"condition\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-s-promotion\"></i>流转条件</div>\r\n        <flow-condition :business-object=\"elementBusinessObject\" :type=\"elementType\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"condition\" v-if=\"formVisible\" key=\"form\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-s-order\"></i>表单</div>\r\n<!--        <element-form :id=\"elementId\" :type=\"elementType\" />-->\r\n        友情提示：使用 <router-link target=\"_blank\" :to=\"{path:'/bpm/manager/form'}\"><el-link type=\"danger\">流程表单</el-link> </router-link>\r\n        替代，提供更好的表单设计功能\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"task\" v-if=\"elementType.indexOf('Task') !== -1\" key=\"task\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-s-claim\"></i>任务</div>\r\n        <element-task :id=\"elementId\" :type=\"elementType\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"multiInstance\" v-if=\"elementType.indexOf('Task') !== -1\" key=\"multiInstance\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-s-help\"></i>多实例</div>\r\n        <element-multi-instance :business-object=\"elementBusinessObject\" :type=\"elementType\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"listeners\" key=\"listeners\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-message-solid\"></i>执行监听器</div>\r\n        <element-listeners :id=\"elementId\" :type=\"elementType\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"taskListeners\" v-if=\"elementType === 'UserTask'\" key=\"taskListeners\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-message-solid\"></i>任务监听器</div>\r\n        <user-task-listeners :id=\"elementId\" :type=\"elementType\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"extensions\" key=\"extensions\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-circle-plus\"></i>扩展属性</div>\r\n        <element-properties :id=\"elementId\" :type=\"elementType\" />\r\n      </el-collapse-item>\r\n      <el-collapse-item name=\"other\" key=\"other\">\r\n        <div slot=\"title\" class=\"panel-tab__title\"><i class=\"el-icon-s-promotion\"></i>其他</div>\r\n        <element-other-config :id=\"elementId\" />\r\n      </el-collapse-item>\r\n    </el-collapse>\r\n  </div>\r\n</template>\r\n<script>\r\nimport ElementBaseInfo from \"./base/ElementBaseInfo\";\r\nimport ElementOtherConfig from \"./other/ElementOtherConfig\";\r\nimport ElementTask from \"./task/ElementTask\";\r\nimport ElementMultiInstance from \"./multi-instance/ElementMultiInstance\";\r\nimport FlowCondition from \"./flow-condition/FlowCondition\";\r\nimport SignalAndMassage from \"./signal-message/SignalAndMessage\";\r\nimport ElementListeners from \"./listeners/ElementListeners\";\r\nimport ElementProperties from \"./properties/ElementProperties\";\r\nimport ElementForm from \"./form/ElementForm\";\r\nimport UserTaskListeners from \"./listeners/UserTaskListeners\";\r\n/**\r\n * 侧边栏\r\n * @Author MiyueFE\r\n * @Home https://github.com/miyuesc\r\n * @Date 2021年3月31日18:57:51\r\n */\r\nexport default {\r\n  name: \"MyPropertiesPanel\",\r\n  components: {\r\n    UserTaskListeners,\r\n    ElementForm,\r\n    ElementProperties,\r\n    ElementListeners,\r\n    SignalAndMassage,\r\n    FlowCondition,\r\n    ElementMultiInstance,\r\n    ElementTask,\r\n    ElementOtherConfig,\r\n    ElementBaseInfo\r\n  },\r\n  componentName: \"MyPropertiesPanel\",\r\n  props: {\r\n    bpmnModeler: Object,\r\n    prefix: {\r\n      type: String,\r\n      default: \"camunda\"\r\n    },\r\n    width: {\r\n      type: Number,\r\n      default: 480\r\n    },\r\n    idEditDisabled: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    model: Object, // 流程模型的数据\r\n  },\r\n  provide() {\r\n    return {\r\n      prefix: this.prefix,\r\n      width: this.width\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      activeTab: \"base\",\r\n      elementId: \"\",\r\n      elementType: \"\",\r\n      elementBusinessObject: {}, // 元素 businessObject 镜像，提供给需要做判断的组件使用\r\n      conditionFormVisible: false, // 流转条件设置\r\n      formVisible: false // 表单配置\r\n    };\r\n  },\r\n  watch: {\r\n    elementId: {\r\n      handler() {\r\n        this.activeTab = \"base\";\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.initModels();\r\n  },\r\n  methods: {\r\n    initModels() {\r\n      // 初始化 modeler 以及其他 moddle\r\n      if (!this.bpmnModeler) {\r\n        // 避免加载时 流程图 并未加载完成\r\n        this.timer = setTimeout(() => this.initModels(), 10);\r\n        return;\r\n      }\r\n      if (this.timer) clearTimeout(this.timer);\r\n      window.bpmnInstances = {\r\n        modeler: this.bpmnModeler,\r\n        modeling: this.bpmnModeler.get(\"modeling\"),\r\n        moddle: this.bpmnModeler.get(\"moddle\"),\r\n        eventBus: this.bpmnModeler.get(\"eventBus\"),\r\n        bpmnFactory: this.bpmnModeler.get(\"bpmnFactory\"),\r\n        elementFactory: this.bpmnModeler.get(\"elementFactory\"),\r\n        elementRegistry: this.bpmnModeler.get(\"elementRegistry\"),\r\n        replace: this.bpmnModeler.get(\"replace\"),\r\n        selection: this.bpmnModeler.get(\"selection\")\r\n      };\r\n      this.getActiveElement();\r\n    },\r\n    getActiveElement() {\r\n      // 初始第一个选中元素 bpmn:Process\r\n      this.initFormOnChanged(null);\r\n      this.bpmnModeler.on(\"import.done\", e => {\r\n        this.initFormOnChanged(null);\r\n      });\r\n      // 监听选择事件，修改当前激活的元素以及表单\r\n      this.bpmnModeler.on(\"selection.changed\", ({ newSelection }) => {\r\n        this.initFormOnChanged(newSelection[0] || null);\r\n      });\r\n      this.bpmnModeler.on(\"element.changed\", ({ element }) => {\r\n        // 保证 修改 \"默认流转路径\" 类似需要修改多个元素的事件发生的时候，更新表单的元素与原选中元素不一致。\r\n        if (element && element.id === this.elementId) {\r\n          this.initFormOnChanged(element);\r\n        }\r\n      });\r\n    },\r\n    // 初始化数据\r\n    initFormOnChanged(element) {\r\n      let activatedElement = element;\r\n      if (!activatedElement) {\r\n        activatedElement =\r\n          window.bpmnInstances.elementRegistry.find(el => el.type === \"bpmn:Process\") ??\r\n          window.bpmnInstances.elementRegistry.find(el => el.type === \"bpmn:Collaboration\");\r\n      }\r\n      if (!activatedElement) return;\r\n      console.log(`\r\n              ----------\r\n      select element changed:\r\n                id:  ${activatedElement.id}\r\n              type:  ${activatedElement.businessObject.$type}\r\n              ----------\r\n              `);\r\n      console.log(\"businessObject: \", activatedElement.businessObject);\r\n      window.bpmnInstances.bpmnElement = activatedElement;\r\n      this.bpmnElement = activatedElement;\r\n      this.elementId = activatedElement.id;\r\n      this.elementType = activatedElement.type.split(\":\")[1] || \"\";\r\n      this.elementBusinessObject = JSON.parse(JSON.stringify(activatedElement.businessObject));\r\n      this.conditionFormVisible = !!(\r\n        this.elementType === \"SequenceFlow\" &&\r\n        activatedElement.source &&\r\n        activatedElement.source.type.indexOf(\"StartEvent\") === -1\r\n      );\r\n      this.formVisible = this.elementType === \"UserTask\" || this.elementType === \"StartEvent\";\r\n    },\r\n    beforeDestroy() {\r\n      window.bpmnInstances = null;\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"mappings":"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"}]}