{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\task\\task-components\\UserTask.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\task\\task-components\\UserTask.vue","mtime":1704630437730},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\babel.config.js","mtime":1704630437199},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIik7CnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IHsKICBuYW1lOiAiVXNlclRhc2siLAogIHByb3BzOiB7CiAgICBpZDogU3RyaW5nLAogICAgdHlwZTogU3RyaW5nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVmYXVsdFRhc2tGb3JtOiB7CiAgICAgICAgYXNzaWduZWU6ICIiLAogICAgICAgIGNhbmRpZGF0ZVVzZXJzOiBbXSwKICAgICAgICBjYW5kaWRhdGVHcm91cHM6IFtdLAogICAgICAgIGR1ZURhdGU6ICIiLAogICAgICAgIGZvbGxvd1VwRGF0ZTogIiIsCiAgICAgICAgcHJpb3JpdHk6ICIiCiAgICAgIH0sCiAgICAgIHVzZXJUYXNrRm9ybToge30sCiAgICAgIG1vY2tEYXRhOiBbMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTBdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGlkOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIHRoaXMuYnBtbkVsZW1lbnQgPSB3aW5kb3cuYnBtbkluc3RhbmNlcy5icG1uRWxlbWVudDsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMucmVzZXRUYXNrRm9ybSgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNldFRhc2tGb3JtOiBmdW5jdGlvbiByZXNldFRhc2tGb3JtKCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5kZWZhdWx0VGFza0Zvcm0pIHsKICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7CiAgICAgICAgaWYgKGtleSA9PT0gImNhbmRpZGF0ZVVzZXJzIiB8fCBrZXkgPT09ICJjYW5kaWRhdGVHcm91cHMiKSB7CiAgICAgICAgICB2YXIgX3RoaXMkYnBtbkVsZW1lbnQ7CiAgICAgICAgICB2YWx1ZSA9IChfdGhpcyRicG1uRWxlbWVudCA9IHRoaXMuYnBtbkVsZW1lbnQpICE9PSBudWxsICYmIF90aGlzJGJwbW5FbGVtZW50ICE9PSB2b2lkIDAgJiYgX3RoaXMkYnBtbkVsZW1lbnQuYnVzaW5lc3NPYmplY3Rba2V5XSA/IHRoaXMuYnBtbkVsZW1lbnQuYnVzaW5lc3NPYmplY3Rba2V5XS5zcGxpdCgiLCIpIDogW107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfdGhpcyRicG1uRWxlbWVudDI7CiAgICAgICAgICB2YWx1ZSA9ICgoX3RoaXMkYnBtbkVsZW1lbnQyID0gdGhpcy5icG1uRWxlbWVudCkgPT09IG51bGwgfHwgX3RoaXMkYnBtbkVsZW1lbnQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRicG1uRWxlbWVudDIuYnVzaW5lc3NPYmplY3Rba2V5XSkgfHwgdGhpcy5kZWZhdWx0VGFza0Zvcm1ba2V5XTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kc2V0KHRoaXMudXNlclRhc2tGb3JtLCBrZXksIHZhbHVlKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZUVsZW1lbnRUYXNrOiBmdW5jdGlvbiB1cGRhdGVFbGVtZW50VGFzayhrZXkpIHsKICAgICAgdmFyIHRhc2tBdHRyID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgaWYgKGtleSA9PT0gImNhbmRpZGF0ZVVzZXJzIiB8fCBrZXkgPT09ICJjYW5kaWRhdGVHcm91cHMiKSB7CiAgICAgICAgdGFza0F0dHJba2V5XSA9IHRoaXMudXNlclRhc2tGb3JtW2tleV0gJiYgdGhpcy51c2VyVGFza0Zvcm1ba2V5XS5sZW5ndGggPyB0aGlzLnVzZXJUYXNrRm9ybVtrZXldLmpvaW4oKSA6IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFza0F0dHJba2V5XSA9IHRoaXMudXNlclRhc2tGb3JtW2tleV0gfHwgbnVsbDsKICAgICAgfQogICAgICB3aW5kb3cuYnBtbkluc3RhbmNlcy5tb2RlbGluZy51cGRhdGVQcm9wZXJ0aWVzKHRoaXMuYnBtbkVsZW1lbnQsIHRhc2tBdHRyKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLmJwbW5FbGVtZW50ID0gbnVsbDsKICB9Cn07"},{"version":3,"names":["name","props","id","String","type","data","defaultTaskForm","assignee","candidateUsers","candidateGroups","dueDate","followUpDate","priority","userTaskForm","mockData","watch","immediate","handler","_this","bpmnElement","window","bpmnInstances","$nextTick","resetTaskForm","methods","key","value","_this$bpmnElement","businessObject","split","_this$bpmnElement2","$set","updateElementTask","taskAttr","Object","create","length","join","modeling","updateProperties","beforeDestroy"],"sources":["src/components/bpmnProcessDesigner/package/penal/task/task-components/UserTask.vue"],"sourcesContent":["<template>\r\n  <div style=\"margin-top: 16px\">\r\n<!--    <el-form-item label=\"处理用户\">-->\r\n<!--      <el-select v-model=\"userTaskForm.assignee\" @change=\"updateElementTask('assignee')\">-->\r\n<!--        <el-option v-for=\"ak in mockData\" :key=\"'ass-' + ak\" :label=\"`用户${ak}`\" :value=\"`user${ak}`\" />-->\r\n<!--      </el-select>-->\r\n<!--    </el-form-item>-->\r\n<!--    <el-form-item label=\"候选用户\">-->\r\n<!--      <el-select v-model=\"userTaskForm.candidateUsers\" multiple collapse-tags @change=\"updateElementTask('candidateUsers')\">-->\r\n<!--        <el-option v-for=\"uk in mockData\" :key=\"'user-' + uk\" :label=\"`用户${uk}`\" :value=\"`user${uk}`\" />-->\r\n<!--      </el-select>-->\r\n<!--    </el-form-item>-->\r\n<!--    <el-form-item label=\"候选分组\">-->\r\n<!--      <el-select v-model=\"userTaskForm.candidateGroups\" multiple collapse-tags @change=\"updateElementTask('candidateGroups')\">-->\r\n<!--        <el-option v-for=\"gk in mockData\" :key=\"'ass-' + gk\" :label=\"`分组${gk}`\" :value=\"`group${gk}`\" />-->\r\n<!--      </el-select>-->\r\n<!--    </el-form-item>-->\r\n    <el-form-item label=\"到期时间\">\r\n      <el-input v-model=\"userTaskForm.dueDate\" clearable @change=\"updateElementTask('dueDate')\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"跟踪时间\">\r\n      <el-input v-model=\"userTaskForm.followUpDate\" clearable @change=\"updateElementTask('followUpDate')\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"优先级\">\r\n      <el-input v-model=\"userTaskForm.priority\" clearable @change=\"updateElementTask('priority')\" />\r\n    </el-form-item>\r\n    友情提示：任务的分配规则，使用\r\n    <router-link target=\"_blank\" :to=\"{path:'/bpm/manager/model'}\"><el-link type=\"danger\">流程模型</el-link> </router-link>\r\n    下的【分配规则】替代，提供指定角色、部门负责人、部门成员、岗位、工作组、自定义脚本等 7 种维护的任务分配维度，更加灵活！\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"UserTask\",\r\n  props: {\r\n    id: String,\r\n    type: String\r\n  },\r\n  data() {\r\n    return {\r\n      defaultTaskForm: {\r\n        assignee: \"\",\r\n        candidateUsers: [],\r\n        candidateGroups: [],\r\n        dueDate: \"\",\r\n        followUpDate: \"\",\r\n        priority: \"\"\r\n      },\r\n      userTaskForm: {},\r\n      mockData: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n    };\r\n  },\r\n  watch: {\r\n    id: {\r\n      immediate: true,\r\n      handler() {\r\n        this.bpmnElement = window.bpmnInstances.bpmnElement;\r\n        this.$nextTick(() => this.resetTaskForm());\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    resetTaskForm() {\r\n      for (let key in this.defaultTaskForm) {\r\n        let value;\r\n        if (key === \"candidateUsers\" || key === \"candidateGroups\") {\r\n          value = this.bpmnElement?.businessObject[key] ? this.bpmnElement.businessObject[key].split(\",\") : [];\r\n        } else {\r\n          value = this.bpmnElement?.businessObject[key] || this.defaultTaskForm[key];\r\n        }\r\n        this.$set(this.userTaskForm, key, value);\r\n      }\r\n    },\r\n    updateElementTask(key) {\r\n      const taskAttr = Object.create(null);\r\n      if (key === \"candidateUsers\" || key === \"candidateGroups\") {\r\n        taskAttr[key] = this.userTaskForm[key] && this.userTaskForm[key].length ? this.userTaskForm[key].join() : null;\r\n      } else {\r\n        taskAttr[key] = this.userTaskForm[key] || null;\r\n      }\r\n      window.bpmnInstances.modeling.updateProperties(this.bpmnElement, taskAttr);\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.bpmnElement = null;\r\n  }\r\n};\r\n</script>\r\n"],"mappings":";;;;;;;iCAiCA;EACAA,IAAA;EACAC,KAAA;IACAC,EAAA,EAAAC,MAAA;IACAC,IAAA,EAAAD;EACA;EACAE,IAAA,WAAAA,KAAA;IACA;MACAC,eAAA;QACAC,QAAA;QACAC,cAAA;QACAC,eAAA;QACAC,OAAA;QACAC,YAAA;QACAC,QAAA;MACA;MACAC,YAAA;MACAC,QAAA;IACA;EACA;EACAC,KAAA;IACAb,EAAA;MACAc,SAAA;MACAC,OAAA,WAAAA,QAAA;QAAA,IAAAC,KAAA;QACA,KAAAC,WAAA,GAAAC,MAAA,CAAAC,aAAA,CAAAF,WAAA;QACA,KAAAG,SAAA;UAAA,OAAAJ,KAAA,CAAAK,aAAA;QAAA;MACA;IACA;EACA;EACAC,OAAA;IACAD,aAAA,WAAAA,cAAA;MACA,SAAAE,GAAA,SAAAnB,eAAA;QACA,IAAAoB,KAAA;QACA,IAAAD,GAAA,yBAAAA,GAAA;UAAA,IAAAE,iBAAA;UACAD,KAAA,IAAAC,iBAAA,QAAAR,WAAA,cAAAQ,iBAAA,eAAAA,iBAAA,CAAAC,cAAA,CAAAH,GAAA,SAAAN,WAAA,CAAAS,cAAA,CAAAH,GAAA,EAAAI,KAAA;QACA;UAAA,IAAAC,kBAAA;UACAJ,KAAA,KAAAI,kBAAA,QAAAX,WAAA,cAAAW,kBAAA,uBAAAA,kBAAA,CAAAF,cAAA,CAAAH,GAAA,WAAAnB,eAAA,CAAAmB,GAAA;QACA;QACA,KAAAM,IAAA,MAAAlB,YAAA,EAAAY,GAAA,EAAAC,KAAA;MACA;IACA;IACAM,iBAAA,WAAAA,kBAAAP,GAAA;MACA,IAAAQ,QAAA,GAAAC,MAAA,CAAAC,MAAA;MACA,IAAAV,GAAA,yBAAAA,GAAA;QACAQ,QAAA,CAAAR,GAAA,SAAAZ,YAAA,CAAAY,GAAA,UAAAZ,YAAA,CAAAY,GAAA,EAAAW,MAAA,QAAAvB,YAAA,CAAAY,GAAA,EAAAY,IAAA;MACA;QACAJ,QAAA,CAAAR,GAAA,SAAAZ,YAAA,CAAAY,GAAA;MACA;MACAL,MAAA,CAAAC,aAAA,CAAAiB,QAAA,CAAAC,gBAAA,MAAApB,WAAA,EAAAc,QAAA;IACA;EACA;EACAO,aAAA,WAAAA,cAAA;IACA,KAAArB,WAAA;EACA;AACA"}]}