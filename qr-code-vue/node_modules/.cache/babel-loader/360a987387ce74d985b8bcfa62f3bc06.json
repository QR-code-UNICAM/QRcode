{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\pay\\app\\components\\alipayChannelForm.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\views\\pay\\app\\components\\alipayChannelForm.vue","mtime":1704630438039},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\babel.config.js","mtime":1704630437199},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy84OTQyNS9JZGVhUHJvamVjdHMvcXItY29kZS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfb2JqZWN0U3ByZWFkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQzovVXNlcnMvODk0MjUvSWRlYVByb2plY3RzL3FyLWNvZGUtdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDIuanMiKSk7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKdmFyIF9jaGFubmVsID0gcmVxdWlyZSgiQC9hcGkvcGF5L2NoYW5uZWwiKTsKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCJAL3V0aWxzL2NvbnN0YW50cyIpOwp2YXIgX2RlZmF1bHQgPSBleHBvcnRzLmRlZmF1bHQgPSB7CiAgbmFtZTogImFsaXBheUNoYW5uZWxGb3JtIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGZvcm1Mb2FkaW5nOiBmYWxzZSwKICAgICAgdGl0bGU6ICcnLAogICAgICBmb3JtRGF0YTogewogICAgICAgIGFwcElkOiAnJywKICAgICAgICBjb2RlOiAnJywKICAgICAgICBzdGF0dXM6IHVuZGVmaW5lZCwKICAgICAgICBmZWVSYXRlOiB1bmRlZmluZWQsCiAgICAgICAgcmVtYXJrOiAnJywKICAgICAgICBjb25maWc6IHsKICAgICAgICAgIGFwcElkOiAnJywKICAgICAgICAgIHNlcnZlclVybDogbnVsbCwKICAgICAgICAgIHNpZ25UeXBlOiAnJywKICAgICAgICAgIG1vZGU6IG51bGwsCiAgICAgICAgICBwcml2YXRlS2V5OiAnJywKICAgICAgICAgIGFsaXBheVB1YmxpY0tleTogJycsCiAgICAgICAgICBhcHBDZXJ0Q29udGVudDogJycsCiAgICAgICAgICBhbGlwYXlQdWJsaWNDZXJ0Q29udGVudDogJycsCiAgICAgICAgICByb290Q2VydENvbnRlbnQ6ICcnCiAgICAgICAgfQogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIGZlZVJhdGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmuKDpgZPotLnnjocnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgc3RhdHVzOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn5rig6YGT54q25oCB5LiN6IO95Li656m6JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgICdjb25maWcuYXBwSWQnOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5byA5pS+5bmz5Y+w5LiK5Yib5bu655qE5bqU55So55qEIElEJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgICdjb25maWcuc2VydmVyVXJsJzogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+S8oOWFpee9keWFs+WcsOWdgCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICAnY29uZmlnLnNpZ25UeXBlJzogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+S8oOWFpeetvuWQjeeul+azleexu+WeiycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICAnY29uZmlnLm1vZGUnOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn5YWs6ZKl57G75Z6L5LiN6IO95Li656m6JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgICdjb25maWcucHJpdmF0ZUtleSc6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXllYbmiLfnp4HpkqUnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgJ2NvbmZpZy5hbGlwYXlQdWJsaWNLZXknOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5pSv5LuY5a6d5YWs6ZKl5a2X56ym5LiyJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgICdjb25maWcuYXBwQ2VydENvbnRlbnQnOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+35LiK5Lyg5ZWG5oi35YWs6ZKl5bqU55So6K+B5LmmJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgICdjb25maWcuYWxpcGF5UHVibGljQ2VydENvbnRlbnQnOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+35LiK5Lyg5pSv5LuY5a6d5YWs6ZKl6K+B5LmmJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgICdjb25maWcucm9vdENlcnRDb250ZW50JzogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+S4iuS8oOaMh+WumuagueivgeS5picsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBmaWxlQWNjZXB0OiAiLmNydCIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvcGVuOiBmdW5jdGlvbiBvcGVuKGFwcElkLCBjb2RlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuZm9ybUxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLnJlc2V0KGFwcElkLCBjb2RlKTsKICAgICAgKDAsIF9jaGFubmVsLmdldENoYW5uZWwpKGFwcElkLCBjb2RlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuaWQpIHsKICAgICAgICAgIF90aGlzLmZvcm1EYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIF90aGlzLmZvcm1EYXRhLmNvbmZpZyA9IEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YS5jb25maWcpOwogICAgICAgIH0KICAgICAgICBfdGhpcy50aXRsZSA9ICFfdGhpcy5mb3JtRGF0YS5pZCA/ICfliJvlu7rmlK/ku5jmuKDpgZMnIDogJ+e8lui+keaUr+S7mOa4oOmBkyc7CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmZvcm1Mb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMucmVzZXQodW5kZWZpbmVkLCB1bmRlZmluZWQpOwogICAgfSwKICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgZGF0YSA9ICgwLCBfb2JqZWN0U3ByZWFkMi5kZWZhdWx0KSh7fSwgX3RoaXMyLmZvcm1EYXRhKTsKICAgICAgICBkYXRhLmNvbmZpZyA9IEpTT04uc3RyaW5naWZ5KF90aGlzMi5mb3JtRGF0YS5jb25maWcpOwogICAgICAgIGlmICghZGF0YS5pZCkgewogICAgICAgICAgKDAsIF9jaGFubmVsLmNyZWF0ZUNoYW5uZWwpKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIF90aGlzMi4kbW9kYWwubXNnU3VjY2Vzcygi5paw5aKe5oiQ5YqfIik7CiAgICAgICAgICAgIF90aGlzMi4kZW1pdCgnc3VjY2VzcycpOwogICAgICAgICAgICBfdGhpczIuY2xvc2UoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAoMCwgX2NoYW5uZWwudXBkYXRlQ2hhbm5lbCkoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgX3RoaXMyLiRtb2RhbC5tc2dTdWNjZXNzKCLkv67mlLnmiJDlip8iKTsKICAgICAgICAgICAgX3RoaXMyLiRlbWl0KCdzdWNjZXNzJyk7CiAgICAgICAgICAgIF90aGlzMi5jbG9zZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvKiog6YeN572u6KGo5Y2VICovcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KGFwcElkLCBjb2RlKSB7CiAgICAgIHRoaXMuZm9ybURhdGEgPSB7CiAgICAgICAgYXBwSWQ6IGFwcElkLAogICAgICAgIGNvZGU6IGNvZGUsCiAgICAgICAgc3RhdHVzOiBfY29uc3RhbnRzLkNvbW1vblN0YXR1c0VudW0uRU5BQkxFLAogICAgICAgIHJlbWFyazogJycsCiAgICAgICAgZmVlUmF0ZTogbnVsbCwKICAgICAgICBjb25maWc6IHsKICAgICAgICAgIGFwcElkOiAnJywKICAgICAgICAgIHNlcnZlclVybDogbnVsbCwKICAgICAgICAgIHNpZ25UeXBlOiAnUlNBMicsCiAgICAgICAgICBtb2RlOiBudWxsLAogICAgICAgICAgcHJpdmF0ZUtleTogJycsCiAgICAgICAgICBhbGlwYXlQdWJsaWNLZXk6ICcnLAogICAgICAgICAgYXBwQ2VydENvbnRlbnQ6ICcnLAogICAgICAgICAgYWxpcGF5UHVibGljQ2VydENvbnRlbnQ6ICcnLAogICAgICAgICAgcm9vdENlcnRDb250ZW50OiAnJwogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5yZXNldEZvcm0oJ2Zvcm0nKTsKICAgIH0sCiAgICBmaWxlQmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBmaWxlQmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGZvcm1hdCA9ICcuJyArIGZpbGUubmFtZS5zcGxpdCgiLiIpWzFdOwogICAgICBpZiAoZm9ybWF0ICE9PSB0aGlzLmZpbGVBY2NlcHQpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fkuIrkvKDmjIflrprmoLzlvI8iJyArIHRoaXMuZmlsZUFjY2VwdCArICci5paH5Lu2Jyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHZhciBpc1JpZ2h0U2l6ZSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMjsKICAgICAgaWYgKCFpc1JpZ2h0U2l6ZSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aWh+S7tuWkp+Wwj+i2hei/hyAyTUInKTsKICAgICAgfQogICAgICByZXR1cm4gaXNSaWdodFNpemU7CiAgICB9LAogICAgYXBwQ2VydFVwbG9hZDogZnVuY3Rpb24gYXBwQ2VydFVwbG9hZChldmVudCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIHJlYWRGaWxlID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgcmVhZEZpbGUub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczMuZm9ybURhdGEuY29uZmlnLmFwcENlcnRDb250ZW50ID0gZS50YXJnZXQucmVzdWx0OwogICAgICB9OwogICAgICByZWFkRmlsZS5yZWFkQXNUZXh0KGV2ZW50LmZpbGUpOwogICAgfSwKICAgIGFsaXBheVB1YmxpY0NlcnRVcGxvYWQ6IGZ1bmN0aW9uIGFsaXBheVB1YmxpY0NlcnRVcGxvYWQoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHZhciByZWFkRmlsZSA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRGaWxlLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXM0LmZvcm1EYXRhLmNvbmZpZy5hbGlwYXlQdWJsaWNDZXJ0Q29udGVudCA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgfTsKICAgICAgcmVhZEZpbGUucmVhZEFzVGV4dChldmVudC5maWxlKTsKICAgIH0sCiAgICByb290Q2VydFVwbG9hZDogZnVuY3Rpb24gcm9vdENlcnRVcGxvYWQoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHZhciByZWFkRmlsZSA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRGaWxlLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXM1LmZvcm1EYXRhLmNvbmZpZy5yb290Q2VydENvbnRlbnQgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgIH07CiAgICAgIHJlYWRGaWxlLnJlYWRBc1RleHQoZXZlbnQuZmlsZSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["_channel","require","_constants","_default","exports","default","name","data","dialogVisible","formLoading","title","formData","appId","code","status","undefined","feeRate","remark","config","serverUrl","signType","mode","privateKey","alipayPublicKey","appCertContent","alipayPublicCertContent","rootCertContent","rules","required","message","trigger","fileAccept","methods","open","_this","reset","getChannel","then","response","id","JSON","parse","finally","close","submitForm","_this2","$refs","validate","valid","_objectSpread2","stringify","createChannel","$modal","msgSuccess","$emit","updateChannel","CommonStatusEnum","ENABLE","resetForm","fileBeforeUpload","file","format","split","$message","error","isRightSize","size","appCertUpload","event","_this3","readFile","FileReader","onload","e","target","result","readAsText","alipayPublicCertUpload","_this4","rootCertUpload","_this5"],"sources":["src/views/pay/app/components/alipayChannelForm.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-dialog :visible.sync=\"dialogVisible\" :title=\"title\" @closed=\"close\" append-to-body width=\"800px\">\r\n      <el-form ref=\"form\" :model=\"formData\" :rules=\"rules\" size=\"medium\" label-width=\"100px\" v-loading=\"formLoading\">\r\n        <el-form-item label-width=\"180px\" label=\"渠道费率\" prop=\"feeRate\">\r\n          <el-input v-model=\"formData.feeRate\" placeholder=\"请输入渠道费率\" clearable :style=\"{width: '100%'}\">\r\n            <template slot=\"append\">%</template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"180px\" label=\"开放平台 APPID\" prop=\"config.appId\">\r\n          <el-input v-model=\"formData.config.appId\" placeholder=\"请输入开放平台 APPID\" clearable :style=\"{width: '100%'}\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"180px\" label=\"渠道状态\" prop=\"status\">\r\n          <el-radio-group v-model=\"formData.status\" size=\"medium\">\r\n            <el-radio v-for=\"dict in this.getDictDatas(DICT_TYPE.COMMON_STATUS)\" :key=\"parseInt(dict.value)\"\r\n                      :label=\"parseInt(dict.value)\">\r\n              {{ dict.label }}\r\n            </el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"180px\" label=\"网关地址\" prop=\"config.serverUrl\">\r\n          <el-radio-group v-model=\"formData.config.serverUrl\" size=\"medium\">\r\n            <el-radio label=\"https://openapi.alipay.com/gateway.do\">线上环境</el-radio>\r\n            <el-radio label=\"https://openapi-sandbox.dl.alipaydev.com/gateway.do\">沙箱环境</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"180px\" label=\"算法类型\" prop=\"config.signType\">\r\n          <el-radio-group v-model=\"formData.config.signType\" size=\"medium\">\r\n            <el-radio key=\"RSA2\" label=\"RSA2\">RSA2</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"180px\" label=\"公钥类型\" prop=\"config.mode\">\r\n          <el-radio-group v-model=\"formData.config.mode\" size=\"medium\">\r\n            <el-radio  key=\"公钥模式\" :label=\"1\">公钥模式</el-radio>\r\n            <el-radio  key=\"证书模式\" :label=\"2\">证书模式</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <div v-if=\"formData.config.mode === 1\">\r\n          <el-form-item label-width=\"180px\" label=\"应用私钥\" prop=\"config.privateKey\">\r\n            <el-input type=\"textarea\" :autosize=\"{minRows: 8, maxRows: 8}\" v-model=\"formData.config.privateKey\"\r\n                      placeholder=\"请输入应用私钥\" clearable :style=\"{width: '100%'}\">\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"180px\" label=\"支付宝公钥\" prop=\"config.alipayPublicKey\">\r\n            <el-input\r\n              type=\"textarea\"\r\n              :autosize=\"{minRows: 8, maxRows: 8}\"\r\n              v-model=\"formData.config.alipayPublicKey\"\r\n              placeholder=\"请输入支付宝公钥\" clearable\r\n              :style=\"{width: '100%'}\">\r\n            </el-input>\r\n          </el-form-item>\r\n        </div>\r\n        <div v-if=\"formData.config.mode === 2\">\r\n          <el-form-item label-width=\"180px\" label=\"商户公钥应用证书\" prop=\"config.appCertContent\">\r\n            <el-input v-model=\"formData.config.appCertContent\" type=\"textarea\"\r\n                      placeholder=\"请上传商户公钥应用证书\"\r\n                      readonly :autosize=\"{minRows: 8, maxRows: 8}\" :style=\"{width: '100%'}\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"180px\" label=\"\">\r\n            <el-upload\r\n              action=\"\"\r\n              ref=\"privateKeyContentFile\"\r\n              :limit=\"1\"\r\n              :accept=\"fileAccept\"\r\n              :http-request=\"appCertUpload\"\r\n              :before-upload=\"fileBeforeUpload\">\r\n              <el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\">点击上传</el-button>\r\n            </el-upload>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"180px\" label=\"支付宝公钥证书\" prop=\"config.alipayPublicCertContent\">\r\n            <el-input v-model=\"formData.config.alipayPublicCertContent\" type=\"textarea\"\r\n                      placeholder=\"请上传支付宝公钥证书\"\r\n                      readonly :autosize=\"{minRows: 8, maxRows: 8}\" :style=\"{width: '100%'}\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"180px\" label=\"\">\r\n            <el-upload\r\n              ref=\"privateCertContentFile\"\r\n              action=\"\"\r\n              :limit=\"1\"\r\n              :accept=\"fileAccept\"\r\n              :before-upload=\"fileBeforeUpload\"\r\n              :http-request=\"alipayPublicCertUpload\">\r\n              <el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\">点击上传</el-button>\r\n            </el-upload>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"180px\" label=\"根证书\" prop=\"config.rootCertContent\">\r\n            <el-input\r\n              v-model=\"formData.config.rootCertContent\"\r\n              type=\"textarea\"\r\n              placeholder=\"请上传根证书\"\r\n              readonly :autosize=\"{minRows: 8, maxRows: 8}\"\r\n              :style=\"{width: '100%'}\">\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"180px\" label=\"\">\r\n            <el-upload\r\n              ref=\"privateCertContentFile\"\r\n              :limit=\"1\"\r\n              :accept=\"fileAccept\"\r\n              action=\"\"\r\n              :before-upload=\"fileBeforeUpload\"\r\n              :http-request=\"rootCertUpload\">\r\n              <el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\">点击上传</el-button>\r\n            </el-upload>\r\n          </el-form-item>\r\n        </div>\r\n        <el-form-item label-width=\"180px\" label=\"备注\" prop=\"remark\">\r\n          <el-input v-model=\"formData.remark\" :style=\"{width: '100%'}\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"close\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitForm\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { createChannel, getChannel, updateChannel } from \"@/api/pay/channel\";\r\nimport { CommonStatusEnum } from \"@/utils/constants\";\r\n\r\nexport default {\r\n  name: \"alipayChannelForm\",\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      formLoading: false,\r\n      title:'',\r\n      formData: {\r\n        appId: '',\r\n        code: '',\r\n        status: undefined,\r\n        feeRate: undefined,\r\n        remark: '',\r\n        config: {\r\n          appId: '',\r\n          serverUrl: null,\r\n          signType: '',\r\n          mode: null,\r\n          privateKey: '',\r\n          alipayPublicKey: '',\r\n          appCertContent: '',\r\n          alipayPublicCertContent: '',\r\n          rootCertContent: ''\r\n        }\r\n      },\r\n      rules: {\r\n        feeRate: [{ required: true,  message: '请输入渠道费率', trigger: 'blur' }],\r\n        status: [{ required: true,  message: '渠道状态不能为空',  trigger: 'blur' }],\r\n        'config.appId': [{ required: true, message: '请输入开放平台上创建的应用的 ID', trigger: 'blur' }],\r\n        'config.serverUrl': [{ required: true, message: '请传入网关地址', trigger: 'blur' }],\r\n        'config.signType': [{ required: true, message: '请传入签名算法类型', trigger: 'blur' }],\r\n        'config.mode': [{ required: true, message: '公钥类型不能为空', trigger: 'blur'}],\r\n        'config.privateKey': [{ required: true, message: '请输入商户私钥', trigger: 'blur' }],\r\n        'config.alipayPublicKey': [{ required: true, message: '请输入支付宝公钥字符串', trigger: 'blur' }],\r\n        'config.appCertContent': [{ required: true,  message: '请上传商户公钥应用证书', trigger: 'blur' }],\r\n        'config.alipayPublicCertContent': [{ required: true, message: '请上传支付宝公钥证书', trigger: 'blur'}],\r\n        'config.rootCertContent': [{ required: true, message: '请上传指定根证书', trigger: 'blur' }],\r\n      },\r\n      fileAccept: \".crt\",\r\n    }\r\n  },\r\n  methods: {\r\n    open(appId, code) {\r\n      this.dialogVisible = true;\r\n      this.formLoading = true;\r\n      this.reset(appId, code);\r\n      getChannel(appId, code).then(response => {\r\n        if (response.data && response.data.id) {\r\n          this.formData = response.data;\r\n          this.formData.config = JSON.parse(response.data.config);\r\n        }\r\n        this.title = !this.formData.id ? '创建支付渠道' : '编辑支付渠道'\r\n      }).finally(() => {\r\n        this.formLoading = false;\r\n      });\r\n    },\r\n    close() {\r\n      this.dialogVisible = false;\r\n      this.reset(undefined, undefined);\r\n    },\r\n    submitForm() {\r\n      this.$refs['form'].validate(valid => {\r\n        if (!valid) {\r\n          return\r\n        }\r\n        const data = { ...this.formData };\r\n        data.config = JSON.stringify(this.formData.config);\r\n        if (!data.id) {\r\n          createChannel(data).then(response => {\r\n            this.$modal.msgSuccess(\"新增成功\");\r\n            this.$emit('success')\r\n            this.close();\r\n          });\r\n        } else {\r\n          updateChannel(data).then(response => {\r\n            this.$modal.msgSuccess(\"修改成功\");\r\n            this.$emit('success')\r\n            this.close();\r\n          })\r\n        }\r\n      });\r\n    },\r\n    /** 重置表单 */\r\n    reset(appId, code) {\r\n      this.formData = {\r\n        appId: appId,\r\n        code: code,\r\n        status: CommonStatusEnum.ENABLE,\r\n        remark: '',\r\n        feeRate: null,\r\n        config: {\r\n          appId: '',\r\n          serverUrl: null,\r\n          signType: 'RSA2',\r\n          mode: null,\r\n          privateKey: '',\r\n          alipayPublicKey: '',\r\n          appCertContent: '',\r\n          alipayPublicCertContent: '',\r\n          rootCertContent: ''\r\n        }\r\n      }\r\n      this.resetForm('form')\r\n    },\r\n    fileBeforeUpload(file) {\r\n      let format = '.' + file.name.split(\".\")[1];\r\n      if (format !== this.fileAccept) {\r\n        this.$message.error('请上传指定格式\"' + this.fileAccept + '\"文件');\r\n        return false;\r\n      }\r\n      let isRightSize = file.size / 1024 / 1024 < 2\r\n      if (!isRightSize) {\r\n        this.$message.error('文件大小超过 2MB')\r\n      }\r\n      return isRightSize\r\n    },\r\n    appCertUpload(event) {\r\n      const readFile = new FileReader()\r\n      readFile.onload = (e) => {\r\n        this.formData.config.appCertContent = e.target.result\r\n      }\r\n      readFile.readAsText(event.file);\r\n    },\r\n    alipayPublicCertUpload(event) {\r\n      const readFile = new FileReader()\r\n      readFile.onload = (e) => {\r\n        this.formData.config.alipayPublicCertContent = e.target.result\r\n      }\r\n      readFile.readAsText(event.file);\r\n    },\r\n    rootCertUpload(event) {\r\n      const readFile = new FileReader()\r\n      readFile.onload = (e) => {\r\n        this.formData.config.rootCertContent = e.target.result\r\n      }\r\n      readFile.readAsText(event.file);\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"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"}]}