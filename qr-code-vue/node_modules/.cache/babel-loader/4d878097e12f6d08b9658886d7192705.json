{"remainingRequest":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\task\\task-components\\ScriptTask.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\src\\components\\bpmnProcessDesigner\\package\\penal\\task\\task-components\\ScriptTask.vue","mtime":1704630437729},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\babel.config.js","mtime":1704630437199},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\89425\\IdeaProjects\\qr-code-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IHsKICBuYW1lOiAiU2NyaXB0VGFzayIsCiAgcHJvcHM6IHsKICAgIGlkOiBTdHJpbmcsCiAgICB0eXBlOiBTdHJpbmcKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZWZhdWx0VGFza0Zvcm06IHsKICAgICAgICBzY3JpcHRGb3JtYXQ6ICIiLAogICAgICAgIHNjcmlwdDogIiIsCiAgICAgICAgcmVzb3VyY2U6ICIiLAogICAgICAgIHJlc3VsdFZhcmlhYmxlOiAiIgogICAgICB9LAogICAgICBzY3JpcHRUYXNrRm9ybToge30KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgaWQ6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgdGhpcy5icG1uRWxlbWVudCA9IHdpbmRvdy5icG1uSW5zdGFuY2VzLmJwbW5FbGVtZW50OwogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5yZXNldFRhc2tGb3JtKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2V0VGFza0Zvcm06IGZ1bmN0aW9uIHJlc2V0VGFza0Zvcm0oKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmRlZmF1bHRUYXNrRm9ybSkgewogICAgICAgIHZhciBfdGhpcyRicG1uRWxlbWVudDsKICAgICAgICB2YXIgdmFsdWUgPSAoKF90aGlzJGJwbW5FbGVtZW50ID0gdGhpcy5icG1uRWxlbWVudCkgPT09IG51bGwgfHwgX3RoaXMkYnBtbkVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGJwbW5FbGVtZW50LmJ1c2luZXNzT2JqZWN0W2tleV0pIHx8IHRoaXMuZGVmYXVsdFRhc2tGb3JtW2tleV07CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuc2NyaXB0VGFza0Zvcm0sIGtleSwgdmFsdWUpOwogICAgICB9CiAgICAgIHRoaXMuJHNldCh0aGlzLnNjcmlwdFRhc2tGb3JtLCAic2NyaXB0VHlwZSIsIHRoaXMuc2NyaXB0VGFza0Zvcm0uc2NyaXB0ID8gImlubGluZSIgOiAiZXh0ZXJuYWwiKTsKICAgIH0sCiAgICB1cGRhdGVFbGVtZW50VGFzazogZnVuY3Rpb24gdXBkYXRlRWxlbWVudFRhc2soKSB7CiAgICAgIHZhciB0YXNrQXR0ciA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIHRhc2tBdHRyLnNjcmlwdEZvcm1hdCA9IHRoaXMuc2NyaXB0VGFza0Zvcm0uc2NyaXB0Rm9ybWF0IHx8IG51bGw7CiAgICAgIHRhc2tBdHRyLnJlc3VsdFZhcmlhYmxlID0gdGhpcy5zY3JpcHRUYXNrRm9ybS5yZXN1bHRWYXJpYWJsZSB8fCBudWxsOwogICAgICBpZiAodGhpcy5zY3JpcHRUYXNrRm9ybS5zY3JpcHRUeXBlID09PSAiaW5saW5lIikgewogICAgICAgIHRhc2tBdHRyLnNjcmlwdCA9IHRoaXMuc2NyaXB0VGFza0Zvcm0uc2NyaXB0IHx8IG51bGw7CiAgICAgICAgdGFza0F0dHIucmVzb3VyY2UgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHRhc2tBdHRyLnJlc291cmNlID0gdGhpcy5zY3JpcHRUYXNrRm9ybS5yZXNvdXJjZSB8fCBudWxsOwogICAgICAgIHRhc2tBdHRyLnNjcmlwdCA9IG51bGw7CiAgICAgIH0KICAgICAgd2luZG93LmJwbW5JbnN0YW5jZXMubW9kZWxpbmcudXBkYXRlUHJvcGVydGllcyh0aGlzLmJwbW5FbGVtZW50LCB0YXNrQXR0cik7CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5icG1uRWxlbWVudCA9IG51bGw7CiAgfQp9Ow=="},{"version":3,"names":["name","props","id","String","type","data","defaultTaskForm","scriptFormat","script","resource","resultVariable","scriptTaskForm","watch","immediate","handler","_this","bpmnElement","window","bpmnInstances","$nextTick","resetTaskForm","methods","key","_this$bpmnElement","value","businessObject","$set","updateElementTask","taskAttr","Object","create","scriptType","modeling","updateProperties","beforeDestroy"],"sources":["src/components/bpmnProcessDesigner/package/penal/task/task-components/ScriptTask.vue"],"sourcesContent":["<template>\r\n  <div style=\"margin-top: 16px\">\r\n    <el-form-item label=\"脚本格式\">\r\n      <el-input v-model=\"scriptTaskForm.scriptFormat\" clearable @input=\"updateElementTask()\" @change=\"updateElementTask()\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"脚本类型\">\r\n      <el-select v-model=\"scriptTaskForm.scriptType\">\r\n        <el-option label=\"内联脚本\" value=\"inline\" />\r\n        <el-option label=\"外部资源\" value=\"external\" />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"脚本\" v-show=\"scriptTaskForm.scriptType === 'inline'\">\r\n      <el-input\r\n        v-model=\"scriptTaskForm.script\"\r\n        type=\"textarea\"\r\n        resize=\"vertical\"\r\n        :autosize=\"{ minRows: 2, maxRows: 4 }\"\r\n        clearable\r\n        @input=\"updateElementTask()\"\r\n        @change=\"updateElementTask()\"\r\n      />\r\n    </el-form-item>\r\n    <el-form-item label=\"资源地址\" v-show=\"scriptTaskForm.scriptType === 'external'\">\r\n      <el-input v-model=\"scriptTaskForm.resource\" clearable @input=\"updateElementTask()\" @change=\"updateElementTask()\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"结果变量\">\r\n      <el-input v-model=\"scriptTaskForm.resultVariable\" clearable @input=\"updateElementTask()\" @change=\"updateElementTask()\" />\r\n    </el-form-item>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ScriptTask\",\r\n  props: {\r\n    id: String,\r\n    type: String\r\n  },\r\n  data() {\r\n    return {\r\n      defaultTaskForm: {\r\n        scriptFormat: \"\",\r\n        script: \"\",\r\n        resource: \"\",\r\n        resultVariable: \"\"\r\n      },\r\n      scriptTaskForm: {}\r\n    };\r\n  },\r\n  watch: {\r\n    id: {\r\n      immediate: true,\r\n      handler() {\r\n        this.bpmnElement = window.bpmnInstances.bpmnElement;\r\n        this.$nextTick(() => this.resetTaskForm());\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    resetTaskForm() {\r\n      for (let key in this.defaultTaskForm) {\r\n        let value = this.bpmnElement?.businessObject[key] || this.defaultTaskForm[key];\r\n        this.$set(this.scriptTaskForm, key, value);\r\n      }\r\n      this.$set(this.scriptTaskForm, \"scriptType\", this.scriptTaskForm.script ? \"inline\" : \"external\");\r\n    },\r\n    updateElementTask() {\r\n      let taskAttr = Object.create(null);\r\n      taskAttr.scriptFormat = this.scriptTaskForm.scriptFormat || null;\r\n      taskAttr.resultVariable = this.scriptTaskForm.resultVariable || null;\r\n      if (this.scriptTaskForm.scriptType === \"inline\") {\r\n        taskAttr.script = this.scriptTaskForm.script || null;\r\n        taskAttr.resource = null;\r\n      } else {\r\n        taskAttr.resource = this.scriptTaskForm.resource || null;\r\n        taskAttr.script = null;\r\n      }\r\n      window.bpmnInstances.modeling.updateProperties(this.bpmnElement, taskAttr);\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.bpmnElement = null;\r\n  }\r\n};\r\n</script>\r\n"],"mappings":";;;;;;iCAgCA;EACAA,IAAA;EACAC,KAAA;IACAC,EAAA,EAAAC,MAAA;IACAC,IAAA,EAAAD;EACA;EACAE,IAAA,WAAAA,KAAA;IACA;MACAC,eAAA;QACAC,YAAA;QACAC,MAAA;QACAC,QAAA;QACAC,cAAA;MACA;MACAC,cAAA;IACA;EACA;EACAC,KAAA;IACAV,EAAA;MACAW,SAAA;MACAC,OAAA,WAAAA,QAAA;QAAA,IAAAC,KAAA;QACA,KAAAC,WAAA,GAAAC,MAAA,CAAAC,aAAA,CAAAF,WAAA;QACA,KAAAG,SAAA;UAAA,OAAAJ,KAAA,CAAAK,aAAA;QAAA;MACA;IACA;EACA;EACAC,OAAA;IACAD,aAAA,WAAAA,cAAA;MACA,SAAAE,GAAA,SAAAhB,eAAA;QAAA,IAAAiB,iBAAA;QACA,IAAAC,KAAA,KAAAD,iBAAA,QAAAP,WAAA,cAAAO,iBAAA,uBAAAA,iBAAA,CAAAE,cAAA,CAAAH,GAAA,WAAAhB,eAAA,CAAAgB,GAAA;QACA,KAAAI,IAAA,MAAAf,cAAA,EAAAW,GAAA,EAAAE,KAAA;MACA;MACA,KAAAE,IAAA,MAAAf,cAAA,qBAAAA,cAAA,CAAAH,MAAA;IACA;IACAmB,iBAAA,WAAAA,kBAAA;MACA,IAAAC,QAAA,GAAAC,MAAA,CAAAC,MAAA;MACAF,QAAA,CAAArB,YAAA,QAAAI,cAAA,CAAAJ,YAAA;MACAqB,QAAA,CAAAlB,cAAA,QAAAC,cAAA,CAAAD,cAAA;MACA,SAAAC,cAAA,CAAAoB,UAAA;QACAH,QAAA,CAAApB,MAAA,QAAAG,cAAA,CAAAH,MAAA;QACAoB,QAAA,CAAAnB,QAAA;MACA;QACAmB,QAAA,CAAAnB,QAAA,QAAAE,cAAA,CAAAF,QAAA;QACAmB,QAAA,CAAApB,MAAA;MACA;MACAS,MAAA,CAAAC,aAAA,CAAAc,QAAA,CAAAC,gBAAA,MAAAjB,WAAA,EAAAY,QAAA;IACA;EACA;EACAM,aAAA,WAAAA,cAAA;IACA,KAAAlB,WAAA;EACA;AACA"}]}